!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Cosmos={})}(this,(function(e){"use strict";var t="http://www.w3.org/1999/xhtml",n={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function r(e){var t=e+="",r=t.indexOf(":");return r>=0&&"xmlns"!==(t=e.slice(0,r))&&(e=e.slice(r+1)),n.hasOwnProperty(t)?{space:n[t],local:e}:e}function i(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===t&&n.documentElement.namespaceURI===t?n.createElement(e):n.createElementNS(r,e)}}function a(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function o(e){var t=r(e);return(t.local?a:i)(t)}function s(){}function l(e){return null==e?s:function(){return this.querySelector(e)}}function f(){return[]}function c(e){return null==e?f:function(){return this.querySelectorAll(e)}}function u(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function d(e){return function(){return this.matches(e)}}function h(e){return function(t){return t.matches(e)}}var p=Array.prototype.find;function b(){return this.firstElementChild}var m=Array.prototype.filter;function g(){return Array.from(this.children)}function v(e){return new Array(e.length)}function _(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function y(e,t,n,r,i,a){for(var o,s=0,l=t.length,f=a.length;s<f;++s)(o=t[s])?(o.__data__=a[s],r[s]=o):n[s]=new _(e,a[s]);for(;s<l;++s)(o=t[s])&&(i[s]=o)}function w(e,t,n,r,i,a,o){var s,l,f,c=new Map,u=t.length,d=a.length,h=new Array(u);for(s=0;s<u;++s)(l=t[s])&&(h[s]=f=o.call(l,l.__data__,s,t)+"",c.has(f)?i[s]=l:c.set(f,l));for(s=0;s<d;++s)f=o.call(e,a[s],s,a)+"",(l=c.get(f))?(r[s]=l,l.__data__=a[s],c.delete(f)):n[s]=new _(e,a[s]);for(s=0;s<u;++s)(l=t[s])&&c.get(h[s])===l&&(i[s]=l)}function x(e){return e.__data__}function A(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function S(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function k(e){return function(){this.removeAttribute(e)}}function z(e){return function(){this.removeAttributeNS(e.space,e.local)}}function F(e,t){return function(){this.setAttribute(e,t)}}function O(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function W(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function M(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function T(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function E(e){return function(){this.style.removeProperty(e)}}function C(e,t,n){return function(){this.style.setProperty(e,t,n)}}function H(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function B(e,t){return e.style.getPropertyValue(t)||T(e).getComputedStyle(e,null).getPropertyValue(t)}function I(e){return function(){delete this[e]}}function P(e,t){return function(){this[e]=t}}function N(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function D(e){return e.trim().split(/^|\s+/)}function V(e){return e.classList||new L(e)}function L(e){this._node=e,this._names=D(e.getAttribute("class")||"")}function R(e,t){for(var n=V(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function q(e,t){for(var n=V(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function G(e){return function(){R(this,e)}}function j(e){return function(){q(this,e)}}function U(e,t){return function(){(t.apply(this,arguments)?R:q)(this,e)}}function Y(){this.textContent=""}function $(e){return function(){this.textContent=e}}function Z(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function X(){this.innerHTML=""}function Q(e){return function(){this.innerHTML=e}}function J(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function K(){this.nextSibling&&this.parentNode.appendChild(this)}function ee(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function te(){return null}function ne(){var e=this.parentNode;e&&e.removeChild(this)}function re(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ie(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ae(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function oe(e,t,n){return function(){var r,i=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=t);this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(r):this.__on=[r]}}function se(e,t,n){var r=T(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function le(e,t){return function(){return se(this,e,t)}}function fe(e,t){return function(){return se(this,e,t.apply(this,arguments))}}_.prototype={constructor:_,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},L.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var ce=[null];function ue(e,t){this._groups=e,this._parents=t}function de(){return new ue([[document.documentElement]],ce)}function he(e){return"string"==typeof e?new ue([[document.querySelector(e)]],[document.documentElement]):new ue([[e]],ce)}ue.prototype=de.prototype={constructor:ue,select:function(e){"function"!=typeof e&&(e=l(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=t[i],f=s.length,c=r[i]=new Array(f),u=0;u<f;++u)(a=s[u])&&(o=e.call(a,a.__data__,u,s))&&("__data__"in a&&(o.__data__=a.__data__),c[u]=o);return new ue(r,this._parents)},selectAll:function(e){e="function"==typeof e?u(e):c(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o,s=t[a],l=s.length,f=0;f<l;++f)(o=s[f])&&(r.push(e.call(o,o.__data__,f,s)),i.push(o));return new ue(r,i)},selectChild:function(e){return this.select(null==e?b:function(e){return function(){return p.call(this.children,e)}}("function"==typeof e?e:h(e)))},selectChildren:function(e){return this.selectAll(null==e?g:function(e){return function(){return m.call(this.children,e)}}("function"==typeof e?e:h(e)))},filter:function(e){"function"!=typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,l=r[i]=[],f=0;f<s;++f)(a=o[f])&&e.call(a,a.__data__,f,o)&&l.push(a);return new ue(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,x);var n,r=t?w:y,i=this._parents,a=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var o=a.length,s=new Array(o),l=new Array(o),f=new Array(o),c=0;c<o;++c){var u=i[c],d=a[c],h=d.length,p=A(e.call(u,u&&u.__data__,c,i)),b=p.length,m=l[c]=new Array(b),g=s[c]=new Array(b);r(u,d,m,g,f[c]=new Array(h),p,t);for(var v,_,S=0,k=0;S<b;++S)if(v=m[S]){for(S>=k&&(k=S+1);!(_=g[k])&&++k<b;);v._next=_||null}}return(s=new ue(s,i))._enter=l,s._exit=f,s},enter:function(){return new ue(this._enter||this._groups.map(v),this._parents)},exit:function(){return new ue(this._exit||this._groups.map(v),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var f,c=n[l],u=r[l],d=c.length,h=s[l]=new Array(d),p=0;p<d;++p)(f=c[p]||u[p])&&(h[p]=f);for(;l<i;++l)s[l]=n[l];return new ue(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=S);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],l=s.length,f=i[a]=new Array(l),c=0;c<l;++c)(o=s[c])&&(f[c]=o);f.sort(t)}return new ue(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=r(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?z:k:"function"==typeof t?n.local?M:W:n.local?O:F)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?E:"function"==typeof t?H:C)(e,t,null==n?"":n)):B(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?I:"function"==typeof t?N:P)(e,t)):this.node()[e]},classed:function(e,t){var n=D(e+"");if(arguments.length<2){for(var r=V(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?U:t?G:j)(n,t))},text:function(e){return arguments.length?this.each(null==e?Y:("function"==typeof e?Z:$)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?X:("function"==typeof e?J:Q)(e)):this.node().innerHTML},raise:function(){return this.each(K)},lower:function(){return this.each(ee)},append:function(e){var t="function"==typeof e?e:o(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:o(e),r=null==t?te:"function"==typeof t?t:l(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(ne)},clone:function(e){return this.select(e?ie:re)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),o=a.length;if(!(arguments.length<2)){for(s=t?oe:ae,r=0;r<o;++r)this.each(s(a[r],t,n));return this}var s=this.node().__on;if(s)for(var l,f=0,c=s.length;f<c;++f)for(r=0,l=s[f];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?fe:le)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)}};var pe=0;function be(){this._="@"+(++pe).toString(36)}function me(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}be.prototype={constructor:be,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var ge={value:()=>{}};function ve(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new _e(r)}function _e(e){this._=e}function ye(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function we(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ge,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}_e.prototype=ve.prototype={constructor:_e,on:function(e,t){var n,r,i=this._,a=(r=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(n=(e=a[o]).type)i[n]=we(i[n],e.name,t);else if(null==t)for(n in i)i[n]=we(i[n],e.name,null);return this}for(;++o<s;)if((n=(e=a[o]).type)&&(n=ye(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new _e(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var xe,Ae,Se=0,ke=0,ze=0,Fe=1e3,Oe=0,We=0,Me=0,Te="object"==typeof performance&&performance.now?performance:Date,Ee="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ce(){return We||(Ee(He),We=Te.now()+Me)}function He(){We=0}function Be(){this._call=this._time=this._next=null}function Ie(e,t,n){var r=new Be;return r.restart(e,t,n),r}function Pe(){We=(Oe=Te.now())+Me,Se=ke=0;try{!function(){Ce(),++Se;for(var e,t=xe;t;)(e=We-t._time)>=0&&t._call.call(null,e),t=t._next;--Se}()}finally{Se=0,function(){var e,t,n=xe,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:xe=t);Ae=e,De(r)}(),We=0}}function Ne(){var e=Te.now(),t=e-Oe;t>Fe&&(Me-=t,Oe=e)}function De(e){Se||(ke&&(ke=clearTimeout(ke)),e-We>24?(e<1/0&&(ke=setTimeout(Pe,e-Te.now()-Me)),ze&&(ze=clearInterval(ze))):(ze||(Oe=Te.now(),ze=setInterval(Ne,Fe)),Se=1,Ee(Pe)))}function Ve(e,t,n){var r=new Be;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}Be.prototype=Ie.prototype={constructor:Be,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Ce():+n)+(null==t?0:+t),this._next||Ae===this||(Ae?Ae._next=this:xe=this,Ae=this),this._call=e,this._time=n,De()},stop:function(){this._call&&(this._call=null,this._time=1/0,De())}};var Le=ve("start","end","cancel","interrupt"),Re=[],qe=0,Ge=1,je=2,Ue=3,Ye=4,$e=5,Ze=6;function Xe(e,t,n,r,i,a){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function a(e){n.state=Ge,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(a){var f,c,u,d;if(n.state!==Ge)return l();for(f in i)if((d=i[f]).name===n.name){if(d.state===Ue)return Ve(o);d.state===Ye?(d.state=Ze,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[f]):+f<t&&(d.state=Ze,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[f])}if(Ve((function(){n.state===Ue&&(n.state=Ye,n.timer.restart(s,n.delay,n.time),s(a))})),n.state=je,n.on.call("start",e,e.__data__,n.index,n.group),n.state===je){for(n.state=Ue,r=new Array(u=n.tween.length),f=0,c=-1;f<u;++f)(d=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=$e,1),a=-1,o=r.length;++a<o;)r[a].call(e,i);n.state===$e&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=Ze,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Ie(a,0,n.time)}(e,n,{name:t,index:r,group:i,on:Le,tween:Re,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:qe})}function Qe(e,t){var n=Ke(e,t);if(n.state>qe)throw new Error("too late; already scheduled");return n}function Je(e,t){var n=Ke(e,t);if(n.state>Ue)throw new Error("too late; already running");return n}function Ke(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function et(e,t){var n,r,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a)(n=a[i]).name===t?(r=n.state>je&&n.state<$e,n.state=Ze,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete e.__transition}}function tt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function nt(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function rt(){}var it=.7,at=1/it,ot="\\s*([+-]?\\d+)\\s*",st="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ft=/^#([0-9a-f]{3,8})$/,ct=new RegExp(`^rgb\\(${ot},${ot},${ot}\\)$`),ut=new RegExp(`^rgb\\(${lt},${lt},${lt}\\)$`),dt=new RegExp(`^rgba\\(${ot},${ot},${ot},${st}\\)$`),ht=new RegExp(`^rgba\\(${lt},${lt},${lt},${st}\\)$`),pt=new RegExp(`^hsl\\(${st},${lt},${lt}\\)$`),bt=new RegExp(`^hsla\\(${st},${lt},${lt},${st}\\)$`),mt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function gt(){return this.rgb().formatHex()}function vt(){return this.rgb().formatRgb()}function _t(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ft.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?yt(t):3===n?new St(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?wt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?wt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ct.exec(e))?new St(t[1],t[2],t[3],1):(t=ut.exec(e))?new St(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=dt.exec(e))?wt(t[1],t[2],t[3],t[4]):(t=ht.exec(e))?wt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=pt.exec(e))?Mt(t[1],t[2]/100,t[3]/100,1):(t=bt.exec(e))?Mt(t[1],t[2]/100,t[3]/100,t[4]):mt.hasOwnProperty(e)?yt(mt[e]):"transparent"===e?new St(NaN,NaN,NaN,0):null}function yt(e){return new St(e>>16&255,e>>8&255,255&e,1)}function wt(e,t,n,r){return r<=0&&(e=t=n=NaN),new St(e,t,n,r)}function xt(e){return e instanceof rt||(e=_t(e)),e?new St((e=e.rgb()).r,e.g,e.b,e.opacity):new St}function At(e,t,n,r){return 1===arguments.length?xt(e):new St(e,t,n,null==r?1:r)}function St(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function kt(){return`#${Wt(this.r)}${Wt(this.g)}${Wt(this.b)}`}function zt(){const e=Ft(this.opacity);return`${1===e?"rgb(":"rgba("}${Ot(this.r)}, ${Ot(this.g)}, ${Ot(this.b)}${1===e?")":`, ${e})`}`}function Ft(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ot(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wt(e){return((e=Ot(e))<16?"0":"")+e.toString(16)}function Mt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Et(e,t,n,r)}function Tt(e){if(e instanceof Et)return new Et(e.h,e.s,e.l,e.opacity);if(e instanceof rt||(e=_t(e)),!e)return new Et;if(e instanceof Et)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Et(o,s,l,e.opacity)}function Et(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Ct(e){return(e=(e||0)%360)<0?e+360:e}function Ht(e){return Math.max(0,Math.min(1,e||0))}function Bt(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}tt(rt,_t,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:gt,formatHex:gt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Tt(this).formatHsl()},formatRgb:vt,toString:vt}),tt(St,At,nt(rt,{brighter(e){return e=null==e?at:Math.pow(at,e),new St(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?it:Math.pow(it,e),new St(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new St(Ot(this.r),Ot(this.g),Ot(this.b),Ft(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kt,formatHex:kt,formatHex8:function(){return`#${Wt(this.r)}${Wt(this.g)}${Wt(this.b)}${Wt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:zt,toString:zt})),tt(Et,(function(e,t,n,r){return 1===arguments.length?Tt(e):new Et(e,t,n,null==r?1:r)}),nt(rt,{brighter(e){return e=null==e?at:Math.pow(at,e),new Et(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?it:Math.pow(it,e),new Et(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new St(Bt(e>=240?e-240:e+120,i,r),Bt(e,i,r),Bt(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Et(Ct(this.h),Ht(this.s),Ht(this.l),Ft(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ft(this.opacity);return`${1===e?"hsl(":"hsla("}${Ct(this.h)}, ${100*Ht(this.s)}%, ${100*Ht(this.l)}%${1===e?")":`, ${e})`}`}}));const It=Math.PI/180,Pt=180/Math.PI,Nt=.96422,Dt=1,Vt=.82521,Lt=4/29,Rt=6/29,qt=3*Rt*Rt,Gt=Rt*Rt*Rt;function jt(e){if(e instanceof Ut)return new Ut(e.l,e.a,e.b,e.opacity);if(e instanceof Qt)return Jt(e);e instanceof St||(e=xt(e));var t,n,r=Xt(e.r),i=Xt(e.g),a=Xt(e.b),o=Yt((.2225045*r+.7168786*i+.0606169*a)/Dt);return r===i&&i===a?t=n=o:(t=Yt((.4360747*r+.3850649*i+.1430804*a)/Nt),n=Yt((.0139322*r+.0971045*i+.7141733*a)/Vt)),new Ut(116*o-16,500*(t-o),200*(o-n),e.opacity)}function Ut(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Yt(e){return e>Gt?Math.pow(e,1/3):e/qt+Lt}function $t(e){return e>Rt?e*e*e:qt*(e-Lt)}function Zt(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Xt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Qt(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Jt(e){if(isNaN(e.h))return new Ut(e.l,0,0,e.opacity);var t=e.h*It;return new Ut(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}tt(Ut,(function(e,t,n,r){return 1===arguments.length?jt(e):new Ut(e,t,n,null==r?1:r)}),nt(rt,{brighter(e){return new Ut(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker(e){return new Ut(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new St(Zt(3.1338561*(t=Nt*$t(t))-1.6168667*(e=Dt*$t(e))-.4906146*(n=Vt*$t(n))),Zt(-.9787684*t+1.9161415*e+.033454*n),Zt(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),tt(Qt,(function(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof Qt)return new Qt(e.h,e.c,e.l,e.opacity);if(e instanceof Ut||(e=jt(e)),0===e.a&&0===e.b)return new Qt(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Pt;return new Qt(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new Qt(e,t,n,null==r?1:r)}),nt(rt,{brighter(e){return new Qt(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker(e){return new Qt(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb(){return Jt(this).rgb()}}));var Kt=-.14861,en=1.78277,tn=-.29227,nn=-.90649,rn=1.97294,an=rn*nn,on=rn*en,sn=en*tn-nn*Kt;function ln(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof fn)return new fn(e.h,e.s,e.l,e.opacity);e instanceof St||(e=xt(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(sn*r+an*t-on*n)/(sn+an-on),a=r-i,o=(rn*(n-i)-tn*a)/nn,s=Math.sqrt(o*o+a*a)/(rn*i*(1-i)),l=s?Math.atan2(o,a)*Pt-120:NaN;return new fn(l<0?l+360:l,s,i,e.opacity)}(e):new fn(e,t,n,null==r?1:r)}function fn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}tt(fn,ln,nt(rt,{brighter(e){return e=null==e?at:Math.pow(at,e),new fn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?it:Math.pow(it,e),new fn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*It,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new St(255*(t+n*(Kt*r+en*i)),255*(t+n*(tn*r+nn*i)),255*(t+n*(rn*r)),this.opacity)}}));var cn=e=>()=>e;function un(e,t){return function(n){return e+n*t}}function dn(e){return 1==(e=+e)?hn:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):cn(isNaN(t)?n:t)}}function hn(e,t){var n=t-e;return n?un(e,n):cn(isNaN(e)?t:e)}var pn=function e(t){var n=dn(t);function r(e,t){var r=n((e=At(e)).r,(t=At(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=hn(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function bn(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function mn(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=An(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function gn(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function vn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _n(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=An(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var yn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wn=new RegExp(yn.source,"g");function xn(e,t){var n,r,i,a=yn.lastIndex=wn.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=yn.exec(e))&&(r=wn.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:vn(n,r)})),a=wn.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function An(e,t){var n,r,i=typeof t;return null==t||"boolean"===i?cn(t):("number"===i?vn:"string"===i?(n=_t(t))?(t=n,pn):xn:t instanceof _t?pn:t instanceof Date?gn:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?mn:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?_n:vn:bn))(e,t)}function Sn(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var kn,zn=180/Math.PI,Fn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function On(e,t,n,r,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*zn,skewX:Math.atan(l)*zn,scaleX:o,scaleY:s}}function Wn(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var s=[],l=[];return a=e(a),o=e(o),function(e,r,i,a,o,s){if(e!==i||r!==a){var l=o.push("translate(",null,t,null,n);s.push({i:l-4,x:vn(e,i)},{i:l-2,x:vn(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:vn(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(a.rotate,o.rotate,s,l),function(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:vn(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(a.skewX,o.skewX,s,l),function(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:vn(e,n)},{i:s-2,x:vn(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var Mn=Wn((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Fn:On(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Tn=Wn((function(e){return null==e?Fn:(kn||(kn=document.createElementNS("http://www.w3.org/2000/svg","g")),kn.setAttribute("transform",e),(e=kn.transform.baseVal.consolidate())?On((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Fn)}),", ",")",")");function En(e){return((e=Math.exp(e))+1/e)/2}var Cn=function e(t,n,r){function i(e,i){var a,o,s=e[0],l=e[1],f=e[2],c=i[0],u=i[1],d=i[2],h=c-s,p=u-l,b=h*h+p*p;if(b<1e-12)o=Math.log(d/f)/t,a=function(e){return[s+e*h,l+e*p,f*Math.exp(t*e*o)]};else{var m=Math.sqrt(b),g=(d*d-f*f+r*b)/(2*f*n*m),v=(d*d-f*f-r*b)/(2*d*n*m),_=Math.log(Math.sqrt(g*g+1)-g),y=Math.log(Math.sqrt(v*v+1)-v);o=(y-_)/t,a=function(e){var r,i=e*o,a=En(_),c=f/(n*m)*(a*(r=t*i+_,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(_));return[s+c*h,l+c*p,f*a/En(t*i+_)]}}return a.duration=1e3*o*t/Math.SQRT2,a}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);function Hn(e){return function t(n){function r(t,r){var i=e((t=ln(t)).h,(r=ln(r)).h),a=hn(t.s,r.s),o=hn(t.l,r.l),s=hn(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=a(e),t.l=o(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,r.gamma=t,r}(1)}function Bn(e,t){var n,r;return function(){var i=Je(this,e),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}i.tween=r}}function In(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=Je(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},l=0,f=i.length;l<f;++l)if(i[l].name===t){i[l]=s;break}l===f&&i.push(s)}a.tween=i}}function Pn(e,t,n){var r=e._id;return e.each((function(){var e=Je(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Ke(e,r).value[t]}}function Nn(e,t){var n;return("number"==typeof t?vn:t instanceof _t?pn:(n=_t(t))?(t=n,pn):xn)(e,t)}function Dn(e){return function(){this.removeAttribute(e)}}function Vn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ln(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttribute(e);return o===a?null:o===r?i:i=t(r=o,n)}}function Rn(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===r?i:i=t(r=o,n)}}function qn(e,t,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttribute(e))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=t(r=o,l));this.removeAttribute(e)}}function Gn(e,t,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=t(r=o,l));this.removeAttributeNS(e.space,e.local)}}function jn(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Un(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Yn(e,t){return function(){Qe(this,e).delay=+t.apply(this,arguments)}}function $n(e,t){return t=+t,function(){Qe(this,e).delay=t}}function Zn(e,t){return function(){Je(this,e).duration=+t.apply(this,arguments)}}function Xn(e,t){return t=+t,function(){Je(this,e).duration=t}}Hn((function(e,t){var n=t-e;return n?un(e,n>180||n<-180?n-360*Math.round(n/360):n):cn(isNaN(e)?t:e)})),Hn(hn);var Qn=de.prototype.constructor;function Jn(e){return function(){this.style.removeProperty(e)}}var Kn=0;function er(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function tr(){return++Kn}var nr=de.prototype;function rr(e){return e*e}function ir(e){return e*(2-e)}function ar(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}er.prototype={constructor:er,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=l(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,f,c=r[o],u=c.length,d=a[o]=new Array(u),h=0;h<u;++h)(s=c[h])&&(f=e.call(s,s.__data__,h,c))&&("__data__"in s&&(f.__data__=s.__data__),d[h]=f,Xe(d[h],t,n,h,d,Ke(s,n)));return new er(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=c(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l,f=r[s],u=f.length,d=0;d<u;++d)if(l=f[d]){for(var h,p=e.call(l,l.__data__,d,f),b=Ke(l,n),m=0,g=p.length;m<g;++m)(h=p[m])&&Xe(h,t,n,m,p,b);a.push(p),o.push(l)}return new er(a,o,t,n)},selectChild:nr.selectChild,selectChildren:nr.selectChildren,filter:function(e){"function"!=typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,l=r[i]=[],f=0;f<s;++f)(a=o[f])&&e.call(a,a.__data__,f,o)&&l.push(a);return new er(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,f=t[s],c=n[s],u=f.length,d=o[s]=new Array(u),h=0;h<u;++h)(l=f[h]||c[h])&&(d[h]=l);for(;s<r;++s)o[s]=t[s];return new er(o,this._parents,this._name,this._id)},selection:function(){return new Qn(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=tr(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,f=0;f<l;++f)if(o=s[f]){var c=Ke(o,t);Xe(o,e,n,f,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new er(r,this._parents,e,n)},call:nr.call,nodes:nr.nodes,node:nr.node,size:nr.size,empty:nr.empty,each:nr.each,on:function(e,t){var n=this._id;return arguments.length<2?Ke(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Qe:Je;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}(n,e,t))},attr:function(e,t){var n=r(e),i="transform"===n?Tn:Nn;return this.attrTween(e,"function"==typeof t?(n.local?Gn:qn)(n,i,Pn(this,"attr."+e,t)):null==t?(n.local?Vn:Dn)(n):(n.local?Rn:Ln)(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=r(e);return this.tween(n,(i.local?jn:Un)(i,t))},style:function(e,t,n){var r="transform"==(e+="")?Mn:Nn;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var a=B(this,e),o=(this.style.removeProperty(e),B(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}(e,r)).on("end.style."+e,Jn(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,a;return function(){var o=B(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=B(this,e)),o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s))}}(e,r,Pn(this,"style."+e,t))).each(function(e,t){var n,r,i,a,o="style."+t,s="end."+o;return function(){var l=Je(this,e),f=l.on,c=null==l.value[o]?a||(a=Jn(t)):void 0;f===n&&i===c||(r=(n=f).copy()).on(s,i=c),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,a=n+"";return function(){var o=B(this,e);return o===a?null:o===r?i:i=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,a,n)),r}return a._value=t,a}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Pn(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=Ke(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===e)return r.value;return null}return this.each((null==t?Bn:In)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Yn:$n)(t,e)):Ke(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Zn:Xn)(t,e)):Ke(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){Je(this,e).ease=t}}(t,e)):Ke(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;Je(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var s={value:o},l={value:function(){0==--i&&a()}};n.each((function(){var n=Je(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===i&&a()}))},[Symbol.iterator]:nr[Symbol.iterator]};function or(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}!function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3);var sr=1.70158;!function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(sr),function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(sr),function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(sr);var lr=2*Math.PI;!function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=lr);function i(e){return t*or(- --e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*lr)},i.period=function(n){return e(t,n)},i}(1,.3),function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=lr);function i(e){return 1-t*or(e=+e)*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*lr)},i.period=function(n){return e(t,n)},i}(1,.3),function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=lr);function i(e){return((e=2*e-1)<0?t*or(-e)*Math.sin((r-e)/n):2-t*or(e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*lr)},i.period=function(n){return e(t,n)},i}(1,.3);var fr={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function cr(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}de.prototype.interrupt=function(e){return this.each((function(){et(this,e)}))},de.prototype.transition=function(e){var t,n;e instanceof er?(t=e._id,e=e._name):(t=tr(),(n=fr).time=Ce(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,f=0;f<l;++f)(o=s[f])&&Xe(o,e,t,f,s,n||cr(o,t));return new er(r,this._parents,e,t)};var ur="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},dr={exports:{}};!function(e,t){e.exports=function(){var e=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},t=0,n=0,r=5,i=6;function a(e,n){this.id=t++,this.type=e,this.data=n}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function s(e){if(0===e.length)return[];var t=e.charAt(0),n=e.charAt(e.length-1);if(e.length>1&&t===n&&('"'===t||"'"===t))return['"'+o(e.substr(1,e.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(r)return s(e.substr(0,r.index)).concat(s(r[1])).concat(s(e.substr(r.index+r[0].length)));var i=e.split(".");if(1===i.length)return['"'+o(e)+'"'];for(var a=[],l=0;l<i.length;++l)a=a.concat(s(i[l]));return a}function l(e){return"["+s(e).join("][")+"]"}function f(e,t){return new a(e,l(t+""))}function c(e){return"function"==typeof e&&!e._reglType||e instanceof a}function u(e,t){return"function"==typeof e?new a(n,e):"number"==typeof e||"boolean"==typeof e?new a(r,e):Array.isArray(e)?new a(i,e.map((function(e,t){return u(e)}))):e instanceof a?e:void 0}var d={DynamicVariable:a,define:f,isDynamic:c,unbox:u,accessor:l},h={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},p="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function b(){var e={"":0},t=[""];return{id:function(n){var r=e[n];return r||(r=e[n]=t.length,t.push(n),r)},str:function(e){return t[e]}}}function m(t,n,r){var i,a=document.createElement("canvas");function o(){var e=window.innerWidth,n=window.innerHeight;if(t!==document.body){var i=a.getBoundingClientRect();e=i.right-i.left,n=i.bottom-i.top}a.width=r*e,a.height=r*n}function s(){i?i.disconnect():window.removeEventListener("resize",o),t.removeChild(a)}return e(a.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),t.appendChild(a),t===document.body&&(a.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(o)}))).observe(t):window.addEventListener("resize",o,!1),o(),{canvas:a,onDestroy:s}}function g(e,t){function n(n){try{return e.getContext(n,t)}catch(e){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function v(e){return"string"==typeof e.nodeName&&"function"==typeof e.appendChild&&"function"==typeof e.getBoundingClientRect}function _(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}function y(e){return"string"==typeof e?e.split():e}function w(e){return"string"==typeof e?document.querySelector(e):e}function x(e){var t,n,r,i,a=e||{},o={},s=[],l=[],f="undefined"==typeof window?1:window.devicePixelRatio,c=!1,u={},d=function(e){},h=function(){};if("string"==typeof a?t=document.querySelector(a):"object"==typeof a&&(v(a)?t=a:_(a)?r=(i=a).canvas:("gl"in a?i=a.gl:"canvas"in a?r=w(a.canvas):"container"in a&&(n=w(a.container)),"attributes"in a&&(o=a.attributes),"extensions"in a&&(s=y(a.extensions)),"optionalExtensions"in a&&(l=y(a.optionalExtensions)),"onDone"in a&&(d=a.onDone),"profile"in a&&(c=!!a.profile),"pixelRatio"in a&&(f=+a.pixelRatio),"cachedCode"in a&&(u=a.cachedCode))),t&&("canvas"===t.nodeName.toLowerCase()?r=t:n=t),!i){if(!r){var p=m(n||document.body,d,f);if(!p)return null;r=p.canvas,h=p.onDestroy}void 0===o.premultipliedAlpha&&(o.premultipliedAlpha=!0),i=g(r,o)}return i?{gl:i,canvas:r,container:n,extensions:s,optionalExtensions:l,pixelRatio:f,profile:c,cachedCode:u,onDone:d,onDestroy:h}:(h(),d("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function A(e,t){var n={};function r(t){var r,i=t.toLowerCase();try{r=n[i]=e.getExtension(i)}catch(e){}return!!r}for(var i=0;i<t.extensions.length;++i){var a=t.extensions[i];if(!r(a))return t.onDestroy(),t.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(e){if(n[e]&&!r(e))throw new Error("(regl): error restoring extension "+e)}))}}}function S(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}var k=5120,z=5121,F=5122,O=5123,W=5124,M=5125,T=5126;function E(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}function C(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1}function H(){var e=S(8,(function(){return[]}));function t(t){var n=E(t),r=e[C(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(t){e[C(t.byteLength)>>2].push(t)}function r(e,n){var r=null;switch(e){case k:r=new Int8Array(t(n),0,n);break;case z:r=new Uint8Array(t(n),0,n);break;case F:r=new Int16Array(t(2*n),0,n);break;case O:r=new Uint16Array(t(2*n),0,n);break;case W:r=new Int32Array(t(4*n),0,n);break;case M:r=new Uint32Array(t(4*n),0,n);break;case T:r=new Float32Array(t(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r}function i(e){n(e.buffer)}return{alloc:t,free:n,allocType:r,freeType:i}}var B=H();B.zero=H();var I=3408,P=3410,N=3411,D=3412,V=3413,L=3414,R=3415,q=33901,G=33902,j=3379,U=3386,Y=34921,$=36347,Z=36348,X=35661,Q=35660,J=34930,K=36349,ee=34076,te=34024,ne=7936,re=7937,ie=7938,ae=35724,oe=34047,se=36063,le=34852,fe=3553,ce=34067,ue=34069,de=33984,he=6408,pe=5126,be=5121,me=36160,ge=36053,ve=36064,_e=16384,ye=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(oe));var r=1,i=1;t.webgl_draw_buffers&&(r=e.getParameter(le),i=e.getParameter(se));var a=!!t.oes_texture_float;if(a){var o=e.createTexture();e.bindTexture(fe,o),e.texImage2D(fe,0,he,1,1,0,he,pe,null);var s=e.createFramebuffer();if(e.bindFramebuffer(me,s),e.framebufferTexture2D(me,ve,fe,o,0),e.bindTexture(fe,null),e.checkFramebufferStatus(me)!==ge)a=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(_e);var l=B.allocType(pe,4);e.readPixels(0,0,1,1,he,pe,l),e.getError()?a=!1:(e.deleteFramebuffer(s),e.deleteTexture(o),a=1===l[0]),B.freeType(l)}}var f=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var c=e.createTexture(),u=B.allocType(be,36);e.activeTexture(de),e.bindTexture(ce,c),e.texImage2D(ue,0,he,3,3,0,he,be,u),B.freeType(u),e.bindTexture(ce,null),e.deleteTexture(c),f=!e.getError()}return{colorBits:[e.getParameter(P),e.getParameter(N),e.getParameter(D),e.getParameter(V)],depthBits:e.getParameter(L),stencilBits:e.getParameter(R),subpixelBits:e.getParameter(I),extensions:Object.keys(t).filter((function(e){return!!t[e]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:e.getParameter(q),lineWidthDims:e.getParameter(G),maxViewportDims:e.getParameter(U),maxCombinedTextureUnits:e.getParameter(X),maxCubeMapSize:e.getParameter(ee),maxRenderbufferSize:e.getParameter(te),maxTextureUnits:e.getParameter(J),maxTextureSize:e.getParameter(j),maxAttributes:e.getParameter(Y),maxVertexUniforms:e.getParameter($),maxVertexTextureUnits:e.getParameter(Q),maxVaryingVectors:e.getParameter(Z),maxFragmentUniforms:e.getParameter(K),glsl:e.getParameter(ae),renderer:e.getParameter(re),vendor:e.getParameter(ne),version:e.getParameter(ie),readFloat:a,npotTextureCube:f}},we=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray};function xe(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||we(e.data))}var Ae=function(e){return Object.keys(e).map((function(t){return e[t]}))},Se={shape:Me,flatten:We};function ke(e,t,n){for(var r=0;r<t;++r)n[r]=e[r]}function ze(e,t,n,r){for(var i=0,a=0;a<t;++a)for(var o=e[a],s=0;s<n;++s)r[i++]=o[s]}function Fe(e,t,n,r,i,a){for(var o=a,s=0;s<t;++s)for(var l=e[s],f=0;f<n;++f)for(var c=l[f],u=0;u<r;++u)i[o++]=c[u]}function Oe(e,t,n,r,i){for(var a=1,o=n+1;o<t.length;++o)a*=t[o];var s=t[n];if(t.length-n==4){var l=t[n+1],f=t[n+2],c=t[n+3];for(o=0;o<s;++o)Fe(e[o],l,f,c,r,i),i+=a}else for(o=0;o<s;++o)Oe(e[o],t,n+1,r,i),i+=a}function We(e,t,n,r){var i=1;if(t.length)for(var a=0;a<t.length;++a)i*=t[a];else i=0;var o=r||B.allocType(n,i);switch(t.length){case 0:break;case 1:ke(e,t[0],o);break;case 2:ze(e,t[0],t[1],o);break;case 3:Fe(e,t[0],t[1],t[2],o,0);break;default:Oe(e,t,0,o,0)}return o}function Me(e){for(var t=[],n=e;n.length;n=n[0])t.push(n.length);return t}var Te={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ee={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ce={dynamic:35048,stream:35040,static:35044},He=Se.flatten,Be=Se.shape,Ie=35044,Pe=35040,Ne=5121,De=5126,Ve=[];function Le(e){return 0|Te[Object.prototype.toString.call(e)]}function Re(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function qe(e,t,n,r,i,a,o){for(var s=0,l=0;l<n;++l)for(var f=0;f<r;++f)e[s++]=t[i*l+a*f+o]}function Ge(e,t,n,r){var i=0,a={};function o(t){this.id=i++,this.buffer=e.createBuffer(),this.type=t,this.usage=Ie,this.byteLength=0,this.dimension=1,this.dtype=Ne,this.persistentData=null,n.profile&&(this.stats={size:0})}o.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},o.prototype.destroy=function(){d(this)};var s=[];function l(e,t){var n=s.pop();return n||(n=new o(e)),n.bind(),u(n,t,Pe,0,1,!1),n}function f(e){s.push(e)}function c(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function u(e,t,n,r,i,a){var o,s;if(e.usage=n,Array.isArray(t)){if(e.dtype=r||De,t.length>0)if(Array.isArray(t[0])){o=Be(t);for(var l=1,f=1;f<o.length;++f)l*=o[f];e.dimension=l,c(e,s=He(t,o,e.dtype),n),a?e.persistentData=s:B.freeType(s)}else if("number"==typeof t[0]){e.dimension=i;var u=B.allocType(e.dtype,t.length);Re(u,t),c(e,u,n),a?e.persistentData=u:B.freeType(u)}else we(t[0])&&(e.dimension=t[0].length,e.dtype=r||Le(t[0])||De,c(e,s=He(t,[t.length,t[0].length],e.dtype),n),a?e.persistentData=s:B.freeType(s))}else if(we(t))e.dtype=r||Le(t),e.dimension=i,c(e,t,n),a&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(xe(t)){o=t.shape;var d=t.stride,h=t.offset,p=0,b=0,m=0,g=0;1===o.length?(p=o[0],b=1,m=d[0],g=0):2===o.length&&(p=o[0],b=o[1],m=d[0],g=d[1]),e.dtype=r||Le(t.data)||De,e.dimension=b;var v=B.allocType(e.dtype,p*b);qe(v,t.data,p,b,m,g,h),c(e,v,n),a?e.persistentData=v:B.freeType(v)}else t instanceof ArrayBuffer&&(e.dtype=Ne,e.dimension=i,c(e,t,n),a&&(e.persistentData=new Uint8Array(new Uint8Array(t))))}function d(n){t.bufferCount--,r(n);var i=n.buffer;e.deleteBuffer(i),n.buffer=null,delete a[n.id]}function h(r,i,s,l){t.bufferCount++;var f=new o(i);function c(t){var r=Ie,i=null,a=0,o=0,s=1;return Array.isArray(t)||we(t)||xe(t)||t instanceof ArrayBuffer?i=t:"number"==typeof t?a=0|t:t&&("data"in t&&(i=t.data),"usage"in t&&(r=Ce[t.usage]),"type"in t&&(o=Ee[t.type]),"dimension"in t&&(s=0|t.dimension),"length"in t&&(a=0|t.length)),f.bind(),i?u(f,i,r,o,s,l):(a&&e.bufferData(f.type,a,r),f.dtype=o||Ne,f.usage=r,f.dimension=s,f.byteLength=a),n.profile&&(f.stats.size=f.byteLength*Ve[f.dtype]),c}function h(t,n){e.bufferSubData(f.type,n,t)}function p(e,t){var n,r=0|(t||0);if(f.bind(),we(e)||e instanceof ArrayBuffer)h(e,r);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var i=B.allocType(f.dtype,e.length);Re(i,e),h(i,r),B.freeType(i)}else if(Array.isArray(e[0])||we(e[0])){n=Be(e);var a=He(e,n,f.dtype);h(a,r),B.freeType(a)}}else if(xe(e)){n=e.shape;var o=e.stride,s=0,l=0,u=0,d=0;1===n.length?(s=n[0],l=1,u=o[0],d=0):2===n.length&&(s=n[0],l=n[1],u=o[0],d=o[1]);var p=Array.isArray(e.data)?f.dtype:Le(e.data),b=B.allocType(p,s*l);qe(b,e.data,s,l,u,d,e.offset),h(b,r),B.freeType(b)}return c}return a[f.id]=f,s||c(r),c._reglType="buffer",c._buffer=f,c.subdata=p,n.profile&&(c.stats=f.stats),c.destroy=function(){d(f)},c}function p(){Ae(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))}return n.profile&&(t.getTotalBufferSize=function(){var e=0;return Object.keys(a).forEach((function(t){e+=a[t].stats.size})),e}),{create:h,createStream:l,destroyStream:f,clear:function(){Ae(a).forEach(d),s.forEach(d)},getBuffer:function(e){return e&&e._buffer instanceof o?e._buffer:null},restore:p,_initBuffer:u}}Ve[5120]=1,Ve[5122]=2,Ve[5124]=4,Ve[5121]=1,Ve[5123]=2,Ve[5125]=4,Ve[5126]=4;var je={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ue=0,Ye=1,$e=4,Ze=5120,Xe=5121,Qe=5122,Je=5123,Ke=5124,et=5125,tt=34963,nt=35040,rt=35044;function it(e,t,n,r){var i={},a=0,o={uint8:Xe,uint16:Je};function s(e){this.id=a++,i[this.id]=this,this.buffer=e,this.primType=$e,this.vertCount=0,this.type=0}t.oes_element_index_uint&&(o.uint32=et),s.prototype.bind=function(){this.buffer.bind()};var l=[];function f(e){var t=l.pop();return t||(t=new s(n.create(null,tt,!0,!1)._buffer)),u(t,e,nt,-1,-1,0,0),t}function c(e){l.push(e)}function u(r,i,a,o,s,l,f){var c;if(r.buffer.bind(),i){var u=f;f||we(i)&&(!xe(i)||we(i.data))||(u=t.oes_element_index_uint?et:Je),n._initBuffer(r.buffer,i,a,u,3)}else e.bufferData(tt,l,a),r.buffer.dtype=c||Xe,r.buffer.usage=a,r.buffer.dimension=3,r.buffer.byteLength=l;if(c=f,!f){switch(r.buffer.dtype){case Xe:case Ze:c=Xe;break;case Je:case Qe:c=Je;break;case et:case Ke:c=et}r.buffer.dtype=c}r.type=c;var d=s;d<0&&(d=r.buffer.byteLength,c===Je?d>>=1:c===et&&(d>>=2)),r.vertCount=d;var h=o;if(o<0){h=$e;var p=r.buffer.dimension;1===p&&(h=Ue),2===p&&(h=Ye),3===p&&(h=$e)}r.primType=h}function d(e){r.elementsCount--,delete i[e.id],e.buffer.destroy(),e.buffer=null}function h(e,t){var i=n.create(null,tt,!0),a=new s(i._buffer);function l(e){if(e)if("number"==typeof e)i(e),a.primType=$e,a.vertCount=0|e,a.type=Xe;else{var t=null,n=rt,r=-1,s=-1,f=0,c=0;Array.isArray(e)||we(e)||xe(e)?t=e:("data"in e&&(t=e.data),"usage"in e&&(n=Ce[e.usage]),"primitive"in e&&(r=je[e.primitive]),"count"in e&&(s=0|e.count),"type"in e&&(c=o[e.type]),"length"in e?f=0|e.length:(f=s,c===Je||c===Qe?f*=2:c!==et&&c!==Ke||(f*=4))),u(a,t,n,r,s,f,c)}else i(),a.primType=$e,a.vertCount=0,a.type=Xe;return l}return r.elementsCount++,l(e),l._reglType="elements",l._elements=a,l.subdata=function(e,t){return i.subdata(e,t),l},l.destroy=function(){d(a)},l}return{create:h,createStream:f,destroyStream:c,getElements:function(e){return"function"==typeof e&&e._elements instanceof s?e._elements:null},clear:function(){Ae(i).forEach(d)}}}var at=new Float32Array(1),ot=new Uint32Array(at.buffer),st=5123;function lt(e){for(var t=B.allocType(st,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(e[n]===1/0)t[n]=31744;else if(e[n]===-1/0)t[n]=64512;else{at[0]=e[n];var r=ot[0],i=r>>>31<<15,a=(r<<1>>>24)-127,o=r>>13&1023;if(a<-24)t[n]=i;else if(a<-14){var s=-14-a;t[n]=i+(o+1024>>s)}else t[n]=a>15?i+31744:i+(a+15<<10)+o}return t}function ft(e){return Array.isArray(e)||we(e)}var ct=34467,ut=3553,dt=34067,ht=34069,pt=6408,bt=6406,mt=6407,gt=6409,vt=6410,_t=32854,yt=32855,wt=36194,xt=32819,At=32820,St=33635,kt=34042,zt=6402,Ft=34041,Ot=35904,Wt=35906,Mt=36193,Tt=33776,Et=33777,Ct=33778,Ht=33779,Bt=35986,It=35987,Pt=34798,Nt=35840,Dt=35841,Vt=35842,Lt=35843,Rt=36196,qt=5121,Gt=5123,jt=5125,Ut=5126,Yt=10242,$t=10243,Zt=10497,Xt=33071,Qt=33648,Jt=10240,Kt=10241,en=9728,tn=9729,nn=9984,rn=9985,an=9986,on=9987,sn=33170,ln=4352,fn=4353,cn=4354,un=34046,dn=3317,hn=37440,pn=37441,bn=37443,mn=37444,gn=33984,vn=[nn,an,rn,on],_n=[0,gt,vt,mt,pt],yn={};function wn(e){return"[object "+e+"]"}yn[gt]=yn[bt]=yn[zt]=1,yn[Ft]=yn[vt]=2,yn[mt]=yn[Ot]=3,yn[pt]=yn[Wt]=4;var xn=wn("HTMLCanvasElement"),An=wn("OffscreenCanvas"),Sn=wn("CanvasRenderingContext2D"),kn=wn("ImageBitmap"),zn=wn("HTMLImageElement"),Fn=wn("HTMLVideoElement"),On=Object.keys(Te).concat([xn,An,Sn,kn,zn,Fn]),Wn=[];Wn[qt]=1,Wn[Ut]=4,Wn[Mt]=2,Wn[Gt]=2,Wn[jt]=4;var Mn=[];function Tn(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function En(e){return!!Array.isArray(e)&&!(0===e.length||!ft(e[0]))}function Cn(e){return Object.prototype.toString.call(e)}function Hn(e){return Cn(e)===xn}function Bn(e){return Cn(e)===An}function In(e){return Cn(e)===Sn}function Pn(e){return Cn(e)===kn}function Nn(e){return Cn(e)===zn}function Dn(e){return Cn(e)===Fn}function Vn(e){if(!e)return!1;var t=Cn(e);return On.indexOf(t)>=0||Tn(e)||En(e)||xe(e)}function Ln(e){return 0|Te[Object.prototype.toString.call(e)]}function Rn(e,t){var n=t.length;switch(e.type){case qt:case Gt:case jt:case Ut:var r=B.allocType(e.type,n);r.set(t),e.data=r;break;case Mt:e.data=lt(t)}}function qn(e,t){return B.allocType(e.type===Mt?Ut:e.type,t)}function Gn(e,t){e.type===Mt?(e.data=lt(t),B.freeType(t)):e.data=t}function jn(e,t,n,r,i,a){for(var o=e.width,s=e.height,l=e.channels,f=qn(e,o*s*l),c=0,u=0;u<s;++u)for(var d=0;d<o;++d)for(var h=0;h<l;++h)f[c++]=t[n*d+r*u+i*h+a];Gn(e,f)}function Un(e,t,n,r,i,a){var o;if(o=void 0!==Mn[e]?Mn[e]:yn[e]*Wn[t],a&&(o*=6),i){for(var s=0,l=n;l>=1;)s+=o*l*l,l/=2;return s}return o*n*r}function Yn(t,n,r,i,a,o,s){var l={"don't care":ln,"dont care":ln,nice:cn,fast:fn},f={repeat:Zt,clamp:Xt,mirror:Qt},c={nearest:en,linear:tn},u=e({mipmap:on,"nearest mipmap nearest":nn,"linear mipmap nearest":rn,"nearest mipmap linear":an,"linear mipmap linear":on},c),d={none:0,browser:mn},h={uint8:qt,rgba4:xt,rgb565:St,"rgb5 a1":At},p={alpha:bt,luminance:gt,"luminance alpha":vt,rgb:mt,rgba:pt,rgba4:_t,"rgb5 a1":yt,rgb565:wt},b={};n.ext_srgb&&(p.srgb=Ot,p.srgba=Wt),n.oes_texture_float&&(h.float32=h.float=Ut),n.oes_texture_half_float&&(h.float16=h["half float"]=Mt),n.webgl_depth_texture&&(e(p,{depth:zt,"depth stencil":Ft}),e(h,{uint16:Gt,uint32:jt,"depth stencil":kt})),n.webgl_compressed_texture_s3tc&&e(b,{"rgb s3tc dxt1":Tt,"rgba s3tc dxt1":Et,"rgba s3tc dxt3":Ct,"rgba s3tc dxt5":Ht}),n.webgl_compressed_texture_atc&&e(b,{"rgb atc":Bt,"rgba atc explicit alpha":It,"rgba atc interpolated alpha":Pt}),n.webgl_compressed_texture_pvrtc&&e(b,{"rgb pvrtc 4bppv1":Nt,"rgb pvrtc 2bppv1":Dt,"rgba pvrtc 4bppv1":Vt,"rgba pvrtc 2bppv1":Lt}),n.webgl_compressed_texture_etc1&&(b["rgb etc1"]=Rt);var m=Array.prototype.slice.call(t.getParameter(ct));Object.keys(b).forEach((function(e){var t=b[e];m.indexOf(t)>=0&&(p[e]=t)}));var g=Object.keys(p);r.textureFormats=g;var v=[];Object.keys(p).forEach((function(e){var t=p[e];v[t]=e}));var _=[];Object.keys(h).forEach((function(e){var t=h[e];_[t]=e}));var y=[];Object.keys(c).forEach((function(e){var t=c[e];y[t]=e}));var w=[];Object.keys(u).forEach((function(e){var t=u[e];w[t]=e}));var x=[];Object.keys(f).forEach((function(e){var t=f[e];x[t]=e}));var A=g.reduce((function(e,t){var r=p[t];return r===gt||r===bt||r===gt||r===vt||r===zt||r===Ft||n.ext_srgb&&(r===Ot||r===Wt)?e[r]=r:r===yt||t.indexOf("rgba")>=0?e[r]=pt:e[r]=mt,e}),{});function S(){this.internalformat=pt,this.format=pt,this.type=qt,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=mn,this.width=0,this.height=0,this.channels=0}function k(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function z(e,t){if("object"==typeof t&&t){if("premultiplyAlpha"in t&&(e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(e.flipY=t.flipY),"alignment"in t&&(e.unpackAlignment=t.alignment),"colorSpace"in t&&(e.colorSpace=d[t.colorSpace]),"type"in t){var n=t.type;e.type=h[n]}var r=e.width,i=e.height,a=e.channels,o=!1;"shape"in t?(r=t.shape[0],i=t.shape[1],3===t.shape.length&&(a=t.shape[2],o=!0)):("radius"in t&&(r=i=t.radius),"width"in t&&(r=t.width),"height"in t&&(i=t.height),"channels"in t&&(a=t.channels,o=!0)),e.width=0|r,e.height=0|i,e.channels=0|a;var s=!1;if("format"in t){var l=t.format,f=e.internalformat=p[l];e.format=A[f],l in h&&("type"in t||(e.type=h[l])),l in b&&(e.compressed=!0),s=!0}!o&&s?e.channels=yn[e.format]:o&&!s&&e.channels!==_n[e.format]&&(e.format=e.internalformat=_n[e.channels])}}function F(e){t.pixelStorei(hn,e.flipY),t.pixelStorei(pn,e.premultiplyAlpha),t.pixelStorei(bn,e.colorSpace),t.pixelStorei(dn,e.unpackAlignment)}function O(){S.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function W(e,t){var n=null;if(Vn(t)?n=t:t&&(z(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),Vn(t.data)&&(n=t.data)),t.copy){var r=a.viewportWidth,i=a.viewportHeight;e.width=e.width||r-e.xOffset,e.height=e.height||i-e.yOffset,e.needsCopy=!0}else if(n){if(we(n))e.channels=e.channels||4,e.data=n,"type"in t||e.type!==qt||(e.type=Ln(n));else if(Tn(n))e.channels=e.channels||4,Rn(e,n),e.alignment=1,e.needsFree=!0;else if(xe(n)){var o=n.data;Array.isArray(o)||e.type!==qt||(e.type=Ln(o));var s,l,f,c,u,d,h=n.shape,p=n.stride;3===h.length?(f=h[2],d=p[2]):(f=1,d=1),s=h[0],l=h[1],c=p[0],u=p[1],e.alignment=1,e.width=s,e.height=l,e.channels=f,e.format=e.internalformat=_n[f],e.needsFree=!0,jn(e,o,c,u,d,n.offset)}else if(Hn(n)||Bn(n)||In(n))Hn(n)||Bn(n)?e.element=n:e.element=n.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(Pn(n))e.element=n,e.width=n.width,e.height=n.height,e.channels=4;else if(Nn(n))e.element=n,e.width=n.naturalWidth,e.height=n.naturalHeight,e.channels=4;else if(Dn(n))e.element=n,e.width=n.videoWidth,e.height=n.videoHeight,e.channels=4;else if(En(n)){var b=e.width||n[0].length,m=e.height||n.length,g=e.channels;g=ft(n[0][0])?g||n[0][0].length:g||1;for(var v=Se.shape(n),_=1,y=0;y<v.length;++y)_*=v[y];var w=qn(e,_);Se.flatten(n,v,"",w),Gn(e,w),e.alignment=1,e.width=b,e.height=m,e.channels=g,e.format=e.internalformat=_n[g],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===Ut||e.type}function M(e,n,r){var a=e.element,o=e.data,s=e.internalformat,l=e.format,f=e.type,c=e.width,u=e.height;F(e),a?t.texImage2D(n,r,l,l,f,a):e.compressed?t.compressedTexImage2D(n,r,s,c,u,0,o):e.needsCopy?(i(),t.copyTexImage2D(n,r,l,e.xOffset,e.yOffset,c,u,0)):t.texImage2D(n,r,l,c,u,0,l,f,o||null)}function T(e,n,r,a,o){var s=e.element,l=e.data,f=e.internalformat,c=e.format,u=e.type,d=e.width,h=e.height;F(e),s?t.texSubImage2D(n,o,r,a,c,u,s):e.compressed?t.compressedTexSubImage2D(n,o,r,a,f,d,h,l):e.needsCopy?(i(),t.copyTexSubImage2D(n,o,r,a,e.xOffset,e.yOffset,d,h)):t.texSubImage2D(n,o,r,a,d,h,c,u,l)}var E=[];function C(){return E.pop()||new O}function H(e){e.needsFree&&B.freeType(e.data),O.call(e),E.push(e)}function I(){S.call(this),this.genMipmaps=!1,this.mipmapHint=ln,this.mipmask=0,this.images=Array(16)}function P(e,t,n){var r=e.images[0]=C();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function N(e,t){var n=null;if(Vn(t))k(n=e.images[0]=C(),e),W(n,t),e.mipmask=1;else if(z(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,i=0;i<r.length;++i)k(n=e.images[i]=C(),e),n.width>>=i,n.height>>=i,W(n,r[i]),e.mipmask|=1<<i;else k(n=e.images[0]=C(),e),W(n,t),e.mipmask=1;k(e,e.images[0]),e.compressed&&(e.internalformat===Tt||e.internalformat===Et||e.internalformat===Ct||e.internalformat)}function D(e,t){for(var n=e.images,r=0;r<n.length;++r){if(!n[r])return;M(n[r],t,r)}}var V=[];function L(){var e=V.pop()||new I;S.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function R(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&H(t[n]),t[n]=null;V.push(e)}function q(){this.minFilter=en,this.magFilter=en,this.wrapS=Xt,this.wrapT=Xt,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=ln}function G(e,t){if("min"in t){var n=t.min;e.minFilter=u[n],vn.indexOf(e.minFilter)>=0&&!("faces"in t)&&(e.genMipmaps=!0)}if("mag"in t){var r=t.mag;e.magFilter=c[r]}var i=e.wrapS,a=e.wrapT;if("wrap"in t){var o=t.wrap;"string"==typeof o?i=a=f[o]:Array.isArray(o)&&(i=f[o[0]],a=f[o[1]])}else{if("wrapS"in t){var s=t.wrapS;i=f[s]}if("wrapT"in t){var d=t.wrapT;a=f[d]}}if(e.wrapS=i,e.wrapT=a,"anisotropic"in t&&(t.anisotropic,e.anisotropic=t.anisotropic),"mipmap"in t){var h=!1;switch(typeof t.mipmap){case"string":e.mipmapHint=l[t.mipmap],e.genMipmaps=!0,h=!0;break;case"boolean":h=e.genMipmaps=t.mipmap;break;case"object":e.genMipmaps=!1,h=!0}h&&!("min"in t)&&(e.minFilter=nn)}}function j(e,r){t.texParameteri(r,Kt,e.minFilter),t.texParameteri(r,Jt,e.magFilter),t.texParameteri(r,Yt,e.wrapS),t.texParameteri(r,$t,e.wrapT),n.ext_texture_filter_anisotropic&&t.texParameteri(r,un,e.anisotropic),e.genMipmaps&&(t.hint(sn,e.mipmapHint),t.generateMipmap(r))}var U=0,Y={},$=r.maxTextureUnits,Z=Array($).map((function(){return null}));function X(e){S.call(this),this.mipmask=0,this.internalformat=pt,this.id=U++,this.refCount=1,this.target=e,this.texture=t.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new q,s.profile&&(this.stats={size:0})}function Q(e){t.activeTexture(gn),t.bindTexture(e.target,e.texture)}function J(){var e=Z[0];e?t.bindTexture(e.target,e.texture):t.bindTexture(ut,null)}function K(e){var n=e.texture,r=e.unit,i=e.target;r>=0&&(t.activeTexture(gn+r),t.bindTexture(i,null),Z[r]=null),t.deleteTexture(n),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete Y[e.id],o.textureCount--}function ee(e,n){var r=new X(ut);function i(e,t){var n=r.texInfo;q.call(n);var a=L();return"number"==typeof e?P(a,0|e,"number"==typeof t?0|t:0|e):e?(G(n,e),N(a,e)):P(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,k(r,a),r.internalformat=a.internalformat,i.width=a.width,i.height=a.height,Q(r),D(a,ut),j(n,ut),J(),R(a),s.profile&&(r.stats.size=Un(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),i.format=v[r.internalformat],i.type=_[r.type],i.mag=y[n.magFilter],i.min=w[n.minFilter],i.wrapS=x[n.wrapS],i.wrapT=x[n.wrapT],i}function a(e,t,n,a){var o=0|t,s=0|n,l=0|a,f=C();return k(f,r),f.width=0,f.height=0,W(f,e),f.width=f.width||(r.width>>l)-o,f.height=f.height||(r.height>>l)-s,Q(r),T(f,ut,o,s,l),J(),H(f),i}function l(e,n){var a=0|e,o=0|n||a;if(a===r.width&&o===r.height)return i;i.width=r.width=a,i.height=r.height=o,Q(r);for(var l=0;r.mipmask>>l;++l){var f=a>>l,c=o>>l;if(!f||!c)break;t.texImage2D(ut,l,r.format,f,c,0,r.format,r.type,null)}return J(),s.profile&&(r.stats.size=Un(r.internalformat,r.type,a,o,!1,!1)),i}return Y[r.id]=r,o.textureCount++,i(e,n),i.subimage=a,i.resize=l,i._reglType="texture2d",i._texture=r,s.profile&&(i.stats=r.stats),i.destroy=function(){r.decRef()},i}function te(e,n,r,i,a,l){var f=new X(dt);Y[f.id]=f,o.cubeCount++;var c=new Array(6);function u(e,t,n,r,i,a){var o,l=f.texInfo;for(q.call(l),o=0;o<6;++o)c[o]=L();if("number"!=typeof e&&e){if("object"==typeof e)if(t)N(c[0],e),N(c[1],t),N(c[2],n),N(c[3],r),N(c[4],i),N(c[5],a);else if(G(l,e),z(f,e),"faces"in e){var d=e.faces;for(o=0;o<6;++o)k(c[o],f),N(c[o],d[o])}else for(o=0;o<6;++o)N(c[o],e)}else{var h=0|e||1;for(o=0;o<6;++o)P(c[o],h,h)}for(k(f,c[0]),l.genMipmaps?f.mipmask=(c[0].width<<1)-1:f.mipmask=c[0].mipmask,f.internalformat=c[0].internalformat,u.width=c[0].width,u.height=c[0].height,Q(f),o=0;o<6;++o)D(c[o],ht+o);for(j(l,dt),J(),s.profile&&(f.stats.size=Un(f.internalformat,f.type,u.width,u.height,l.genMipmaps,!0)),u.format=v[f.internalformat],u.type=_[f.type],u.mag=y[l.magFilter],u.min=w[l.minFilter],u.wrapS=x[l.wrapS],u.wrapT=x[l.wrapT],o=0;o<6;++o)R(c[o]);return u}function d(e,t,n,r,i){var a=0|n,o=0|r,s=0|i,l=C();return k(l,f),l.width=0,l.height=0,W(l,t),l.width=l.width||(f.width>>s)-a,l.height=l.height||(f.height>>s)-o,Q(f),T(l,ht+e,a,o,s),J(),H(l),u}function h(e){var n=0|e;if(n!==f.width){u.width=f.width=n,u.height=f.height=n,Q(f);for(var r=0;r<6;++r)for(var i=0;f.mipmask>>i;++i)t.texImage2D(ht+r,i,f.format,n>>i,n>>i,0,f.format,f.type,null);return J(),s.profile&&(f.stats.size=Un(f.internalformat,f.type,u.width,u.height,!1,!0)),u}}return u(e,n,r,i,a,l),u.subimage=d,u.resize=h,u._reglType="textureCube",u._texture=f,s.profile&&(u.stats=f.stats),u.destroy=function(){f.decRef()},u}function ne(){for(var e=0;e<$;++e)t.activeTexture(gn+e),t.bindTexture(ut,null),Z[e]=null;Ae(Y).forEach(K),o.cubeCount=0,o.textureCount=0}function re(){for(var e=0;e<$;++e){var n=Z[e];n&&(n.bindCount=0,n.unit=-1,Z[e]=null)}Ae(Y).forEach((function(e){e.texture=t.createTexture(),t.bindTexture(e.target,e.texture);for(var n=0;n<32;++n)if(0!=(e.mipmask&1<<n))if(e.target===ut)t.texImage2D(ut,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);else for(var r=0;r<6;++r)t.texImage2D(ht+r,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);j(e.texInfo,e.target)}))}function ie(){for(var e=0;e<$;++e){var n=Z[e];n&&(n.bindCount=0,n.unit=-1,Z[e]=null),t.activeTexture(gn+e),t.bindTexture(ut,null),t.bindTexture(dt,null)}}return e(X.prototype,{bind:function(){var e=this;e.bindCount+=1;var n=e.unit;if(n<0){for(var r=0;r<$;++r){var i=Z[r];if(i){if(i.bindCount>0)continue;i.unit=-1}Z[r]=e,n=r;break}s.profile&&o.maxTextureUnits<n+1&&(o.maxTextureUnits=n+1),e.unit=n,t.activeTexture(gn+n),t.bindTexture(e.target,e.texture)}return n},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&K(this)}}),s.profile&&(o.getTotalTextureSize=function(){var e=0;return Object.keys(Y).forEach((function(t){e+=Y[t].stats.size})),e}),{create2D:ee,createCube:te,clear:ne,getTexture:function(e){return null},restore:re,refresh:ie}}Mn[_t]=2,Mn[yt]=2,Mn[wt]=2,Mn[Ft]=4,Mn[Tt]=.5,Mn[Et]=.5,Mn[Ct]=1,Mn[Ht]=1,Mn[Bt]=.5,Mn[It]=1,Mn[Pt]=1,Mn[Nt]=.5,Mn[Dt]=.25,Mn[Vt]=.5,Mn[Lt]=.25,Mn[Rt]=.5;var $n=36161,Zn=32854,Xn=32855,Qn=36194,Jn=33189,Kn=36168,er=34041,tr=35907,nr=34836,rr=34842,ir=34843,ar=[];function or(e,t,n){return ar[e]*t*n}ar[Zn]=2,ar[Xn]=2,ar[Qn]=2,ar[Jn]=2,ar[Kn]=1,ar[er]=4,ar[tr]=4,ar[nr]=16,ar[rr]=8,ar[ir]=6;var sr=function(e,t,n,r,i){var a={rgba4:Zn,rgb565:Qn,"rgb5 a1":Xn,depth:Jn,stencil:Kn,"depth stencil":er};t.ext_srgb&&(a.srgba=tr),t.ext_color_buffer_half_float&&(a.rgba16f=rr,a.rgb16f=ir),t.webgl_color_buffer_float&&(a.rgba32f=nr);var o=[];Object.keys(a).forEach((function(e){var t=a[e];o[t]=e}));var s=0,l={};function f(e){this.id=s++,this.refCount=1,this.renderbuffer=e,this.format=Zn,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function c(t){var n=t.renderbuffer;e.bindRenderbuffer($n,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete l[t.id],r.renderbufferCount--}function u(t,n){var s=new f(e.createRenderbuffer());function c(t,n){var r=0,l=0,f=Zn;if("object"==typeof t&&t){var u=t;if("shape"in u){var d=u.shape;r=0|d[0],l=0|d[1]}else"radius"in u&&(r=l=0|u.radius),"width"in u&&(r=0|u.width),"height"in u&&(l=0|u.height);"format"in u&&(f=a[u.format])}else"number"==typeof t?(r=0|t,l="number"==typeof n?0|n:r):t||(r=l=1);if(r!==s.width||l!==s.height||f!==s.format)return c.width=s.width=r,c.height=s.height=l,s.format=f,e.bindRenderbuffer($n,s.renderbuffer),e.renderbufferStorage($n,f,r,l),i.profile&&(s.stats.size=or(s.format,s.width,s.height)),c.format=o[s.format],c}function u(t,n){var r=0|t,a=0|n||r;return r===s.width&&a===s.height||(c.width=s.width=r,c.height=s.height=a,e.bindRenderbuffer($n,s.renderbuffer),e.renderbufferStorage($n,s.format,r,a),i.profile&&(s.stats.size=or(s.format,s.width,s.height))),c}return l[s.id]=s,r.renderbufferCount++,c(t,n),c.resize=u,c._reglType="renderbuffer",c._renderbuffer=s,i.profile&&(c.stats=s.stats),c.destroy=function(){s.decRef()},c}function d(){Ae(l).forEach((function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer($n,t.renderbuffer),e.renderbufferStorage($n,t.format,t.width,t.height)})),e.bindRenderbuffer($n,null)}return f.prototype.decRef=function(){--this.refCount<=0&&c(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(l).forEach((function(t){e+=l[t].stats.size})),e}),{create:u,clear:function(){Ae(l).forEach(c)},restore:d}},lr=36160,fr=36161,cr=3553,ur=34069,dr=36064,hr=36096,pr=36128,br=33306,mr=36193,gr=5121,vr=5126,_r=6407,yr=[];yr[6408]=4,yr[_r]=3;var wr=[];function xr(t,n,r,i,a,o){var s={cur:null,next:null,dirty:!1,setFBO:null},l=["rgba"],f=["rgba4","rgb565","rgb5 a1"];function c(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=0,i=0;t?(r=t.width,i=t.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function u(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function d(e,t,n){if(e)if(e.texture){var r=e.texture._texture;Math.max(1,r.width),Math.max(1,r.height),r.refCount+=1}else e.renderbuffer._renderbuffer.refCount+=1}function h(e,n){n&&(n.texture?t.framebufferTexture2D(lr,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(lr,e,fr,n.renderbuffer._renderbuffer.renderbuffer))}function p(e){var t=cr,n=null,r=null,i=e;"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target));var a=i._reglType;return"texture2d"===a||"textureCube"===a?n=i:"renderbuffer"===a&&(r=i,t=fr),new c(t,n,r)}function b(e,t,n,r,o){if(n){var s=i.create2D({width:e,height:t,format:r,type:o});return s._texture.refCount=0,new c(cr,s,null)}var l=a.create({width:e,height:t,format:r});return l._renderbuffer.refCount=0,new c(fr,null,l)}function m(e){return e&&(e.texture||e.renderbuffer)}function g(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n),e.width=t,e.height=n)}n.ext_srgb&&f.push("srgba"),n.ext_color_buffer_half_float&&f.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&f.push("rgba32f"),n.oes_texture_half_float,n.oes_texture_float;var v=0,_={};function y(){this.id=v++,_[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function w(e){e.colorAttachments.forEach(u),u(e.depthAttachment),u(e.stencilAttachment),u(e.depthStencilAttachment)}function x(e){var n=e.framebuffer;t.deleteFramebuffer(n),e.framebuffer=null,o.framebufferCount--,delete _[e.id]}function A(e){var n;t.bindFramebuffer(lr,e.framebuffer);var i=e.colorAttachments;for(n=0;n<i.length;++n)h(dr+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(lr,dr+n,cr,null,0);t.framebufferTexture2D(lr,br,cr,null,0),t.framebufferTexture2D(lr,hr,cr,null,0),t.framebufferTexture2D(lr,pr,cr,null,0),h(hr,e.depthAttachment),h(pr,e.stencilAttachment),h(br,e.depthStencilAttachment),t.checkFramebufferStatus(lr),t.isContextLost(),t.bindFramebuffer(lr,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function S(t,n){var r=new y;function i(e,t){var n,a=0,o=0,s=!0,c=!0,u=null,h=!0,g="rgba",v="uint8",_=1,y=null,x=null,S=null,k=!1;if("number"==typeof e)a=0|e,o=0|t||a;else if(e){var z=e;if("shape"in z){var F=z.shape;a=F[0],o=F[1]}else"radius"in z&&(a=o=z.radius),"width"in z&&(a=z.width),"height"in z&&(o=z.height);("color"in z||"colors"in z)&&(u=z.color||z.colors),u||("colorCount"in z&&(_=0|z.colorCount),"colorTexture"in z&&(h=!!z.colorTexture,g="rgba4"),"colorType"in z&&(v=z.colorType,h||("half float"===v||"float16"===v?g="rgba16f":"float"!==v&&"float32"!==v||(g="rgba32f"))),"colorFormat"in z&&(g=z.colorFormat,l.indexOf(g)>=0?h=!0:f.indexOf(g)>=0&&(h=!1))),("depthTexture"in z||"depthStencilTexture"in z)&&(k=!(!z.depthTexture&&!z.depthStencilTexture)),"depth"in z&&("boolean"==typeof z.depth?s=z.depth:(y=z.depth,c=!1)),"stencil"in z&&("boolean"==typeof z.stencil?c=z.stencil:(x=z.stencil,s=!1)),"depthStencil"in z&&("boolean"==typeof z.depthStencil?s=c=z.depthStencil:(S=z.depthStencil,s=!1,c=!1))}else a=o=1;var O=null,W=null,M=null,T=null;if(Array.isArray(u))O=u.map(p);else if(u)O=[p(u)];else for(O=new Array(_),n=0;n<_;++n)O[n]=b(a,o,h,g,v);for(a=a||O[0].width,o=o||O[0].height,y?W=p(y):s&&!c&&(W=b(a,o,k,"depth","uint32")),x?M=p(x):c&&!s&&(M=b(a,o,!1,"stencil","uint8")),S?T=p(S):!y&&!x&&c&&s&&(T=b(a,o,k,"depth stencil","depth stencil")),n=0;n<O.length;++n)d(O[n]),O[n]&&O[n].texture&&(yr[O[n].texture._texture.format],wr[O[n].texture._texture.type]);return d(W),d(M),d(T),w(r),r.width=a,r.height=o,r.colorAttachments=O,r.depthAttachment=W,r.stencilAttachment=M,r.depthStencilAttachment=T,i.color=O.map(m),i.depth=m(W),i.stencil=m(M),i.depthStencil=m(T),i.width=r.width,i.height=r.height,A(r),i}function a(e,t){var n=Math.max(0|e,1),a=Math.max(0|t||n,1);if(n===r.width&&a===r.height)return i;for(var o=r.colorAttachments,s=0;s<o.length;++s)g(o[s],n,a);return g(r.depthAttachment,n,a),g(r.stencilAttachment,n,a),g(r.depthStencilAttachment,n,a),r.width=i.width=n,r.height=i.height=a,A(r),i}return o.framebufferCount++,i(t,n),e(i,{resize:a,_reglType:"framebuffer",_framebuffer:r,destroy:function(){x(r),w(r)},use:function(e){s.setFBO({framebuffer:i},e)}})}function k(t){var n=Array(6);function r(t){var a,o,s={color:null},l=0,f=null,c="rgba",u="uint8",d=1;if("number"==typeof t)l=0|t;else if(t){var h=t;"shape"in h?l=h.shape[0]:("radius"in h&&(l=0|h.radius),"width"in h?l=0|h.width:"height"in h&&(l=0|h.height)),("color"in h||"colors"in h)&&(f=h.color||h.colors),f||("colorCount"in h&&(d=0|h.colorCount),"colorType"in h&&(u=h.colorType),"colorFormat"in h&&(c=h.colorFormat)),"depth"in h&&(s.depth=h.depth),"stencil"in h&&(s.stencil=h.stencil),"depthStencil"in h&&(s.depthStencil=h.depthStencil)}else l=1;if(f)if(Array.isArray(f))for(o=[],a=0;a<f.length;++a)o[a]=f[a];else o=[f];else{o=Array(d);var p={radius:l,format:c,type:u};for(a=0;a<d;++a)o[a]=i.createCube(p)}for(s.color=Array(o.length),a=0;a<o.length;++a){var b=o[a];l=l||b.width,s.color[a]={target:ur,data:o[a]}}for(a=0;a<6;++a){for(var m=0;m<o.length;++m)s.color[m].target=ur+a;a>0&&(s.depth=n[0].depth,s.stencil=n[0].stencil,s.depthStencil=n[0].depthStencil),n[a]?n[a](s):n[a]=S(s)}return e(r,{width:l,height:l,color:o})}function a(e){var t,i=0|e;if(i===r.width)return r;var a=r.color;for(t=0;t<a.length;++t)a[t].resize(i);for(t=0;t<6;++t)n[t].resize(i);return r.width=r.height=i,r}return r(t),e(r,{faces:n,resize:a,_reglType:"framebufferCube",destroy:function(){n.forEach((function(e){e.destroy()}))}})}function z(){s.cur=null,s.next=null,s.dirty=!0,Ae(_).forEach((function(e){e.framebuffer=t.createFramebuffer(),A(e)}))}return e(s,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof y)return t}return null},create:S,createCube:k,clear:function(){Ae(_).forEach(x)},restore:z})}wr[gr]=1,wr[vr]=4,wr[mr]=2;var Ar=5126,Sr=34962,kr=34963;function zr(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ar,this.offset=0,this.stride=0,this.divisor=0}function Fr(e,t,n,r,i,a,o){for(var s=n.maxAttributes,l=new Array(s),f=0;f<s;++f)l[f]=new zr;var c=0,u={},d={Record:zr,scope:{},state:l,currentVAO:null,targetVAO:null,restore:p()?w:function(){},createVAO:x,getVAO:m,destroyBuffer:h,setVAO:p()?g:v,clear:p()?_:function(){}};function h(t){for(var n=0;n<l.length;++n){var r=l[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}}function p(){return t.oes_vertex_array_object}function b(){return t.angle_instanced_arrays}function m(e){return"function"==typeof e&&e._vao?e._vao:null}function g(e){if(e!==d.currentVAO){var t=p();e?t.bindVertexArrayOES(e.vao):t.bindVertexArrayOES(null),d.currentVAO=e}}function v(t){if(t!==d.currentVAO){if(t)t.bindAttrs();else{for(var n=b(),r=0;r<l.length;++r){var i=l[r];i.buffer?(e.enableVertexAttribArray(r),i.buffer.bind(),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}o.elements?e.bindBuffer(kr,o.elements.buffer.buffer):e.bindBuffer(kr,null)}d.currentVAO=t}}function _(){Ae(u).forEach((function(e){e.destroy()}))}function y(){this.id=++c,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var e=p();this.vao=e?e.createVertexArrayOES():null,u[this.id]=this,this.buffers=[]}function w(){p()&&Ae(u).forEach((function(e){e.refresh()}))}function x(e){var t=new y;function n(e){var r;if(Array.isArray(e))r=e,t.elements&&t.ownsElements&&t.elements.destroy(),t.elements=null,t.ownsElements=!1,t.offset=0,t.count=0,t.instances=-1,t.primitive=4;else{if(e.elements){var o=e.elements;t.ownsElements?"function"==typeof o&&"elements"===o._reglType?(t.elements.destroy(),t.ownsElements=!1):(t.elements(o),t.ownsElements=!1):a.getElements(e.elements)?(t.elements=e.elements,t.ownsElements=!1):(t.elements=a.create(e.elements),t.ownsElements=!0)}else t.elements=null,t.ownsElements=!1;r=e.attributes,t.offset=0,t.count=-1,t.instances=-1,t.primitive=4,t.elements&&(t.count=t.elements._elements.vertCount,t.primitive=t.elements._elements.primType),"offset"in e&&(t.offset=0|e.offset),"count"in e&&(t.count=0|e.count),"instances"in e&&(t.instances=0|e.instances),"primitive"in e&&(t.primitive=je[e.primitive])}var s={},l=t.attributes;l.length=r.length;for(var f=0;f<r.length;++f){var c,u=r[f],d=l[f]=new zr,h=u.data||u;Array.isArray(h)||we(h)||xe(h)?(t.buffers[f]&&(c=t.buffers[f],we(h)&&c._buffer.byteLength>=h.byteLength?c.subdata(h):(c.destroy(),t.buffers[f]=null)),t.buffers[f]||(c=t.buffers[f]=i.create(u,Sr,!1,!0)),d.buffer=i.getBuffer(c),d.size=0|d.buffer.dimension,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1,s[f]=1):i.getBuffer(u)?(d.buffer=i.getBuffer(u),d.size=0|d.buffer.dimension,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1):i.getBuffer(u.buffer)?(d.buffer=i.getBuffer(u.buffer),d.size=0|(+u.size||d.buffer.dimension),d.normalized=!!u.normalized||!1,d.type="type"in u?Ee[u.type]:d.buffer.dtype,d.offset=0|(u.offset||0),d.stride=0|(u.stride||0),d.divisor=0|(u.divisor||0),d.state=1):"x"in u&&(d.x=+u.x||0,d.y=+u.y||0,d.z=+u.z||0,d.w=+u.w||0,d.state=2)}for(var p=0;p<t.buffers.length;++p)!s[p]&&t.buffers[p]&&(t.buffers[p].destroy(),t.buffers[p]=null);return t.refresh(),n}return r.vaoCount+=1,n.destroy=function(){for(var e=0;e<t.buffers.length;++e)t.buffers[e]&&t.buffers[e].destroy();t.buffers.length=0,t.ownsElements&&(t.elements.destroy(),t.elements=null,t.ownsElements=!1),t.destroy()},n._vao=t,n._reglType="vao",n(e)}return y.prototype.bindAttrs=function(){for(var t=b(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(e.enableVertexAttribArray(r),e.bindBuffer(Sr,i.buffer.buffer),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),t&&i.divisor&&t.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var o=n.length;o<s;++o)e.disableVertexAttribArray(o);var l=a.getElements(this.elements);l?e.bindBuffer(kr,l.buffer.buffer):e.bindBuffer(kr,null)},y.prototype.refresh=function(){var e=p();e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),d.currentVAO=null,e.bindVertexArrayOES(null))},y.prototype.destroy=function(){if(this.vao){var e=p();this===d.currentVAO&&(d.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),u[this.id]&&(delete u[this.id],r.vaoCount-=1)},d}var Or=35632,Wr=35633,Mr=35718,Tr=35721;function Er(t,n,r,i){var a={},o={};function s(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function l(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function f(e,r,i){var s=e===Or?a:o,l=s[r];if(!l){var f=n.str(r);l=t.createShader(e),t.shaderSource(l,f),t.compileShader(l),s[r]=l}return l}var c={},u=[],d=0;function h(e,t){this.id=d++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(e,r,a){var o,c,u=f(Or,e.fragId),d=f(Wr,e.vertId),h=e.program=t.createProgram();if(t.attachShader(h,u),t.attachShader(h,d),a)for(o=0;o<a.length;++o){var p=a[o];t.bindAttribLocation(h,p[0],p[1])}t.linkProgram(h);var b=t.getProgramParameter(h,Mr);i.profile&&(e.stats.uniformsCount=b);var m=e.uniforms;for(o=0;o<b;++o)if(c=t.getActiveUniform(h,o))if(c.size>1)for(var g=0;g<c.size;++g){var v=c.name.replace("[0]","["+g+"]");l(m,new s(v,n.id(v),t.getUniformLocation(h,v),c))}else l(m,new s(c.name,n.id(c.name),t.getUniformLocation(h,c.name),c));var _=t.getProgramParameter(h,Tr);i.profile&&(e.stats.attributesCount=_);var y=e.attributes;for(o=0;o<_;++o)(c=t.getActiveAttrib(h,o))&&l(y,new s(c.name,n.id(c.name),t.getAttribLocation(h,c.name),c))}function b(){a={},o={};for(var e=0;e<u.length;++e)p(u[e],null,u[e].attributes.map((function(e){return[e.location,e.name]})))}return i.profile&&(r.getMaxUniformsCount=function(){var e=0;return u.forEach((function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)})),e},r.getMaxAttributesCount=function(){var e=0;return u.forEach((function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)})),e}),{clear:function(){var e=t.deleteShader.bind(t);Ae(a).forEach(e),a={},Ae(o).forEach(e),o={},u.forEach((function(e){t.deleteProgram(e.program)})),u.length=0,c={},r.shaderCount=0},program:function(n,i,s,l){var f=c[i];f||(f=c[i]={});var d=f[n];if(d&&(d.refCount++,!l))return d;var b=new h(i,n);return r.shaderCount++,p(b,s,l),d||(f[n]=b),u.push(b),e(b,{destroy:function(){if(b.refCount--,b.refCount<=0){t.deleteProgram(b.program);var e=u.indexOf(b);u.splice(e,1),r.shaderCount--}f[b.vertId].refCount<=0&&(t.deleteShader(o[b.vertId]),delete o[b.vertId],delete c[b.fragId][b.vertId]),Object.keys(c[b.fragId]).length||(t.deleteShader(a[b.fragId]),delete a[b.fragId],delete c[b.fragId])}})},restore:b,shader:f,frag:-1,vert:-1}}var Cr=6408,Hr=5121,Br=3333,Ir=5126;function Pr(e,t,n,r,i,a,o){function s(i){var a;a=null===t.next?Hr:t.next.colorAttachments[0].texture._texture.type;var o=0,s=0,l=r.framebufferWidth,f=r.framebufferHeight,c=null;we(i)?c=i:i&&(o=0|i.x,s=0|i.y,l=0|(i.width||r.framebufferWidth-o),f=0|(i.height||r.framebufferHeight-s),c=i.data||null),n();var u=l*f*4;return c||(a===Hr?c=new Uint8Array(u):a===Ir&&(c=c||new Float32Array(u))),e.pixelStorei(Br,4),e.readPixels(o,s,l,f,Cr,a,c),c}function l(e){var n;return t.setFBO({framebuffer:e.framebuffer},(function(){n=s(e)})),n}function f(e){return e&&"framebuffer"in e?l(e):s(e)}return f}function Nr(e){return Vr(Dr(Lr(e)))}function Dr(e){return qr(Kr(Rr(e),8*e.length))}function Vr(e){for(var t,n="0123456789abcdef",r="",i=0;i<e.length;i++)t=e.charCodeAt(i),r+=n.charAt(t>>>4&15)+n.charAt(15&t);return r}function Lr(e){for(var t,n,r="",i=-1;++i<e.length;)t=e.charCodeAt(i),n=i+1<e.length?e.charCodeAt(i+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),i++),t<=127?r+=String.fromCharCode(t):t<=2047?r+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?r+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(r+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return r}function Rr(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}function qr(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}function Gr(e,t){return e>>>t|e<<32-t}function jr(e,t){return e>>>t}function Ur(e,t,n){return e&t^~e&n}function Yr(e,t,n){return e&t^e&n^t&n}function $r(e){return Gr(e,2)^Gr(e,13)^Gr(e,22)}function Zr(e){return Gr(e,6)^Gr(e,11)^Gr(e,25)}function Xr(e){return Gr(e,7)^Gr(e,18)^jr(e,3)}function Qr(e){return Gr(e,17)^Gr(e,19)^jr(e,10)}var Jr=new Array(1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998);function Kr(e,t){var n,r,i,a,o,s,l,f,c,u,d,h,p=new Array(1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225),b=new Array(64);for(e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t,c=0;c<e.length;c+=16){for(n=p[0],r=p[1],i=p[2],a=p[3],o=p[4],s=p[5],l=p[6],f=p[7],u=0;u<64;u++)b[u]=u<16?e[u+c]:ei(ei(ei(Qr(b[u-2]),b[u-7]),Xr(b[u-15])),b[u-16]),d=ei(ei(ei(ei(f,Zr(o)),Ur(o,s,l)),Jr[u]),b[u]),h=ei($r(n),Yr(n,r,i)),f=l,l=s,s=o,o=ei(a,d),a=i,i=r,r=n,n=ei(d,h);p[0]=ei(n,p[0]),p[1]=ei(r,p[1]),p[2]=ei(i,p[2]),p[3]=ei(a,p[3]),p[4]=ei(o,p[4]),p[5]=ei(s,p[5]),p[6]=ei(l,p[6]),p[7]=ei(f,p[7])}return p}function ei(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function ti(e){return Array.prototype.slice.call(e)}function ni(e){return ti(e).join("")}function ri(t){var n=t&&t.cache,r=0,i=[],a=[],o=[];function s(e,t){var n=t&&t.stable;if(!n)for(var s=0;s<a.length;++s)if(a[s]===e&&!o[s])return i[s];var l="g"+r++;return i.push(l),a.push(e),o.push(n),l}function l(){var t=[];function n(){t.push.apply(t,ti(arguments))}var i=[];function a(){var e="v"+r++;return i.push(e),arguments.length>0&&(t.push(e,"="),t.push.apply(t,ti(arguments)),t.push(";")),e}return e(n,{def:a,toString:function(){return ni([i.length>0?"var "+i.join(",")+";":"",ni(t)])}})}function f(){var t=l(),n=l(),r=t.toString,i=n.toString;function a(e,r){n(e,r,"=",t.def(e,r),";")}return e((function(){t.apply(t,ti(arguments))}),{def:t.def,entry:t,exit:n,save:a,set:function(e,n,r){a(e,n),t(e,n,"=",r,";")},toString:function(){return r()+i()}})}function c(){var t=ni(arguments),n=f(),r=f(),i=n.toString,a=r.toString;return e(n,{then:function(){return n.apply(n,ti(arguments)),this},else:function(){return r.apply(r,ti(arguments)),this},toString:function(){var e=a();return e&&(e="else{"+e+"}"),ni(["if(",t,"){",i(),"}",e])}})}var u=l(),d={};function h(t,n){var r=[];function i(){var e="a"+r.length;return r.push(e),e}n=n||0;for(var a=0;a<n;++a)i();var o=f(),s=o.toString;return d[t]=e(o,{arg:i,toString:function(){return ni(["function(",r.join(),"){",s(),"}"])}})}function p(){var e=['"use strict";',u,"return {"];Object.keys(d).forEach((function(t){e.push('"',t,'":',d[t].toString(),",")})),e.push("}");var t,r=ni(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");if(n&&(t=Nr(r),n[t]))return n[t].apply(null,a);var o=Function.apply(null,i.concat(r));return n&&(n[t]=o),o.apply(null,a)}return{global:u,link:s,block:l,proc:h,scope:f,cond:c,compile:p}}var ii="xyzw".split(""),ai=5121,oi=1,si=2,li=0,fi=1,ci=2,ui=3,di=4,hi=5,pi=6,bi="dither",mi="blend.enable",gi="blend.color",vi="blend.equation",_i="blend.func",yi="depth.enable",wi="depth.func",xi="depth.range",Ai="depth.mask",Si="colorMask",ki="cull.enable",zi="cull.face",Fi="frontFace",Oi="lineWidth",Wi="polygonOffset.enable",Mi="polygonOffset.offset",Ti="sample.alpha",Ei="sample.enable",Ci="sample.coverage",Hi="stencil.enable",Bi="stencil.mask",Ii="stencil.func",Pi="stencil.opFront",Ni="stencil.opBack",Di="scissor.enable",Vi="scissor.box",Li="viewport",Ri="profile",qi="framebuffer",Gi="vert",ji="frag",Ui="elements",Yi="primitive",$i="count",Zi="offset",Xi="instances",Qi="vao",Ji="Width",Ki="Height",ea=qi+Ji,ta=qi+Ki,na=Li+Ji,ra=Li+Ki,ia="drawingBuffer",aa=ia+Ji,oa=ia+Ki,sa=[_i,vi,Ii,Pi,Ni,Ci,Li,Vi,Mi],la=34962,fa=34963,ca=2884,ua=3042,da=3024,ha=2960,pa=2929,ba=3089,ma=32823,ga=32926,va=32928,_a=5126,ya=35664,wa=35665,xa=35666,Aa=5124,Sa=35667,ka=35668,za=35669,Fa=35670,Oa=35671,Wa=35672,Ma=35673,Ta=35674,Ea=35675,Ca=35676,Ha=35678,Ba=35680,Ia=4,Pa=1028,Na=1029,Da=2304,Va=2305,La=32775,Ra=32776,qa=519,Ga=7680,ja=0,Ua=1,Ya=32774,$a=513,Za=36160,Xa=36064,Qa={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ja={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ka={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},eo={cw:Da,ccw:Va};function to(e){return Array.isArray(e)||we(e)||xe(e)}function no(e){return e.sort((function(e,t){return e===Li?-1:t===Li?1:e<t?-1:1}))}function ro(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function io(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function ao(e){return new ro(!1,!1,!1,e)}function oo(e,t){var n=e.type;if(n===li){var r=e.data.length;return new ro(!0,r>=1,r>=2,t)}if(n===di){var i=e.data;return new ro(i.thisDep,i.contextDep,i.propDep,t)}if(n===hi)return new ro(!1,!1,!1,t);if(n===pi){for(var a=!1,o=!1,s=!1,l=0;l<e.data.length;++l){var f=e.data[l];if(f.type===fi)s=!0;else if(f.type===ci)o=!0;else if(f.type===ui)a=!0;else if(f.type===li){a=!0;var c=f.data;c>=1&&(o=!0),c>=2&&(s=!0)}else f.type===di&&(a=a||f.data.thisDep,o=o||f.data.contextDep,s=s||f.data.propDep)}return new ro(a,o,s,t)}return new ro(n===ui,n===ci,n===fi,t)}var so=new ro(!1,!1,!1,(function(){}));function lo(t,n,r,i,a,o,s,l,f,c,u,h,p,b,m,g){var v=c.Record,_={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(_.min=La,_.max=Ra);var y=r.angle_instanced_arrays,w=r.webgl_draw_buffers,x=r.oes_vertex_array_object,A={dirty:!0,profile:g.profile},k={},z=[],F={},O={};function W(e){return e.replace(".","_")}function M(e,t,n){var r=W(e);z.push(e),k[r]=A[r]=!!n,F[r]=t}function T(e,t,n){var r=W(e);z.push(e),Array.isArray(n)?(A[r]=n.slice(),k[r]=n.slice()):A[r]=k[r]=n,O[r]=t}function E(e){return!!isNaN(e)}M(bi,da),M(mi,ua),T(gi,"blendColor",[0,0,0,0]),T(vi,"blendEquationSeparate",[Ya,Ya]),T(_i,"blendFuncSeparate",[Ua,ja,Ua,ja]),M(yi,pa,!0),T(wi,"depthFunc",$a),T(xi,"depthRange",[0,1]),T(Ai,"depthMask",!0),T(Si,Si,[!0,!0,!0,!0]),M(ki,ca),T(zi,"cullFace",Na),T(Fi,Fi,Va),T(Oi,Oi,1),M(Wi,ma),T(Mi,"polygonOffset",[0,0]),M(Ti,ga),M(Ei,va),T(Ci,"sampleCoverage",[1,!1]),M(Hi,ha),T(Bi,"stencilMask",-1),T(Ii,"stencilFunc",[qa,0,-1]),T(Pi,"stencilOpSeparate",[Pa,Ga,Ga,Ga]),T(Ni,"stencilOpSeparate",[Na,Ga,Ga,Ga]),M(Di,ba),T(Vi,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),T(Li,Li,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var C={gl:t,context:p,strings:n,next:k,current:A,draw:h,elements:o,buffer:a,shader:u,attributes:c.state,vao:c,uniforms:f,framebuffer:l,extensions:r,timer:b,isBufferArgs:to},H={primTypes:je,compareFuncs:Ja,blendFuncs:Qa,blendEquations:_,stencilOps:Ka,glTypes:Ee,orientationType:eo};w&&(H.backBuffer=[Na],H.drawBuffer=S(i.maxDrawbuffers,(function(e){return 0===e?[0]:S(e,(function(e){return Xa+e}))})));var B=0;function I(){var e=ri({cache:m}),t=e.link,r=e.global;e.id=B++,e.batchId="0";var i=t(C),a=e.shared={props:"a0"};Object.keys(C).forEach((function(e){a[e]=r.def(i,".",e)}));var o=e.next={},s=e.current={};Object.keys(O).forEach((function(e){Array.isArray(A[e])&&(o[e]=r.def(a.next,".",e),s[e]=r.def(a.current,".",e))}));var l=e.constants={};Object.keys(H).forEach((function(e){l[e]=r.def(JSON.stringify(H[e]))})),e.invoke=function(n,r){switch(r.type){case li:var i=["this",a.context,a.props,e.batchId];return n.def(t(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case fi:return n.def(a.props,r.data);case ci:return n.def(a.context,r.data);case ui:return n.def("this",r.data);case di:return r.data.append(e,n),r.data.ref;case hi:return r.data.toString();case pi:return r.data.map((function(t){return e.invoke(n,t)}))}},e.attribCache={};var f={};return e.scopeAttrib=function(e){var r=n.id(e);if(r in f)return f[r];var i=c.scope[r];return i||(i=c.scope[r]=new v),f[r]=t(i)},e}function P(e){var t,n=e.static,r=e.dynamic;if(Ri in n){var i=!!n[Ri];(t=ao((function(e,t){return i}))).enable=i}else if(Ri in r){var a=r[Ri];t=oo(a,(function(e,t){return e.invoke(t,a)}))}return t}function N(e,t){var n=e.static,r=e.dynamic;if(qi in n){var i=n[qi];return i?(i=l.getFramebuffer(i),ao((function(e,t){var n=e.link(i),r=e.shared;t.set(r.framebuffer,".next",n);var a=r.context;return t.set(a,"."+ea,n+".width"),t.set(a,"."+ta,n+".height"),n}))):ao((function(e,t){var n=e.shared;t.set(n.framebuffer,".next","null");var r=n.context;return t.set(r,"."+ea,r+"."+aa),t.set(r,"."+ta,r+"."+oa),"null"}))}if(qi in r){var a=r[qi];return oo(a,(function(e,t){var n=e.invoke(t,a),r=e.shared,i=r.framebuffer,o=t.def(i,".getFramebuffer(",n,")");t.set(i,".next",o);var s=r.context;return t.set(s,"."+ea,o+"?"+o+".width:"+s+"."+aa),t.set(s,"."+ta,o+"?"+o+".height:"+s+"."+oa),o}))}return null}function D(e,t,n){var r=e.static,i=e.dynamic;function a(e){if(e in r){var n,a,o=r[e],s=!0,l=0|o.x,f=0|o.y;return"width"in o?n=0|o.width:s=!1,"height"in o?a=0|o.height:s=!1,new ro(!s&&t&&t.thisDep,!s&&t&&t.contextDep,!s&&t&&t.propDep,(function(e,t){var r=e.shared.context,i=n;"width"in o||(i=t.def(r,".",ea,"-",l));var s=a;return"height"in o||(s=t.def(r,".",ta,"-",f)),[l,f,i,s]}))}if(e in i){var c=i[e],u=oo(c,(function(e,t){var n=e.invoke(t,c),r=e.shared.context,i=t.def(n,".x|0"),a=t.def(n,".y|0");return[i,a,t.def('"width" in ',n,"?",n,".width|0:","(",r,".",ea,"-",i,")"),t.def('"height" in ',n,"?",n,".height|0:","(",r,".",ta,"-",a,")")]}));return t&&(u.thisDep=u.thisDep||t.thisDep,u.contextDep=u.contextDep||t.contextDep,u.propDep=u.propDep||t.propDep),u}return t?new ro(t.thisDep,t.contextDep,t.propDep,(function(e,t){var n=e.shared.context;return[0,0,t.def(n,".",ea),t.def(n,".",ta)]})):null}var o=a(Li);if(o){var s=o;o=new ro(o.thisDep,o.contextDep,o.propDep,(function(e,t){var n=s.append(e,t),r=e.shared.context;return t.set(r,"."+na,n[2]),t.set(r,"."+ra,n[3]),n}))}return{viewport:o,scissor_box:a(Vi)}}function V(e,t){var n=e.static;if("string"==typeof n[ji]&&"string"==typeof n[Gi]){if(Object.keys(t.dynamic).length>0)return null;var r=t.static,i=Object.keys(r);if(i.length>0&&"number"==typeof r[i[0]]){for(var a=[],o=0;o<i.length;++o)a.push([0|r[i[o]],i[o]]);return a}}return null}function L(e,t,r){var i=e.static,a=e.dynamic;function o(e){if(e in i){var t=n.id(i[e]),r=ao((function(){return t}));return r.id=t,r}if(e in a){var o=a[e];return oo(o,(function(e,t){var n=e.invoke(t,o);return t.def(e.shared.strings,".id(",n,")")}))}return null}var s,l=o(ji),f=o(Gi),c=null;return io(l)&&io(f)?(c=u.program(f.id,l.id,null,r),s=ao((function(e,t){return e.link(c)}))):s=new ro(l&&l.thisDep||f&&f.thisDep,l&&l.contextDep||f&&f.contextDep,l&&l.propDep||f&&f.propDep,(function(e,t){var n,r=e.shared.shader;n=l?l.append(e,t):t.def(r,".",ji);var i=r+".program("+(f?f.append(e,t):t.def(r,".",Gi))+","+n;return t.def(i+")")})),{frag:l,vert:f,progVar:s,program:c}}function R(e,t){var n=e.static,r=e.dynamic,i={},a=!1;function s(){if(Qi in n){var e=n[Qi];return null!==e&&null===c.getVAO(e)&&(e=c.createVAO(e)),a=!0,i.vao=e,ao((function(t){var n=c.getVAO(e);return n?t.link(n):"null"}))}if(Qi in r){a=!0;var t=r[Qi];return oo(t,(function(e,n){var r=e.invoke(n,t);return n.def(e.shared.vao+".getVAO("+r+")")}))}return null}var l=s(),f=!1;function u(){if(Ui in n){var e=n[Ui];if(i.elements=e,to(e)){var t=i.elements=o.create(e,!0);e=o.getElements(t),f=!0}else e&&(e=o.getElements(e),f=!0);var s=ao((function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r,r}return t.ELEMENTS=null,null}));return s.value=e,s}if(Ui in r){f=!0;var c=r[Ui];return oo(c,(function(e,t){var n=e.shared,r=n.isBufferArgs,i=n.elements,a=e.invoke(t,c),o=t.def("null"),s=t.def(r,"(",a,")"),l=e.cond(s).then(o,"=",i,".createStream(",a,");").else(o,"=",i,".getElements(",a,");");return t.entry(l),t.exit(e.cond(s).then(i,".destroyStream(",o,");")),e.ELEMENTS=o,o}))}return a?new ro(l.thisDep,l.contextDep,l.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.elements+".getElements("+e.shared.vao+".currentVAO.elements):null")})):null}var d=u();function h(){if(Yi in n){var e=n[Yi];return i.primitive=e,ao((function(t,n){return je[e]}))}if(Yi in r){var t=r[Yi];return oo(t,(function(e,n){var r=e.constants.primTypes,i=e.invoke(n,t);return n.def(r,"[",i,"]")}))}return f?io(d)?d.value?ao((function(e,t){return t.def(e.ELEMENTS,".primType")})):ao((function(){return Ia})):new ro(d.thisDep,d.contextDep,d.propDep,(function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",Ia)})):a?new ro(l.thisDep,l.contextDep,l.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.primitive:"+Ia)})):null}function p(e,t){if(e in n){var o=0|n[e];return t?i.offset=o:i.instances=o,ao((function(e,n){return t&&(e.OFFSET=o),o}))}if(e in r){var s=r[e];return oo(s,(function(e,n){var r=e.invoke(n,s);return t&&(e.OFFSET=r),r}))}if(t){if(f)return ao((function(e,t){return e.OFFSET=0,0}));if(a)return new ro(l.thisDep,l.contextDep,l.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.offset:0")}))}else if(a)return new ro(l.thisDep,l.contextDep,l.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.instances:-1")}));return null}var b=p(Zi,!0);function m(){if($i in n){var e=0|n[$i];return i.count=e,ao((function(){return e}))}if($i in r){var t=r[$i];return oo(t,(function(e,n){return e.invoke(n,t)}))}if(f){if(io(d))return d?b?new ro(b.thisDep,b.contextDep,b.propDep,(function(e,t){return t.def(e.ELEMENTS,".vertCount-",e.OFFSET)})):ao((function(e,t){return t.def(e.ELEMENTS,".vertCount")})):ao((function(){return-1}));var o=new ro(d.thisDep||b.thisDep,d.contextDep||b.contextDep,d.propDep||b.propDep,(function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")}));return o}if(a){var s=new ro(l.thisDep,l.contextDep,l.propDep,(function(e,t){return t.def(e.shared.vao,".currentVAO?",e.shared.vao,".currentVAO.count:-1")}));return s}return null}var g=h(),v=m(),_=p(Xi,!1);return{elements:d,primitive:g,count:v,instances:_,offset:b,vao:l,vaoActive:a,elementsActive:f,static:i}}function q(e,t){var n=e.static,r=e.dynamic,i={};return z.forEach((function(e){var t=W(e);function a(a,o){if(e in n){var s=a(n[e]);i[t]=ao((function(){return s}))}else if(e in r){var l=r[e];i[t]=oo(l,(function(e,t){return o(e,t,e.invoke(t,l))}))}}switch(e){case ki:case mi:case bi:case Hi:case yi:case Di:case Wi:case Ti:case Ei:case Ai:return a((function(e){return e}),(function(e,t,n){return n}));case wi:return a((function(e){return Ja[e]}),(function(e,t,n){var r=e.constants.compareFuncs;return t.def(r,"[",n,"]")}));case xi:return a((function(e){return e}),(function(e,t,n){return[t.def("+",n,"[0]"),t.def("+",n,"[1]")]}));case _i:return a((function(e){var t="srcRGB"in e?e.srcRGB:e.src,n="srcAlpha"in e?e.srcAlpha:e.src,r="dstRGB"in e?e.dstRGB:e.dst,i="dstAlpha"in e?e.dstAlpha:e.dst;return[Qa[t],Qa[r],Qa[n],Qa[i]]}),(function(e,t,n){var r=e.constants.blendFuncs;function i(e,r){return t.def('"',e,r,'" in ',n,"?",n,".",e,r,":",n,".",e)}var a=i("src","RGB"),o=i("dst","RGB"),s=t.def(r,"[",a,"]"),l=t.def(r,"[",i("src","Alpha"),"]");return[s,t.def(r,"[",o,"]"),l,t.def(r,"[",i("dst","Alpha"),"]")]}));case vi:return a((function(e){return"string"==typeof e?[_[e],_[e]]:"object"==typeof e?[_[e.rgb],_[e.alpha]]:void 0}),(function(e,t,n){var r=e.constants.blendEquations,i=t.def(),a=t.def(),o=e.cond("typeof ",n,'==="string"');return o.then(i,"=",a,"=",r,"[",n,"];"),o.else(i,"=",r,"[",n,".rgb];",a,"=",r,"[",n,".alpha];"),t(o),[i,a]}));case gi:return a((function(e){return S(4,(function(t){return+e[t]}))}),(function(e,t,n){return S(4,(function(e){return t.def("+",n,"[",e,"]")}))}));case Bi:return a((function(e){return 0|e}),(function(e,t,n){return t.def(n,"|0")}));case Ii:return a((function(e){var t=e.cmp||"keep",n=e.ref||0,r="mask"in e?e.mask:-1;return[Ja[t],n,r]}),(function(e,t,n){var r=e.constants.compareFuncs;return[t.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Ga),t.def(n,".ref|0"),t.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case Pi:case Ni:return a((function(t){var n=t.fail||"keep",r=t.zfail||"keep",i=t.zpass||"keep";return[e===Ni?Na:Pa,Ka[n],Ka[r],Ka[i]]}),(function(t,n,r){var i=t.constants.stencilOps;function a(e){return n.def('"',e,'" in ',r,"?",i,"[",r,".",e,"]:",Ga)}return[e===Ni?Na:Pa,a("fail"),a("zfail"),a("zpass")]}));case Mi:return a((function(e){return[0|e.factor,0|e.units]}),(function(e,t,n){return[t.def(n,".factor|0"),t.def(n,".units|0")]}));case zi:return a((function(e){var t=0;return"front"===e?t=Pa:"back"===e&&(t=Na),t}),(function(e,t,n){return t.def(n,'==="front"?',Pa,":",Na)}));case Oi:return a((function(e){return e}),(function(e,t,n){return n}));case Fi:return a((function(e){return eo[e]}),(function(e,t,n){return t.def(n+'==="cw"?'+Da+":"+Va)}));case Si:return a((function(e){return e.map((function(e){return!!e}))}),(function(e,t,n){return S(4,(function(e){return"!!"+n+"["+e+"]"}))}));case Ci:return a((function(e){return["value"in e?e.value:1,!!e.invert]}),(function(e,t,n){return[t.def('"value" in ',n,"?+",n,".value:1"),t.def("!!",n,".invert")]}))}})),i}function G(e,t){var n=e.static,r=e.dynamic,i={};return Object.keys(n).forEach((function(e){var t,r=n[e];if("number"==typeof r||"boolean"==typeof r)t=ao((function(){return r}));else if("function"==typeof r){var a=r._reglType;"texture2d"===a||"textureCube"===a?t=ao((function(e){return e.link(r)})):"framebuffer"!==a&&"framebufferCube"!==a||(t=ao((function(e){return e.link(r.color[0])})))}else ft(r)&&(t=ao((function(e){return e.global.def("[",S(r.length,(function(e){return r[e]})),"]")})));t.value=r,i[e]=t})),Object.keys(r).forEach((function(e){var t=r[e];i[e]=oo(t,(function(e,n){return e.invoke(n,t)}))})),i}function j(e,t){var r=e.static,i=e.dynamic,o={};return Object.keys(r).forEach((function(e){var t=r[e],i=n.id(e),s=new v;if(to(t))s.state=oi,s.buffer=a.getBuffer(a.create(t,la,!1,!0)),s.type=0;else{var l=a.getBuffer(t);if(l)s.state=oi,s.buffer=l,s.type=0;else if("constant"in t){var f=t.constant;s.buffer="null",s.state=si,"number"==typeof f?s.x=f:ii.forEach((function(e,t){t<f.length&&(s[e]=f[t])}))}else{l=to(t.buffer)?a.getBuffer(a.create(t.buffer,la,!1,!0)):a.getBuffer(t.buffer);var c=0|t.offset,u=0|t.stride,d=0|t.size,h=!!t.normalized,p=0;"type"in t&&(p=Ee[t.type]);var b=0|t.divisor;s.buffer=l,s.state=oi,s.size=d,s.normalized=h,s.type=p||l.dtype,s.offset=c,s.stride=u,s.divisor=b}}o[e]=ao((function(e,t){var n=e.attribCache;if(i in n)return n[i];var r={isStream:!1};return Object.keys(s).forEach((function(e){r[e]=s[e]})),s.buffer&&(r.buffer=e.link(s.buffer),r.type=r.type||r.buffer+".dtype"),n[i]=r,r}))})),Object.keys(i).forEach((function(e){var t=i[e];function n(e,n){var r=e.invoke(n,t),i=e.shared,a=e.constants,o=i.isBufferArgs,s=i.buffer,l={isStream:n.def(!1)},f=new v;f.state=oi,Object.keys(f).forEach((function(e){l[e]=n.def(""+f[e])}));var c=l.buffer,u=l.type;function d(e){n(l[e],"=",r,".",e,"|0;")}return n("if(",o,"(",r,")){",l.isStream,"=true;",c,"=",s,".createStream(",la,",",r,");",u,"=",c,".dtype;","}else{",c,"=",s,".getBuffer(",r,");","if(",c,"){",u,"=",c,".dtype;",'}else if("constant" in ',r,"){",l.state,"=",si,";","if(typeof "+r+'.constant === "number"){',l[ii[0]],"=",r,".constant;",ii.slice(1).map((function(e){return l[e]})).join("="),"=0;","}else{",ii.map((function(e,t){return l[e]+"="+r+".constant.length>"+t+"?"+r+".constant["+t+"]:0;"})).join(""),"}}else{","if(",o,"(",r,".buffer)){",c,"=",s,".createStream(",la,",",r,".buffer);","}else{",c,"=",s,".getBuffer(",r,".buffer);","}",u,'="type" in ',r,"?",a.glTypes,"[",r,".type]:",c,".dtype;",l.normalized,"=!!",r,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),n("}}"),n.exit("if(",l.isStream,"){",s,".destroyStream(",c,");","}"),l}o[e]=oo(t,n)})),o}function U(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach((function(e){var n=t[e];r[e]=ao((function(e,t){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)}))})),Object.keys(n).forEach((function(e){var t=n[e];r[e]=oo(t,(function(e,n){return e.invoke(n,t)}))})),r}function Y(e,t,n,i,a){e.static,e.dynamic;var o=V(e,t),s=N(e),l=D(e,s),f=R(e),u=q(e),d=L(e,a,o);function h(e){var t=l[e];t&&(u[e]=t)}h(Li),h(W(Vi));var p=Object.keys(u).length>0,b={framebuffer:s,draw:f,shader:d,state:u,dirty:p,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(b.profile=P(e),b.uniforms=G(n),b.drawVAO=b.scopeVAO=f.vao,!b.drawVAO&&d.program&&!o&&r.angle_instanced_arrays&&f.static.elements){var m=!0,g=d.program.attributes.map((function(e){var n=t.static[e];return m=m&&!!n,n}));if(m&&g.length>0){var v=c.getVAO(c.createVAO({attributes:g,elements:f.static.elements}));b.drawVAO=new ro(null,null,null,(function(e,t){return e.link(v)})),b.useVAO=!0}}return o?b.useVAO=!0:b.attributes=j(t),b.context=U(i),b}function $(e,t,n){var r=e.shared.context,i=e.scope();Object.keys(n).forEach((function(a){t.save(r,"."+a);var o=n[a].append(e,t);Array.isArray(o)?i(r,".",a,"=[",o.join(),"];"):i(r,".",a,"=",o,";")})),t(i)}function Z(e,t,n,r){var i,a=e.shared,o=a.gl,s=a.framebuffer;w&&(i=t.def(a.extensions,".webgl_draw_buffers"));var l,f=e.constants,c=f.drawBuffer,u=f.backBuffer;l=n?n.append(e,t):t.def(s,".next"),r||t("if(",l,"!==",s,".cur){"),t("if(",l,"){",o,".bindFramebuffer(",Za,",",l,".framebuffer);"),w&&t(i,".drawBuffersWEBGL(",c,"[",l,".colorAttachments.length]);"),t("}else{",o,".bindFramebuffer(",Za,",null);"),w&&t(i,".drawBuffersWEBGL(",u,");"),t("}",s,".cur=",l,";"),r||t("}")}function X(e,t,n){var r=e.shared,i=r.gl,a=e.current,o=e.next,s=r.current,l=r.next,f=e.cond(s,".dirty");z.forEach((function(t){var r,c,u=W(t);if(!(u in n.state))if(u in o){r=o[u],c=a[u];var d=S(A[u].length,(function(e){return f.def(r,"[",e,"]")}));f(e.cond(d.map((function(e,t){return e+"!=="+c+"["+t+"]"})).join("||")).then(i,".",O[u],"(",d,");",d.map((function(e,t){return c+"["+t+"]="+e})).join(";"),";"))}else{r=f.def(l,".",u);var h=e.cond(r,"!==",s,".",u);f(h),u in F?h(e.cond(r).then(i,".enable(",F[u],");").else(i,".disable(",F[u],");"),s,".",u,"=",r,";"):h(i,".",O[u],"(",r,");",s,".",u,"=",r,";")}})),0===Object.keys(n.state).length&&f(s,".dirty=false;"),t(f)}function Q(e,t,n,r){var i,a=e.shared,o=e.current,s=a.current,l=a.gl;no(Object.keys(n)).forEach((function(a){var f=n[a];if(!r||r(f)){var c=f.append(e,t);if(F[a]){var u=F[a];io(f)?(i=e.link(c,{stable:!0}),t(e.cond(i).then(l,".enable(",u,");").else(l,".disable(",u,");")),t(s,".",a,"=",i,";")):(t(e.cond(c).then(l,".enable(",u,");").else(l,".disable(",u,");")),t(s,".",a,"=",c,";"))}else if(ft(c)){var d=o[a];t(l,".",O[a],"(",c,");",c.map((function(e,t){return d+"["+t+"]="+e})).join(";"),";")}else io(f)?(i=e.link(c,{stable:!0}),t(l,".",O[a],"(",i,");",s,".",a,"=",i,";")):t(l,".",O[a],"(",c,");",s,".",a,"=",c,";")}}))}function J(e,t){y&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function K(e,t,n,r,i){var a,o,s,l=e.shared,f=e.stats,c=l.current,u=l.timer,d=n.profile;function h(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function p(e){e(a=t.def(),"=",h(),";"),"string"==typeof i?e(f,".count+=",i,";"):e(f,".count++;"),b&&(r?e(o=t.def(),"=",u,".getNumPendingQueries();"):e(u,".beginQuery(",f,");"))}function m(e){e(f,".cpuTime+=",h(),"-",a,";"),b&&(r?e(u,".pushScopeStats(",o,",",u,".getNumPendingQueries(),",f,");"):e(u,".endQuery();"))}function g(e){var n=t.def(c,".profile");t(c,".profile=",e,";"),t.exit(c,".profile=",n,";")}if(d){if(io(d))return void(d.enable?(p(t),m(t.exit),g("true")):g("false"));g(s=d.append(e,t))}else s=t.def(c,".profile");var v=e.block();p(v),t("if(",s,"){",v,"}");var _=e.block();m(_),t.exit("if(",s,"){",_,"}")}function ee(e,t,n,r,i){var a=e.shared;function o(e){switch(e){case ya:case Sa:case Oa:return 2;case wa:case ka:case Wa:return 3;case xa:case za:case Ma:return 4;default:return 1}}function s(n,r,i){var o=a.gl,s=t.def(n,".location"),l=t.def(a.attributes,"[",s,"]"),f=i.state,c=i.buffer,u=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];function h(){t("if(!",l,".buffer){",o,".enableVertexAttribArray(",s,");}");var n,a=i.type;if(n=i.size?t.def(i.size,"||",r):r,t("if(",l,".type!==",a,"||",l,".size!==",n,"||",d.map((function(e){return l+"."+e+"!=="+i[e]})).join("||"),"){",o,".bindBuffer(",la,",",c,".buffer);",o,".vertexAttribPointer(",[s,n,a,i.normalized,i.stride,i.offset],");",l,".type=",a,";",l,".size=",n,";",d.map((function(e){return l+"."+e+"="+i[e]+";"})).join(""),"}"),y){var f=i.divisor;t("if(",l,".divisor!==",f,"){",e.instancing,".vertexAttribDivisorANGLE(",[s,f],");",l,".divisor=",f,";}")}}function p(){t("if(",l,".buffer){",o,".disableVertexAttribArray(",s,");",l,".buffer=null;","}if(",ii.map((function(e,t){return l+"."+e+"!=="+u[t]})).join("||"),"){",o,".vertexAttrib4f(",s,",",u,");",ii.map((function(e,t){return l+"."+e+"="+u[t]+";"})).join(""),"}")}f===oi?h():f===si?p():(t("if(",f,"===",oi,"){"),h(),t("}else{"),p(),t("}"))}r.forEach((function(r){var a,l=r.name,f=n.attributes[l];if(f){if(!i(f))return;a=f.append(e,t)}else{if(!i(so))return;var c=e.scopeAttrib(l);a={},Object.keys(new v).forEach((function(e){a[e]=t.def(c,".",e)}))}s(e.link(r),o(r.info.type),a)}))}function te(e,t,r,i,a,o){for(var s,l=e.shared,f=l.gl,c=0;c<i.length;++c){var u,d=i[c],h=d.name,p=d.info.type,b=r.uniforms[h],m=e.link(d)+".location";if(b){if(!a(b))continue;if(io(b)){var g=b.value;if(p===Ha||p===Ba){var v=e.link(g._texture||g.color[0]._texture);t(f,".uniform1i(",m,",",v+".bind());"),t.exit(v,".unbind();")}else if(p===Ta||p===Ea||p===Ca){var _=e.global.def("new Float32Array(["+Array.prototype.slice.call(g)+"])"),y=2;p===Ea?y=3:p===Ca&&(y=4),t(f,".uniformMatrix",y,"fv(",m,",false,",_,");")}else{switch(p){case _a:s="1f";break;case ya:s="2f";break;case wa:s="3f";break;case xa:s="4f";break;case Fa:case Aa:s="1i";break;case Oa:case Sa:s="2i";break;case Wa:case ka:s="3i";break;case Ma:case za:s="4i"}t(f,".uniform",s,"(",m,",",ft(g)?Array.prototype.slice.call(g):g,");")}continue}u=b.append(e,t)}else{if(!a(so))continue;u=t.def(l.uniforms,"[",n.id(h),"]")}p===Ha?t("if(",u,"&&",u,'._reglType==="framebuffer"){',u,"=",u,".color[0];","}"):p===Ba&&t("if(",u,"&&",u,'._reglType==="framebufferCube"){',u,"=",u,".color[0];","}");var w=1;switch(p){case Ha:case Ba:var x=t.def(u,"._texture");t(f,".uniform1i(",m,",",x,".bind());"),t.exit(x,".unbind();");continue;case Aa:case Fa:s="1i";break;case Sa:case Oa:s="2i",w=2;break;case ka:case Wa:s="3i",w=3;break;case za:case Ma:s="4i",w=4;break;case _a:s="1f";break;case ya:s="2f",w=2;break;case wa:s="3f",w=3;break;case xa:s="4f",w=4;break;case Ta:s="Matrix2fv";break;case Ea:s="Matrix3fv";break;case Ca:s="Matrix4fv"}if("M"===s.charAt(0)){t(f,".uniform",s,"(",m,",");var A=Math.pow(p-Ta+2,2),k=e.global.def("new Float32Array(",A,")");Array.isArray(u)?t("false,(",S(A,(function(e){return k+"["+e+"]="+u[e]})),",",k,")"):t("false,(Array.isArray(",u,")||",u," instanceof Float32Array)?",u,":(",S(A,(function(e){return k+"["+e+"]="+u+"["+e+"]"})),",",k,")"),t(");")}else if(w>1){for(var z=[],F=[],O=0;O<w;++O)Array.isArray(u)?F.push(u[O]):F.push(t.def(u+"["+O+"]")),o&&z.push(t.def());o&&t("if(!",e.batchId,"||",z.map((function(e,t){return e+"!=="+F[t]})).join("||"),"){",z.map((function(e,t){return e+"="+F[t]+";"})).join("")),t(f,".uniform",s,"(",m,",",F.join(","),");"),o&&t("}")}else{if(o){var W=t.def();t("if(!",e.batchId,"||",W,"!==",u,"){",W,"=",u,";")}t(f,".uniform",s,"(",m,",",u,");"),o&&t("}")}}}function ne(e,t,n,r){var i=e.shared,a=i.gl,o=i.draw,s=r.draw;function l(){var l,f=s.elements,c=t;return f?((f.contextDep&&r.contextDynamic||f.propDep)&&(c=n),l=f.append(e,c),s.elementsActive&&c("if("+l+")"+a+".bindBuffer("+fa+","+l+".buffer.buffer);")):(l=c.def(),c(l,"=",o,".",Ui,";","if(",l,"){",a,".bindBuffer(",fa,",",l,".buffer.buffer);}","else if(",i.vao,".currentVAO){",l,"=",e.shared.elements+".getElements("+i.vao,".currentVAO.elements);",x?"":"if("+l+")"+a+".bindBuffer("+fa+","+l+".buffer.buffer);","}")),l}function f(){var i,a=s.count,l=t;return a?((a.contextDep&&r.contextDynamic||a.propDep)&&(l=n),i=a.append(e,l)):i=l.def(o,".",$i),i}var c=l();function u(i){var a=s[i];return a?a.contextDep&&r.contextDynamic||a.propDep?a.append(e,n):a.append(e,t):t.def(o,".",i)}var d,h,p=u(Yi),b=u(Zi),m=f();if("number"==typeof m){if(0===m)return}else n("if(",m,"){"),n.exit("}");y&&(d=u(Xi),h=e.instancing);var g=c+".type",v=s.elements&&io(s.elements)&&!s.vaoActive;function _(){function e(){n(h,".drawElementsInstancedANGLE(",[p,m,g,b+"<<(("+g+"-"+ai+")>>1)",d],");")}function t(){n(h,".drawArraysInstancedANGLE(",[p,b,m,d],");")}c&&"null"!==c?v?e():(n("if(",c,"){"),e(),n("}else{"),t(),n("}")):t()}function w(){function e(){n(a+".drawElements("+[p,m,g,b+"<<(("+g+"-"+ai+")>>1)"]+");")}function t(){n(a+".drawArrays("+[p,b,m]+");")}c&&"null"!==c?v?e():(n("if(",c,"){"),e(),n("}else{"),t(),n("}")):t()}y&&("number"!=typeof d||d>=0)?"string"==typeof d?(n("if(",d,">0){"),_(),n("}else if(",d,"<0){"),w(),n("}")):_():w()}function re(e,t,n,r,i){var a=I(),o=a.proc("body",i);return y&&(a.instancing=o.def(a.shared.extensions,".angle_instanced_arrays")),e(a,o,n,r),a.compile().body}function ie(e,t,n,r){J(e,t),n.useVAO?n.drawVAO?t(e.shared.vao,".setVAO(",n.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),ee(e,t,n,r.attributes,(function(){return!0}))),te(e,t,n,r.uniforms,(function(){return!0}),!1),ne(e,t,t,n)}function ae(e,t){var n=e.proc("draw",1);J(e,n),$(e,n,t.context),Z(e,n,t.framebuffer),X(e,n,t),Q(e,n,t.state),K(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)ie(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var i=e.global.def("{}"),a=n.def(r,".id"),o=n.def(i,"[",a,"]");n(e.cond(o).then(o,".call(this,a0);").else(o,"=",i,"[",a,"]=",e.link((function(n){return re(ie,e,t,n,1)})),"(",r,");",o,".call(this,a0);"))}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;"),e.shared.vao&&n(e.shared.vao,".setVAO(null);")}function oe(e,t,n,r){function i(){return!0}e.batchId="a1",J(e,t),ee(e,t,n,r.attributes,i),te(e,t,n,r.uniforms,i,!1),ne(e,t,t,n)}function se(e,t,n,r){J(e,t);var i=n.contextDep,a=t.def(),o="a0",s="a1",l=t.def();e.shared.props=l,e.batchId=a;var f=e.scope(),c=e.scope();function u(e){return e.contextDep&&i||e.propDep}function d(e){return!u(e)}if(t(f.entry,"for(",a,"=0;",a,"<",s,";++",a,"){",l,"=",o,"[",a,"];",c,"}",f.exit),n.needsContext&&$(e,c,n.context),n.needsFramebuffer&&Z(e,c,n.framebuffer),Q(e,c,n.state,u),n.profile&&u(n.profile)&&K(e,c,n,!1,!0),r)n.useVAO?n.drawVAO?u(n.drawVAO)?c(e.shared.vao,".setVAO(",n.drawVAO.append(e,c),");"):f(e.shared.vao,".setVAO(",n.drawVAO.append(e,f),");"):f(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(f(e.shared.vao,".setVAO(null);"),ee(e,f,n,r.attributes,d),ee(e,c,n,r.attributes,u)),te(e,f,n,r.uniforms,d,!1),te(e,c,n,r.uniforms,u,!0),ne(e,f,c,n);else{var h=e.global.def("{}"),p=n.shader.progVar.append(e,c),b=c.def(p,".id"),m=c.def(h,"[",b,"]");c(e.shared.gl,".useProgram(",p,".program);","if(!",m,"){",m,"=",h,"[",b,"]=",e.link((function(t){return re(oe,e,n,t,2)})),"(",p,");}",m,".call(this,a0[",a,"],",a,");")}}function le(e,t){var n=e.proc("batch",2);e.batchId="0",J(e,n);var r=!1,i=!0;Object.keys(t.context).forEach((function(e){r=r||t.context[e].propDep})),r||($(e,n,t.context),i=!1);var a=t.framebuffer,o=!1;function s(e){return e.contextDep&&r||e.propDep}a?(a.propDep?r=o=!0:a.contextDep&&r&&(o=!0),o||Z(e,n,a)):Z(e,n,null),t.state.viewport&&t.state.viewport.propDep&&(r=!0),X(e,n,t),Q(e,n,t.state,(function(e){return!s(e)})),t.profile&&s(t.profile)||K(e,n,t,!1,"a1"),t.contextDep=r,t.needsContext=i,t.needsFramebuffer=o;var l=t.shader.progVar;if(l.contextDep&&r||l.propDep)se(e,n,t,null);else{var f=l.append(e,n);if(n(e.shared.gl,".useProgram(",f,".program);"),t.shader.program)se(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var c=e.global.def("{}"),u=n.def(f,".id"),d=n.def(c,"[",u,"]");n(e.cond(d).then(d,".call(this,a0,a1);").else(d,"=",c,"[",u,"]=",e.link((function(n){return re(se,e,t,n,2)})),"(",f,");",d,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;"),e.shared.vao&&n(e.shared.vao,".setVAO(null);")}function fe(e,t){var r=e.proc("scope",3);e.batchId="a2";var i=e.shared,a=i.current;if($(e,r,t.context),t.framebuffer&&t.framebuffer.append(e,r),no(Object.keys(t.state)).forEach((function(n){var a=t.state[n],o=a.append(e,r);ft(o)?o.forEach((function(t,i){E(t)?r.set(e.next[n],"["+i+"]",t):r.set(e.next[n],"["+i+"]",e.link(t,{stable:!0}))})):io(a)?r.set(i.next,"."+n,e.link(o,{stable:!0})):r.set(i.next,"."+n,o)})),K(e,r,t,!0,!0),[Ui,Zi,$i,Xi,Yi].forEach((function(n){var a=t.draw[n];if(a){var o=a.append(e,r);E(o)?r.set(i.draw,"."+n,o):r.set(i.draw,"."+n,e.link(o),{stable:!0})}})),Object.keys(t.uniforms).forEach((function(a){var o=t.uniforms[a].append(e,r);Array.isArray(o)&&(o="["+o.map((function(t){return E(t)?t:e.link(t,{stable:!0})}))+"]"),r.set(i.uniforms,"["+e.link(n.id(a),{stable:!0})+"]",o)})),Object.keys(t.attributes).forEach((function(n){var i=t.attributes[n].append(e,r),a=e.scopeAttrib(n);Object.keys(new v).forEach((function(e){r.set(a,"."+e,i[e])}))})),t.scopeVAO){var o=t.scopeVAO.append(e,r);E(o)?r.set(i.vao,".targetVAO",o):r.set(i.vao,".targetVAO",e.link(o,{stable:!0}))}function s(n){var a=t.shader[n];if(a){var o=a.append(e,r);E(o)?r.set(i.shader,"."+n,o):r.set(i.shader,"."+n,e.link(o,{stable:!0}))}}s(Gi),s(ji),Object.keys(t.state).length>0&&(r(a,".dirty=true;"),r.exit(a,".dirty=true;")),r("a1(",e.shared.context,",a0,",e.batchId,");")}function ce(e){if("object"==typeof e&&!ft(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(d.isDynamic(e[t[n]]))return!0;return!1}}function ue(e,t,n){var r=t.static[n];if(r&&ce(r)){var i=e.global,a=Object.keys(r),o=!1,s=!1,l=!1,f=e.global.def("{}");a.forEach((function(t){var n=r[t];if(d.isDynamic(n)){"function"==typeof n&&(n=r[t]=d.unbox(n));var a=oo(n,null);o=o||a.thisDep,l=l||a.propDep,s=s||a.contextDep}else{switch(i(f,".",t,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(e.link(n))}i(";")}})),t.dynamic[n]=new d.DynamicVariable(di,{thisDep:o,contextDep:s,propDep:l,ref:f,append:c}),delete t.static[n]}function c(e,t){a.forEach((function(n){var i=r[n];if(d.isDynamic(i)){var a=e.invoke(t,i);t(f,".",n,"=",a,";")}}))}}function de(t,n,r,i,a){var o=I();o.stats=o.link(a),Object.keys(n.static).forEach((function(e){ue(o,n,e)})),sa.forEach((function(e){ue(o,t,e)}));var s=Y(t,n,r,i,o);return s.shader.program&&(s.shader.program.attributes.sort((function(e,t){return e.name<t.name?-1:1})),s.shader.program.uniforms.sort((function(e,t){return e.name<t.name?-1:1}))),ae(o,s),fe(o,s),le(o,s),e(o.compile(),{destroy:function(){s.shader.program.destroy()}})}return{next:k,current:A,procs:function(){var e=I(),t=e.proc("poll"),n=e.proc("refresh"),a=e.block();t(a),n(a);var o,s=e.shared,l=s.gl,f=s.next,c=s.current;a(c,".dirty=false;"),Z(e,t),Z(e,n,null,!0),y&&(o=e.link(y)),r.oes_vertex_array_object&&n(e.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");var u=n.def(s.attributes),d=n.def(0),h=e.cond(d,".buffer");h.then(l,".enableVertexAttribArray(i);",l,".bindBuffer(",la,",",d,".buffer.buffer);",l,".vertexAttribPointer(i,",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(l,".disableVertexAttribArray(i);",l,".vertexAttrib4f(i,",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;");var p=e.link(i.maxAttributes,{stable:!0});return n("for(var i=0;i<",p,";++i){",d,"=",u,"[i];",h,"}"),y&&n("for(var i=0;i<",p,";++i){",o,".vertexAttribDivisorANGLE(i,",u,"[i].divisor);","}"),n(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"),Object.keys(F).forEach((function(r){var i=F[r],o=a.def(f,".",r),s=e.block();s("if(",o,"){",l,".enable(",i,")}else{",l,".disable(",i,")}",c,".",r,"=",o,";"),n(s),t("if(",o,"!==",c,".",r,"){",s,"}")})),Object.keys(O).forEach((function(r){var i,o,s=O[r],u=A[r],d=e.block();if(d(l,".",s,"("),ft(u)){var h=u.length;i=e.global.def(f,".",r),o=e.global.def(c,".",r),d(S(h,(function(e){return i+"["+e+"]"})),");",S(h,(function(e){return o+"["+e+"]="+i+"["+e+"];"})).join("")),t("if(",S(h,(function(e){return i+"["+e+"]!=="+o+"["+e+"]"})).join("||"),"){",d,"}")}else i=a.def(f,".",r),o=a.def(c,".",r),d(i,");",c,".",r,"=",i,";"),t("if(",i,"!==",o,"){",d,"}");n(d)})),e.compile()}(),compile:de}}function fo(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var co=34918,uo=34919,ho=35007,po=function(e,t){if(!t.ext_disjoint_timer_query)return null;var n=[];function r(){return n.pop()||t.ext_disjoint_timer_query.createQueryEXT()}function i(e){n.push(e)}var a=[];function o(e){var n=r();t.ext_disjoint_timer_query.beginQueryEXT(ho,n),a.push(n),h(a.length-1,a.length,e)}function s(){t.ext_disjoint_timer_query.endQueryEXT(ho)}function l(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var f=[];function c(){return f.pop()||new l}function u(e){f.push(e)}var d=[];function h(e,t,n){var r=c();r.startQueryIndex=e,r.endQueryIndex=t,r.sum=0,r.stats=n,d.push(r)}var p=[],b=[];function m(){var e,n,r=a.length;if(0!==r){b.length=Math.max(b.length,r+1),p.length=Math.max(p.length,r+1),p[0]=0,b[0]=0;var o=0;for(e=0,n=0;n<a.length;++n){var s=a[n];t.ext_disjoint_timer_query.getQueryObjectEXT(s,uo)?(o+=t.ext_disjoint_timer_query.getQueryObjectEXT(s,co),i(s)):a[e++]=s,p[n+1]=o,b[n+1]=e}for(a.length=e,e=0,n=0;n<d.length;++n){var l=d[n],f=l.startQueryIndex,c=l.endQueryIndex;l.sum+=p[c]-p[f];var h=b[f],m=b[c];m===h?(l.stats.gpuTime+=l.sum/1e6,u(l)):(l.startQueryIndex=h,l.endQueryIndex=m,d[e++]=l)}d.length=e}}return{beginQuery:o,endQuery:s,pushScopeStats:h,update:m,getNumPendingQueries:function(){return a.length},clear:function(){n.push.apply(n,a);for(var e=0;e<n.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(n[e]);a.length=0,n.length=0},restore:function(){a.length=0,n.length=0}}},bo=16384,mo=256,go=1024,vo=34962,_o="webglcontextlost",yo="webglcontextrestored",wo=1,xo=2,Ao=3;function So(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}function ko(t){var n=x(t);if(!n)return null;var r=n.gl,i=r.getContextAttributes();r.isContextLost();var a=A(r,n);if(!a)return null;var o=b(),s=fo(),l=n.cachedCode||{},f=a.extensions,c=po(r,f),u=p(),m=r.drawingBufferWidth,g=r.drawingBufferHeight,v={tick:0,time:0,viewportWidth:m,viewportHeight:g,framebufferWidth:m,framebufferHeight:g,drawingBufferWidth:m,drawingBufferHeight:g,pixelRatio:n.pixelRatio},_={},y={elements:null,primitive:4,count:-1,offset:0,instances:-1},w=ye(r,f),S=Ge(r,s,n,F),k=it(r,f,S,s),z=Fr(r,f,w,s,S,k,y);function F(e){return z.destroyBuffer(e)}var O=Er(r,o,s,n),W=Yn(r,f,w,(function(){E.procs.poll()}),v,s,n),M=sr(r,f,w,s,n),T=xr(r,f,w,W,M,s),E=lo(r,o,f,w,S,k,W,T,_,z,O,y,v,c,l,n),C=Pr(r,T,E.procs.poll,v),H=E.next,B=r.canvas,I=[],P=[],N=[],D=[n.onDestroy],V=null;function L(){if(0===I.length)return c&&c.update(),void(V=null);V=h.next(L),K();for(var e=I.length-1;e>=0;--e){var t=I[e];t&&t(v,null,0)}r.flush(),c&&c.update()}function R(){!V&&I.length>0&&(V=h.next(L))}function q(){V&&(h.cancel(L),V=null)}function G(e){e.preventDefault(),q(),P.forEach((function(e){e()}))}function j(e){r.getError(),a.restore(),O.restore(),S.restore(),W.restore(),M.restore(),T.restore(),z.restore(),c&&c.restore(),E.procs.refresh(),R(),N.forEach((function(e){e()}))}function U(){I.length=0,q(),B&&(B.removeEventListener(_o,G),B.removeEventListener(yo,j)),O.clear(),T.clear(),M.clear(),z.clear(),W.clear(),k.clear(),S.clear(),c&&c.clear(),D.forEach((function(e){e()}))}function Y(t){function n(t){var n=e({},t);function r(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach((function(r){n[e+"."+r]=t[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in t&&(n.vao=t.vao),n}function r(e,t){var n={},r={};return Object.keys(e).forEach((function(i){var a=e[i];if(d.isDynamic(a))r[i]=d.unbox(a,i);else{if(t&&Array.isArray(a))for(var o=0;o<a.length;++o)if(d.isDynamic(a[o]))return void(r[i]=d.unbox(a,i));n[i]=a}})),{dynamic:r,static:n}}var i=r(t.context||{},!0),a=r(t.uniforms||{},!0),o=r(t.attributes||{},!1),s=r(n(t),!1),l={gpuTime:0,cpuTime:0,count:0},f=E.compile(s,o,a,i,l),c=f.draw,u=f.batch,h=f.scope,p=[];function b(e){for(;p.length<e;)p.push(null);return p}function m(e,t){var n;if("function"==typeof e)return h.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(n=0;n<e;++n)h.call(this,null,t,n);else{if(!Array.isArray(e))return h.call(this,e,t,0);for(n=0;n<e.length;++n)h.call(this,e[n],t,n)}else if("number"==typeof e){if(e>0)return u.call(this,b(0|e),0|e)}else{if(!Array.isArray(e))return c.call(this,e);if(e.length)return u.call(this,e,e.length)}}return e(m,{stats:l,destroy:function(){f.destroy()}})}B&&(B.addEventListener(_o,G,!1),B.addEventListener(yo,j,!1));var $=T.setFBO=Y({framebuffer:d.define.call(null,wo,"framebuffer")});function Z(e,t){var n=0;E.procs.poll();var i=t.color;i&&(r.clearColor(+i[0]||0,+i[1]||0,+i[2]||0,+i[3]||0),n|=bo),"depth"in t&&(r.clearDepth(+t.depth),n|=mo),"stencil"in t&&(r.clearStencil(0|t.stencil),n|=go),r.clear(n)}function X(t){if("framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)$(e({framebuffer:t.framebuffer.faces[n]},t),Z);else $(t,Z);else Z(null,t)}function Q(e){function t(){var t=So(I,e);function n(){var e=So(I,n);I[e]=I[I.length-1],I.length-=1,I.length<=0&&q()}I[t]=n}return I.push(e),R(),{cancel:t}}function J(){var e=H.viewport,t=H.scissor_box;e[0]=e[1]=t[0]=t[1]=0,v.viewportWidth=v.framebufferWidth=v.drawingBufferWidth=e[2]=t[2]=r.drawingBufferWidth,v.viewportHeight=v.framebufferHeight=v.drawingBufferHeight=e[3]=t[3]=r.drawingBufferHeight}function K(){v.tick+=1,v.time=te(),J(),E.procs.poll()}function ee(){W.refresh(),J(),E.procs.refresh(),c&&c.update()}function te(){return(p()-u)/1e3}function ne(e,t){var n;switch(e){case"frame":return Q(t);case"lost":n=P;break;case"restore":n=N;break;case"destroy":n=D}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t)return n[e]=n[n.length-1],void n.pop()}}}function re(){return l}function ie(e){Object.entries(e).forEach((function(e){l[e[0]]=e[1]}))}ee();var ae=e(Y,{clear:X,prop:d.define.bind(null,wo),context:d.define.bind(null,xo),this:d.define.bind(null,Ao),draw:Y({}),buffer:function(e){return S.create(e,vo,!1,!1)},elements:function(e){return k.create(e,!1)},texture:W.create2D,cube:W.createCube,renderbuffer:M.create,framebuffer:T.create,framebufferCube:T.createCube,vao:z.createVAO,attributes:i,frame:Q,on:ne,limits:w,hasExtension:function(e){return w.extensions.indexOf(e.toLowerCase())>=0},read:C,destroy:U,_gl:r,_refresh:ee,poll:function(){K(),c&&c.update()},now:te,stats:s,getCachedCode:re,preloadCachedCode:ie});return n.onDone(null,ae),ae}return ko}()}(dr);var hr=dr.exports;const pr="#b3b3b3",br=4,mr="#666666",gr={disableSimulation:!1,spaceSize:4096,nodeSizeScale:1,linkWidthScale:1,arrowSizeScale:1,renderLinks:!0,curvedLinks:!1,curvedLinkSegments:19,curvedLinkWeight:.8,curvedLinkControlPointDistance:.5,arrowLinks:!0,linkVisibilityDistanceRange:[50,150],linkVisibilityMinTransparency:.25,hoveredNodeRingColor:"white",focusedNodeRingColor:"white",useQuadtree:!1,simulation:{decay:1e3,gravity:0,center:0,repulsion:.1,repulsionTheta:1.7,repulsionQuadtreeLevels:12,linkSpring:1,linkDistance:2,linkDistRandomVariationRange:[1,1.2],repulsionFromMouse:2,friction:.85},showFPSMonitor:!1,pixelRatio:2,scaleNodesOnZoom:!0,disableZoom:!1,fitViewOnInit:!0,fitViewDelay:250,nodeSamplingDistance:150},vr=e=>"function"==typeof e,_r=e=>Array.isArray(e),yr=e=>(e=>e instanceof Object)(e)&&!_r(e)&&!vr(e)&&!(e=>e instanceof Object&&"Function"!==e.constructor.name&&"Object"!==e.constructor.name)(e);function wr(e,t,n){return vr(t)?t(e,n):t}function xr(e){var t;let n;if(_r(e))n=e;else{const r=_t(e),i=null==r?void 0:r.rgb();n=[(null==i?void 0:i.r)||0,(null==i?void 0:i.g)||0,(null==i?void 0:i.b)||0,null!==(t=null==r?void 0:r.opacity)&&void 0!==t?t:1]}return[n[0]/255,n[1]/255,n[2]/255,n[3]]}function Ar(e,t){let n=new Float32Array;return e({framebuffer:t})((()=>{n=e.read()})),n}class Sr{constructor(){this.disableSimulation=gr.disableSimulation,this.backgroundColor="#222222",this.spaceSize=gr.spaceSize,this.nodeColor=pr,this.nodeGreyoutOpacity=.1,this.nodeSize=br,this.nodeSizeScale=gr.nodeSizeScale,this.renderHighlightedNodeRing=!0,this.highlightedNodeRingColor=void 0,this.renderHoveredNodeRing=!0,this.hoveredNodeRingColor=gr.hoveredNodeRingColor,this.focusedNodeRingColor=gr.focusedNodeRingColor,this.linkColor=mr,this.linkGreyoutOpacity=.1,this.linkWidth=1,this.linkWidthScale=gr.linkWidthScale,this.renderLinks=gr.renderLinks,this.curvedLinks=gr.curvedLinks,this.curvedLinkSegments=gr.curvedLinkSegments,this.curvedLinkWeight=gr.curvedLinkWeight,this.curvedLinkControlPointDistance=gr.curvedLinkControlPointDistance,this.linkArrows=gr.arrowLinks,this.linkArrowsSizeScale=gr.arrowSizeScale,this.linkVisibilityDistanceRange=gr.linkVisibilityDistanceRange,this.linkVisibilityMinTransparency=gr.linkVisibilityMinTransparency,this.useQuadtree=gr.useQuadtree,this.simulation={decay:gr.simulation.decay,gravity:gr.simulation.gravity,center:gr.simulation.center,repulsion:gr.simulation.repulsion,repulsionTheta:gr.simulation.repulsionTheta,repulsionQuadtreeLevels:gr.simulation.repulsionQuadtreeLevels,linkSpring:gr.simulation.linkSpring,linkDistance:gr.simulation.linkDistance,linkDistRandomVariationRange:gr.simulation.linkDistRandomVariationRange,repulsionFromMouse:gr.simulation.repulsionFromMouse,friction:gr.simulation.friction,onStart:void 0,onTick:void 0,onEnd:void 0,onPause:void 0,onRestart:void 0},this.events={onClick:void 0,onMouseMove:void 0,onNodeMouseOver:void 0,onNodeMouseOut:void 0,onZoomStart:void 0,onZoom:void 0,onZoomEnd:void 0},this.showFPSMonitor=gr.showFPSMonitor,this.pixelRatio=gr.pixelRatio,this.scaleNodesOnZoom=gr.scaleNodesOnZoom,this.initialZoomLevel=void 0,this.disableZoom=gr.disableZoom,this.fitViewOnInit=gr.fitViewOnInit,this.fitViewDelay=gr.fitViewDelay,this.fitViewByNodesInRect=void 0,this.randomSeed=void 0,this.nodeSamplingDistance=gr.nodeSamplingDistance}init(e){Object.keys(e).forEach((t=>{this.deepMergeConfig(this.getConfig(),e,t)}))}deepMergeConfig(e,t,n){yr(e[n])&&yr(t[n])?Object.keys(t[n]).forEach((r=>{this.deepMergeConfig(e[n],t[n],r)})):e[n]=t[n]}getConfig(){return this}}class kr{constructor(e,t,n,r,i){this.reglInstance=e,this.config=t,this.store=n,this.data=r,i&&(this.points=i)}}function zr(e){return{buffer:e.buffer(new Float32Array([-1,-1,1,-1,-1,1,1,1])),size:2}}function Fr(e,t){const n=new Float32Array(t*t*2);for(let e=0;e<t;e++)for(let r=0;r<t;r++){const i=e*t*2+2*r;n[i+0]=r,n[i+1]=e}return{buffer:e.buffer(n),size:2}}function Or(e){var t;e&&(null===(t=null==e?void 0:e._framebuffer)||void 0===t?void 0:t.framebuffer)&&e.destroy()}function Wr(e){var t;e&&(null===(t=null==e?void 0:e._buffer)||void 0===t?void 0:t.buffer)&&e.destroy()}var Mr="#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nvarying vec2 index;void main(){gl_FragColor=vec4(0.0);}",Tr="#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nattribute vec2 quad;varying vec2 index;void main(){index=(quad+1.0)/2.0;gl_Position=vec4(quad,0,1);}";class Er extends kr{create(){const{reglInstance:e}=this;this.centermassFbo=e.framebuffer({color:e.texture({data:new Float32Array(4).fill(0),shape:[1,1,4],type:"float"}),depth:!1,stencil:!1})}initPrograms(){const{reglInstance:e,config:t,store:n,data:r,points:i}=this;this.clearCentermassCommand=e({frag:Mr,vert:Tr,framebuffer:this.centermassFbo,primitive:"triangle strip",count:4,attributes:{quad:zr(e)}}),this.calculateCentermassCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nvarying vec4 rgba;void main(){gl_FragColor=rgba;}",vert:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform float pointsTextureSize;attribute vec2 indexes;varying vec4 rgba;void main(){vec4 pointPosition=texture2D(position,indexes/pointsTextureSize);rgba=vec4(pointPosition.xy,1.0,0.0);gl_Position=vec4(0.0,0.0,0.0,1.0);gl_PointSize=1.0;}",framebuffer:()=>this.centermassFbo,primitive:"points",count:()=>r.nodes.length,attributes:{indexes:Fr(e,n.pointsTextureSize)},uniforms:{position:()=>null==i?void 0:i.previousPositionFbo,pointsTextureSize:()=>n.pointsTextureSize},blend:{enable:!0,func:{src:"one",dst:"one"},equation:{rgb:"add",alpha:"add"}},depth:{enable:!1,mask:!1},stencil:{enable:!1}}),this.runCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform sampler2D centermass;uniform float center;uniform float alpha;varying vec2 index;void main(){vec4 pointPosition=texture2D(position,index);vec4 velocity=vec4(0.0);vec4 centermassValues=texture2D(centermass,vec2(0.0));vec2 centermassPosition=centermassValues.xy/centermassValues.b;vec2 distVector=centermassPosition-pointPosition.xy;float dist=sqrt(dot(distVector,distVector));if(dist>0.0){float angle=atan(distVector.y,distVector.x);float addV=alpha*center*dist*0.01;velocity.rg+=addV*vec2(cos(angle),sin(angle));}gl_FragColor=velocity;}",vert:Tr,framebuffer:()=>null==i?void 0:i.velocityFbo,primitive:"triangle strip",count:4,attributes:{quad:zr(e)},uniforms:{position:()=>null==i?void 0:i.previousPositionFbo,centermass:()=>this.centermassFbo,center:()=>{var e;return null===(e=t.simulation)||void 0===e?void 0:e.center},alpha:()=>n.alpha}})}run(){var e,t,n;null===(e=this.clearCentermassCommand)||void 0===e||e.call(this),null===(t=this.calculateCentermassCommand)||void 0===t||t.call(this),null===(n=this.runCommand)||void 0===n||n.call(this)}destroy(){Or(this.centermassFbo)}}var Cr;class Hr extends kr{initPrograms(){const{reglInstance:e,config:t,store:n,points:r}=this;this.runCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform float gravity;uniform float spaceSize;uniform float alpha;varying vec2 index;void main(){vec4 pointPosition=texture2D(position,index);vec4 velocity=vec4(0.0);vec2 centerPosition=vec2(spaceSize/2.0);vec2 distVector=centerPosition-pointPosition.rg;float dist=sqrt(dot(distVector,distVector));if(dist>0.0){float angle=atan(distVector.y,distVector.x);float addV=alpha*gravity*dist*0.1;velocity.rg+=addV*vec2(cos(angle),sin(angle));}gl_FragColor=velocity;}",vert:Tr,framebuffer:()=>null==r?void 0:r.velocityFbo,primitive:"triangle strip",count:4,attributes:{quad:zr(e)},uniforms:{position:()=>null==r?void 0:r.previousPositionFbo,gravity:()=>{var e;return null===(e=t.simulation)||void 0===e?void 0:e.gravity},spaceSize:()=>n.adjustedSpaceSize,alpha:()=>n.alpha}})}run(){var e;null===(e=this.runCommand)||void 0===e||e.call(this)}}!function(e){e.OUTGOING="outgoing",e.INCOMING="incoming"}(Cr||(Cr={}));class Br extends kr{constructor(){super(...arguments),this.linkFirstIndicesAndAmount=new Float32Array,this.indices=new Float32Array,this.maxPointDegree=0}create(e){const{reglInstance:t,store:{pointsTextureSize:n,linksTextureSize:r},data:i}=this;if(!n||!r)return;this.linkFirstIndicesAndAmount=new Float32Array(n*n*4),this.indices=new Float32Array(r*r*4);const a=new Float32Array(r*r*4),o=new Float32Array(r*r*4),s=e===Cr.INCOMING?i.groupedSourceToTargetLinks:i.groupedTargetToSourceLinks;this.maxPointDegree=0;let l=0;s.forEach(((e,t)=>{this.linkFirstIndicesAndAmount[4*t+0]=l%r,this.linkFirstIndicesAndAmount[4*t+1]=Math.floor(l/r),this.linkFirstIndicesAndAmount[4*t+2]=e.size,e.forEach((e=>{var r,s;this.indices[4*l+0]=e%n,this.indices[4*l+1]=Math.floor(e/n);const f=null!==(r=i.degree[i.getInputIndexBySortedIndex(e)])&&void 0!==r?r:0,c=null!==(s=i.degree[i.getInputIndexBySortedIndex(t)])&&void 0!==s?s:0,u=f/(f+c);let d=1/Math.min(f,c);d=Math.sqrt(d),a[4*l+0]=u,a[4*l+1]=d,o[4*l]=this.store.getRandomFloat(0,1),l+=1})),this.maxPointDegree=Math.max(this.maxPointDegree,e.size)})),this.linkFirstIndicesAndAmountFbo=t.framebuffer({color:t.texture({data:this.linkFirstIndicesAndAmount,shape:[n,n,4],type:"float"}),depth:!1,stencil:!1}),this.indicesFbo=t.framebuffer({color:t.texture({data:this.indices,shape:[r,r,4],type:"float"}),depth:!1,stencil:!1}),this.biasAndStrengthFbo=t.framebuffer({color:t.texture({data:a,shape:[r,r,4],type:"float"}),depth:!1,stencil:!1}),this.randomDistanceFbo=t.framebuffer({color:t.texture({data:o,shape:[r,r,4],type:"float"}),depth:!1,stencil:!1})}initPrograms(){const{reglInstance:e,config:t,store:n,points:r}=this;this.runCommand=e({frag:()=>`\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D position;\nuniform float linkSpring;\nuniform float linkDistance;\nuniform vec2 linkDistRandomVariationRange;\n\nuniform sampler2D linkFirstIndicesAndAmount;\nuniform sampler2D linkIndices;\nuniform sampler2D linkBiasAndStrength;\nuniform sampler2D linkRandomDistanceFbo;\n\nuniform float pointsTextureSize;\nuniform float linksTextureSize;\nuniform float alpha;\n\nvarying vec2 index;\n\nconst float MAX_LINKS = ${this.maxPointDegree}.0;\n\nvoid main() {\n  vec4 pointPosition = texture2D(position, index);\n  vec4 velocity = vec4(0.0);\n\n  vec4 linkFirstIJAndAmount = texture2D(linkFirstIndicesAndAmount, index);\n  float iCount = linkFirstIJAndAmount.r;\n  float jCount = linkFirstIJAndAmount.g;\n  float linkAmount = linkFirstIJAndAmount.b;\n  if (linkAmount > 0.0) {\n    for (float i = 0.0; i < MAX_LINKS; i += 1.0) {\n      if (i < linkAmount) {\n        if (iCount >= linksTextureSize) {\n          iCount = 0.0;\n          jCount += 1.0;\n        }\n        vec2 linkTextureIndex = (vec2(iCount, jCount) + 0.5) / linksTextureSize;\n        vec4 connectedPointIndex = texture2D(linkIndices, linkTextureIndex);\n        vec4 biasAndStrength = texture2D(linkBiasAndStrength, linkTextureIndex);\n        vec4 randomMinDistance = texture2D(linkRandomDistanceFbo, linkTextureIndex);\n        float bias = biasAndStrength.r;\n        float strength = biasAndStrength.g;\n        float randomMinLinkDist = randomMinDistance.r * (linkDistRandomVariationRange.g - linkDistRandomVariationRange.r) + linkDistRandomVariationRange.r;\n        randomMinLinkDist *= linkDistance;\n\n        iCount += 1.0;\n\n        vec4 connectedPointPosition = texture2D(position, (connectedPointIndex.rg + 0.5) / pointsTextureSize);\n        float x = connectedPointPosition.x - (pointPosition.x + velocity.x);\n        float y = connectedPointPosition.y - (pointPosition.y + velocity.y);\n        float l = sqrt(x * x + y * y);\n        l = max(l, randomMinLinkDist * 0.99);\n        l = (l - randomMinLinkDist) / l;\n        l *= linkSpring * alpha;\n        l *= strength;\n        l *= bias;\n        x *= l;\n        y *= l;\n        velocity.x += x;\n        velocity.y += y;\n      }\n    }\n  }\n\n  gl_FragColor = vec4(velocity.rg, 0.0, 0.0);\n}\n  `,vert:Tr,framebuffer:()=>null==r?void 0:r.velocityFbo,primitive:"triangle strip",count:4,attributes:{quad:zr(e)},uniforms:{position:()=>null==r?void 0:r.previousPositionFbo,linkSpring:()=>{var e;return null===(e=t.simulation)||void 0===e?void 0:e.linkSpring},linkDistance:()=>{var e;return null===(e=t.simulation)||void 0===e?void 0:e.linkDistance},linkDistRandomVariationRange:()=>{var e;return null===(e=t.simulation)||void 0===e?void 0:e.linkDistRandomVariationRange},linkFirstIndicesAndAmount:()=>this.linkFirstIndicesAndAmountFbo,linkIndices:()=>this.indicesFbo,linkBiasAndStrength:()=>this.biasAndStrengthFbo,linkRandomDistanceFbo:()=>this.randomDistanceFbo,pointsTextureSize:()=>n.pointsTextureSize,linksTextureSize:()=>n.linksTextureSize,alpha:()=>n.alpha}})}run(){var e;null===(e=this.runCommand)||void 0===e||e.call(this)}destroy(){Or(this.linkFirstIndicesAndAmountFbo),Or(this.indicesFbo),Or(this.biasAndStrengthFbo),Or(this.randomDistanceFbo)}}var Ir="#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nvarying vec4 rgba;void main(){gl_FragColor=rgba;}",Pr="#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform float pointsTextureSize;uniform float levelTextureSize;uniform float cellSize;attribute vec2 indexes;varying vec4 rgba;void main(){vec4 pointPosition=texture2D(position,indexes/pointsTextureSize);rgba=vec4(pointPosition.rg,1.0,0.0);float n=floor(pointPosition.x/cellSize);float m=floor(pointPosition.y/cellSize);vec2 levelPosition=2.0*(vec2(n,m)+0.5)/levelTextureSize-1.0;gl_Position=vec4(levelPosition,0.0,1.0);gl_PointSize=1.0;}";class Nr extends kr{constructor(){super(...arguments),this.levelsFbos=new Map,this.quadtreeLevels=0}create(){const{reglInstance:e,store:t}=this;if(!t.pointsTextureSize)return;this.quadtreeLevels=Math.log2(t.adjustedSpaceSize);for(let t=0;t<this.quadtreeLevels;t+=1){const n=Math.pow(2,t+1);this.levelsFbos.set(`level[${t}]`,e.framebuffer({shape:[n,n],colorType:"float",depth:!1,stencil:!1}))}const n=new Float32Array(t.pointsTextureSize*t.pointsTextureSize*4);for(let e=0;e<t.pointsTextureSize*t.pointsTextureSize;++e)n[4*e]=1e-5*t.getRandomFloat(-1,1),n[4*e+1]=1e-5*t.getRandomFloat(-1,1);this.randomValuesFbo=e.framebuffer({color:e.texture({data:n,shape:[t.pointsTextureSize,t.pointsTextureSize,4],type:"float"}),depth:!1,stencil:!1})}initPrograms(){const{reglInstance:e,config:t,store:n,data:r,points:i}=this;this.clearLevelsCommand=e({frag:Mr,vert:Tr,framebuffer:(e,t)=>t.levelFbo,primitive:"triangle strip",count:4,attributes:{quad:zr(e)}}),this.calculateLevelsCommand=e({frag:Ir,vert:Pr,framebuffer:(e,t)=>t.levelFbo,primitive:"points",count:()=>r.nodes.length,attributes:{indexes:Fr(e,n.pointsTextureSize)},uniforms:{position:()=>null==i?void 0:i.previousPositionFbo,pointsTextureSize:()=>n.pointsTextureSize,levelTextureSize:(e,t)=>t.levelTextureSize,cellSize:(e,t)=>t.cellSize},blend:{enable:!0,func:{src:"one",dst:"one"},equation:{rgb:"add",alpha:"add"}},depth:{enable:!1,mask:!1},stencil:{enable:!1}}),this.forceCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform sampler2D levelFbo;uniform float level;uniform float levels;uniform float levelTextureSize;uniform float repulsion;uniform float alpha;uniform float spaceSize;uniform float theta;varying vec2 index;const float MAX_LEVELS_NUM=14.0;vec2 calcAdd(vec2 ij,vec2 pp){vec2 add=vec2(0.0);vec4 centermass=texture2D(levelFbo,ij);if(centermass.r>0.0&&centermass.g>0.0&&centermass.b>0.0){vec2 centermassPosition=vec2(centermass.rg/centermass.b);vec2 distVector=pp-centermassPosition;float l=dot(distVector,distVector);float dist=sqrt(l);if(l>0.0){float angle=atan(distVector.y,distVector.x);float c=alpha*repulsion*centermass.b;float distanceMin2=1.0;if(l<distanceMin2)l=sqrt(distanceMin2*l);float addV=c/sqrt(l);add=addV*vec2(cos(angle),sin(angle));}}return add;}void main(){vec4 pointPosition=texture2D(position,index);float x=pointPosition.x;float y=pointPosition.y;float left=0.0;float top=0.0;float right=spaceSize;float bottom=spaceSize;float n_left=0.0;float n_top=0.0;float n_right=0.0;float n_bottom=0.0;float cellSize=0.0;for(float i=0.0;i<MAX_LEVELS_NUM;i+=1.0){if(i<=level){left+=cellSize*n_left;top+=cellSize*n_top;right-=cellSize*n_right;bottom-=cellSize*n_bottom;cellSize=pow(2.0,levels-i-1.0);float dist_left=x-left;n_left=max(0.0,floor(dist_left/cellSize-theta));float dist_top=y-top;n_top=max(0.0,floor(dist_top/cellSize-theta));float dist_right=right-x;n_right=max(0.0,floor(dist_right/cellSize-theta));float dist_bottom=bottom-y;n_bottom=max(0.0,floor(dist_bottom/cellSize-theta));}}vec4 velocity=vec4(vec2(0.0),1.0,0.0);for(float i=0.0;i<12.0;i+=1.0){for(float j=0.0;j<4.0;j+=1.0){float n=left+cellSize*j;float m=top+cellSize*n_top+cellSize*i;if(n<(left+n_left*cellSize)&&m<bottom){velocity.xy+=calcAdd(vec2(n/cellSize,m/cellSize)/levelTextureSize,pointPosition.xy);}n=left+cellSize*i;m=top+cellSize*j;if(n<(right-n_right*cellSize)&&m<(top+n_top*cellSize)){velocity.xy+=calcAdd(vec2(n/cellSize,m/cellSize)/levelTextureSize,pointPosition.xy);}n=right-n_right*cellSize+cellSize*j;m=top+cellSize*i;if(n<right&&m<(bottom-n_bottom*cellSize)){velocity.xy+=calcAdd(vec2(n/cellSize,m/cellSize)/levelTextureSize,pointPosition.xy);}n=left+n_left*cellSize+cellSize*i;m=bottom-n_bottom*cellSize+cellSize*j;if(n<right&&m<bottom){velocity.xy+=calcAdd(vec2(n/cellSize,m/cellSize)/levelTextureSize,pointPosition.xy);}}}gl_FragColor=velocity;}",vert:Tr,framebuffer:()=>null==i?void 0:i.velocityFbo,primitive:"triangle strip",count:4,attributes:{quad:zr(e)},uniforms:{position:()=>null==i?void 0:i.previousPositionFbo,level:(e,t)=>t.level,levels:this.quadtreeLevels,levelFbo:(e,t)=>t.levelFbo,levelTextureSize:(e,t)=>t.levelTextureSize,alpha:()=>n.alpha,repulsion:()=>{var e;return null===(e=t.simulation)||void 0===e?void 0:e.repulsion},spaceSize:()=>n.adjustedSpaceSize,theta:()=>{var e;return null===(e=t.simulation)||void 0===e?void 0:e.repulsionTheta}},blend:{enable:!0,func:{src:"one",dst:"one"},equation:{rgb:"add",alpha:"add"}},depth:{enable:!1,mask:!1},stencil:{enable:!1}}),this.forceFromItsOwnCentermassCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform sampler2D levelFbo;uniform sampler2D randomValues;uniform float levelTextureSize;uniform float repulsion;uniform float alpha;varying vec2 index;vec2 calcAdd(vec2 ij,vec2 pp){vec2 add=vec2(0.0);vec4 centermass=texture2D(levelFbo,ij);if(centermass.r>0.0&&centermass.g>0.0&&centermass.b>0.0){vec2 centermassPosition=vec2(centermass.rg/centermass.b);vec2 distVector=pp-centermassPosition;float l=dot(distVector,distVector);float dist=sqrt(l);if(l>0.0){float angle=atan(distVector.y,distVector.x);float c=alpha*repulsion*centermass.b;float distanceMin2=1.0;if(l<distanceMin2)l=sqrt(distanceMin2*l);float addV=c/sqrt(l);add=addV*vec2(cos(angle),sin(angle));}}return add;}void main(){vec4 pointPosition=texture2D(position,index);vec4 random=texture2D(randomValues,index);vec4 velocity=vec4(0.0);velocity.xy+=calcAdd(pointPosition.xy/levelTextureSize,pointPosition.xy);velocity.xy+=velocity.xy*random.rg;gl_FragColor=velocity;}",vert:Tr,framebuffer:()=>null==i?void 0:i.velocityFbo,primitive:"triangle strip",count:4,attributes:{quad:zr(e)},uniforms:{position:()=>null==i?void 0:i.previousPositionFbo,randomValues:()=>this.randomValuesFbo,levelFbo:(e,t)=>t.levelFbo,levelTextureSize:(e,t)=>t.levelTextureSize,alpha:()=>n.alpha,repulsion:()=>{var e;return null===(e=t.simulation)||void 0===e?void 0:e.repulsion},spaceSize:()=>n.adjustedSpaceSize},blend:{enable:!0,func:{src:"one",dst:"one"},equation:{rgb:"add",alpha:"add"}},depth:{enable:!1,mask:!1},stencil:{enable:!1}}),this.clearVelocityCommand=e({frag:Mr,vert:Tr,framebuffer:()=>null==i?void 0:i.velocityFbo,primitive:"triangle strip",count:4,attributes:{quad:zr(e)}})}run(){var e,t,n,r,i;const{store:a}=this;for(let n=0;n<this.quadtreeLevels;n+=1){null===(e=this.clearLevelsCommand)||void 0===e||e.call(this,{levelFbo:this.levelsFbos.get(`level[${n}]`)});const r=Math.pow(2,n+1),i=a.adjustedSpaceSize/r;null===(t=this.calculateLevelsCommand)||void 0===t||t.call(this,{levelFbo:this.levelsFbos.get(`level[${n}]`),levelTextureSize:r,cellSize:i})}null===(n=this.clearVelocityCommand)||void 0===n||n.call(this);for(let e=0;e<this.quadtreeLevels;e+=1){const t=Math.pow(2,e+1);null===(r=this.forceCommand)||void 0===r||r.call(this,{levelFbo:this.levelsFbos.get(`level[${e}]`),levelTextureSize:t,level:e}),e===this.quadtreeLevels-1&&(null===(i=this.forceFromItsOwnCentermassCommand)||void 0===i||i.call(this,{levelFbo:this.levelsFbos.get(`level[${e}]`),levelTextureSize:t,level:e}))}}destroy(){Or(this.randomValuesFbo),this.levelsFbos.forEach((e=>{Or(e)})),this.levelsFbos.clear()}}function Dr(e,t){e=Math.min(e,t);const n=t-e,r="\n    float dist = sqrt(l);\n    if (dist > 0.0) {\n      float c = alpha * repulsion * centermass.b;\n      addVelocity += calcAdd(vec2(x, y), l, c);\n      addVelocity += addVelocity * random.rg;\n    }\n  ";return`\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D position;\nuniform sampler2D randomValues;\nuniform float spaceSize;\nuniform float repulsion;\nuniform float theta;\nuniform float alpha;\nuniform sampler2D level[${t}];\nvarying vec2 index;\n\nvec2 calcAdd(vec2 xy, float l, float c) {\n  float distanceMin2 = 1.0;\n  if (l < distanceMin2) l = sqrt(distanceMin2 * l);\n  float add = c / l;\n  return add * xy;\n}\n\nvoid main() {\n  vec4 pointPosition = texture2D(position, index);\n  vec4 random = texture2D(randomValues, index);\n\n  float width0 = spaceSize;\n\n  vec2 velocity = vec2(0.0);\n  vec2 addVelocity = vec2(0.0);\n\n  ${new Array(t).fill(0).map(((e,t)=>`float width${t+1} = width${t} / 2.0;`)).join("\n")}\n\n  for (float n = 0.0; n < pow(2.0, ${n}.0); n += 1.0) {\n    for (float m = 0.0; m < pow(2.0, ${n}.0); m += 1.0) {\n      ${function i(a){if(a>=t)return r;{const t=Math.pow(2,a+1),o=new Array(a+1-n).fill(0).map(((e,t)=>`pow(2.0, ${a-(t+n)}.0) * i${t+n}`)).join("+"),s=new Array(a+1-n).fill(0).map(((e,t)=>`pow(2.0, ${a-(t+n)}.0) * j${t+n}`)).join("+");return`\n      for (float ij${a} = 0.0; ij${a} < 4.0; ij${a} += 1.0) {\n        float i${a} = 0.0;\n        float j${a} = 0.0;\n        if (ij${a} == 1.0 || ij${a} == 3.0) i${a} = 1.0;\n        if (ij${a} == 2.0 || ij${a} == 3.0) j${a} = 1.0;\n        float i = pow(2.0, ${e}.0) * n / width${a+1} + ${o};\n        float j = pow(2.0, ${e}.0) * m / width${a+1} + ${s};\n        float groupPosX = (i + 0.5) / ${t}.0;\n        float groupPosY = (j + 0.5) / ${t}.0;\n        \n        vec4 centermass = texture2D(level[${a}], vec2(groupPosX, groupPosY));\n        if (centermass.r > 0.0 && centermass.g > 0.0 && centermass.b > 0.0) {\n          float x = centermass.r / centermass.b - pointPosition.r;\n          float y = centermass.g / centermass.b - pointPosition.g;\n          float l = x * x + y * y;\n          if ((width${a+1} * width${a+1}) / theta < l) {\n            ${r}\n          } else {\n            ${i(a+1)}\n          }\n        }\n      }\n      `}}(n)}\n    }\n  }\n\n  velocity -= addVelocity;\n\n  gl_FragColor = vec4(velocity, 0.0, 0.0);\n}\n`}class Vr extends kr{constructor(){super(...arguments),this.levelsFbos=new Map,this.quadtreeLevels=0}create(){const{reglInstance:e,store:t}=this;if(!t.pointsTextureSize)return;this.quadtreeLevels=Math.log2(t.adjustedSpaceSize);for(let t=0;t<this.quadtreeLevels;t+=1){const n=Math.pow(2,t+1);this.levelsFbos.set(`level[${t}]`,e.framebuffer({color:e.texture({data:new Float32Array(n*n*4),shape:[n,n,4],type:"float"}),depth:!1,stencil:!1}))}const n=new Float32Array(t.pointsTextureSize*t.pointsTextureSize*4);for(let e=0;e<t.pointsTextureSize*t.pointsTextureSize;++e)n[4*e]=1e-5*t.getRandomFloat(-1,1),n[4*e+1]=1e-5*t.getRandomFloat(-1,1);this.randomValuesFbo=e.framebuffer({color:e.texture({data:n,shape:[t.pointsTextureSize,t.pointsTextureSize,4],type:"float"}),depth:!1,stencil:!1})}initPrograms(){var e,t;const{reglInstance:n,config:r,store:i,data:a,points:o}=this;this.clearLevelsCommand=n({frag:Mr,vert:Tr,framebuffer:(e,t)=>t.levelFbo,primitive:"triangle strip",count:4,attributes:{quad:zr(n)}}),this.calculateLevelsCommand=n({frag:Ir,vert:Pr,framebuffer:(e,t)=>t.levelFbo,primitive:"points",count:()=>a.nodes.length,attributes:{indexes:Fr(n,i.pointsTextureSize)},uniforms:{position:()=>null==o?void 0:o.previousPositionFbo,pointsTextureSize:()=>i.pointsTextureSize,levelTextureSize:(e,t)=>t.levelTextureSize,cellSize:(e,t)=>t.cellSize},blend:{enable:!0,func:{src:"one",dst:"one"},equation:{rgb:"add",alpha:"add"}},depth:{enable:!1,mask:!1},stencil:{enable:!1}}),this.quadtreeCommand=n({frag:Dr(null!==(t=null===(e=r.simulation)||void 0===e?void 0:e.repulsionQuadtreeLevels)&&void 0!==t?t:this.quadtreeLevels,this.quadtreeLevels),vert:Tr,framebuffer:()=>null==o?void 0:o.velocityFbo,primitive:"triangle strip",count:4,attributes:{quad:zr(n)},uniforms:{position:()=>null==o?void 0:o.previousPositionFbo,randomValues:()=>this.randomValuesFbo,spaceSize:()=>i.adjustedSpaceSize,repulsion:()=>{var e;return null===(e=r.simulation)||void 0===e?void 0:e.repulsion},theta:()=>{var e;return null===(e=r.simulation)||void 0===e?void 0:e.repulsionTheta},alpha:()=>i.alpha,...Object.fromEntries(this.levelsFbos)}})}run(){var e,t,n;const{store:r}=this;for(let n=0;n<this.quadtreeLevels;n+=1){null===(e=this.clearLevelsCommand)||void 0===e||e.call(this,{levelFbo:this.levelsFbos.get(`level[${n}]`)});const i=Math.pow(2,n+1),a=r.adjustedSpaceSize/i;null===(t=this.calculateLevelsCommand)||void 0===t||t.call(this,{levelFbo:this.levelsFbos.get(`level[${n}]`),levelTextureSize:i,cellSize:a})}null===(n=this.quadtreeCommand)||void 0===n||n.call(this)}destroy(){Or(this.randomValuesFbo),this.levelsFbos.forEach((e=>{Or(e)})),this.levelsFbos.clear()}}class Lr extends kr{initPrograms(){const{reglInstance:e,config:t,store:n,points:r}=this;this.runCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform float repulsion;uniform vec2 mousePos;varying vec2 index;void main(){vec4 pointPosition=texture2D(position,index);vec4 velocity=vec4(0.0);vec2 mouse=mousePos;vec2 distVector=mouse-pointPosition.rg;float dist=sqrt(dot(distVector,distVector));dist=max(dist,10.0);float angle=atan(distVector.y,distVector.x);float addV=100.0*repulsion/(dist*dist);velocity.rg-=addV*vec2(cos(angle),sin(angle));gl_FragColor=velocity;}",vert:Tr,framebuffer:()=>null==r?void 0:r.velocityFbo,primitive:"triangle strip",count:4,attributes:{quad:zr(e)},uniforms:{position:()=>null==r?void 0:r.previousPositionFbo,mousePos:()=>n.mousePosition,repulsion:()=>{var e;return null===(e=t.simulation)||void 0===e?void 0:e.repulsionFromMouse}}})}run(){var e;null===(e=this.runCommand)||void 0===e||e.call(this)}}var Rr={exports:{}};!function(e,t){e.exports=function(){var e='<div class="gl-box">\n  <svg viewBox="0 0 55 60">\n    <text x="27" y="56" class="gl-fps">00 FPS</text>\n    <text x="28" y="8" class="gl-mem"></text>\n    <rect x="0" y="14" rx="4" ry="4" width="55" height="32"></rect>\n    <polyline class="gl-chart"></polyline>\n  </svg>\n  <svg viewBox="0 0 14 60" class="gl-cpu-svg">\n    <line x1="7" y1="38" x2="7" y2="11" class="opacity"/>\n    <line x1="7" y1="38" x2="7" y2="11" class="gl-cpu" stroke-dasharray="0 27"/>\n    <path d="M5.35 43c-.464 0-.812.377-.812.812v1.16c-.783.1972-1.421.812-1.595 1.624h-1.16c-.435 0-.812.348-.812.812s.348.812.812.812h1.102v1.653H1.812c-.464 0-.812.377-.812.812 0 .464.377.812.812.812h1.131c.1943.783.812 1.392 1.595 1.595v1.131c0 .464.377.812.812.812.464 0 .812-.377.812-.812V53.15h1.653v1.073c0 .464.377.812.812.812.464 0 .812-.377.812-.812v-1.131c.783-.1943 1.392-.812 1.595-1.595h1.131c.464 0 .812-.377.812-.812 0-.464-.377-.812-.812-.812h-1.073V48.22h1.102c.435 0 .812-.348.812-.812s-.348-.812-.812-.812h-1.16c-.1885-.783-.812-1.421-1.595-1.624v-1.131c0-.464-.377-.812-.812-.812-.464 0-.812.377-.812.812v1.073H6.162v-1.073c0-.464-.377-.812-.812-.812zm.58 3.48h2.088c.754 0 1.363.609 1.363 1.363v2.088c0 .754-.609 1.363-1.363 1.363H5.93c-.754 0-1.363-.609-1.363-1.363v-2.088c0-.754.609-1.363 1.363-1.363z"/>\n  </svg>\n  <svg viewBox="0 0 14 60" class="gl-gpu-svg">\n    <line x1="7" y1="38" x2="7" y2="11" class="opacity"/>\n    <line x1="7" y1="38" x2="7" y2="11" class="gl-gpu" stroke-dasharray="0 27"/>\n    <path d="M1.94775 43.3772a.736.736 0 10-.00416 1.472c.58535.00231.56465.1288.6348.3197.07015.18975.04933.43585.04933.43585l-.00653.05405v8.671a.736.736 0 101.472 0v-1.4145c.253.09522.52785.1495.81765.1495h5.267c1.2535 0 2.254-.9752 2.254-2.185v-3.105c0-1.2075-1.00625-2.185-2.254-2.185h-5.267c-.28865 0-.5635.05405-.8165.1495.01806-.16445.04209-.598-.1357-1.0787-.22425-.6072-.9499-1.2765-2.0125-1.2765zm2.9095 3.6455c.42435 0 .7659.36225.7659.8119v2.9785c0 .44965-.34155.8119-.7659.8119s-.7659-.36225-.7659-.8119v-2.9785c0-.44965.34155-.8119.7659-.8119zm4.117 0a2.3 2.3 0 012.3 2.3 2.3 2.3 0 01-2.3 2.3 2.3 2.3 0 01-2.3-2.3 2.3 2.3 0 012.3-2.3z"/>\n  </svg>\n</div>',t="#gl-bench {\n  position:absolute;\n  left:0;\n  top:0;\n  z-index:1000;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n}\n\n#gl-bench div {\n  position: relative;\n  display: block;\n  margin: 4px;\n  padding: 0 7px 0 10px;\n  background: #6c6;\n  border-radius: 15px;\n  cursor: pointer;\n  opacity: 0.9;\n}\n\n#gl-bench svg {\n  height: 60px;\n  margin: 0 -1px;\n}\n\n#gl-bench text {\n  font-size: 12px;\n  font-family: Helvetica,Arial,sans-serif;\n  font-weight: 700;\n  dominant-baseline: middle;\n  text-anchor: middle;\n}\n\n#gl-bench .gl-mem {\n  font-size: 9px;\n}\n\n#gl-bench line {\n  stroke-width: 5;\n  stroke: #112211;\n  stroke-linecap: round;\n}\n\n#gl-bench polyline {\n  fill: none;\n  stroke: #112211;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n  stroke-width: 3.5;\n}\n\n#gl-bench rect {\n  fill: #448844;\n}\n\n#gl-bench .opacity {\n  stroke: #448844;\n}\n";class n{constructor(n,r={}){this.css=t,this.svg=e,this.paramLogger=()=>{},this.chartLogger=()=>{},this.chartLen=20,this.chartHz=20,this.names=[],this.cpuAccums=[],this.gpuAccums=[],this.activeAccums=[],this.chart=new Array(this.chartLen),this.now=()=>performance&&performance.now?performance.now():Date.now(),this.updateUI=()=>{[].forEach.call(this.nodes["gl-gpu-svg"],(e=>{e.style.display=this.trackGPU?"inline":"none"}))},Object.assign(this,r),this.detected=0,this.finished=[],this.isFramebuffer=0,this.frameId=0;let i,a,o=0,s=e=>{++o<20?i=requestAnimationFrame(s):(this.detected=Math.ceil(1e3*o/(e-a)/70),cancelAnimationFrame(i)),a||(a=e)};if(requestAnimationFrame(s),n){const e=async(e,t)=>Promise.resolve(setTimeout((()=>{n.getError();const r=this.now()-e;t.forEach(((e,t)=>{e&&(this.gpuAccums[t]+=r)}))}),0)),t=(t,n,r)=>function(){const i=n.now();t.apply(r,arguments),n.trackGPU&&n.finished.push(e(i,n.activeAccums.slice(0)))};["drawArrays","drawElements","drawArraysInstanced","drawBuffers","drawElementsInstanced","drawRangeElements"].forEach((e=>{n[e]&&(n[e]=t(n[e],this,n))})),n.getExtension=((e,r)=>function(){let i=e.apply(n,arguments);return i&&["drawElementsInstancedANGLE","drawBuffersWEBGL"].forEach((e=>{i[e]&&(i[e]=t(i[e],r,i))})),i})(n.getExtension,this)}if(!this.withoutUI){this.dom||(this.dom=document.body);let e=document.createElement("div");e.id="gl-bench",this.dom.appendChild(e),this.dom.insertAdjacentHTML("afterbegin",'<style id="gl-bench-style">'+this.css+"</style>"),this.dom=e,this.dom.addEventListener("click",(()=>{this.trackGPU=!this.trackGPU,this.updateUI()})),this.paramLogger=((e,t,n)=>{const r=["gl-cpu","gl-gpu","gl-mem","gl-fps","gl-gpu-svg","gl-chart"],i=Object.assign({},r);return r.forEach((e=>i[e]=t.getElementsByClassName(e))),this.nodes=i,(t,r,a,o,s,l,f)=>{i["gl-cpu"][t].style.strokeDasharray=(.27*r).toFixed(0)+" 100",i["gl-gpu"][t].style.strokeDasharray=(.27*a).toFixed(0)+" 100",i["gl-mem"][t].innerHTML=n[t]?n[t]:o?"mem: "+o.toFixed(0)+"mb":"",i["gl-fps"][t].innerHTML=s.toFixed(0)+" FPS",e(n[t],r,a,o,s,l,f)}})(this.paramLogger,this.dom,this.names),this.chartLogger=((e,t)=>{let n={"gl-chart":this.dom.getElementsByClassName("gl-chart")};return(t,r,i)=>{let a="",o=r.length;for(let e=0;e<o;e++){let t=(i+e+1)%o;null!=r[t]&&(a=a+" "+(55*e/(o-1)).toFixed(1)+","+(45-22*r[t]/60/this.detected).toFixed(1))}n["gl-chart"][t].setAttribute("points",a),e(this.names[t],r,i)}})(this.chartLogger)}}addUI(e){-1==this.names.indexOf(e)&&(this.names.push(e),this.dom&&(this.dom.insertAdjacentHTML("beforeend",this.svg),this.updateUI()),this.cpuAccums.push(0),this.gpuAccums.push(0),this.activeAccums.push(!1))}nextFrame(e){this.frameId++;const t=e||this.now();if(this.frameId<=1)this.paramFrame=this.frameId,this.paramTime=t;else{let e=t-this.paramTime;if(e>=1e3){const n=this.frameId-this.paramFrame,r=n/e*1e3;for(let t=0;t<this.names.length;t++){const i=this.cpuAccums[t]/e*100,a=this.gpuAccums[t]/e*100,o=performance&&performance.memory?performance.memory.usedJSHeapSize/(1<<20):0;this.paramLogger(t,i,a,o,r,e,n),this.cpuAccums[t]=0,Promise.all(this.finished).then((()=>{this.gpuAccums[t]=0,this.finished=[]}))}this.paramFrame=this.frameId,this.paramTime=t}}if(this.detected&&this.chartFrame){let e=t-this.chartTime,n=this.chartHz*e/1e3;for(;--n>0&&this.detected;){const n=(this.frameId-this.chartFrame)/e*1e3;this.chart[this.circularId%this.chartLen]=n;for(let e=0;e<this.names.length;e++)this.chartLogger(e,this.chart,this.circularId);this.circularId++,this.chartFrame=this.frameId,this.chartTime=t}}else this.chartFrame=this.frameId,this.chartTime=t,this.circularId=0}begin(e){this.updateAccums(e)}end(e){this.updateAccums(e)}updateAccums(e){let t=this.names.indexOf(e);-1==t&&(t=this.names.length,this.addUI(e));const n=this.now(),r=n-this.t0;for(let e=0;e<t+1;e++)this.activeAccums[e]&&(this.cpuAccums[e]+=r);this.activeAccums[t]=!this.activeAccums[t],this.t0=n}}return n}()}(Rr);var qr=Rr.exports;class Gr{constructor(e){this.destroy();const t=e.getContext("webgl")||e.getContext("experimental-webgl");this.bench=new qr(t,{css:"\n  #gl-bench {\n    position:absolute;\n    right:0;\n    top:0;\n    z-index:1000;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  #gl-bench div {\n    position: relative;\n    display: block;\n    margin: 4px;\n    padding: 0 7px 0 10px;\n    background: #5f69de;\n    border-radius: 15px;\n    cursor: pointer;\n    opacity: 0.9;\n  }\n  #gl-bench svg {\n    height: 60px;\n    margin: 0 -1px;\n  }\n  #gl-bench text {\n    font-size: 12px;\n    font-family: Helvetica,Arial,sans-serif;\n    font-weight: 700;\n    dominant-baseline: middle;\n    text-anchor: middle;\n  }\n  #gl-bench .gl-mem {\n    font-size: 9px;\n  }\n  #gl-bench line {\n    stroke-width: 5;\n    stroke: #112211;\n    stroke-linecap: round;\n  }\n  #gl-bench polyline {\n    fill: none;\n    stroke: #112211;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n    stroke-width: 3.5;\n  }\n  #gl-bench rect {\n    fill: #8288e4;\n  }\n  #gl-bench .opacity {\n    stroke: #8288e4;\n  }\n"})}begin(){var e;null===(e=this.bench)||void 0===e||e.begin("frame")}end(e){var t,n;null===(t=this.bench)||void 0===t||t.end("frame"),null===(n=this.bench)||void 0===n||n.nextFrame(e)}destroy(){this.bench=void 0,he("#gl-bench").remove()}}class jr{constructor(){this.completeLinks=new Set,this.degree=[],this.groupedSourceToTargetLinks=new Map,this.groupedTargetToSourceLinks=new Map,this._nodes=[],this._links=[],this.idToNodeMap=new Map,this.sortedIndexToInputIndexMap=new Map,this.inputIndexToSortedIndexMap=new Map,this.idToSortedIndexMap=new Map,this.inputIndexToIdMap=new Map,this.idToIndegreeMap=new Map,this.idToOutdegreeMap=new Map}get nodes(){return this._nodes}get links(){return this._links}get linksNumber(){return this.completeLinks.size}setData(e,t){this.idToNodeMap.clear(),this.idToSortedIndexMap.clear(),this.inputIndexToIdMap.clear(),this.idToIndegreeMap.clear(),this.idToOutdegreeMap.clear(),e.forEach(((e,t)=>{this.idToNodeMap.set(e.id,e),this.inputIndexToIdMap.set(t,e.id),this.idToIndegreeMap.set(e.id,0),this.idToOutdegreeMap.set(e.id,0)})),this.completeLinks.clear(),t.forEach((e=>{const t=this.idToNodeMap.get(e.source),n=this.idToNodeMap.get(e.target);if(void 0!==t&&void 0!==n){this.completeLinks.add(e);const r=this.idToOutdegreeMap.get(t.id);void 0!==r&&this.idToOutdegreeMap.set(t.id,r+1);const i=this.idToIndegreeMap.get(n.id);void 0!==i&&this.idToIndegreeMap.set(n.id,i+1)}})),this.degree=new Array(e.length),e.forEach(((e,t)=>{const n=this.idToOutdegreeMap.get(e.id),r=this.idToIndegreeMap.get(e.id);this.degree[t]=(null!=n?n:0)+(null!=r?r:0)})),this.sortedIndexToInputIndexMap.clear(),this.inputIndexToSortedIndexMap.clear();Object.entries(this.degree).sort(((e,t)=>e[1]-t[1])).forEach((([e],t)=>{const n=+e;this.sortedIndexToInputIndexMap.set(t,n),this.inputIndexToSortedIndexMap.set(n,t),this.idToSortedIndexMap.set(this.inputIndexToIdMap.get(n),t)})),this.groupedSourceToTargetLinks.clear(),this.groupedTargetToSourceLinks.clear(),t.forEach((e=>{const t=this.idToSortedIndexMap.get(e.source),n=this.idToSortedIndexMap.get(e.target);if(void 0!==t&&void 0!==n){void 0===this.groupedSourceToTargetLinks.get(t)&&this.groupedSourceToTargetLinks.set(t,new Set);const e=this.groupedSourceToTargetLinks.get(t);null==e||e.add(n),void 0===this.groupedTargetToSourceLinks.get(n)&&this.groupedTargetToSourceLinks.set(n,new Set);const r=this.groupedTargetToSourceLinks.get(n);null==r||r.add(t)}})),this._nodes=e,this._links=t}getNodeById(e){return this.idToNodeMap.get(e)}getNodeByIndex(e){return this._nodes[e]}getSortedIndexByInputIndex(e){return this.inputIndexToSortedIndexMap.get(e)}getInputIndexBySortedIndex(e){return this.sortedIndexToInputIndexMap.get(e)}getSortedIndexById(e){return void 0!==e?this.idToSortedIndexMap.get(e):void 0}getInputIndexById(e){if(void 0===e)return;const t=this.getSortedIndexById(e);return void 0!==t?this.getInputIndexBySortedIndex(t):void 0}getAdjacentNodes(e){var t,n;const r=this.getSortedIndexById(e);if(void 0===r)return;const i=null!==(t=this.groupedSourceToTargetLinks.get(r))&&void 0!==t?t:[],a=null!==(n=this.groupedTargetToSourceLinks.get(r))&&void 0!==n?n:[];return[...new Set([...i,...a])].map((e=>this.getNodeByIndex(this.getInputIndexBySortedIndex(e))))}}function Ur(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Yr(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function $r(e){let t,n,r;function i(e,r,i=0,a=e.length){if(i<a){if(0!==t(r,r))return a;do{const t=i+a>>>1;n(e[t],r)<0?i=t+1:a=t}while(i<a)}return i}return 2!==e.length?(t=Ur,n=(t,n)=>Ur(e(t),n),r=(t,n)=>e(t)-n):(t=e===Ur||e===Yr?e:Zr,n=e,r=e),{left:i,center:function(e,t,n=0,a=e.length){const o=i(e,t,n,a-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r,i=0,a=e.length){if(i<a){if(0!==t(r,r))return a;do{const t=i+a>>>1;n(e[t],r)<=0?i=t+1:a=t}while(i<a)}return i}}}function Zr(){return 0}const Xr=$r(Ur).right;function Qr(e,t){let n,r;if(void 0===t)for(const t of e)null!=t&&(void 0===n?t>=t&&(n=r=t):(n>t&&(n=t),r<t&&(r=t)));else{let i=-1;for(let a of e)null!=(a=t(a,++i,e))&&(void 0===n?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}$r((function(e){return null===e?NaN:+e})).center;var Jr=Math.sqrt(50),Kr=Math.sqrt(10),ei=Math.sqrt(2);function ti(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Jr?10:a>=Kr?5:a>=ei?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Jr?10:a>=Kr?5:a>=ei?2:1)}function ni(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function ri(e){return+e}var ii=[0,1];function ai(e){return e}function oi(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function si(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=oi(i,r),a=n(o,a)):(r=oi(r,i),a=n(a,o)),function(e){return a(r(e))}}function li(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=oi(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=Xr(e,t,1,r)-1;return a[n](i[n](t))}}function fi(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ci(){var e,t,n,r,i,a,o=ii,s=ii,l=An,f=ai;function c(){var e,t,n,l=Math.min(o.length,s.length);return f!==ai&&(e=o[0],t=o[l-1],e>t&&(n=e,e=t,t=n),f=function(n){return Math.max(e,Math.min(t,n))}),r=l>2?li:si,i=a=null,u}function u(t){return null==t||isNaN(t=+t)?n:(i||(i=r(o.map(e),s,l)))(e(f(t)))}return u.invert=function(n){return f(t((a||(a=r(s,o.map(e),vn)))(n)))},u.domain=function(e){return arguments.length?(o=Array.from(e,ri),c()):o.slice()},u.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},u.rangeRound=function(e){return s=Array.from(e),l=Sn,c()},u.clamp=function(e){return arguments.length?(f=!!e||ai,c()):f!==ai},u.interpolate=function(e){return arguments.length?(l=e,c()):l},u.unknown=function(e){return arguments.length?(n=e,u):n},function(n,r){return e=n,t=r,c()}}function ui(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function di(e){return(e=ui(Math.abs(e)))?e[1]:NaN}var hi,pi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bi(e){if(!(t=pi.exec(e)))throw new Error("invalid format: "+e);var t;return new mi({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function mi(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function gi(e,t){var n=ui(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}bi.prototype=mi.prototype,mi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var vi={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gi(100*e,t),r:gi,s:function(e,t){var n=ui(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(hi=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ui(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function _i(e){return e}var yi,wi,xi,Ai=Array.prototype.map,Si=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ki(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?_i:(t=Ai.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?_i:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Ai.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",f=void 0===e.minus?"−":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=bi(e)).fill,n=e.align,u=e.sign,d=e.symbol,h=e.zero,p=e.width,b=e.comma,m=e.precision,g=e.trim,v=e.type;"n"===v?(b=!0,v="g"):vi[v]||(void 0===m&&(m=12),g=!0,v="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var _="$"===d?i:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",y="$"===d?a:/[%p]/.test(v)?l:"",w=vi[v],x=/[defgprs%]/.test(v);function A(e){var i,a,l,d=_,A=y;if("c"===v)A=w(e)+A,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:w(Math.abs(e),m),g&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),S&&0==+e&&"+"!==u&&(S=!1),d=(S?"("===u?u:f:"-"===u||"("===u?"":u)+d,A=("s"===v?Si[8+hi/3]:"")+A+(S&&"("===u?")":""),x)for(i=-1,a=e.length;++i<a;)if(48>(l=e.charCodeAt(i))||l>57){A=(46===l?o+e.slice(i+1):e.slice(i))+A,e=e.slice(0,i);break}}b&&!h&&(e=r(e,1/0));var k=d.length+e.length+A.length,z=k<p?new Array(p-k+1).join(t):"";switch(b&&h&&(e=r(z+e,z.length?p-A.length:1/0),z=""),n){case"<":e=d+e+A+z;break;case"=":e=d+z+e+A;break;case"^":e=z.slice(0,k=z.length>>1)+d+e+A+z.slice(k);break;default:e=z+d+e+A}return s(e)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),A.toString=function(){return e+""},A}return{format:u,formatPrefix:function(e,t){var n=u(((e=bi(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(di(t)/3))),i=Math.pow(10,-r),a=Si[8+r/3];return function(e){return n(i*e)+a}}}}function zi(e,t,n,r){var i,a=function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Jr?i*=10:a>=Kr?i*=5:a>=ei&&(i*=2),t<e?-i:i}(e,t,n);switch((r=bi(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(di(t)/3)))-di(Math.abs(e)))}(a,o))||(r.precision=i),xi(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,di(t)-di(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-di(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return wi(r)}function Fi(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,i,a,o,s=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=ti(e,t,n))||!isFinite(o))return[];if(o>0){let n=Math.round(e/o),r=Math.round(t/o);for(n*o<e&&++n,r*o>t&&--r,a=new Array(i=r-n+1);++s<i;)a[s]=(n+s)*o}else{o=-o;let n=Math.round(e*o),r=Math.round(t*o);for(n/o<e&&++n,r/o>t&&--r,a=new Array(i=r-n+1);++s<i;)a[s]=(n+s)/o}return r&&a.reverse(),a}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return zi(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,a=t(),o=0,s=a.length-1,l=a[o],f=a[s],c=10;for(f<l&&(i=l,l=f,f=i,i=o,o=s,s=i);c-- >0;){if((i=ti(l,f,n))===r)return a[o]=l,a[s]=f,t(a);if(i>0)l=Math.floor(l/i)*i,f=Math.ceil(f/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,f=Math.floor(f*i)/i}r=i}return e},e}function Oi(){var e=ci()(ai,ai);return e.copy=function(){return fi(e,Oi())},ni.apply(e,arguments),Fi(e)}function Wi(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Mi(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Ti(e){return e<0?-e*e:e*e}function Ei(e){var t=e(ai,ai),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(ai,ai):.5===n?e(Mi,Ti):e(Wi(n),Wi(1/n)):n},Fi(t)}function Ci(){var e=Ei(ci());return e.copy=function(){return fi(e,Ci()).exponent(e.exponent())},ni.apply(e,arguments),e}yi=ki({thousands:",",grouping:[3],currency:["$",""]}),wi=yi.format,xi=yi.formatPrefix;var Hi=new Date,Bi=new Date;function Ii(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,a){var o,s=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return s;do{s.push(o=new Date(+n)),t(n,a),e(n)}while(o<n&&n<r);return s},i.filter=function(n){return Ii((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return Hi.setTime(+t),Bi.setTime(+r),e(Hi),e(Bi),Math.floor(n(Hi,Bi))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var Pi=Ii((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));Pi.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Ii((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Pi:null},Pi.range;const Ni=1e3,Di=6e4,Vi=36e5,Li=864e5,Ri=6048e5;var qi=Ii((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*Ni)}),(function(e,t){return(t-e)/Ni}),(function(e){return e.getUTCSeconds()}));qi.range;var Gi=Ii((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ni)}),(function(e,t){e.setTime(+e+t*Di)}),(function(e,t){return(t-e)/Di}),(function(e){return e.getMinutes()}));Gi.range;var ji=Ii((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ni-e.getMinutes()*Di)}),(function(e,t){e.setTime(+e+t*Vi)}),(function(e,t){return(t-e)/Vi}),(function(e){return e.getHours()}));ji.range;var Ui=Ii((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Di)/Li),(e=>e.getDate()-1));function Yi(e){return Ii((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Di)/Ri}))}Ui.range;var $i=Yi(0),Zi=Yi(1),Xi=Yi(2),Qi=Yi(3),Ji=Yi(4),Ki=Yi(5),ea=Yi(6);$i.range,Zi.range,Xi.range,Qi.range,Ji.range,Ki.range,ea.range;var ta=Ii((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}));ta.range;var na=Ii((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));na.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ii((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null},na.range;var ra=Ii((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*Di)}),(function(e,t){return(t-e)/Di}),(function(e){return e.getUTCMinutes()}));ra.range;var ia=Ii((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*Vi)}),(function(e,t){return(t-e)/Vi}),(function(e){return e.getUTCHours()}));ia.range;var aa=Ii((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Li}),(function(e){return e.getUTCDate()-1}));function oa(e){return Ii((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/Ri}))}aa.range;var sa=oa(0),la=oa(1),fa=oa(2),ca=oa(3),ua=oa(4),da=oa(5),ha=oa(6);sa.range,la.range,fa.range,ca.range,ua.range,da.range,ha.range;var pa=Ii((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}));pa.range;var ba=Ii((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));function ma(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ga(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function va(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}ba.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ii((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null},ba.range;var _a,ya,wa,xa={"-":"",_:" ",0:"0"},Aa=/^\s*\d+/,Sa=/^%/,ka=/[\\^$*+?|[\]().{}]/g;function za(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function Fa(e){return e.replace(ka,"\\$&")}function Oa(e){return new RegExp("^(?:"+e.map(Fa).join("|")+")","i")}function Wa(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function Ma(e,t,n){var r=Aa.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ta(e,t,n){var r=Aa.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Ea(e,t,n){var r=Aa.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Ca(e,t,n){var r=Aa.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Ha(e,t,n){var r=Aa.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Ba(e,t,n){var r=Aa.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ia(e,t,n){var r=Aa.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Pa(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Na(e,t,n){var r=Aa.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Da(e,t,n){var r=Aa.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Va(e,t,n){var r=Aa.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function La(e,t,n){var r=Aa.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Ra(e,t,n){var r=Aa.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function qa(e,t,n){var r=Aa.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Ga(e,t,n){var r=Aa.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ja(e,t,n){var r=Aa.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Ua(e,t,n){var r=Aa.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ya(e,t,n){var r=Sa.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function $a(e,t,n){var r=Aa.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Za(e,t,n){var r=Aa.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Xa(e,t){return za(e.getDate(),t,2)}function Qa(e,t){return za(e.getHours(),t,2)}function Ja(e,t){return za(e.getHours()%12||12,t,2)}function Ka(e,t){return za(1+Ui.count(na(e),e),t,3)}function eo(e,t){return za(e.getMilliseconds(),t,3)}function to(e,t){return eo(e,t)+"000"}function no(e,t){return za(e.getMonth()+1,t,2)}function ro(e,t){return za(e.getMinutes(),t,2)}function io(e,t){return za(e.getSeconds(),t,2)}function ao(e){var t=e.getDay();return 0===t?7:t}function oo(e,t){return za($i.count(na(e)-1,e),t,2)}function so(e){var t=e.getDay();return t>=4||0===t?Ji(e):Ji.ceil(e)}function lo(e,t){return e=so(e),za(Ji.count(na(e),e)+(4===na(e).getDay()),t,2)}function fo(e){return e.getDay()}function co(e,t){return za(Zi.count(na(e)-1,e),t,2)}function uo(e,t){return za(e.getFullYear()%100,t,2)}function ho(e,t){return za((e=so(e)).getFullYear()%100,t,2)}function po(e,t){return za(e.getFullYear()%1e4,t,4)}function bo(e,t){var n=e.getDay();return za((e=n>=4||0===n?Ji(e):Ji.ceil(e)).getFullYear()%1e4,t,4)}function mo(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+za(t/60|0,"0",2)+za(t%60,"0",2)}function go(e,t){return za(e.getUTCDate(),t,2)}function vo(e,t){return za(e.getUTCHours(),t,2)}function _o(e,t){return za(e.getUTCHours()%12||12,t,2)}function yo(e,t){return za(1+aa.count(ba(e),e),t,3)}function wo(e,t){return za(e.getUTCMilliseconds(),t,3)}function xo(e,t){return wo(e,t)+"000"}function Ao(e,t){return za(e.getUTCMonth()+1,t,2)}function So(e,t){return za(e.getUTCMinutes(),t,2)}function ko(e,t){return za(e.getUTCSeconds(),t,2)}function zo(e){var t=e.getUTCDay();return 0===t?7:t}function Fo(e,t){return za(sa.count(ba(e)-1,e),t,2)}function Oo(e){var t=e.getUTCDay();return t>=4||0===t?ua(e):ua.ceil(e)}function Wo(e,t){return e=Oo(e),za(ua.count(ba(e),e)+(4===ba(e).getUTCDay()),t,2)}function Mo(e){return e.getUTCDay()}function To(e,t){return za(la.count(ba(e)-1,e),t,2)}function Eo(e,t){return za(e.getUTCFullYear()%100,t,2)}function Co(e,t){return za((e=Oo(e)).getUTCFullYear()%100,t,2)}function Ho(e,t){return za(e.getUTCFullYear()%1e4,t,4)}function Bo(e,t){var n=e.getUTCDay();return za((e=n>=4||0===n?ua(e):ua.ceil(e)).getUTCFullYear()%1e4,t,4)}function Io(){return"+0000"}function Po(){return"%"}function No(e){return+e}function Do(e){return Math.floor(+e/1e3)}!function(e){_a=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,f=Oa(i),c=Wa(i),u=Oa(a),d=Wa(a),h=Oa(o),p=Wa(o),b=Oa(s),m=Wa(s),g=Oa(l),v=Wa(l),_={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Xa,e:Xa,f:to,g:ho,G:bo,H:Qa,I:Ja,j:Ka,L:eo,m:no,M:ro,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:No,s:Do,S:io,u:ao,U:oo,V:lo,w:fo,W:co,x:null,X:null,y:uo,Y:po,Z:mo,"%":Po},y={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:go,e:go,f:xo,g:Co,G:Bo,H:vo,I:_o,j:yo,L:wo,m:Ao,M:So,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:No,s:Do,S:ko,u:zo,U:Fo,V:Wo,w:Mo,W:To,x:null,X:null,y:Eo,Y:Ho,Z:Io,"%":Po},w={a:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=b.exec(t.slice(n));return r?(e.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return S(e,t,n,r)},d:Va,e:Va,f:Ua,g:Ia,G:Ba,H:Ra,I:Ra,j:La,L:ja,m:Da,M:qa,p:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:Na,Q:$a,s:Za,S:Ga,u:Ta,U:Ea,V:Ca,w:Ma,W:Ha,x:function(e,t,r){return S(e,n,t,r)},X:function(e,t,n){return S(e,r,t,n)},y:Ia,Y:Ba,Z:Pa,"%":Ya};function x(e,t){return function(n){var r,i,a,o=[],s=-1,l=0,f=e.length;for(n instanceof Date||(n=new Date(+n));++s<f;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(i=xa[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),l=s+1);return o.push(e.slice(l,s)),o.join("")}}function A(e,t){return function(n){var r,i,a=va(1900,void 0,1);if(S(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=ga(va(a.y,0,1))).getUTCDay(),r=i>4||0===i?la.ceil(r):la(r),r=aa.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=ma(va(a.y,0,1))).getDay(),r=i>4||0===i?Zi.ceil(r):Zi(r),r=Ui.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?ga(va(a.y,0,1)).getUTCDay():ma(va(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,ga(a)):ma(a)}}function S(e,t,n,r){for(var i,a,o=0,s=t.length,l=n.length;o<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=w[i in xa?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=x(n,_),_.X=x(r,_),_.c=x(t,_),y.x=x(n,y),y.X=x(r,y),y.c=x(t,y),{format:function(e){var t=x(e+="",_);return t.toString=function(){return e},t},parse:function(e){var t=A(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=x(e+="",y);return t.toString=function(){return e},t},utcParse:function(e){var t=A(e+="",!0);return t.toString=function(){return e},t}}}(e),_a.format,_a.parse,ya=_a.utcFormat,wa=_a.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Vo="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||ya(Vo),+new Date("2000-01-01T00:00:00.000Z")||wa(Vo);const Lo=e=>{const t=Ci().exponent(2).range([0,1]).domain([-1,1]),n=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}(0,e).map((t=>t/e-.5));n.push(.5);const r=new Array(2*n.length);return n.forEach(((e,n)=>{r[2*n]=[t(2*e),.5],r[2*n+1]=[t(2*e),-.5]})),r};class Ro extends kr{create(){this.updateColor(),this.updateWidth(),this.updateArrow(),this.updateCurveLineGeometry()}initPrograms(){const{reglInstance:e,config:t,store:n,data:r,points:i}=this,{pointsTextureSize:a}=n,o=[];r.completeLinks.forEach((e=>{const t=r.getSortedIndexById(e.target),n=r.getSortedIndexById(e.source),i=n%a,s=Math.floor(n/a),l=t%a,f=Math.floor(t/a);o.push([i,s]),o.push([l,f])}));const s=e.buffer(o);this.drawCurveCommand=e({vert:"precision highp float;\n#define GLSLIFY 1\nattribute vec2 position,pointA,pointB;attribute vec4 color;attribute float width;attribute float arrow;uniform sampler2D positions;uniform sampler2D particleGreyoutStatus;uniform mat3 transform;uniform float pointsTextureSize;uniform float widthScale;uniform float nodeSizeScale;uniform float arrowSizeScale;uniform float spaceSize;uniform vec2 screenSize;uniform float ratio;uniform vec2 linkVisibilityDistanceRange;uniform float linkVisibilityMinTransparency;uniform float greyoutOpacity;uniform bool scaleNodesOnZoom;uniform float curvedWeight;uniform float curvedLinkControlPointDistance;uniform float curvedLinkSegments;varying vec4 rgbaColor;varying vec2 pos;varying float arrowLength;varying float linkWidthArrowWidthRatio;varying float smoothWidthRatio;varying float useArrow;float map(float value,float min1,float max1,float min2,float max2){return min2+(value-min1)*(max2-min2)/(max1-min1);}vec2 conicParametricCurve(vec2 A,vec2 B,vec2 ControlPoint,float t,float w){vec2 divident=(1.0-t)*(1.0-t)*A+2.0*(1.0-t)*t*w*ControlPoint+t*t*B;float divisor=(1.0-t)*(1.0-t)+2.0*(1.0-t)*t*w+t*t;return divident/divisor;}void main(){pos=position;vec2 pointTexturePosA=(pointA+0.5)/pointsTextureSize;vec2 pointTexturePosB=(pointB+0.5)/pointsTextureSize;vec4 greyoutStatusA=texture2D(particleGreyoutStatus,pointTexturePosA);vec4 greyoutStatusB=texture2D(particleGreyoutStatus,pointTexturePosB);vec4 pointPositionA=texture2D(positions,pointTexturePosA);vec4 pointPositionB=texture2D(positions,pointTexturePosB);vec2 a=pointPositionA.xy;vec2 b=pointPositionB.xy;vec2 xBasis=b-a;vec2 yBasis=normalize(vec2(-xBasis.y,xBasis.x));float linkDist=length(xBasis);float h=curvedLinkControlPointDistance;vec2 controlPoint=(a+b)/2.0+yBasis*linkDist*h;float linkDistPx=linkDist*transform[0][0];float linkWidth=width*widthScale;float k=2.0;float arrowWidth=max(5.0,linkWidth*k);arrowWidth*=arrowSizeScale;float arrowWidthPx=arrowWidth/transform[0][0];arrowLength=min(0.3,(0.866*arrowWidthPx*2.0)/linkDist);float smoothWidth=2.0;float arrowExtraWidth=arrowWidth-linkWidth;linkWidth+=smoothWidth/2.0;useArrow=arrow;if(useArrow>0.5){linkWidth+=arrowExtraWidth;}smoothWidthRatio=smoothWidth/linkWidth;linkWidthArrowWidthRatio=arrowExtraWidth/linkWidth;float linkWidthPx=linkWidth/transform[0][0];vec3 rgbColor=color.rgb;float opacity=color.a*max(linkVisibilityMinTransparency,map(linkDistPx,linkVisibilityDistanceRange.g,linkVisibilityDistanceRange.r,0.0,1.0));if(greyoutStatusA.r>0.0||greyoutStatusB.r>0.0){opacity*=greyoutOpacity;}rgbaColor=vec4(rgbColor,opacity);float t=position.x;float w=curvedWeight;float tPrev=t-1.0/curvedLinkSegments;float tNext=t+1.0/curvedLinkSegments;vec2 pointCurr=conicParametricCurve(a,b,controlPoint,t,w);vec2 pointPrev=conicParametricCurve(a,b,controlPoint,max(0.0,tPrev),w);vec2 pointNext=conicParametricCurve(a,b,controlPoint,min(tNext,1.0),w);vec2 xBasisCurved=pointNext-pointPrev;vec2 yBasisCurved=normalize(vec2(-xBasisCurved.y,xBasisCurved.x));pointCurr+=yBasisCurved*linkWidthPx*position.y;vec2 p=2.0*pointCurr/spaceSize-1.0;p*=spaceSize/screenSize;vec3 final=transform*vec3(p,1);gl_Position=vec4(final.rg,0,1);}",frag:"precision highp float;\n#define GLSLIFY 1\nvarying vec4 rgbaColor;varying vec2 pos;varying float arrowLength;varying float linkWidthArrowWidthRatio;varying float smoothWidthRatio;varying float useArrow;float map(float value,float min1,float max1,float min2,float max2){return min2+(value-min1)*(max2-min2)/(max1-min1);}void main(){float opacity=1.0;vec3 color=rgbaColor.rgb;float smoothDelta=smoothWidthRatio/2.0;if(useArrow>0.5){float end_arrow=0.5+arrowLength/2.0;float start_arrow=end_arrow-arrowLength;float arrowWidthDelta=linkWidthArrowWidthRatio/2.0;float linkOpacity=rgbaColor.a*smoothstep(0.5-arrowWidthDelta,0.5-arrowWidthDelta-smoothDelta,abs(pos.y));float arrowOpacity=1.0;if(pos.x>start_arrow&&pos.x<start_arrow+arrowLength){float xmapped=map(pos.x,start_arrow,end_arrow,0.0,1.0);arrowOpacity=rgbaColor.a*smoothstep(xmapped-smoothDelta,xmapped,map(abs(pos.y),0.5,0.0,0.0,1.0));if(linkOpacity!=arrowOpacity){linkOpacity+=arrowOpacity;}}opacity=linkOpacity;}else opacity=rgbaColor.a*smoothstep(0.5,0.5-smoothDelta,abs(pos.y));gl_FragColor=vec4(color,opacity);}",attributes:{position:{buffer:()=>this.curveLineBuffer,divisor:0},pointA:{buffer:()=>s,divisor:1,offset:0*Float32Array.BYTES_PER_ELEMENT,stride:4*Float32Array.BYTES_PER_ELEMENT},pointB:{buffer:()=>s,divisor:1,offset:2*Float32Array.BYTES_PER_ELEMENT,stride:4*Float32Array.BYTES_PER_ELEMENT},color:{buffer:()=>this.colorBuffer,divisor:1,offset:0*Float32Array.BYTES_PER_ELEMENT,stride:4*Float32Array.BYTES_PER_ELEMENT},width:{buffer:()=>this.widthBuffer,divisor:1,offset:0*Float32Array.BYTES_PER_ELEMENT,stride:1*Float32Array.BYTES_PER_ELEMENT},arrow:{buffer:()=>this.arrowBuffer,divisor:1,offset:0*Float32Array.BYTES_PER_ELEMENT,stride:1*Float32Array.BYTES_PER_ELEMENT}},uniforms:{positions:()=>null==i?void 0:i.currentPositionFbo,particleGreyoutStatus:()=>null==i?void 0:i.greyoutStatusFbo,transform:()=>n.transform,pointsTextureSize:()=>n.pointsTextureSize,nodeSizeScale:()=>t.nodeSizeScale,widthScale:()=>t.linkWidthScale,arrowSizeScale:()=>t.linkArrowsSizeScale,spaceSize:()=>n.adjustedSpaceSize,screenSize:()=>n.screenSize,ratio:()=>t.pixelRatio,linkVisibilityDistanceRange:()=>t.linkVisibilityDistanceRange,linkVisibilityMinTransparency:()=>t.linkVisibilityMinTransparency,greyoutOpacity:()=>t.linkGreyoutOpacity,scaleNodesOnZoom:()=>t.scaleNodesOnZoom,curvedWeight:()=>t.curvedLinkWeight,curvedLinkControlPointDistance:()=>t.curvedLinkControlPointDistance,curvedLinkSegments:()=>{var e;return t.curvedLinks?null!==(e=t.curvedLinkSegments)&&void 0!==e?e:gr.curvedLinkSegments:1}},cull:{enable:!0,face:"back"},blend:{enable:!0,func:{dstRGB:"one minus src alpha",srcRGB:"src alpha",dstAlpha:"one minus src alpha",srcAlpha:"one"},equation:{rgb:"add",alpha:"add"}},depth:{enable:!1,mask:!1},count:()=>{var e,t;return null!==(t=null===(e=this.curveLineGeometry)||void 0===e?void 0:e.length)&&void 0!==t?t:0},instances:()=>r.linksNumber,primitive:"triangle strip"})}draw(){var e;this.colorBuffer&&this.widthBuffer&&this.curveLineBuffer&&(null===(e=this.drawCurveCommand)||void 0===e||e.call(this))}updateColor(){const{reglInstance:e,config:t,data:n}=this,r=[];n.completeLinks.forEach((e=>{var n;const i=xr(null!==(n=wr(e,t.linkColor))&&void 0!==n?n:mr);r.push(i)})),this.colorBuffer=e.buffer(r)}updateWidth(){const{reglInstance:e,config:t,data:n}=this,r=[];n.completeLinks.forEach((e=>{const n=wr(e,t.linkWidth);r.push([null!=n?n:1])})),this.widthBuffer=e.buffer(r)}updateArrow(){const{reglInstance:e,config:t,data:n}=this,r=[];n.completeLinks.forEach((e=>{var n;const i=null!==(n=wr(e,t.linkArrows))&&void 0!==n?n:gr.arrowLinks;r.push([i?1:0])})),this.arrowBuffer=e.buffer(r)}updateCurveLineGeometry(){const{reglInstance:e,config:{curvedLinks:t,curvedLinkSegments:n}}=this;this.curveLineGeometry=Lo(t?null!=n?n:gr.curvedLinkSegments:1),this.curveLineBuffer=e.buffer(this.curveLineGeometry)}destroy(){Wr(this.colorBuffer),Wr(this.widthBuffer),Wr(this.arrowBuffer),Wr(this.curveLineBuffer)}}function qo(e,t,n){const r=wr(e,t,n);return null!=r?r:br}class Go extends kr{constructor(){super(...arguments),this.trackedPositionsById=new Map}create(){var e,t;const{reglInstance:n,store:r,data:i,config:a}=this,{pointsTextureSize:o,adjustedSpaceSize:s}=r;if(!o)return;const l=i.nodes.length,f=new Float32Array(o*o*4);a.disableSimulation||this.rescaleInitialNodePositions();for(let n=0;n<l;++n){const a=this.data.getSortedIndexByInputIndex(n),o=i.nodes[n];o&&void 0!==a&&(f[4*a+0]=null!==(e=o.x)&&void 0!==e?e:s*r.getRandomFloat(.495,.505),f[4*a+1]=null!==(t=o.y)&&void 0!==t?t:s*r.getRandomFloat(.495,.505))}this.currentPositionFbo=n.framebuffer({color:n.texture({data:f,shape:[o,o,4],type:"float"}),depth:!1,stencil:!1}),this.config.disableSimulation||(this.previousPositionFbo=n.framebuffer({color:n.texture({data:f,shape:[o,o,4],type:"float"}),depth:!1,stencil:!1}),this.velocityFbo=n.framebuffer({color:n.texture({data:new Float32Array(o*o*4).fill(0),shape:[o,o,4],type:"float"}),depth:!1,stencil:!1})),this.selectedFbo=n.framebuffer({color:n.texture({data:f,shape:[o,o,4],type:"float"}),depth:!1,stencil:!1}),this.hoveredFbo=n.framebuffer({shape:[2,2],colorType:"float",depth:!1,stencil:!1}),this.updateSize(),this.updateColor(),this.updateGreyoutStatus(),this.updateSampledNodesGrid()}initPrograms(){const{reglInstance:e,config:t,store:n,data:r}=this;t.disableSimulation||(this.updatePositionCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform sampler2D velocity;uniform float friction;uniform float spaceSize;varying vec2 index;void main(){vec4 pointPosition=texture2D(position,index);vec4 pointVelocity=texture2D(velocity,index);pointVelocity.rg*=friction;pointPosition.rg+=pointVelocity.rg;pointPosition.r=clamp(pointPosition.r,0.0,spaceSize);pointPosition.g=clamp(pointPosition.g,0.0,spaceSize);gl_FragColor=pointPosition;}",vert:Tr,framebuffer:()=>this.currentPositionFbo,primitive:"triangle strip",count:4,attributes:{quad:zr(e)},uniforms:{position:()=>this.previousPositionFbo,velocity:()=>this.velocityFbo,friction:()=>{var e;return null===(e=t.simulation)||void 0===e?void 0:e.friction},spaceSize:()=>n.adjustedSpaceSize}})),this.drawCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nvarying vec2 index;varying vec3 rgbColor;varying float alpha;const float smoothing=0.9;void main(){if(alpha==0.0){discard;}float r=0.0;float delta=0.0;vec2 cxy=2.0*gl_PointCoord-1.0;r=dot(cxy,cxy);float opacity=alpha*(1.0-smoothstep(smoothing,1.0,r));gl_FragColor=vec4(rgbColor,opacity);}",vert:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nattribute vec2 indexes;uniform sampler2D positions;uniform sampler2D particleColor;uniform sampler2D particleGreyoutStatus;uniform sampler2D particleSize;uniform float ratio;uniform mat3 transform;uniform float pointsTextureSize;uniform float sizeScale;uniform float spaceSize;uniform vec2 screenSize;uniform float greyoutOpacity;uniform bool scaleNodesOnZoom;uniform float maxPointSize;varying vec2 index;varying vec3 rgbColor;varying float alpha;float pointSize(float size){float pSize;if(scaleNodesOnZoom){pSize=size*ratio*transform[0][0];}else{pSize=size*ratio*min(5.0,max(1.0,transform[0][0]*0.01));}return min(pSize,maxPointSize*ratio);}void main(){index=indexes;vec4 pointPosition=texture2D(positions,(index+0.5)/pointsTextureSize);vec2 point=pointPosition.rg;vec2 p=2.0*point/spaceSize-1.0;p*=spaceSize/screenSize;vec3 final=transform*vec3(p,1);gl_Position=vec4(final.rg,0,1);vec4 pSize=texture2D(particleSize,(index+0.5)/pointsTextureSize);float size=pSize.r*sizeScale;vec4 pColor=texture2D(particleColor,(index+0.5)/pointsTextureSize);rgbColor=pColor.rgb;gl_PointSize=pointSize(size);alpha=pColor.a;vec4 greyoutStatus=texture2D(particleGreyoutStatus,(index+0.5)/pointsTextureSize);if(greyoutStatus.r>0.0){alpha*=greyoutOpacity;}}",primitive:"points",count:()=>r.nodes.length,attributes:{indexes:Fr(e,n.pointsTextureSize)},uniforms:{positions:()=>this.currentPositionFbo,particleColor:()=>this.colorFbo,particleGreyoutStatus:()=>this.greyoutStatusFbo,particleSize:()=>this.sizeFbo,ratio:()=>t.pixelRatio,sizeScale:()=>t.nodeSizeScale,pointsTextureSize:()=>n.pointsTextureSize,transform:()=>n.transform,spaceSize:()=>n.adjustedSpaceSize,screenSize:()=>n.screenSize,greyoutOpacity:()=>t.nodeGreyoutOpacity,scaleNodesOnZoom:()=>t.scaleNodesOnZoom,maxPointSize:()=>n.maxPointSize},blend:{enable:!0,func:{dstRGB:"one minus src alpha",srcRGB:"src alpha",dstAlpha:"one minus src alpha",srcAlpha:"one"},equation:{rgb:"add",alpha:"add"}},depth:{enable:!1,mask:!1}}),this.findPointsOnAreaSelectionCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform sampler2D particleSize;uniform float sizeScale;uniform float spaceSize;uniform vec2 screenSize;uniform float ratio;uniform mat3 transform;uniform vec2 selection[2];uniform bool scaleNodesOnZoom;uniform float maxPointSize;varying vec2 index;float pointSize(float size){float pSize;if(scaleNodesOnZoom){pSize=size*ratio*transform[0][0];}else{pSize=size*ratio*min(5.0,max(1.0,transform[0][0]*0.01));}return min(pSize,maxPointSize*ratio);}void main(){vec4 pointPosition=texture2D(position,index);vec2 p=2.0*pointPosition.rg/spaceSize-1.0;p*=spaceSize/screenSize;vec3 final=transform*vec3(p,1);vec4 pSize=texture2D(particleSize,index);float size=pSize.r*sizeScale;float left=2.0*(selection[0].x-0.5*pointSize(size))/screenSize.x-1.0;float right=2.0*(selection[1].x+0.5*pointSize(size))/screenSize.x-1.0;float top=2.0*(selection[0].y-0.5*pointSize(size))/screenSize.y-1.0;float bottom=2.0*(selection[1].y+0.5*pointSize(size))/screenSize.y-1.0;gl_FragColor=vec4(0.0,0.0,pointPosition.rg);if(final.x>=left&&final.x<=right&&final.y>=top&&final.y<=bottom){gl_FragColor.r=1.0;}}",vert:Tr,framebuffer:()=>this.selectedFbo,primitive:"triangle strip",count:4,attributes:{quad:zr(e)},uniforms:{position:()=>this.currentPositionFbo,particleSize:()=>this.sizeFbo,spaceSize:()=>n.adjustedSpaceSize,screenSize:()=>n.screenSize,sizeScale:()=>t.nodeSizeScale,transform:()=>n.transform,ratio:()=>t.pixelRatio,"selection[0]":()=>n.selectedArea[0],"selection[1]":()=>n.selectedArea[1],scaleNodesOnZoom:()=>t.scaleNodesOnZoom,maxPointSize:()=>n.maxPointSize}}),this.clearHoveredFboCommand=e({frag:Mr,vert:Tr,framebuffer:this.hoveredFbo,primitive:"triangle strip",count:4,attributes:{quad:zr(e)}}),this.findHoveredPointCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nvarying vec4 rgba;void main(){gl_FragColor=rgba;}",vert:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform float pointsTextureSize;uniform sampler2D particleSize;uniform float sizeScale;uniform float spaceSize;uniform vec2 screenSize;uniform float ratio;uniform mat3 transform;uniform vec2 mousePosition;uniform bool scaleNodesOnZoom;uniform float maxPointSize;attribute vec2 indexes;varying vec4 rgba;float pointSize(float size){float pSize;if(scaleNodesOnZoom){pSize=size*ratio*transform[0][0];}else{pSize=size*ratio*min(5.0,max(1.0,transform[0][0]*0.01));}return min(pSize,maxPointSize*ratio);}float euclideanDistance(float x1,float x2,float y1,float y2){return sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));}void main(){vec4 pointPosition=texture2D(position,(indexes+0.5)/pointsTextureSize);vec2 p=2.0*pointPosition.rg/spaceSize-1.0;p*=spaceSize/screenSize;vec3 final=transform*vec3(p,1);vec4 pSize=texture2D(particleSize,indexes/pointsTextureSize);float size=pSize.r*sizeScale;float pointRadius=0.5*pointSize(size);vec2 pointScreenPosition=(final.xy+1.0)*screenSize/2.0;rgba=vec4(0.0);gl_Position=vec4(0.5,0.5,0.0,1.0);if(euclideanDistance(pointScreenPosition.x,mousePosition.x,pointScreenPosition.y,mousePosition.y)<pointRadius/ratio){float index=indexes.g*pointsTextureSize+indexes.r;rgba=vec4(index,pSize.r,pointPosition.xy);gl_Position=vec4(-0.5,-0.5,0.0,1.0);}gl_PointSize=1.0;}",primitive:"points",count:()=>r.nodes.length,framebuffer:()=>this.hoveredFbo,attributes:{indexes:Fr(e,n.pointsTextureSize)},uniforms:{position:()=>this.currentPositionFbo,particleSize:()=>this.sizeFbo,ratio:()=>t.pixelRatio,sizeScale:()=>t.nodeSizeScale,pointsTextureSize:()=>n.pointsTextureSize,transform:()=>n.transform,spaceSize:()=>n.adjustedSpaceSize,screenSize:()=>n.screenSize,scaleNodesOnZoom:()=>t.scaleNodesOnZoom,mousePosition:()=>n.screenMousePosition,maxPointSize:()=>n.maxPointSize},depth:{enable:!1,mask:!1}}),this.clearSampledNodesFboCommand=e({frag:Mr,vert:Tr,framebuffer:()=>this.sampledNodesFbo,primitive:"triangle strip",count:4,attributes:{quad:zr(e)}}),this.fillSampledNodesFboCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nvarying vec4 rgba;void main(){gl_FragColor=rgba;}",vert:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform float pointsTextureSize;uniform float spaceSize;uniform vec2 screenSize;uniform mat3 transform;attribute vec2 indexes;varying vec4 rgba;void main(){vec4 pointPosition=texture2D(position,(indexes+0.5)/pointsTextureSize);vec2 p=2.0*pointPosition.rg/spaceSize-1.0;p*=spaceSize/screenSize;vec3 final=transform*vec3(p,1);vec2 pointScreenPosition=(final.xy+1.0)*screenSize/2.0;float index=indexes.g*pointsTextureSize+indexes.r;rgba=vec4(index,1.0,pointPosition.xy);float i=(pointScreenPosition.x+0.5)/screenSize.x;float j=(pointScreenPosition.y+0.5)/screenSize.y;gl_Position=vec4(2.0*vec2(i,j)-1.0,0.0,1.0);gl_PointSize=1.0;}",primitive:"points",count:()=>r.nodes.length,framebuffer:()=>this.sampledNodesFbo,attributes:{indexes:Fr(e,n.pointsTextureSize)},uniforms:{position:()=>this.currentPositionFbo,pointsTextureSize:()=>n.pointsTextureSize,transform:()=>n.transform,spaceSize:()=>n.adjustedSpaceSize,screenSize:()=>n.screenSize},depth:{enable:!1,mask:!1}}),this.drawHighlightedCommand=e({frag:"precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;uniform float width;varying vec2 pos;varying float particleOpacity;const float smoothing=1.05;void main(){vec2 cxy=pos;float r=dot(cxy,cxy);float opacity=smoothstep(r,r*smoothing,1.0);float stroke=smoothstep(width,width*smoothing,r);gl_FragColor=vec4(color.rgb,opacity*stroke*color.a*particleOpacity);}",vert:"precision mediump float;\n#define GLSLIFY 1\nattribute vec2 quad;uniform sampler2D positions;uniform sampler2D particleColor;uniform sampler2D particleGreyoutStatus;uniform sampler2D particleSize;uniform mat3 transform;uniform float pointsTextureSize;uniform float sizeScale;uniform float spaceSize;uniform vec2 screenSize;uniform bool scaleNodesOnZoom;uniform float pointIndex;uniform float maxPointSize;uniform vec4 color;uniform float greyoutOpacity;varying vec2 pos;varying float particleOpacity;float pointSize(float size){float pSize;if(scaleNodesOnZoom){pSize=size*transform[0][0];}else{pSize=size*min(5.0,max(1.0,transform[0][0]*0.01));}return min(pSize,maxPointSize);}const float relativeRingRadius=1.3;void main(){pos=quad;vec2 ij=vec2(mod(pointIndex,pointsTextureSize),floor(pointIndex/pointsTextureSize))+0.5;vec4 pointPosition=texture2D(positions,ij/pointsTextureSize);vec4 pSize=texture2D(particleSize,ij/pointsTextureSize);vec4 pColor=texture2D(particleColor,ij/pointsTextureSize);particleOpacity=pColor.a;vec4 greyoutStatus=texture2D(particleGreyoutStatus,ij/pointsTextureSize);if(greyoutStatus.r>0.0){particleOpacity*=greyoutOpacity;}float size=(pointSize(pSize.r*sizeScale)*relativeRingRadius)/transform[0][0];float radius=size*0.5;vec2 a=pointPosition.xy;vec2 b=pointPosition.xy+vec2(0.0,radius);vec2 xBasis=b-a;vec2 yBasis=normalize(vec2(-xBasis.y,xBasis.x));vec2 point=a+xBasis*quad.x+yBasis*radius*quad.y;vec2 p=2.0*point/spaceSize-1.0;p*=spaceSize/screenSize;vec3 final=transform*vec3(p,1);gl_Position=vec4(final.rg,0,1);}",attributes:{quad:zr(e)},primitive:"triangle strip",count:4,uniforms:{color:e.prop("color"),width:e.prop("width"),pointIndex:e.prop("pointIndex"),positions:()=>this.currentPositionFbo,particleColor:()=>this.colorFbo,particleSize:()=>this.sizeFbo,sizeScale:()=>t.nodeSizeScale,pointsTextureSize:()=>n.pointsTextureSize,transform:()=>n.transform,spaceSize:()=>n.adjustedSpaceSize,screenSize:()=>n.screenSize,scaleNodesOnZoom:()=>t.scaleNodesOnZoom,maxPointSize:()=>n.maxPointSize,particleGreyoutStatus:()=>this.greyoutStatusFbo,greyoutOpacity:()=>t.nodeGreyoutOpacity},blend:{enable:!0,func:{dstRGB:"one minus src alpha",srcRGB:"src alpha",dstAlpha:"one minus src alpha",srcAlpha:"one"},equation:{rgb:"add",alpha:"add"}},depth:{enable:!1,mask:!1}}),this.trackPointsCommand=e({frag:"#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\nuniform sampler2D position;uniform sampler2D trackedIndices;uniform float pointsTextureSize;varying vec2 index;void main(){vec4 trackedPointIndicies=texture2D(trackedIndices,index);if(trackedPointIndicies.r<0.0)discard;vec4 pointPosition=texture2D(position,(trackedPointIndicies.rg+0.5)/pointsTextureSize);gl_FragColor=vec4(pointPosition.rg,1.0,1.0);}",vert:Tr,framebuffer:()=>this.trackedPositionsFbo,primitive:"triangle strip",count:4,attributes:{quad:zr(e)},uniforms:{position:()=>this.currentPositionFbo,trackedIndices:()=>this.trackedIndicesFbo,pointsTextureSize:()=>n.pointsTextureSize}})}updateColor(){const{reglInstance:e,config:t,store:{pointsTextureSize:n},data:r}=this;n&&(this.colorFbo=function(e,t,n,r){var i;if(0===n)return;const a=new Float32Array(n*n*4);for(let t=0;t<e.nodes.length;++t){const n=e.getSortedIndexByInputIndex(t),o=e.nodes[t];if(o&&void 0!==n){const e=xr(null!==(i=wr(o,r,t))&&void 0!==i?i:pr);a[4*n+0]=e[0],a[4*n+1]=e[1],a[4*n+2]=e[2],a[4*n+3]=e[3]}}const o=t.texture({data:a,width:n,height:n,type:"float"});return t.framebuffer({color:o,depth:!1,stencil:!1})}(r,e,n,t.nodeColor))}updateGreyoutStatus(){const{reglInstance:e,store:t}=this;this.greyoutStatusFbo=function(e,t,n){if(0===n)return;const r=new Float32Array(n*n*4).fill(e?1:0);if(e)for(const t of e)r[4*t]=0;const i=t.texture({data:r,width:n,height:n,type:"float"});return t.framebuffer({color:i,depth:!1,stencil:!1})}(t.selectedIndices,e,t.pointsTextureSize)}updateSize(){const{reglInstance:e,config:t,store:{pointsTextureSize:n},data:r}=this;n&&(this.sizeByIndex=new Float32Array(r.nodes.length),this.sizeFbo=function(e,t,n,r,i){if(0===n)return;const a=e.nodes.length,o=new Float32Array(n*n*4);for(let t=0;t<a;++t){const n=e.getSortedIndexByInputIndex(t),a=e.nodes[t];if(a&&void 0!==n){const e=qo(a,r,t);o[4*n]=e,i[t]=e}}const s=t.texture({data:o,width:n,height:n,type:"float"});return t.framebuffer({color:s,depth:!1,stencil:!1})}(r,e,n,t.nodeSize,this.sizeByIndex))}updateSampledNodesGrid(){const{store:{screenSize:e},config:{nodeSamplingDistance:t},reglInstance:n}=this,r=null!=t?t:Math.min(...e)/2,i=Math.ceil(e[0]/r),a=Math.ceil(e[1]/r);Or(this.sampledNodesFbo),this.sampledNodesFbo=n.framebuffer({shape:[i,a],depth:!1,stencil:!1,colorType:"float"})}trackPoints(){var e;this.trackedIndicesFbo&&this.trackedPositionsFbo&&(null===(e=this.trackPointsCommand)||void 0===e||e.call(this))}draw(){var e,t,n;const{config:{renderHoveredNodeRing:r,renderHighlightedNodeRing:i},store:a}=this;null===(e=this.drawCommand)||void 0===e||e.call(this),(null!=r?r:i)&&a.hoveredNode&&(null===(t=this.drawHighlightedCommand)||void 0===t||t.call(this,{width:.85,color:a.hoveredNodeRingColor,pointIndex:a.hoveredNode.index})),a.focusedNode&&(null===(n=this.drawHighlightedCommand)||void 0===n||n.call(this,{width:.75,color:a.focusedNodeRingColor,pointIndex:a.focusedNode.index}))}updatePosition(){var e;null===(e=this.updatePositionCommand)||void 0===e||e.call(this),this.swapFbo()}findPointsOnAreaSelection(){var e;null===(e=this.findPointsOnAreaSelectionCommand)||void 0===e||e.call(this)}findHoveredPoint(){var e,t;null===(e=this.clearHoveredFboCommand)||void 0===e||e.call(this),null===(t=this.findHoveredPointCommand)||void 0===t||t.call(this)}getNodeRadiusByIndex(e){var t;return null===(t=this.sizeByIndex)||void 0===t?void 0:t[e]}trackNodesByIds(e){this.trackedIds=e.length?e:void 0,this.trackedPositionsById.clear();const t=e.map((e=>this.data.getSortedIndexById(e))).filter((e=>void 0!==e));Or(this.trackedIndicesFbo),this.trackedIndicesFbo=void 0,Or(this.trackedPositionsFbo),this.trackedPositionsFbo=void 0,t.length&&(this.trackedIndicesFbo=function(e,t,n){const r=Math.ceil(Math.sqrt(e.length));if(0===r)return;const i=new Float32Array(r*r*4).fill(-1);for(const[n,r]of e.entries())void 0!==r&&(i[4*n]=r%t,i[4*n+1]=Math.floor(r/t),i[4*n+2]=0,i[4*n+3]=0);const a=n.texture({data:i,width:r,height:r,type:"float"});return n.framebuffer({color:a,depth:!1,stencil:!1})}(t,this.store.pointsTextureSize,this.reglInstance),this.trackedPositionsFbo=function(e,t){const n=Math.ceil(Math.sqrt(e.length));return t.framebuffer({shape:[n,n],depth:!1,stencil:!1,colorType:"float"})}(t,this.reglInstance)),this.trackPoints()}getTrackedPositions(){if(!this.trackedIds)return this.trackedPositionsById;const e=Ar(this.reglInstance,this.trackedPositionsFbo);return this.trackedIds.forEach(((t,n)=>{const r=e[4*n],i=e[4*n+1];void 0!==r&&void 0!==i&&this.trackedPositionsById.set(t,[r,i])})),this.trackedPositionsById}getSampledNodePositionsMap(){var e,t,n;const r=new Map;if(!this.sampledNodesFbo)return r;null===(e=this.clearSampledNodesFboCommand)||void 0===e||e.call(this),null===(t=this.fillSampledNodesFboCommand)||void 0===t||t.call(this);const i=Ar(this.reglInstance,this.sampledNodesFbo);for(let e=0;e<i.length/4;e++){const t=i[4*e],a=!!i[4*e+1],o=i[4*e+2],s=i[4*e+3];if(a&&void 0!==t&&void 0!==o&&void 0!==s){const e=this.data.getInputIndexBySortedIndex(t);if(void 0!==e){const t=null===(n=this.data.getNodeByIndex(e))||void 0===n?void 0:n.id;void 0!==t&&r.set(t,[o,s])}}}return r}destroy(){Or(this.currentPositionFbo),Or(this.previousPositionFbo),Or(this.velocityFbo),Or(this.selectedFbo),Or(this.colorFbo),Or(this.sizeFbo),Or(this.greyoutStatusFbo),Or(this.hoveredFbo),Or(this.trackedIndicesFbo),Or(this.trackedPositionsFbo)}swapFbo(){const e=this.previousPositionFbo;this.previousPositionFbo=this.currentPositionFbo,this.currentPositionFbo=e}rescaleInitialNodePositions(){const{nodes:e}=this.data,{spaceSize:t}=this.config;if(0===e.length)return;const n=e.map((e=>e.x)).filter((e=>void 0!==e));if(0===n.length)return;const r=e.map((e=>e.y)).filter((e=>void 0!==e));if(0===r.length)return;const[i,a]=Qr(n);if(void 0===i||void 0===a)return;const[o,s]=Qr(r);if(void 0===o||void 0===s)return;const l=a-i,f=s-o,c=Math.max(l,f),u=(c-l)/2,d=(c-f)/2,h=Oi().range([0,null!=t?t:gr.spaceSize]).domain([i-u,a+u]),p=Oi().range([0,null!=t?t:gr.spaceSize]).domain([o-d,s+d]);e.forEach((e=>{e.x=h(e.x),e.y=p(e.y)}))}}var jo="undefined"!=typeof Float32Array?Float32Array:Array;function Uo(){var e=new jo(9);return jo!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Yo(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],f=t[6],c=t[7],u=t[8],d=n[0],h=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=d*r+h*o+f,e[7]=d*i+h*s+c,e[8]=d*a+h*l+u,e}function $o(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Zo(){var e=new jo(3);return jo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Xo(e,t,n){var r=new jo(3);return r[0]=e,r[1]=t,r[2]=n,r}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function Qo(){var e=new jo(4);return jo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}Zo(),function(){var e,t=(e=new jo(4),jo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e)}();Zo(),Xo(1,0,0),Xo(0,1,0),Qo(),Qo(),Uo(),function(){var e,t=(e=new jo(2),jo!=Float32Array&&(e[0]=0,e[1]=0),e)}();var Jo={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function a(e,t){var n=new r(e),a=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:n&&n.amd?n((function(){return a})):this.alea=a}(0,e,!1)}(Jo);var Ko={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function a(e,t){var n=new r(e),a=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:n&&n.amd?n((function(){return a})):this.xor128=a}(0,e,!1)}(Ko);var es={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function a(e,t){var n=new r(e),a=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:n&&n.amd?n((function(){return a})):this.xorwow=a}(0,e,!1)}(es);var ts={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function a(e,t){null==e&&(e=+new Date);var n=new r(e),a=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,a&&(a.x&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:n&&n.amd?n((function(){return a})):this.xorshift7=a}(0,e,!1)}(ts);var ns={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,a=t.i;return t.w=r=r+1640531527|0,n=i[a+34&127],e=i[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,i,a,o,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,a=-32;a<l;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(o=o+1640531527|0,i=0==(n=s[127&a]^=r+o)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,a=512;a>0;--a)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=o,e.X=s,e.i=i}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function a(e,t){null==e&&(e=+new Date);var n=new r(e),a=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,a&&(a.X&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:n&&n.amd?n((function(){return a})):this.xor4096=a}(0,e,!1)}(ns);var rs={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function a(e,t){var n=new r(e),a=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:n&&n.amd?n((function(){return a})):this.tychei=a}(0,e,!1)}(rs);var is={exports:{}};!function(e){!function(t,n,r){var i,a=256,o="random",s=r.pow(a,6),l=r.pow(2,52),f=2*l,c=a-1;function u(e,c,u){var g=[],v=b(p((c=1==c?{entropy:!0}:c||{}).entropy?[e,m(n)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(a):(e=new Uint8Array(a),(t.crypto||t.msCrypto).getRandomValues(e)),m(e)}catch(e){var r=t.navigator,o=r&&r.plugins;return[+new Date,t,o,t.screen,m(n)]}}():e,3),g),_=new d(g),y=function(){for(var e=_.g(6),t=s,n=0;e<l;)e=(e+n)*a,t*=a,n=_.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|_.g(4)},y.quick=function(){return _.g(4)/4294967296},y.double=y,b(m(_.S),n),(c.pass||u||function(e,t,n,i){return i&&(i.S&&h(i,_),e.state=function(){return h(_,{})}),n?(r[o]=e,t):e})(y,v,"global"in c?c.global:this==r,c.state)}function d(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);i<a;)s[i]=i++;for(i=0;i<a;i++)s[i]=s[o=c&o+e[i%n]+(t=s[i])],s[o]=t;(r.g=function(e){for(var t,n=0,i=r.i,o=r.j,s=r.S;e--;)t=s[i=c&i+1],n=n*a+s[c&(s[i]=s[o=c&o+t])+(s[o]=t)];return r.i=i,r.j=o,n})(a)}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(p(e[n],t-1))}catch(e){}return r.length?r:"string"==i?e:e+"\0"}function b(e,t){for(var n,r=e+"",i=0;i<r.length;)t[c&i]=c&(n^=19*t[c&i])+r.charCodeAt(i++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(b(r.random(),n),e.exports){e.exports=u;try{i=require("crypto")}catch(e){}}else r["seed"+o]=u}("undefined"!=typeof self?self:ur,[],Math)}(is);var as=Jo.exports,os=Ko.exports,ss=es.exports,ls=ts.exports,fs=ns.exports,cs=rs.exports,us=is.exports;us.alea=as,us.xor128=os,us.xorwow=ss,us.xorshift7=ls,us.xor4096=fs,us.tychei=cs;var ds=us;function hs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?a:String(a)),r)}var i,a}function ps(e,t,n){return t&&hs(e.prototype,t),n&&hs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bs(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ms(e,t)}function ms(e,t){return ms=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ms(e,t)}var gs=function(){function e(){}return e.prototype._seed=function(e,t){if(e===(e||0))return e;for(var n=""+e,r=0,i=0;i<n.length;++i)r^=0|n.charCodeAt(i);return r},e}(),vs=function(e){function t(t,n){var r;return(r=e.call(this)||this)._rng=void 0,r.seed(t,n),r}bs(t,e);var n=t.prototype;return n.next=function(){return this._rng()},n.seed=function(e,t){this._rng=e},n.clone=function(e,n){return new t(this._rng,n)},ps(t,[{key:"name",get:function(){return"function"}}]),t}(gs),_s=function(){var e=[].slice.call(arguments),t=e[0],n=void 0===t?"default":t;switch(typeof n){case"object":if(n instanceof gs)return n;break;case"function":return new vs(n);default:return new vs(ds.apply(void 0,e))}throw new Error('invalid RNG "'+n+'"')},ys=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),function(){return e.next()*(n-t)+t}};function ws(e){return new xs(e)}var xs=function(e){var t=this;this.n=void 0,this.isInt=function(){if(Number.isInteger(t.n))return t;throw new Error("Expected number to be an integer, got "+t.n)},this.isPositive=function(){if(t.n>0)return t;throw new Error("Expected number to be positive, got "+t.n)},this.lessThan=function(e){if(t.n<e)return t;throw new Error("Expected number to be less than "+e+", got "+t.n)},this.greaterThanOrEqual=function(e){if(t.n>=e)return t;throw new Error("Expected number to be greater than or equal to "+e+", got "+t.n)},this.greaterThan=function(e){if(t.n>e)return t;throw new Error("Expected number to be greater than "+e+", got "+t.n)},this.n=e},As=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),void 0===n&&(n=void 0===t?1:t,t=0),ws(t).isInt(),ws(n).isInt(),function(){return Math.floor(e.next()*(n-t+1)+t)}},Ss=function(e){return function(){return e.next()>=.5}},ks=[0,0,.6931471805599453,1.791759469228055,3.1780538303479458,4.787491742782046,6.579251212010101,8.525161361065415,10.60460290274525,12.801827480081469],zs=function(e){return ks[e]},Fs=function(e){function t(){return e.apply(this,arguments)||this}bs(t,e);var n=t.prototype;return n.next=function(){return Math.random()},n.seed=function(e,t){},n.clone=function(){return new t},ps(t,[{key:"name",get:function(){return"default"}}]),t}(gs),Os=function(){function e(e){var t=this;this._rng=void 0,this._patch=void 0,this._cache={},this.next=function(){return t._rng.next()},this.float=function(e,n){return t.uniform(e,n)()},this.int=function(e,n){return t.uniformInt(e,n)()},this.integer=function(e,n){return t.uniformInt(e,n)()},this.bool=function(){return t.uniformBoolean()()},this.boolean=function(){return t.uniformBoolean()()},this.uniform=function(e,n){return t._memoize("uniform",ys,e,n)},this.uniformInt=function(e,n){return t._memoize("uniformInt",As,e,n)},this.uniformBoolean=function(){return t._memoize("uniformBoolean",Ss)},this.normal=function(e,n){return function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),function(){var r,i,a;do{a=(r=2*e.next()-1)*r+(i=2*e.next()-1)*i}while(!a||a>1);return t+n*i*Math.sqrt(-2*Math.log(a)/a)}}(t,e,n)},this.logNormal=function(e,n){return function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=1);var r=e.normal(t,n);return function(){return Math.exp(r())}}(t,e,n)},this.bernoulli=function(e){return function(e,t){return void 0===t&&(t=.5),ws(t).greaterThanOrEqual(0).lessThan(1),function(){return Math.floor(e.next()+t)}}(t,e)},this.binomial=function(e,n){return function(e,t,n){return void 0===t&&(t=1),void 0===n&&(n=.5),ws(t).isInt().isPositive(),ws(n).greaterThanOrEqual(0).lessThan(1),function(){for(var r=0,i=0;r++<t;)e.next()<n&&i++;return i}}(t,e,n)},this.geometric=function(e){return function(e,t){void 0===t&&(t=.5),ws(t).greaterThan(0).lessThan(1);var n=1/Math.log(1-t);return function(){return Math.floor(1+Math.log(e.next())*n)}}(t,e)},this.poisson=function(e){return function(e,t){if(void 0===t&&(t=1),ws(t).isPositive(),t<10){var n=Math.exp(-t);return function(){for(var r=n,i=0,a=e.next();a>r;)a-=r,r=t*r/++i;return i}}var r=Math.sqrt(t),i=.931+2.53*r,a=.02483*i-.059,o=1.1239+1.1328/(i-3.4),s=.9277-3.6224/(i-2);return function(){for(;;){var n=void 0,l=e.next();if(l<=.86*s)return n=l/s-.43,Math.floor((2*a/(.5-Math.abs(n))+i)*n+t+.445);l>=s?n=e.next()-.5:(n=((n=l/s-.93)<0?-.5:.5)-n,l=e.next()*s);var f=.5-Math.abs(n);if(!(f<.013&&l>f)){var c=Math.floor((2*a/f+i)*n+t+.445);if(l=l*o/(a/(f*f)+i),c>=10){var u=(c+.5)*Math.log(t/c)-t-.9189385332046727+c-(1/12-(1/360-1/(1260*c*c))/(c*c))/c;if(Math.log(l*r)<=u)return c}else if(c>=0){var d,h=null!=(d=zs(c))?d:0;if(Math.log(l)<=c*Math.log(t)-t-h)return c}}}}}(t,e)},this.exponential=function(e){return function(e,t){return void 0===t&&(t=1),ws(t).isPositive(),function(){return-Math.log(1-e.next())/t}}(t,e)},this.irwinHall=function(e){return function(e,t){return void 0===t&&(t=1),ws(t).isInt().greaterThanOrEqual(0),function(){for(var n=0,r=0;r<t;++r)n+=e.next();return n}}(t,e)},this.bates=function(e){return function(e,t){void 0===t&&(t=1),ws(t).isInt().isPositive();var n=e.irwinHall(t);return function(){return n()/t}}(t,e)},this.pareto=function(e){return function(e,t){void 0===t&&(t=1),ws(t).greaterThanOrEqual(0);var n=1/t;return function(){return 1/Math.pow(1-e.next(),n)}}(t,e)},e&&e instanceof gs?this.use(e):this.use(new Fs),this._cache={}}var t=e.prototype;return t.clone=function(){var t=[].slice.call(arguments);return t.length?new e(_s.apply(void 0,t)):new e(this.rng.clone())},t.use=function(){this._rng=_s.apply(void 0,[].slice.call(arguments))},t.patch=function(){if(this._patch)throw new Error("Math.random already patched");this._patch=Math.random,Math.random=this.uniform()},t.unpatch=function(){this._patch&&(Math.random=this._patch,delete this._patch)},t.choice=function(e){if(!Array.isArray(e))throw new Error("Random.choice expected input to be an array, got "+typeof e);var t=null==e?void 0:e.length;return t>0?e[this.uniformInt(0,t-1)()]:void 0},t._memoize=function(e,t){var n=[].slice.call(arguments,2),r=""+n.join(";"),i=this._cache[e];return void 0!==i&&i.key===r||(i={key:r,distribution:t.apply(void 0,[this].concat(n))},this._cache[e]=i),i.distribution},ps(e,[{key:"rng",get:function(){return this._rng}}]),e}();new Os;const Ws=.001;class Ms{constructor(){this.pointsTextureSize=0,this.linksTextureSize=0,this.alpha=1,this.transform=Uo(),this.backgroundColor=[0,0,0,0],this.screenSize=[0,0],this.mousePosition=[0,0],this.screenMousePosition=[0,0],this.selectedArea=[[0,0],[0,0]],this.isSimulationRunning=!1,this.simulationProgress=0,this.selectedIndices=null,this.maxPointSize=64,this.hoveredNode=void 0,this.focusedNode=void 0,this.adjustedSpaceSize=gr.spaceSize,this.hoveredNodeRingColor=[1,1,1,.7],this.focusedNodeRingColor=[1,1,1,.95],this.alphaTarget=0,this.scaleNodeX=Oi(),this.scaleNodeY=Oi(),this.random=new Os,this.alphaDecay=e=>1-Math.pow(Ws,1/e)}addRandomSeed(e){this.random=this.random.clone(e)}getRandomFloat(e,t){return this.random.float(e,t)}adjustSpaceSize(e,t){e>=t?(this.adjustedSpaceSize=t/2,console.warn(`The \`spaceSize\` has been reduced to ${this.adjustedSpaceSize} due to WebGL limits`)):this.adjustedSpaceSize=e}updateScreenSize(e,t){const{adjustedSpaceSize:n}=this;this.screenSize=[e,t],this.scaleNodeX.domain([0,n]).range([(e-n)/2,(e+n)/2]),this.scaleNodeY.domain([n,0]).range([(t-n)/2,(t+n)/2])}scaleX(e){return this.scaleNodeX(e)}scaleY(e){return this.scaleNodeY(e)}setHoveredNodeRingColor(e){const t=xr(e);this.hoveredNodeRingColor[0]=t[0],this.hoveredNodeRingColor[1]=t[1],this.hoveredNodeRingColor[2]=t[2]}setFocusedNodeRingColor(e){const t=xr(e);this.focusedNodeRingColor[0]=t[0],this.focusedNodeRingColor[1]=t[1],this.focusedNodeRingColor[2]=t[2]}setFocusedNode(e,t){this.focusedNode=e&&void 0!==t?{node:e,index:t}:void 0}addAlpha(e){return(this.alphaTarget-this.alpha)*this.alphaDecay(e)}}var Ts="http://www.w3.org/1999/xhtml",Es={svg:"http://www.w3.org/2000/svg",xhtml:Ts,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cs(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Es.hasOwnProperty(t)?{space:Es[t],local:e}:e}function Hs(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ts&&t.documentElement.namespaceURI===Ts?t.createElement(e):t.createElementNS(n,e)}}function Bs(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Is(e){var t=Cs(e);return(t.local?Bs:Hs)(t)}function Ps(){}function Ns(e){return null==e?Ps:function(){return this.querySelector(e)}}function Ds(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Vs(){return[]}function Ls(e){return function(t){return t.matches(e)}}var Rs=Array.prototype.find;function qs(){return this.firstElementChild}var Gs=Array.prototype.filter;function js(){return this.children}function Us(e){return new Array(e.length)}function Ys(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function $s(e,t,n,r,i,a){for(var o,s=0,l=t.length,f=a.length;s<f;++s)(o=t[s])?(o.__data__=a[s],r[s]=o):n[s]=new Ys(e,a[s]);for(;s<l;++s)(o=t[s])&&(i[s]=o)}function Zs(e,t,n,r,i,a,o){var s,l,f,c=new Map,u=t.length,d=a.length,h=new Array(u);for(s=0;s<u;++s)(l=t[s])&&(h[s]=f=o.call(l,l.__data__,s,t)+"",c.has(f)?i[s]=l:c.set(f,l));for(s=0;s<d;++s)f=o.call(e,a[s],s,a)+"",(l=c.get(f))?(r[s]=l,l.__data__=a[s],c.delete(f)):n[s]=new Ys(e,a[s]);for(s=0;s<u;++s)(l=t[s])&&c.get(h[s])===l&&(i[s]=l)}function Xs(e){return e.__data__}function Qs(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Js(e){return function(){this.removeAttribute(e)}}function Ks(e){return function(){this.removeAttributeNS(e.space,e.local)}}function el(e,t){return function(){this.setAttribute(e,t)}}function tl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function nl(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function rl(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function il(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function al(e){return function(){this.style.removeProperty(e)}}function ol(e,t,n){return function(){this.style.setProperty(e,t,n)}}function sl(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ll(e){return function(){delete this[e]}}function fl(e,t){return function(){this[e]=t}}function cl(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ul(e){return e.trim().split(/^|\s+/)}function dl(e){return e.classList||new hl(e)}function hl(e){this._node=e,this._names=ul(e.getAttribute("class")||"")}function pl(e,t){for(var n=dl(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function bl(e,t){for(var n=dl(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ml(e){return function(){pl(this,e)}}function gl(e){return function(){bl(this,e)}}function vl(e,t){return function(){(t.apply(this,arguments)?pl:bl)(this,e)}}function _l(){this.textContent=""}function yl(e){return function(){this.textContent=e}}function wl(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function xl(){this.innerHTML=""}function Al(e){return function(){this.innerHTML=e}}function Sl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function kl(){this.nextSibling&&this.parentNode.appendChild(this)}function zl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fl(){return null}function Ol(){var e=this.parentNode;e&&e.removeChild(this)}function Wl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ml(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Tl(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function El(e,t,n){return function(){var r,i=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=t);this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(r):this.__on=[r]}}function Cl(e,t,n){var r=il(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Hl(e,t){return function(){return Cl(this,e,t)}}function Bl(e,t){return function(){return Cl(this,e,t.apply(this,arguments))}}Ys.prototype={constructor:Ys,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},hl.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Il=[null];function Pl(e,t){this._groups=e,this._parents=t}function Nl(e){return"string"==typeof e?new Pl([[document.querySelector(e)]],[document.documentElement]):new Pl([[e]],Il)}Pl.prototype={constructor:Pl,select:function(e){"function"!=typeof e&&(e=Ns(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=t[i],l=s.length,f=r[i]=new Array(l),c=0;c<l;++c)(a=s[c])&&(o=e.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),f[c]=o);return new Pl(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:Ds(t)}}(e):function(e){return null==e?Vs:function(){return this.querySelectorAll(e)}}(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o,s=t[a],l=s.length,f=0;f<l;++f)(o=s[f])&&(r.push(e.call(o,o.__data__,f,s)),i.push(o));return new Pl(r,i)},selectChild:function(e){return this.select(null==e?qs:function(e){return function(){return Rs.call(this.children,e)}}("function"==typeof e?e:Ls(e)))},selectChildren:function(e){return this.selectAll(null==e?js:function(e){return function(){return Gs.call(this.children,e)}}("function"==typeof e?e:Ls(e)))},filter:function(e){"function"!=typeof e&&(e=function(e){return function(){return this.matches(e)}}(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,l=r[i]=[],f=0;f<s;++f)(a=o[f])&&e.call(a,a.__data__,f,o)&&l.push(a);return new Pl(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Xs);var n,r=t?Zs:$s,i=this._parents,a=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var o=a.length,s=new Array(o),l=new Array(o),f=new Array(o),c=0;c<o;++c){var u=i[c],d=a[c],h=d.length,p=Ds(e.call(u,u&&u.__data__,c,i)),b=p.length,m=l[c]=new Array(b),g=s[c]=new Array(b);r(u,d,m,g,f[c]=new Array(h),p,t);for(var v,_,y=0,w=0;y<b;++y)if(v=m[y]){for(y>=w&&(w=y+1);!(_=g[w])&&++w<b;);v._next=_||null}}return(s=new Pl(s,i))._enter=l,s._exit=f,s},enter:function(){return new Pl(this._enter||this._groups.map(Us),this._parents)},exit:function(){return new Pl(this._exit||this._groups.map(Us),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){if(!(e instanceof Pl))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,f=t[s],c=n[s],u=f.length,d=o[s]=new Array(u),h=0;h<u;++h)(l=f[h]||c[h])&&(d[h]=l);for(;s<r;++s)o[s]=t[s];return new Pl(o,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Qs);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],l=s.length,f=i[a]=new Array(l),c=0;c<l;++c)(o=s[c])&&(f[c]=o);f.sort(t)}return new Pl(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=Cs(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Ks:Js:"function"==typeof t?n.local?rl:nl:n.local?tl:el)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?al:"function"==typeof t?sl:ol)(e,t,null==n?"":n)):function(e,t){return e.style.getPropertyValue(t)||il(e).getComputedStyle(e,null).getPropertyValue(t)}(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?ll:"function"==typeof t?cl:fl)(e,t)):this.node()[e]},classed:function(e,t){var n=ul(e+"");if(arguments.length<2){for(var r=dl(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?vl:t?ml:gl)(n,t))},text:function(e){return arguments.length?this.each(null==e?_l:("function"==typeof e?wl:yl)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?xl:("function"==typeof e?Sl:Al)(e)):this.node().innerHTML},raise:function(){return this.each(kl)},lower:function(){return this.each(zl)},append:function(e){var t="function"==typeof e?e:Is(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:Is(e),r=null==t?Fl:"function"==typeof t?t:Ns(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Ol)},clone:function(e){return this.select(e?Ml:Wl)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),o=a.length;if(!(arguments.length<2)){for(s=t?El:Tl,r=0;r<o;++r)this.each(s(a[r],t,n));return this}var s=this.node().__on;if(s)for(var l,f=0,c=s.length;f<c;++f)for(r=0,l=s[f];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?Bl:Hl)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)}};var Dl=0;function Vl(){this._="@"+(++Dl).toString(36)}function Ll(e){e.preventDefault(),e.stopImmediatePropagation()}Vl.prototype={constructor:Vl,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var Rl=e=>()=>e;function ql(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Gl(e,t,n){this.k=e,this.x=t,this.y=n}Gl.prototype={constructor:Gl,scale:function(e){return 1===e?this:new Gl(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Gl(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var jl=new Gl(1,0,0);function Ul(e){e.stopImmediatePropagation()}function Yl(e){e.preventDefault(),e.stopImmediatePropagation()}function $l(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Zl(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Xl(){return this.__zoom||jl}function Ql(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Jl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kl(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function ef(){var e,t,n,r=$l,i=Zl,a=Kl,o=Ql,s=Jl,l=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],c=250,u=Cn,d=ve("start","zoom","end"),h=500,p=150,b=0,m=10;function g(e){e.property("__zoom",Xl).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",z).filter(s).on("touchstart.zoom",F).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Gl(t,e.x,e.y)}function _(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new Gl(e.k,r,i)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,t,n,r){e.on("start.zoom",(function(){x(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,a=arguments,o=x(e,a).event(r),s=i.apply(e,a),l=null==n?y(s):"function"==typeof n?n.apply(e,a):n,f=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=e.__zoom,d="function"==typeof t?t.apply(e,a):t,h=u(c.invert(l).concat(f/c.k),d.invert(l).concat(f/d.k));return function(e){if(1===e)e=d;else{var t=h(e),n=f/t[2];e=new Gl(n,l[0]-t[0]*n,l[1]-t[1]*n)}o.zoom(null,e)}}))}function x(e,t,n){return!n&&e.__zooming||new A(e,t)}function A(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function S(e,...t){if(r.apply(this,arguments)){var n=x(this,t).event(e),i=this.__zoom,s=Math.max(l[0],Math.min(l[1],i.k*Math.pow(2,o.apply(this,arguments)))),c=me(e);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=i.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(i.k===s)return;n.mouse=[c,i.invert(c)],et(this),n.start()}Yl(e),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),p),n.zoom("mouse",a(_(v(i,s),n.mouse[0],n.mouse[1]),n.extent,f))}}function k(e,...t){if(!n&&r.apply(this,arguments)){var i=e.currentTarget,o=x(this,t,!0).event(e),s=he(e.view).on("mousemove.zoom",(function(e){if(Yl(e),!o.moved){var t=e.clientX-c,n=e.clientY-u;o.moved=t*t+n*n>b}o.event(e).zoom("mouse",a(_(o.that.__zoom,o.mouse[0]=me(e,i),o.mouse[1]),o.extent,f))}),!0).on("mouseup.zoom",(function(e){s.on("mousemove.zoom mouseup.zoom",null),function(e,t){var n=e.document.documentElement,r=Nl(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ll,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(e.view,o.moved),Yl(e),o.event(e).end()}),!0),l=me(e,i),c=e.clientX,u=e.clientY;!function(e){var t=e.document.documentElement,n=Nl(e).on("dragstart.drag",Ll,!0);"onselectstart"in t?n.on("selectstart.drag",Ll,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}(e.view),Ul(e),o.mouse=[l,this.__zoom.invert(l)],et(this),o.start()}}function z(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,o=me(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(o),l=n.k*(e.shiftKey?.5:2),u=a(_(v(n,l),o,s),i.apply(this,t),f);Yl(e),c>0?he(this).transition().duration(c).call(w,u,o,e):he(this).call(g.transform,u,o,e)}}function F(n,...i){if(r.apply(this,arguments)){var a,o,s,l,f=n.touches,c=f.length,u=x(this,i,n.changedTouches.length===c).event(n);for(Ul(n),o=0;o<c;++o)l=[l=me(s=f[o],this),this.__zoom.invert(l),s.identifier],u.touch0?u.touch1||u.touch0[2]===l[2]||(u.touch1=l,u.taps=0):(u.touch0=l,a=!0,u.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(u.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),h)),et(this),u.start())}}function O(e,...t){if(this.__zooming){var n,r,i,o,s=x(this,t).event(e),l=e.changedTouches,c=l.length;for(Yl(e),n=0;n<c;++n)i=me(r=l[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var u=s.touch0[0],d=s.touch0[1],h=s.touch1[0],p=s.touch1[1],b=(b=h[0]-u[0])*b+(b=h[1]-u[1])*b,m=(m=p[0]-d[0])*m+(m=p[1]-d[1])*m;r=v(r,Math.sqrt(b/m)),i=[(u[0]+h[0])/2,(u[1]+h[1])/2],o=[(d[0]+p[0])/2,(d[1]+p[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],o=s.touch0[1]}s.zoom("touch",a(_(r,i,o),s.extent,f))}}function W(e,...r){if(this.__zooming){var i,a,o=x(this,r).event(e),s=e.changedTouches,l=s.length;for(Ul(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),h),i=0;i<l;++i)a=s[i],o.touch0&&o.touch0[2]===a.identifier?delete o.touch0:o.touch1&&o.touch1[2]===a.identifier&&delete o.touch1;if(o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0)o.touch0[1]=this.__zoom.invert(o.touch0[0]);else if(o.end(),2===o.taps&&(a=me(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<m)){var f=he(this).on("dblclick.zoom");f&&f.apply(this,arguments)}}}return g.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property("__zoom",Xl),e!==i?w(e,t,n,r):i.interrupt().each((function(){x(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},g.scaleBy=function(e,t,n,r){g.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,r)},g.scaleTo=function(e,t,n,r){g.transform(e,(function(){var e=i.apply(this,arguments),r=this.__zoom,o=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(o),l="function"==typeof t?t.apply(this,arguments):t;return a(_(v(r,l),o,s),e,f)}),n,r)},g.translateBy=function(e,t,n,r){g.transform(e,(function(){return a(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),f)}),null,r)},g.translateTo=function(e,t,n,r,o){g.transform(e,(function(){var e=i.apply(this,arguments),o=this.__zoom,s=null==r?y(e):"function"==typeof r?r.apply(this,arguments):r;return a(jl.translate(s[0],s[1]).scale(o.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,f)}),r,o)},A.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=he(this.that).datum();d.call(e,this.that,new ql(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:d}),t)}},g.wheelDelta=function(e){return arguments.length?(o="function"==typeof e?e:Rl(+e),g):o},g.filter=function(e){return arguments.length?(r="function"==typeof e?e:Rl(!!e),g):r},g.touchable=function(e){return arguments.length?(s="function"==typeof e?e:Rl(!!e),g):s},g.extent=function(e){return arguments.length?(i="function"==typeof e?e:Rl([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):i},g.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],g):[l[0],l[1]]},g.translateExtent=function(e){return arguments.length?(f[0][0]=+e[0][0],f[1][0]=+e[1][0],f[0][1]=+e[0][1],f[1][1]=+e[1][1],g):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},g.constrain=function(e){return arguments.length?(a=e,g):a},g.duration=function(e){return arguments.length?(c=+e,g):c},g.interpolate=function(e){return arguments.length?(u=e,g):u},g.on=function(){var e=d.on.apply(d,arguments);return e===d?g:e},g.clickDistance=function(e){return arguments.length?(b=(e=+e)*e,g):Math.sqrt(b)},g.tapDistance=function(e){return arguments.length?(m=+e,g):m},g}Gl.prototype;class tf{constructor(e,t){this.eventTransform=jl,this.behavior=ef().scaleExtent([.001,1/0]).on("start",(e=>{var t,n,r;this.isRunning=!0;const i=!!e.sourceEvent;null===(r=null===(n=null===(t=this.config)||void 0===t?void 0:t.events)||void 0===n?void 0:n.onZoomStart)||void 0===r||r.call(n,e,i)})).on("zoom",(e=>{var t,n,r;this.eventTransform=e.transform;const{eventTransform:{x:i,y:a,k:o},store:{transform:s,screenSize:l}}=this,f=l[0],c=l[1];var u,d,h;d=f,h=c,(u=s)[0]=2/d,u[1]=0,u[2]=0,u[3]=0,u[4]=-2/h,u[5]=0,u[6]=-1,u[7]=1,u[8]=1,Yo(s,s,[i,a]),$o(s,s,[o,o]),Yo(s,s,[f/2,c/2]),$o(s,s,[f/2,c/2]),$o(s,s,[1,-1]);const p=!!e.sourceEvent;null===(r=null===(n=null===(t=this.config)||void 0===t?void 0:t.events)||void 0===n?void 0:n.onZoom)||void 0===r||r.call(n,e,p)})).on("end",(e=>{var t,n,r;this.isRunning=!1;const i=!!e.sourceEvent;null===(r=null===(n=null===(t=this.config)||void 0===t?void 0:t.events)||void 0===n?void 0:n.onZoomEnd)||void 0===r||r.call(n,e,i)})),this.isRunning=!1,this.store=e,this.config=t}getTransform(e,t,n=.1){if(0===e.length)return this.eventTransform;const{store:{screenSize:r}}=this,i=r[0],a=r[1],o=Qr(e.map((e=>e[0]))),s=Qr(e.map((e=>e[1])));o[0]=this.store.scaleX(o[0]),o[1]=this.store.scaleX(o[1]),s[0]=this.store.scaleY(s[0]),s[1]=this.store.scaleY(s[1]);const l=i*(1-2*n)/(o[1]-o[0]),f=a*(1-2*n)/(s[0]-s[1]),c=function(e,t,n){return Math.min(Math.max(e,t),n)}(null!=t?t:Math.min(l,f),...this.behavior.scaleExtent()),u=i/2-(o[1]+o[0])/2*c,d=a/2-(s[1]+s[0])/2*c;return jl.translate(u,d).scale(c)}getDistanceToPoint(e){const{x:t,y:n,k:r}=this.eventTransform,i=this.getTransform([e],r),a=t-i.x,o=n-i.y;return Math.sqrt(a*a+o*o)}getMiddlePointTransform(e){const{store:{screenSize:t},eventTransform:{x:n,y:r,k:i}}=this,a=t[0],o=t[1],s=(o/2-r)/i,l=a/2-1*(((a/2-n)/i+this.store.scaleX(e[0]))/2),f=o/2-1*((s+this.store.scaleY(e[1]))/2);return jl.translate(l,f).scale(1)}convertScreenToSpacePosition(e){const{eventTransform:{x:t,y:n,k:r},store:{screenSize:i}}=this,a=i[0],o=i[1],s=[(e[0]-t)/r,o-(e[1]-n)/r];return s[0]-=(a-this.store.adjustedSpaceSize)/2,s[1]-=(o-this.store.adjustedSpaceSize)/2,s}convertSpaceToScreenPosition(e){return[this.eventTransform.applyX(this.store.scaleX(e[0])),this.eventTransform.applyY(this.store.scaleY(e[1]))]}convertSpaceToScreenRadius(e){const{config:{scaleNodesOnZoom:t},store:{maxPointSize:n},eventTransform:{k:r}}=this;let i=2*e;return i*=t?r:Math.min(5,Math.max(1,.01*r)),Math.min(i,n)/2}}const nf={"3e771157d23b4793771f65d83e6387262ed73d488209157f19a7fa027bddd71b":function(e,t,n){var r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E;return r=e.gl,e.context,e.strings,i=e.next,a=e.current,e.draw,e.elements,e.buffer,e.shader,o=e.attributes,s=e.vao,e.uniforms,l=e.framebuffer,e.extensions,e.timer,e.isBufferArgs,i.blend_color,a.blend_color,i.blend_equation,a.blend_equation,i.blend_func,a.blend_func,i.depth_range,a.depth_range,i.colorMask,a.colorMask,i.polygonOffset_offset,a.polygonOffset_offset,i.sample_coverage,a.sample_coverage,i.stencil_func,a.stencil_func,i.stencil_opFront,a.stencil_opFront,i.stencil_opBack,a.stencil_opBack,i.scissor_box,a.scissor_box,i.viewport,a.viewport,f=i.blend_color,c=a.blend_color,u=i.blend_equation,d=a.blend_equation,h=i.blend_func,p=a.blend_func,b=i.depth_range,m=a.depth_range,g=i.colorMask,v=a.colorMask,_=i.polygonOffset_offset,y=a.polygonOffset_offset,w=i.sample_coverage,x=a.sample_coverage,A=i.stencil_func,S=a.stencil_func,k=i.stencil_opFront,z=a.stencil_opFront,F=i.stencil_opBack,O=a.stencil_opBack,W=i.scissor_box,M=a.scissor_box,T=i.viewport,E=a.viewport,{poll:function(){var e,t,n,o,s,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z;a.dirty=!1,t=i.dither,n=i.blend_enable,o=i.depth_enable,s=i.cull_enable,C=i.polygonOffset_enable,H=i.sample_alpha,B=i.sample_enable,I=i.stencil_enable,P=i.scissor_enable,N=i.depth_func,D=a.depth_func,V=i.depth_mask,L=a.depth_mask,R=i.cull_face,q=a.cull_face,G=i.frontFace,j=a.frontFace,U=i.lineWidth,Y=a.lineWidth,$=i.stencil_mask,Z=a.stencil_mask,(e=l.next)!==l.cur&&(e?r.bindFramebuffer(36160,e.framebuffer):r.bindFramebuffer(36160,null),l.cur=e),t!==a.dither&&(t?r.enable(3024):r.disable(3024),a.dither=t),n!==a.blend_enable&&(n?r.enable(3042):r.disable(3042),a.blend_enable=n),o!==a.depth_enable&&(o?r.enable(2929):r.disable(2929),a.depth_enable=o),s!==a.cull_enable&&(s?r.enable(2884):r.disable(2884),a.cull_enable=s),C!==a.polygonOffset_enable&&(C?r.enable(32823):r.disable(32823),a.polygonOffset_enable=C),H!==a.sample_alpha&&(H?r.enable(32926):r.disable(32926),a.sample_alpha=H),B!==a.sample_enable&&(B?r.enable(32928):r.disable(32928),a.sample_enable=B),I!==a.stencil_enable&&(I?r.enable(2960):r.disable(2960),a.stencil_enable=I),P!==a.scissor_enable&&(P?r.enable(3089):r.disable(3089),a.scissor_enable=P),f[0]===c[0]&&f[1]===c[1]&&f[2]===c[2]&&f[3]===c[3]||(r.blendColor(f[0],f[1],f[2],f[3]),c[0]=f[0],c[1]=f[1],c[2]=f[2],c[3]=f[3]),u[0]===d[0]&&u[1]===d[1]||(r.blendEquationSeparate(u[0],u[1]),d[0]=u[0],d[1]=u[1]),h[0]===p[0]&&h[1]===p[1]&&h[2]===p[2]&&h[3]===p[3]||(r.blendFuncSeparate(h[0],h[1],h[2],h[3]),p[0]=h[0],p[1]=h[1],p[2]=h[2],p[3]=h[3]),N!==D&&(r.depthFunc(N),a.depth_func=N),b[0]===m[0]&&b[1]===m[1]||(r.depthRange(b[0],b[1]),m[0]=b[0],m[1]=b[1]),V!==L&&(r.depthMask(V),a.depth_mask=V),g[0]===v[0]&&g[1]===v[1]&&g[2]===v[2]&&g[3]===v[3]||(r.colorMask(g[0],g[1],g[2],g[3]),v[0]=g[0],v[1]=g[1],v[2]=g[2],v[3]=g[3]),R!==q&&(r.cullFace(R),a.cull_face=R),G!==j&&(r.frontFace(G),a.frontFace=G),U!==Y&&(r.lineWidth(U),a.lineWidth=U),_[0]===y[0]&&_[1]===y[1]||(r.polygonOffset(_[0],_[1]),y[0]=_[0],y[1]=_[1]),w[0]===x[0]&&w[1]===x[1]||(r.sampleCoverage(w[0],w[1]),x[0]=w[0],x[1]=w[1]),$!==Z&&(r.stencilMask($),a.stencil_mask=$),A[0]===S[0]&&A[1]===S[1]&&A[2]===S[2]||(r.stencilFunc(A[0],A[1],A[2]),S[0]=A[0],S[1]=A[1],S[2]=A[2]),k[0]===z[0]&&k[1]===z[1]&&k[2]===z[2]&&k[3]===z[3]||(r.stencilOpSeparate(k[0],k[1],k[2],k[3]),z[0]=k[0],z[1]=k[1],z[2]=k[2],z[3]=k[3]),F[0]===O[0]&&F[1]===O[1]&&F[2]===O[2]&&F[3]===O[3]||(r.stencilOpSeparate(F[0],F[1],F[2],F[3]),O[0]=F[0],O[1]=F[1],O[2]=F[2],O[3]=F[3]),W[0]===M[0]&&W[1]===M[1]&&W[2]===M[2]&&W[3]===M[3]||(r.scissor(W[0],W[1],W[2],W[3]),M[0]=W[0],M[1]=W[1],M[2]=W[2],M[3]=W[3]),T[0]===E[0]&&T[1]===E[1]&&T[2]===E[2]&&T[3]===E[3]||(r.viewport(T[0],T[1],T[2],T[3]),E[0]=T[0],E[1]=T[1],E[2]=T[2],E[3]=T[3])},refresh:function(){var e,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z;a.dirty=!1,B=i.dither,I=i.blend_enable,P=i.depth_enable,N=i.cull_enable,D=i.polygonOffset_enable,V=i.sample_alpha,L=i.sample_enable,R=i.stencil_enable,q=i.scissor_enable,G=i.depth_func,a.depth_func,j=i.depth_mask,a.depth_mask,U=i.cull_face,a.cull_face,Y=i.frontFace,a.frontFace,$=i.lineWidth,a.lineWidth,Z=i.stencil_mask,a.stencil_mask,(e=l.next)?r.bindFramebuffer(36160,e.framebuffer):r.bindFramebuffer(36160,null),l.cur=e,C=o,H=0;for(var X=0;X<n;++X)(H=C[X]).buffer?(r.enableVertexAttribArray(X),r.bindBuffer(34962,H.buffer.buffer),r.vertexAttribPointer(X,H.size,H.type,H.normalized,H.stride,H.offset)):(r.disableVertexAttribArray(X),r.vertexAttrib4f(X,H.x,H.y,H.z,H.w),H.buffer=null);for(X=0;X<n;++X)t.vertexAttribDivisorANGLE(X,C[X].divisor);s.currentVAO=null,s.setVAO(s.targetVAO),B?r.enable(3024):r.disable(3024),a.dither=B,I?r.enable(3042):r.disable(3042),a.blend_enable=I,P?r.enable(2929):r.disable(2929),a.depth_enable=P,N?r.enable(2884):r.disable(2884),a.cull_enable=N,D?r.enable(32823):r.disable(32823),a.polygonOffset_enable=D,V?r.enable(32926):r.disable(32926),a.sample_alpha=V,L?r.enable(32928):r.disable(32928),a.sample_enable=L,R?r.enable(2960):r.disable(2960),a.stencil_enable=R,q?r.enable(3089):r.disable(3089),a.scissor_enable=q,r.blendColor(f[0],f[1],f[2],f[3]),c[0]=f[0],c[1]=f[1],c[2]=f[2],c[3]=f[3],r.blendEquationSeparate(u[0],u[1]),d[0]=u[0],d[1]=u[1],r.blendFuncSeparate(h[0],h[1],h[2],h[3]),p[0]=h[0],p[1]=h[1],p[2]=h[2],p[3]=h[3],r.depthFunc(G),a.depth_func=G,r.depthRange(b[0],b[1]),m[0]=b[0],m[1]=b[1],r.depthMask(j),a.depth_mask=j,r.colorMask(g[0],g[1],g[2],g[3]),v[0]=g[0],v[1]=g[1],v[2]=g[2],v[3]=g[3],r.cullFace(U),a.cull_face=U,r.frontFace(Y),a.frontFace=Y,r.lineWidth($),a.lineWidth=$,r.polygonOffset(_[0],_[1]),y[0]=_[0],y[1]=_[1],r.sampleCoverage(w[0],w[1]),x[0]=w[0],x[1]=w[1],r.stencilMask(Z),a.stencil_mask=Z,r.stencilFunc(A[0],A[1],A[2]),S[0]=A[0],S[1]=A[1],S[2]=A[2],r.stencilOpSeparate(k[0],k[1],k[2],k[3]),z[0]=k[0],z[1]=k[1],z[2]=k[2],z[3]=k[3],r.stencilOpSeparate(F[0],F[1],F[2],F[3]),O[0]=F[0],O[1]=F[1],O[2]=F[2],O[3]=F[3],r.scissor(W[0],W[1],W[2],W[3]),M[0]=W[0],M[1]=W[1],M[2]=W[2],M[3]=W[3],r.viewport(T[0],T[1],T[2],T[3]),E[0]=T[0],E[1]=T[1],E[2]=T[2],E[3]=T[3]}}},cbf700f001fff25b649fba9c37fa0dc6631c1cdee318ad49473d28ec10dcee81:function(e,t,n,r,i,a,o,s){var l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L;return l=e.gl,f=e.context,e.strings,c=e.next,u=e.current,e.draw,e.elements,e.buffer,d=e.shader,e.attributes,h=e.vao,e.uniforms,p=e.framebuffer,b=e.extensions,e.timer,e.isBufferArgs,m=c.blend_color,g=u.blend_color,v=c.blend_equation,_=u.blend_equation,y=c.blend_func,w=u.blend_func,x=c.depth_range,A=u.depth_range,S=c.colorMask,k=u.colorMask,z=c.polygonOffset_offset,F=u.polygonOffset_offset,O=c.sample_coverage,W=u.sample_coverage,M=c.stencil_func,T=u.stencil_func,E=c.stencil_opFront,C=u.stencil_opFront,H=c.stencil_opBack,B=u.stencil_opBack,I=c.scissor_box,P=u.scissor_box,N=c.viewport,D=u.viewport,V={},L={},{draw:function(e){var r,i,a,o,s,I,N,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe;(b.angle_instanced_arrays,r=e.framebuffer,i=p.getFramebuffer(r),a=p.next,p.next=i,o=f.framebufferWidth,f.framebufferWidth=i?i.width:f.drawingBufferWidth,s=f.framebufferHeight,f.framebufferHeight=i?i.height:f.drawingBufferHeight,i!==p.cur&&(i?l.bindFramebuffer(36160,i.framebuffer):l.bindFramebuffer(36160,null),p.cur=i),u.dirty)&&((J=c.dither)!==u.dither&&(J?l.enable(3024):l.disable(3024),u.dither=J),(K=c.blend_enable)!==u.blend_enable&&(K?l.enable(3042):l.disable(3042),u.blend_enable=K),ee=m[0],te=m[1],ne=m[2],re=m[3],ee===g[0]&&te===g[1]&&ne===g[2]&&re===g[3]||(l.blendColor(ee,te,ne,re),g[0]=ee,g[1]=te,g[2]=ne,g[3]=re),ie=v[0],ae=v[1],ie===_[0]&&ae===_[1]||(l.blendEquationSeparate(ie,ae),_[0]=ie,_[1]=ae),oe=y[0],se=y[1],le=y[2],fe=y[3],oe===w[0]&&se===w[1]&&le===w[2]&&fe===w[3]||(l.blendFuncSeparate(oe,se,le,fe),w[0]=oe,w[1]=se,w[2]=le,w[3]=fe),(ce=c.depth_enable)!==u.depth_enable&&(ce?l.enable(2929):l.disable(2929),u.depth_enable=ce),(ue=c.depth_func)!==u.depth_func&&(l.depthFunc(ue),u.depth_func=ue),de=x[0],he=x[1],de===A[0]&&he===A[1]||(l.depthRange(de,he),A[0]=de,A[1]=he),(pe=c.depth_mask)!==u.depth_mask&&(l.depthMask(pe),u.depth_mask=pe),be=S[0],me=S[1],ge=S[2],ve=S[3],be===k[0]&&me===k[1]&&ge===k[2]&&ve===k[3]||(l.colorMask(be,me,ge,ve),k[0]=be,k[1]=me,k[2]=ge,k[3]=ve),(_e=c.cull_enable)!==u.cull_enable&&(_e?l.enable(2884):l.disable(2884),u.cull_enable=_e),(ye=c.cull_face)!==u.cull_face&&(l.cullFace(ye),u.cull_face=ye),(we=c.frontFace)!==u.frontFace&&(l.frontFace(we),u.frontFace=we),(xe=c.lineWidth)!==u.lineWidth&&(l.lineWidth(xe),u.lineWidth=xe),(Ae=c.polygonOffset_enable)!==u.polygonOffset_enable&&(Ae?l.enable(32823):l.disable(32823),u.polygonOffset_enable=Ae),Se=z[0],ke=z[1],Se===F[0]&&ke===F[1]||(l.polygonOffset(Se,ke),F[0]=Se,F[1]=ke),(ze=c.sample_alpha)!==u.sample_alpha&&(ze?l.enable(32926):l.disable(32926),u.sample_alpha=ze),(Fe=c.sample_enable)!==u.sample_enable&&(Fe?l.enable(32928):l.disable(32928),u.sample_enable=Fe),Oe=O[0],We=O[1],Oe===W[0]&&We===W[1]||(l.sampleCoverage(Oe,We),W[0]=Oe,W[1]=We),(Me=c.stencil_enable)!==u.stencil_enable&&(Me?l.enable(2960):l.disable(2960),u.stencil_enable=Me),(Te=c.stencil_mask)!==u.stencil_mask&&(l.stencilMask(Te),u.stencil_mask=Te),Ee=M[0],Ce=M[1],He=M[2],Ee===T[0]&&Ce===T[1]&&He===T[2]||(l.stencilFunc(Ee,Ce,He),T[0]=Ee,T[1]=Ce,T[2]=He),Be=E[0],Ie=E[1],Pe=E[2],Ne=E[3],Be===C[0]&&Ie===C[1]&&Pe===C[2]&&Ne===C[3]||(l.stencilOpSeparate(Be,Ie,Pe,Ne),C[0]=Be,C[1]=Ie,C[2]=Pe,C[3]=Ne),De=H[0],Ve=H[1],Le=H[2],Re=H[3],De===B[0]&&Ve===B[1]&&Le===B[2]&&Re===B[3]||(l.stencilOpSeparate(De,Ve,Le,Re),B[0]=De,B[1]=Ve,B[2]=Le,B[3]=Re),(qe=c.scissor_enable)!==u.scissor_enable&&(qe?l.enable(3089):l.disable(3089),u.scissor_enable=qe));I=f.framebufferWidth,N=f.framebufferHeight,L=f.viewportWidth,f.viewportWidth=I,R=f.viewportHeight,f.viewportHeight=N,l.viewport(0,0,I,N),D[0]=0,D[1]=0,D[2]=I,D[3]=N,q=f.framebufferWidth,G=f.framebufferHeight,l.scissor(0,0,q,G),P[0]=0,P[1]=0,P[2]=q,P[3]=G,(j=u.profile)&&(U=performance.now(),t.count++),Y=d.frag,$=d.vert,Z=d.program($,Y),l.useProgram(Z.program),h.setVAO(null),X=Z.id,(Q=V[X])?Q.call(this,e):(Q=V[X]=n(Z)).call(this,e),u.dirty=!0,h.setVAO(null),p.next=a,f.framebufferWidth=o,f.framebufferHeight=s,f.viewportWidth=L,f.viewportHeight=R,j&&(t.cpuTime+=performance.now()-U)},scope:function(e,n,s){var l,c,d,h,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T;l=e.framebuffer,c=p.getFramebuffer(l),d=p.next,p.next=c,h=f.framebufferWidth,f.framebufferWidth=c?c.width:f.drawingBufferWidth,b=f.framebufferHeight,f.framebufferHeight=c?c.height:f.drawingBufferHeight,m=f.framebufferWidth,g=f.framebufferHeight,v=f.viewportWidth,f.viewportWidth=m,_=f.viewportHeight,f.viewportHeight=g,y=N[0],N[0]=r,w=N[1],N[1]=i,x=N[2],N[2]=m,A=N[3],N[3]=g,S=f.framebufferWidth,k=f.framebufferHeight,z=I[0],I[0]=a,F=I[1],I[1]=o,O=I[2],I[2]=S,W=I[3],I[3]=k,(M=u.profile)&&(T=performance.now(),t.count++),u.dirty=!0,n(f,e,s),p.next=d,f.framebufferWidth=h,f.framebufferHeight=b,f.viewportWidth=v,f.viewportHeight=_,N[0]=y,N[1]=w,N[2]=x,N[3]=A,I[0]=z,I[1]=F,I[2]=O,I[3]=W,M&&(t.cpuTime+=performance.now()-T),u.dirty=!0},batch:function(e,n){var r,i,a,o,f,p,I,P,N,D,V,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We;(b.angle_instanced_arrays,u.dirty)&&((P=c.dither)!==u.dither&&(P?l.enable(3024):l.disable(3024),u.dither=P),(N=c.blend_enable)!==u.blend_enable&&(N?l.enable(3042):l.disable(3042),u.blend_enable=N),D=m[0],V=m[1],R=m[2],q=m[3],D===g[0]&&V===g[1]&&R===g[2]&&q===g[3]||(l.blendColor(D,V,R,q),g[0]=D,g[1]=V,g[2]=R,g[3]=q),G=v[0],j=v[1],G===_[0]&&j===_[1]||(l.blendEquationSeparate(G,j),_[0]=G,_[1]=j),U=y[0],Y=y[1],$=y[2],Z=y[3],U===w[0]&&Y===w[1]&&$===w[2]&&Z===w[3]||(l.blendFuncSeparate(U,Y,$,Z),w[0]=U,w[1]=Y,w[2]=$,w[3]=Z),(X=c.depth_enable)!==u.depth_enable&&(X?l.enable(2929):l.disable(2929),u.depth_enable=X),(Q=c.depth_func)!==u.depth_func&&(l.depthFunc(Q),u.depth_func=Q),J=x[0],K=x[1],J===A[0]&&K===A[1]||(l.depthRange(J,K),A[0]=J,A[1]=K),(ee=c.depth_mask)!==u.depth_mask&&(l.depthMask(ee),u.depth_mask=ee),te=S[0],ne=S[1],re=S[2],ie=S[3],te===k[0]&&ne===k[1]&&re===k[2]&&ie===k[3]||(l.colorMask(te,ne,re,ie),k[0]=te,k[1]=ne,k[2]=re,k[3]=ie),(ae=c.cull_enable)!==u.cull_enable&&(ae?l.enable(2884):l.disable(2884),u.cull_enable=ae),(oe=c.cull_face)!==u.cull_face&&(l.cullFace(oe),u.cull_face=oe),(se=c.frontFace)!==u.frontFace&&(l.frontFace(se),u.frontFace=se),(le=c.lineWidth)!==u.lineWidth&&(l.lineWidth(le),u.lineWidth=le),(fe=c.polygonOffset_enable)!==u.polygonOffset_enable&&(fe?l.enable(32823):l.disable(32823),u.polygonOffset_enable=fe),ce=z[0],ue=z[1],ce===F[0]&&ue===F[1]||(l.polygonOffset(ce,ue),F[0]=ce,F[1]=ue),(de=c.sample_alpha)!==u.sample_alpha&&(de?l.enable(32926):l.disable(32926),u.sample_alpha=de),(he=c.sample_enable)!==u.sample_enable&&(he?l.enable(32928):l.disable(32928),u.sample_enable=he),pe=O[0],be=O[1],pe===W[0]&&be===W[1]||(l.sampleCoverage(pe,be),W[0]=pe,W[1]=be),(me=c.stencil_enable)!==u.stencil_enable&&(me?l.enable(2960):l.disable(2960),u.stencil_enable=me),(ge=c.stencil_mask)!==u.stencil_mask&&(l.stencilMask(ge),u.stencil_mask=ge),ve=M[0],_e=M[1],ye=M[2],ve===T[0]&&_e===T[1]&&ye===T[2]||(l.stencilFunc(ve,_e,ye),T[0]=ve,T[1]=_e,T[2]=ye),we=E[0],xe=E[1],Ae=E[2],Se=E[3],we===C[0]&&xe===C[1]&&Ae===C[2]&&Se===C[3]||(l.stencilOpSeparate(we,xe,Ae,Se),C[0]=we,C[1]=xe,C[2]=Ae,C[3]=Se),ke=H[0],ze=H[1],Fe=H[2],Oe=H[3],ke===B[0]&&ze===B[1]&&Fe===B[2]&&Oe===B[3]||(l.stencilOpSeparate(ke,ze,Fe,Oe),B[0]=ke,B[1]=ze,B[2]=Fe,B[3]=Oe),(We=c.scissor_enable)!==u.scissor_enable&&(We?l.enable(3089):l.disable(3089),u.scissor_enable=We));(r=u.profile)&&(i=performance.now(),t.count+=n),a=d.frag,o=d.vert,f=d.program(o,a),l.useProgram(f.program),h.setVAO(null),p=f.id,(I=L[p])?I.call(this,e,n):(I=L[p]=s(f)).call(this,e,n),u.dirty=!0,h.setVAO(null),r&&(t.cpuTime+=performance.now()-i)}}},"8fad2284703471df7c0e0d0a7b96d983e8c53f6d707dd55d5921c1eab71f6623":function(e,t,n,r){var i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P;return i=e.gl,a=e.context,e.strings,o=e.next,s=e.current,e.draw,e.elements,e.buffer,l=e.shader,e.attributes,f=e.vao,e.uniforms,c=e.framebuffer,u=e.extensions,e.timer,e.isBufferArgs,d=o.blend_color,h=s.blend_color,p=o.blend_equation,b=s.blend_equation,m=o.blend_func,g=s.blend_func,v=o.depth_range,_=s.depth_range,y=o.colorMask,w=s.colorMask,x=o.polygonOffset_offset,A=s.polygonOffset_offset,S=o.sample_coverage,k=s.sample_coverage,z=o.stencil_func,F=s.stencil_func,O=o.stencil_opFront,W=s.stencil_opFront,M=o.stencil_opBack,T=s.stencil_opBack,E=o.scissor_box,C=s.scissor_box,H=o.viewport,B=s.viewport,I={},P={},{draw:function(e){var r,a,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re;(u.angle_instanced_arrays,(r=c.next)!==c.cur&&(r?i.bindFramebuffer(36160,r.framebuffer):i.bindFramebuffer(36160,null),c.cur=r),s.dirty)&&((q=o.dither)!==s.dither&&(q?i.enable(3024):i.disable(3024),s.dither=q),(G=o.blend_enable)!==s.blend_enable&&(G?i.enable(3042):i.disable(3042),s.blend_enable=G),j=d[0],U=d[1],Y=d[2],$=d[3],j===h[0]&&U===h[1]&&Y===h[2]&&$===h[3]||(i.blendColor(j,U,Y,$),h[0]=j,h[1]=U,h[2]=Y,h[3]=$),Z=p[0],X=p[1],Z===b[0]&&X===b[1]||(i.blendEquationSeparate(Z,X),b[0]=Z,b[1]=X),Q=m[0],J=m[1],K=m[2],ee=m[3],Q===g[0]&&J===g[1]&&K===g[2]&&ee===g[3]||(i.blendFuncSeparate(Q,J,K,ee),g[0]=Q,g[1]=J,g[2]=K,g[3]=ee),(te=o.depth_enable)!==s.depth_enable&&(te?i.enable(2929):i.disable(2929),s.depth_enable=te),(ne=o.depth_func)!==s.depth_func&&(i.depthFunc(ne),s.depth_func=ne),re=v[0],ie=v[1],re===_[0]&&ie===_[1]||(i.depthRange(re,ie),_[0]=re,_[1]=ie),(ae=o.depth_mask)!==s.depth_mask&&(i.depthMask(ae),s.depth_mask=ae),oe=y[0],se=y[1],le=y[2],fe=y[3],oe===w[0]&&se===w[1]&&le===w[2]&&fe===w[3]||(i.colorMask(oe,se,le,fe),w[0]=oe,w[1]=se,w[2]=le,w[3]=fe),(ce=o.cull_enable)!==s.cull_enable&&(ce?i.enable(2884):i.disable(2884),s.cull_enable=ce),(ue=o.cull_face)!==s.cull_face&&(i.cullFace(ue),s.cull_face=ue),(de=o.frontFace)!==s.frontFace&&(i.frontFace(de),s.frontFace=de),(he=o.lineWidth)!==s.lineWidth&&(i.lineWidth(he),s.lineWidth=he),(pe=o.polygonOffset_enable)!==s.polygonOffset_enable&&(pe?i.enable(32823):i.disable(32823),s.polygonOffset_enable=pe),be=x[0],me=x[1],be===A[0]&&me===A[1]||(i.polygonOffset(be,me),A[0]=be,A[1]=me),(ge=o.sample_alpha)!==s.sample_alpha&&(ge?i.enable(32926):i.disable(32926),s.sample_alpha=ge),(ve=o.sample_enable)!==s.sample_enable&&(ve?i.enable(32928):i.disable(32928),s.sample_enable=ve),_e=S[0],ye=S[1],_e===k[0]&&ye===k[1]||(i.sampleCoverage(_e,ye),k[0]=_e,k[1]=ye),(we=o.stencil_enable)!==s.stencil_enable&&(we?i.enable(2960):i.disable(2960),s.stencil_enable=we),(xe=o.stencil_mask)!==s.stencil_mask&&(i.stencilMask(xe),s.stencil_mask=xe),Ae=z[0],Se=z[1],ke=z[2],Ae===F[0]&&Se===F[1]&&ke===F[2]||(i.stencilFunc(Ae,Se,ke),F[0]=Ae,F[1]=Se,F[2]=ke),ze=O[0],Fe=O[1],Oe=O[2],We=O[3],ze===W[0]&&Fe===W[1]&&Oe===W[2]&&We===W[3]||(i.stencilOpSeparate(ze,Fe,Oe,We),W[0]=ze,W[1]=Fe,W[2]=Oe,W[3]=We),Me=M[0],Te=M[1],Ee=M[2],Ce=M[3],Me===T[0]&&Te===T[1]&&Ee===T[2]&&Ce===T[3]||(i.stencilOpSeparate(Me,Te,Ee,Ce),T[0]=Me,T[1]=Te,T[2]=Ee,T[3]=Ce),(He=o.scissor_enable)!==s.scissor_enable&&(He?i.enable(3089):i.disable(3089),s.scissor_enable=He),Be=E[0],Ie=E[1],Pe=E[2],Ne=E[3],Be===C[0]&&Ie===C[1]&&Pe===C[2]&&Ne===C[3]||(i.scissor(Be,Ie,Pe,Ne),C[0]=Be,C[1]=Ie,C[2]=Pe,C[3]=Ne),De=H[0],Ve=H[1],Le=H[2],Re=H[3],De===B[0]&&Ve===B[1]&&Le===B[2]&&Re===B[3]||(i.viewport(De,Ve,Le,Re),B[0]=De,B[1]=Ve,B[2]=Le,B[3]=Re),s.dirty=!1);(a=s.profile)&&(P=performance.now(),t.count++),N=l.frag,D=l.vert,V=l.program(D,N),i.useProgram(V.program),f.setVAO(null),L=V.id,(R=I[L])?R.call(this,e):(R=I[L]=n(V)).call(this,e),f.setVAO(null),a&&(t.cpuTime+=performance.now()-P)},scope:function(e,n,r){var i,o;(i=s.profile)&&(o=performance.now(),t.count++),n(a,e,r),i&&(t.cpuTime+=performance.now()-o)},batch:function(e,n){var a,I,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe;(u.angle_instanced_arrays,(a=c.next)!==c.cur&&(a?i.bindFramebuffer(36160,a.framebuffer):i.bindFramebuffer(36160,null),c.cur=a),s.dirty)&&((G=o.dither)!==s.dither&&(G?i.enable(3024):i.disable(3024),s.dither=G),(j=o.blend_enable)!==s.blend_enable&&(j?i.enable(3042):i.disable(3042),s.blend_enable=j),U=d[0],Y=d[1],$=d[2],Z=d[3],U===h[0]&&Y===h[1]&&$===h[2]&&Z===h[3]||(i.blendColor(U,Y,$,Z),h[0]=U,h[1]=Y,h[2]=$,h[3]=Z),X=p[0],Q=p[1],X===b[0]&&Q===b[1]||(i.blendEquationSeparate(X,Q),b[0]=X,b[1]=Q),J=m[0],K=m[1],ee=m[2],te=m[3],J===g[0]&&K===g[1]&&ee===g[2]&&te===g[3]||(i.blendFuncSeparate(J,K,ee,te),g[0]=J,g[1]=K,g[2]=ee,g[3]=te),(ne=o.depth_enable)!==s.depth_enable&&(ne?i.enable(2929):i.disable(2929),s.depth_enable=ne),(re=o.depth_func)!==s.depth_func&&(i.depthFunc(re),s.depth_func=re),ie=v[0],ae=v[1],ie===_[0]&&ae===_[1]||(i.depthRange(ie,ae),_[0]=ie,_[1]=ae),(oe=o.depth_mask)!==s.depth_mask&&(i.depthMask(oe),s.depth_mask=oe),se=y[0],le=y[1],fe=y[2],ce=y[3],se===w[0]&&le===w[1]&&fe===w[2]&&ce===w[3]||(i.colorMask(se,le,fe,ce),w[0]=se,w[1]=le,w[2]=fe,w[3]=ce),(ue=o.cull_enable)!==s.cull_enable&&(ue?i.enable(2884):i.disable(2884),s.cull_enable=ue),(de=o.cull_face)!==s.cull_face&&(i.cullFace(de),s.cull_face=de),(he=o.frontFace)!==s.frontFace&&(i.frontFace(he),s.frontFace=he),(pe=o.lineWidth)!==s.lineWidth&&(i.lineWidth(pe),s.lineWidth=pe),(be=o.polygonOffset_enable)!==s.polygonOffset_enable&&(be?i.enable(32823):i.disable(32823),s.polygonOffset_enable=be),me=x[0],ge=x[1],me===A[0]&&ge===A[1]||(i.polygonOffset(me,ge),A[0]=me,A[1]=ge),(ve=o.sample_alpha)!==s.sample_alpha&&(ve?i.enable(32926):i.disable(32926),s.sample_alpha=ve),(_e=o.sample_enable)!==s.sample_enable&&(_e?i.enable(32928):i.disable(32928),s.sample_enable=_e),ye=S[0],we=S[1],ye===k[0]&&we===k[1]||(i.sampleCoverage(ye,we),k[0]=ye,k[1]=we),(xe=o.stencil_enable)!==s.stencil_enable&&(xe?i.enable(2960):i.disable(2960),s.stencil_enable=xe),(Ae=o.stencil_mask)!==s.stencil_mask&&(i.stencilMask(Ae),s.stencil_mask=Ae),Se=z[0],ke=z[1],ze=z[2],Se===F[0]&&ke===F[1]&&ze===F[2]||(i.stencilFunc(Se,ke,ze),F[0]=Se,F[1]=ke,F[2]=ze),Fe=O[0],Oe=O[1],We=O[2],Me=O[3],Fe===W[0]&&Oe===W[1]&&We===W[2]&&Me===W[3]||(i.stencilOpSeparate(Fe,Oe,We,Me),W[0]=Fe,W[1]=Oe,W[2]=We,W[3]=Me),Te=M[0],Ee=M[1],Ce=M[2],He=M[3],Te===T[0]&&Ee===T[1]&&Ce===T[2]&&He===T[3]||(i.stencilOpSeparate(Te,Ee,Ce,He),T[0]=Te,T[1]=Ee,T[2]=Ce,T[3]=He),(Be=o.scissor_enable)!==s.scissor_enable&&(Be?i.enable(3089):i.disable(3089),s.scissor_enable=Be),Ie=E[0],Pe=E[1],Ne=E[2],De=E[3],Ie===C[0]&&Pe===C[1]&&Ne===C[2]&&De===C[3]||(i.scissor(Ie,Pe,Ne,De),C[0]=Ie,C[1]=Pe,C[2]=Ne,C[3]=De),Ve=H[0],Le=H[1],Re=H[2],qe=H[3],Ve===B[0]&&Le===B[1]&&Re===B[2]&&qe===B[3]||(i.viewport(Ve,Le,Re,qe),B[0]=Ve,B[1]=Le,B[2]=Re,B[3]=qe),s.dirty=!1);(I=s.profile)&&(N=performance.now(),t.count+=n),D=l.frag,V=l.vert,L=l.program(V,D),i.useProgram(L.program),f.setVAO(null),R=L.id,(q=P[R])?q.call(this,e,n):(q=P[R]=r(L)).call(this,e,n),f.setVAO(null),I&&(t.cpuTime+=performance.now()-N)}}},"4324c38222f7aa6bd758c48eca3adf24490a6794a7ca19259ad8654aba832843":function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z){var F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le;return F=e.gl,O=e.context,e.strings,W=e.next,M=e.current,T=e.draw,E=e.elements,e.buffer,C=e.shader,H=e.attributes,B=e.vao,I=e.uniforms,P=e.framebuffer,N=e.extensions,e.timer,e.isBufferArgs,D=W.blend_color,V=M.blend_color,L=W.blend_equation,R=M.blend_equation,q=W.blend_func,G=M.blend_func,j=W.depth_range,U=M.depth_range,Y=W.colorMask,$=M.colorMask,Z=W.polygonOffset_offset,X=M.polygonOffset_offset,Q=W.sample_coverage,J=M.sample_coverage,K=W.stencil_func,ee=M.stencil_func,te=W.stencil_opFront,ne=M.stencil_opFront,re=W.stencil_opBack,ie=M.stencil_opBack,ae=W.scissor_box,oe=M.scissor_box,se=W.viewport,le=M.viewport,{draw:function(e){var p,b,m,g,v,_,y,w,x,A,S,k,z,C,I,ae,se,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt;(N.angle_instanced_arrays,p=n.call(this,O,e,0),b=P.getFramebuffer(p),m=P.next,P.next=b,g=O.framebufferWidth,O.framebufferWidth=b?b.width:O.drawingBufferWidth,v=O.framebufferHeight,O.framebufferHeight=b?b.height:O.drawingBufferHeight,b!==P.cur&&(b?F.bindFramebuffer(36160,b.framebuffer):F.bindFramebuffer(36160,null),P.cur=b),M.dirty)&&((ge=W.dither)!==M.dither&&(ge?F.enable(3024):F.disable(3024),M.dither=ge),(ve=W.blend_enable)!==M.blend_enable&&(ve?F.enable(3042):F.disable(3042),M.blend_enable=ve),_e=D[0],ye=D[1],we=D[2],xe=D[3],_e===V[0]&&ye===V[1]&&we===V[2]&&xe===V[3]||(F.blendColor(_e,ye,we,xe),V[0]=_e,V[1]=ye,V[2]=we,V[3]=xe),Ae=L[0],Se=L[1],Ae===R[0]&&Se===R[1]||(F.blendEquationSeparate(Ae,Se),R[0]=Ae,R[1]=Se),ke=q[0],ze=q[1],Fe=q[2],Oe=q[3],ke===G[0]&&ze===G[1]&&Fe===G[2]&&Oe===G[3]||(F.blendFuncSeparate(ke,ze,Fe,Oe),G[0]=ke,G[1]=ze,G[2]=Fe,G[3]=Oe),(We=W.depth_enable)!==M.depth_enable&&(We?F.enable(2929):F.disable(2929),M.depth_enable=We),(Me=W.depth_func)!==M.depth_func&&(F.depthFunc(Me),M.depth_func=Me),Te=j[0],Ee=j[1],Te===U[0]&&Ee===U[1]||(F.depthRange(Te,Ee),U[0]=Te,U[1]=Ee),(Ce=W.depth_mask)!==M.depth_mask&&(F.depthMask(Ce),M.depth_mask=Ce),He=Y[0],Be=Y[1],Ie=Y[2],Pe=Y[3],He===$[0]&&Be===$[1]&&Ie===$[2]&&Pe===$[3]||(F.colorMask(He,Be,Ie,Pe),$[0]=He,$[1]=Be,$[2]=Ie,$[3]=Pe),(Ne=W.cull_enable)!==M.cull_enable&&(Ne?F.enable(2884):F.disable(2884),M.cull_enable=Ne),(De=W.cull_face)!==M.cull_face&&(F.cullFace(De),M.cull_face=De),(Ve=W.frontFace)!==M.frontFace&&(F.frontFace(Ve),M.frontFace=Ve),(Le=W.lineWidth)!==M.lineWidth&&(F.lineWidth(Le),M.lineWidth=Le),(Re=W.polygonOffset_enable)!==M.polygonOffset_enable&&(Re?F.enable(32823):F.disable(32823),M.polygonOffset_enable=Re),qe=Z[0],Ge=Z[1],qe===X[0]&&Ge===X[1]||(F.polygonOffset(qe,Ge),X[0]=qe,X[1]=Ge),(je=W.sample_alpha)!==M.sample_alpha&&(je?F.enable(32926):F.disable(32926),M.sample_alpha=je),(Ue=W.sample_enable)!==M.sample_enable&&(Ue?F.enable(32928):F.disable(32928),M.sample_enable=Ue),Ye=Q[0],$e=Q[1],Ye===J[0]&&$e===J[1]||(F.sampleCoverage(Ye,$e),J[0]=Ye,J[1]=$e),(Ze=W.stencil_enable)!==M.stencil_enable&&(Ze?F.enable(2960):F.disable(2960),M.stencil_enable=Ze),(Xe=W.stencil_mask)!==M.stencil_mask&&(F.stencilMask(Xe),M.stencil_mask=Xe),Qe=K[0],Je=K[1],Ke=K[2],Qe===ee[0]&&Je===ee[1]&&Ke===ee[2]||(F.stencilFunc(Qe,Je,Ke),ee[0]=Qe,ee[1]=Je,ee[2]=Ke),et=te[0],tt=te[1],nt=te[2],rt=te[3],et===ne[0]&&tt===ne[1]&&nt===ne[2]&&rt===ne[3]||(F.stencilOpSeparate(et,tt,nt,rt),ne[0]=et,ne[1]=tt,ne[2]=nt,ne[3]=rt),it=re[0],at=re[1],ot=re[2],st=re[3],it===ie[0]&&at===ie[1]&&ot===ie[2]&&st===ie[3]||(F.stencilOpSeparate(it,at,ot,st),ie[0]=it,ie[1]=at,ie[2]=ot,ie[3]=st),(lt=W.scissor_enable)!==M.scissor_enable&&(lt?F.enable(3089):F.disable(3089),M.scissor_enable=lt));_=O.framebufferWidth,y=O.framebufferHeight,w=O.viewportWidth,O.viewportWidth=_,x=O.viewportHeight,O.viewportHeight=y,F.viewport(0,0,_,y),le[0]=0,le[1]=0,le[2]=_,le[3]=y,A=O.framebufferWidth,S=O.framebufferHeight,F.scissor(0,0,A,S),oe[0]=0,oe[1]=0,oe[2]=A,oe[3]=S,(k=M.profile)&&(z=performance.now(),t.count++),F.useProgram(r.program),C=N.angle_instanced_arrays,B.setVAO(null),I=a.location,(ae=H[I]).buffer||F.enableVertexAttribArray(I),5126===ae.type&&2===ae.size&&ae.buffer===i&&!1===ae.normalized&&0===ae.offset&&0===ae.stride||(F.bindBuffer(34962,i.buffer),F.vertexAttribPointer(I,2,5126,!1,0,0),ae.type=5126,ae.size=2,ae.buffer=i,ae.normalized=!1,ae.offset=0,ae.stride=0),0!==ae.divisor&&(C.vertexAttribDivisorANGLE(I,0),ae.divisor=0),se=s.call(this,O,e,0),F.uniform1f(o.location,se),(fe=f.call(this,O,e,0))&&"framebuffer"===fe._reglType&&(fe=fe.color[0]),ce=fe._texture,F.uniform1i(l.location,ce.bind()),ue=u.call(this,O,e,0),F.uniform1f(c.location,ue),(de=h.call(this,O,e,0))&&"framebuffer"===de._reglType&&(de=de.color[0]),he=de._texture,F.uniform1i(d.location,he.bind()),((pe=T.elements)||B.currentVAO&&(pe=E.getElements(B.currentVAO.elements)))&&F.bindBuffer(34963,pe.buffer.buffer),be=T.offset,(me=T.instances)>0?pe?C.drawElementsInstancedANGLE(5,4,pe.type,be<<(pe.type-5121>>1),me):C.drawArraysInstancedANGLE(5,be,4,me):me<0&&(pe?F.drawElements(5,4,pe.type,be<<(pe.type-5121>>1)):F.drawArrays(5,be,4)),M.dirty=!0,B.setVAO(null),P.next=m,O.framebufferWidth=g,O.framebufferHeight=v,O.viewportWidth=w,O.viewportHeight=x,k&&(t.cpuTime+=performance.now()-z),ce.unbind(),he.unbind()},scope:function(e,r,a){var o,l,c,d,F,W,E,H,B,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,oe,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we;o=n.call(this,O,e,a),l=P.getFramebuffer(o),c=P.next,P.next=l,d=O.framebufferWidth,O.framebufferWidth=l?l.width:O.drawingBufferWidth,F=O.framebufferHeight,O.framebufferHeight=l?l.height:O.drawingBufferHeight,W=O.framebufferWidth,E=O.framebufferHeight,H=O.viewportWidth,O.viewportWidth=W,B=O.viewportHeight,O.viewportHeight=E,N=se[0],se[0]=p,D=se[1],se[1]=b,V=se[2],se[2]=W,L=se[3],se[3]=E,R=O.framebufferWidth,q=O.framebufferHeight,G=ae[0],ae[0]=m,j=ae[1],ae[1]=g,U=ae[2],ae[2]=R,Y=ae[3],ae[3]=q,($=M.profile)&&(Z=performance.now(),t.count++),X=T.count,T.count=v,Q=T.primitive,T.primitive=_,J=f.call(this,O,e,a),K=I[y],I[y]=J,ee=h.call(this,O,e,a),te=I[w],I[w]=ee,ne=s.call(this,O,e,a),re=I[x],I[x]=ne,ie=u.call(this,O,e,a),oe=I[A],I[A]=ie,le=S.state,S.state=1,fe=S.x,S.x=0,ce=S.y,S.y=0,ue=S.z,S.z=0,de=S.w,S.w=0,he=S.buffer,S.buffer=i,pe=S.size,S.size=2,be=S.normalized,S.normalized=!1,me=S.type,S.type=5126,ge=S.offset,S.offset=0,ve=S.stride,S.stride=0,_e=S.divisor,S.divisor=0,ye=C.vert,C.vert=k,we=C.frag,C.frag=z,M.dirty=!0,r(O,e,a),P.next=c,O.framebufferWidth=d,O.framebufferHeight=F,O.viewportWidth=H,O.viewportHeight=B,se[0]=N,se[1]=D,se[2]=V,se[3]=L,ae[0]=G,ae[1]=j,ae[2]=U,ae[3]=Y,$&&(t.cpuTime+=performance.now()-Z),T.count=X,T.primitive=Q,I[y]=K,I[w]=te,I[x]=re,I[A]=oe,S.state=le,S.x=fe,S.y=ce,S.z=ue,S.w=de,S.buffer=he,S.size=pe,S.normalized=be,S.type=me,S.offset=ge,S.stride=ve,S.divisor=_e,C.vert=ye,C.frag=we,M.dirty=!0},batch:function(e,p){var b,m,g,v,_,y,w,x,A,S,k,z,C,I,ae,se,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft,ct,ut;(N.angle_instanced_arrays,b=n.call(this,O,e,0),m=P.getFramebuffer(b),g=P.next,P.next=m,v=O.framebufferWidth,O.framebufferWidth=m?m.width:O.drawingBufferWidth,_=O.framebufferHeight,O.framebufferHeight=m?m.height:O.drawingBufferHeight,m!==P.cur&&(m?F.bindFramebuffer(36160,m.framebuffer):F.bindFramebuffer(36160,null),P.cur=m),M.dirty)&&((fe=W.dither)!==M.dither&&(fe?F.enable(3024):F.disable(3024),M.dither=fe),(ce=W.blend_enable)!==M.blend_enable&&(ce?F.enable(3042):F.disable(3042),M.blend_enable=ce),ue=D[0],de=D[1],he=D[2],pe=D[3],ue===V[0]&&de===V[1]&&he===V[2]&&pe===V[3]||(F.blendColor(ue,de,he,pe),V[0]=ue,V[1]=de,V[2]=he,V[3]=pe),be=L[0],me=L[1],be===R[0]&&me===R[1]||(F.blendEquationSeparate(be,me),R[0]=be,R[1]=me),ge=q[0],ve=q[1],_e=q[2],ye=q[3],ge===G[0]&&ve===G[1]&&_e===G[2]&&ye===G[3]||(F.blendFuncSeparate(ge,ve,_e,ye),G[0]=ge,G[1]=ve,G[2]=_e,G[3]=ye),(we=W.depth_enable)!==M.depth_enable&&(we?F.enable(2929):F.disable(2929),M.depth_enable=we),(xe=W.depth_func)!==M.depth_func&&(F.depthFunc(xe),M.depth_func=xe),Ae=j[0],Se=j[1],Ae===U[0]&&Se===U[1]||(F.depthRange(Ae,Se),U[0]=Ae,U[1]=Se),(ke=W.depth_mask)!==M.depth_mask&&(F.depthMask(ke),M.depth_mask=ke),ze=Y[0],Fe=Y[1],Oe=Y[2],We=Y[3],ze===$[0]&&Fe===$[1]&&Oe===$[2]&&We===$[3]||(F.colorMask(ze,Fe,Oe,We),$[0]=ze,$[1]=Fe,$[2]=Oe,$[3]=We),(Me=W.cull_enable)!==M.cull_enable&&(Me?F.enable(2884):F.disable(2884),M.cull_enable=Me),(Te=W.cull_face)!==M.cull_face&&(F.cullFace(Te),M.cull_face=Te),(Ee=W.frontFace)!==M.frontFace&&(F.frontFace(Ee),M.frontFace=Ee),(Ce=W.lineWidth)!==M.lineWidth&&(F.lineWidth(Ce),M.lineWidth=Ce),(He=W.polygonOffset_enable)!==M.polygonOffset_enable&&(He?F.enable(32823):F.disable(32823),M.polygonOffset_enable=He),Be=Z[0],Ie=Z[1],Be===X[0]&&Ie===X[1]||(F.polygonOffset(Be,Ie),X[0]=Be,X[1]=Ie),(Pe=W.sample_alpha)!==M.sample_alpha&&(Pe?F.enable(32926):F.disable(32926),M.sample_alpha=Pe),(Ne=W.sample_enable)!==M.sample_enable&&(Ne?F.enable(32928):F.disable(32928),M.sample_enable=Ne),De=Q[0],Ve=Q[1],De===J[0]&&Ve===J[1]||(F.sampleCoverage(De,Ve),J[0]=De,J[1]=Ve),(Le=W.stencil_enable)!==M.stencil_enable&&(Le?F.enable(2960):F.disable(2960),M.stencil_enable=Le),(Re=W.stencil_mask)!==M.stencil_mask&&(F.stencilMask(Re),M.stencil_mask=Re),qe=K[0],Ge=K[1],je=K[2],qe===ee[0]&&Ge===ee[1]&&je===ee[2]||(F.stencilFunc(qe,Ge,je),ee[0]=qe,ee[1]=Ge,ee[2]=je),Ue=te[0],Ye=te[1],$e=te[2],Ze=te[3],Ue===ne[0]&&Ye===ne[1]&&$e===ne[2]&&Ze===ne[3]||(F.stencilOpSeparate(Ue,Ye,$e,Ze),ne[0]=Ue,ne[1]=Ye,ne[2]=$e,ne[3]=Ze),Xe=re[0],Qe=re[1],Je=re[2],Ke=re[3],Xe===ie[0]&&Qe===ie[1]&&Je===ie[2]&&Ke===ie[3]||(F.stencilOpSeparate(Xe,Qe,Je,Ke),ie[0]=Xe,ie[1]=Qe,ie[2]=Je,ie[3]=Ke),(et=W.scissor_enable)!==M.scissor_enable&&(et?F.enable(3089):F.disable(3089),M.scissor_enable=et));for(y=O.framebufferWidth,w=O.framebufferHeight,x=O.viewportWidth,O.viewportWidth=y,A=O.viewportHeight,O.viewportHeight=w,F.viewport(0,0,y,w),le[0]=0,le[1]=0,le[2]=y,le[3]=w,S=O.framebufferWidth,k=O.framebufferHeight,F.scissor(0,0,S,k),oe[0]=0,oe[1]=0,oe[2]=S,oe[3]=k,(z=M.profile)&&(C=performance.now(),t.count+=p),F.useProgram(r.program),I=N.angle_instanced_arrays,B.setVAO(null),tt=a.location,(nt=H[tt]).buffer||F.enableVertexAttribArray(tt),2,5126===nt.type&&2===nt.size&&nt.buffer===i&&!1===nt.normalized&&0===nt.offset&&0===nt.stride||(F.bindBuffer(34962,i.buffer),F.vertexAttribPointer(tt,2,5126,!1,0,0),nt.type=5126,nt.size=2,nt.buffer=i,nt.normalized=!1,nt.offset=0,nt.stride=0),0!==nt.divisor&&(I.vertexAttribDivisorANGLE(tt,0),nt.divisor=0),rt=s.call(this,O,se,ae),F.uniform1f(o.location,rt),(it=f.call(this,O,se,ae))&&"framebuffer"===it._reglType&&(it=it.color[0]),at=it._texture,F.uniform1i(l.location,at.bind()),ot=u.call(this,O,se,ae),F.uniform1f(c.location,ot),(st=h.call(this,O,se,ae))&&"framebuffer"===st._reglType&&(st=st.color[0]),lt=st._texture,F.uniform1i(d.location,lt.bind()),((ft=T.elements)||B.currentVAO&&(ft=E.getElements(B.currentVAO.elements)))&&F.bindBuffer(34963,ft.buffer.buffer),ct=T.offset,ut=T.instances,ae=0;ae<p;++ae)se=e[ae],ut>0?ft?I.drawElementsInstancedANGLE(5,4,ft.type,ct<<(ft.type-5121>>1),ut):I.drawArraysInstancedANGLE(5,ct,4,ut):ut<0&&(ft?F.drawElements(5,4,ft.type,ct<<(ft.type-5121>>1)):F.drawArrays(5,ct,4));at.unbind(),lt.unbind(),M.dirty=!0,B.setVAO(null),P.next=g,O.framebufferWidth=v,O.framebufferHeight=_,O.viewportWidth=x,O.viewportHeight=A,z&&(t.cpuTime+=performance.now()-C)}}},"938b883103cfb116eacc46c77dd09ff2ea4342f4f2480e4fa8393a27b4dad686":function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe){var ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye;return ce=e.gl,ue=e.context,e.strings,de=e.next,he=e.current,pe=e.draw,be=e.elements,e.buffer,me=e.shader,ge=e.attributes,ve=e.vao,_e=e.uniforms,ye=e.framebuffer,we=e.extensions,e.timer,e.isBufferArgs,xe=de.blend_color,Ae=he.blend_color,Se=de.blend_equation,ke=he.blend_equation,ze=de.blend_func,Fe=he.blend_func,Oe=de.depth_range,We=he.depth_range,Me=de.colorMask,Te=he.colorMask,Ee=de.polygonOffset_offset,Ce=he.polygonOffset_offset,He=de.sample_coverage,Be=he.sample_coverage,Ie=de.stencil_func,Pe=he.stencil_func,Ne=de.stencil_opFront,De=he.stencil_opFront,Ve=de.stencil_opBack,Le=he.stencil_opBack,Re=de.scissor_box,qe=he.scissor_box,Ge=de.viewport,je=he.viewport,Ue=new Float32Array(9),Ye=new Float32Array(9),{draw:function(e){var B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,me,_e,Se,ze,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft,ct,ut,dt,ht,pt,bt,mt,gt,vt,_t,yt,wt,xt,At,St,kt,zt,Ft,Ot,Wt,Mt,Tt,Et,Ct;(we.angle_instanced_arrays,(B=ye.next)!==ye.cur&&(B?ce.bindFramebuffer(36160,B.framebuffer):ce.bindFramebuffer(36160,null),ye.cur=B),he.dirty)&&((me=de.dither)!==he.dither&&(me?ce.enable(3024):ce.disable(3024),he.dither=me),_e=xe[0],Se=xe[1],ze=xe[2],Ye=xe[3],_e===Ae[0]&&Se===Ae[1]&&ze===Ae[2]&&Ye===Ae[3]||(ce.blendColor(_e,Se,ze,Ye),Ae[0]=_e,Ae[1]=Se,Ae[2]=ze,Ae[3]=Ye),($e=de.depth_func)!==he.depth_func&&(ce.depthFunc($e),he.depth_func=$e),Ze=Oe[0],Xe=Oe[1],Ze===We[0]&&Xe===We[1]||(ce.depthRange(Ze,Xe),We[0]=Ze,We[1]=Xe),Qe=Me[0],Je=Me[1],Ke=Me[2],et=Me[3],Qe===Te[0]&&Je===Te[1]&&Ke===Te[2]&&et===Te[3]||(ce.colorMask(Qe,Je,Ke,et),Te[0]=Qe,Te[1]=Je,Te[2]=Ke,Te[3]=et),(tt=de.cull_enable)!==he.cull_enable&&(tt?ce.enable(2884):ce.disable(2884),he.cull_enable=tt),(nt=de.cull_face)!==he.cull_face&&(ce.cullFace(nt),he.cull_face=nt),(rt=de.frontFace)!==he.frontFace&&(ce.frontFace(rt),he.frontFace=rt),(it=de.lineWidth)!==he.lineWidth&&(ce.lineWidth(it),he.lineWidth=it),(at=de.polygonOffset_enable)!==he.polygonOffset_enable&&(at?ce.enable(32823):ce.disable(32823),he.polygonOffset_enable=at),ot=Ee[0],st=Ee[1],ot===Ce[0]&&st===Ce[1]||(ce.polygonOffset(ot,st),Ce[0]=ot,Ce[1]=st),(lt=de.sample_alpha)!==he.sample_alpha&&(lt?ce.enable(32926):ce.disable(32926),he.sample_alpha=lt),(ft=de.sample_enable)!==he.sample_enable&&(ft?ce.enable(32928):ce.disable(32928),he.sample_enable=ft),ct=He[0],ut=He[1],ct===Be[0]&&ut===Be[1]||(ce.sampleCoverage(ct,ut),Be[0]=ct,Be[1]=ut),(dt=de.stencil_enable)!==he.stencil_enable&&(dt?ce.enable(2960):ce.disable(2960),he.stencil_enable=dt),(ht=de.stencil_mask)!==he.stencil_mask&&(ce.stencilMask(ht),he.stencil_mask=ht),pt=Ie[0],bt=Ie[1],mt=Ie[2],pt===Pe[0]&&bt===Pe[1]&&mt===Pe[2]||(ce.stencilFunc(pt,bt,mt),Pe[0]=pt,Pe[1]=bt,Pe[2]=mt),gt=Ne[0],vt=Ne[1],_t=Ne[2],yt=Ne[3],gt===De[0]&&vt===De[1]&&_t===De[2]&&yt===De[3]||(ce.stencilOpSeparate(gt,vt,_t,yt),De[0]=gt,De[1]=vt,De[2]=_t,De[3]=yt),wt=Ve[0],xt=Ve[1],At=Ve[2],St=Ve[3],wt===Le[0]&&xt===Le[1]&&At===Le[2]&&St===Le[3]||(ce.stencilOpSeparate(wt,xt,At,St),Le[0]=wt,Le[1]=xt,Le[2]=At,Le[3]=St),(kt=de.scissor_enable)!==he.scissor_enable&&(kt?ce.enable(3089):ce.disable(3089),he.scissor_enable=kt),zt=Re[0],Ft=Re[1],Ot=Re[2],Wt=Re[3],zt===qe[0]&&Ft===qe[1]&&Ot===qe[2]&&Wt===qe[3]||(ce.scissor(zt,Ft,Ot,Wt),qe[0]=zt,qe[1]=Ft,qe[2]=Ot,qe[3]=Wt),Mt=Ge[0],Tt=Ge[1],Et=Ge[2],Ct=Ge[3],Mt===je[0]&&Tt===je[1]&&Et===je[2]&&Ct===je[3]||(ce.viewport(Mt,Tt,Et,Ct),je[0]=Mt,je[1]=Tt,je[2]=Et,je[3]=Ct));n?ce.enable(3042):ce.disable(3042),he.blend_enable=n,ce.blendEquationSeparate(32774,32774),ke[0]=32774,ke[1]=32774,ce.blendFuncSeparate(770,771,1,771),Fe[0]=770,Fe[1]=771,Fe[2]=1,Fe[3]=771,r?ce.enable(2929):ce.disable(2929),he.depth_enable=r,ce.depthMask(i),he.depth_mask=i,(I=he.profile)&&(P=performance.now(),t.count++),ce.useProgram(a.program),N=we.angle_instanced_arrays,ve.setVAO(null),D=s.location,(V=ge[D]).buffer||ce.enableVertexAttribArray(D),5126===V.type&&2===V.size&&V.buffer===o&&!1===V.normalized&&0===V.offset&&0===V.stride||(ce.bindBuffer(34962,o.buffer),ce.vertexAttribPointer(D,2,5126,!1,0,0),V.type=5126,V.size=2,V.buffer=o,V.normalized=!1,V.offset=0,V.stride=0),0!==V.divisor&&(N.vertexAttribDivisorANGLE(D,0),V.divisor=0),L=f.call(this,ue,e,0),ce.uniform1f(l.location,L),R=u.call(this,ue,e,0),ce.uniform1f(c.location,R),(q=h.call(this,ue,e,0))&&"framebuffer"===q._reglType&&(q=q.color[0]),G=q._texture,ce.uniform1i(d.location,G.bind()),(j=b.call(this,ue,e,0))&&"framebuffer"===j._reglType&&(j=j.color[0]),U=j._texture,ce.uniform1i(p.location,U.bind()),(Y=g.call(this,ue,e,0))&&"framebuffer"===Y._reglType&&(Y=Y.color[0]),$=Y._texture,ce.uniform1i(m.location,$.bind()),Z=_.call(this,ue,e,0),ce.uniform1f(v.location,Z),(X=w.call(this,ue,e,0))&&"framebuffer"===X._reglType&&(X=X.color[0]),Q=X._texture,ce.uniform1i(y.location,Q.bind()),J=A.call(this,ue,e,0),ce.uniform1f(x.location,J),K=k.call(this,ue,e,0),ce.uniform1i(S.location,K),te=(ee=F.call(this,ue,e,0))[0],ne=ee[1],ce.uniform2f(z.location,te,ne),re=W.call(this,ue,e,0),ce.uniform1f(O.location,re),ie=T.call(this,ue,e,0),ce.uniform1f(M.location,ie),ae=C.call(this,ue,e,0),ce.uniformMatrix3fv(E.location,!1,Array.isArray(ae)||ae instanceof Float32Array?ae:(Ue[0]=ae[0],Ue[1]=ae[1],Ue[2]=ae[2],Ue[3]=ae[3],Ue[4]=ae[4],Ue[5]=ae[5],Ue[6]=ae[6],Ue[7]=ae[7],Ue[8]=ae[8],Ue)),((oe=pe.elements)||ve.currentVAO&&(oe=be.getElements(ve.currentVAO.elements)))&&ce.bindBuffer(34963,oe.buffer.buffer),se=pe.offset,(le=H.call(this,ue,e,0))&&((fe=pe.instances)>0?oe?N.drawElementsInstancedANGLE(0,le,oe.type,se<<(oe.type-5121>>1),fe):N.drawArraysInstancedANGLE(0,se,le,fe):fe<0&&(oe?ce.drawElements(0,le,oe.type,se<<(oe.type-5121>>1)):ce.drawArrays(0,se,le)),he.dirty=!0,ve.setVAO(null),I&&(t.cpuTime+=performance.now()-P),G.unbind(),U.unbind(),$.unbind(),Q.unbind())},scope:function(e,n,r){var i,a,s,l,c,d,p,m,v,y,x,S,z,O,M,E,se,le,fe,ce,be,ge,ve,ye,we,xe,Ae,ke,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je;i=de.blend_enable,de.blend_enable=B,a=Se[0],Se[0]=I,s=Se[1],Se[1]=P,l=ze[0],ze[0]=N,c=ze[1],ze[1]=D,d=ze[2],ze[2]=V,p=ze[3],ze[3]=L,m=de.depth_enable,de.depth_enable=R,v=de.depth_mask,de.depth_mask=q,(y=he.profile)&&(x=performance.now(),t.count++),S=H.call(this,ue,e,r),z=pe.count,pe.count=S,O=pe.primitive,pe.primitive=G,M=w.call(this,ue,e,r),E=_e[j],_e[j]=M,se=h.call(this,ue,e,r),le=_e[U],_e[U]=se,fe=b.call(this,ue,e,r),ce=_e[Y],_e[Y]=fe,be=g.call(this,ue,e,r),ge=_e[$],_e[$]=be,ve=A.call(this,ue,e,r),ye=_e[Z],_e[Z]=ve,we=W.call(this,ue,e,r),xe=_e[X],_e[X]=we,Ae=_.call(this,ue,e,r),ke=_e[Q],_e[Q]=Ae,Fe=C.call(this,ue,e,r),Oe=_e[J],_e[J]=Fe,We=T.call(this,ue,e,r),Me=_e[K],_e[K]=We,Te=F.call(this,ue,e,r),Ee=_e[ee],_e[ee]=Te,Ce=f.call(this,ue,e,r),He=_e[te],_e[te]=Ce,Be=k.call(this,ue,e,r),Ie=_e[ne],_e[ne]=Be,Pe=u.call(this,ue,e,r),Ne=_e[re],_e[re]=Pe,De=ie.state,ie.state=1,Ve=ie.x,ie.x=0,Le=ie.y,ie.y=0,Re=ie.z,ie.z=0,qe=ie.w,ie.w=0,Ge=ie.buffer,ie.buffer=o,je=ie.size,ie.size=2,Ue=ie.normalized,ie.normalized=!1,Ye=ie.type,ie.type=5126,$e=ie.offset,ie.offset=0,Ze=ie.stride,ie.stride=0,Xe=ie.divisor,ie.divisor=0,Qe=me.vert,me.vert=ae,Je=me.frag,me.frag=oe,he.dirty=!0,n(ue,e,r),de.blend_enable=i,Se[0]=a,Se[1]=s,ze[0]=l,ze[1]=c,ze[2]=d,ze[3]=p,de.depth_enable=m,de.depth_mask=v,y&&(t.cpuTime+=performance.now()-x),pe.count=z,pe.primitive=O,_e[j]=E,_e[U]=le,_e[Y]=ce,_e[$]=ge,_e[Z]=ye,_e[X]=xe,_e[Q]=ke,_e[J]=Oe,_e[K]=Me,_e[ee]=Ee,_e[te]=He,_e[ne]=Ie,_e[re]=Ne,ie.state=De,ie.x=Ve,ie.y=Le,ie.z=Re,ie.w=qe,ie.buffer=Ge,ie.size=je,ie.normalized=Ue,ie.type=Ye,ie.offset=$e,ie.stride=Ze,ie.divisor=Xe,me.vert=Qe,me.frag=Je,he.dirty=!0},batch:function(e,n){var r,i,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,me,_e,Se,ze,Ue,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft,ct,ut,dt,ht,pt,bt,mt,gt,vt,_t,yt,wt,xt,At,St,kt,zt,Ft,Ot,Wt,Mt,Tt,Et,Ct,Ht,Bt,It;(we.angle_instanced_arrays,(r=ye.next)!==ye.cur&&(r?ce.bindFramebuffer(36160,r.framebuffer):ce.bindFramebuffer(36160,null),ye.cur=r),he.dirty)&&((D=de.dither)!==he.dither&&(D?ce.enable(3024):ce.disable(3024),he.dither=D),V=xe[0],L=xe[1],R=xe[2],q=xe[3],V===Ae[0]&&L===Ae[1]&&R===Ae[2]&&q===Ae[3]||(ce.blendColor(V,L,R,q),Ae[0]=V,Ae[1]=L,Ae[2]=R,Ae[3]=q),(G=de.depth_func)!==he.depth_func&&(ce.depthFunc(G),he.depth_func=G),j=Oe[0],U=Oe[1],j===We[0]&&U===We[1]||(ce.depthRange(j,U),We[0]=j,We[1]=U),Y=Me[0],$=Me[1],Z=Me[2],X=Me[3],Y===Te[0]&&$===Te[1]&&Z===Te[2]&&X===Te[3]||(ce.colorMask(Y,$,Z,X),Te[0]=Y,Te[1]=$,Te[2]=Z,Te[3]=X),(Q=de.cull_enable)!==he.cull_enable&&(Q?ce.enable(2884):ce.disable(2884),he.cull_enable=Q),(J=de.cull_face)!==he.cull_face&&(ce.cullFace(J),he.cull_face=J),(K=de.frontFace)!==he.frontFace&&(ce.frontFace(K),he.frontFace=K),(ee=de.lineWidth)!==he.lineWidth&&(ce.lineWidth(ee),he.lineWidth=ee),(te=de.polygonOffset_enable)!==he.polygonOffset_enable&&(te?ce.enable(32823):ce.disable(32823),he.polygonOffset_enable=te),ne=Ee[0],re=Ee[1],ne===Ce[0]&&re===Ce[1]||(ce.polygonOffset(ne,re),Ce[0]=ne,Ce[1]=re),(ie=de.sample_alpha)!==he.sample_alpha&&(ie?ce.enable(32926):ce.disable(32926),he.sample_alpha=ie),(ae=de.sample_enable)!==he.sample_enable&&(ae?ce.enable(32928):ce.disable(32928),he.sample_enable=ae),oe=He[0],me=He[1],oe===Be[0]&&me===Be[1]||(ce.sampleCoverage(oe,me),Be[0]=oe,Be[1]=me),(_e=de.stencil_enable)!==he.stencil_enable&&(_e?ce.enable(2960):ce.disable(2960),he.stencil_enable=_e),(Se=de.stencil_mask)!==he.stencil_mask&&(ce.stencilMask(Se),he.stencil_mask=Se),ze=Ie[0],Ue=Ie[1],$e=Ie[2],ze===Pe[0]&&Ue===Pe[1]&&$e===Pe[2]||(ce.stencilFunc(ze,Ue,$e),Pe[0]=ze,Pe[1]=Ue,Pe[2]=$e),Ze=Ne[0],Xe=Ne[1],Qe=Ne[2],Je=Ne[3],Ze===De[0]&&Xe===De[1]&&Qe===De[2]&&Je===De[3]||(ce.stencilOpSeparate(Ze,Xe,Qe,Je),De[0]=Ze,De[1]=Xe,De[2]=Qe,De[3]=Je),Ke=Ve[0],et=Ve[1],tt=Ve[2],nt=Ve[3],Ke===Le[0]&&et===Le[1]&&tt===Le[2]&&nt===Le[3]||(ce.stencilOpSeparate(Ke,et,tt,nt),Le[0]=Ke,Le[1]=et,Le[2]=tt,Le[3]=nt),(rt=de.scissor_enable)!==he.scissor_enable&&(rt?ce.enable(3089):ce.disable(3089),he.scissor_enable=rt),it=Re[0],at=Re[1],ot=Re[2],st=Re[3],it===qe[0]&&at===qe[1]&&ot===qe[2]&&st===qe[3]||(ce.scissor(it,at,ot,st),qe[0]=it,qe[1]=at,qe[2]=ot,qe[3]=st),lt=Ge[0],ft=Ge[1],ct=Ge[2],ut=Ge[3],lt===je[0]&&ft===je[1]&&ct===je[2]&&ut===je[3]||(ce.viewport(lt,ft,ct,ut),je[0]=lt,je[1]=ft,je[2]=ct,je[3]=ut));for(se?ce.enable(3042):ce.disable(3042),he.blend_enable=se,ce.blendEquationSeparate(32774,32774),ke[0]=32774,ke[1]=32774,ce.blendFuncSeparate(770,771,1,771),Fe[0]=770,Fe[1]=771,Fe[2]=1,Fe[3]=771,le?ce.enable(2929):ce.disable(2929),he.depth_enable=le,ce.depthMask(fe),he.depth_mask=fe,(i=he.profile)&&(B=performance.now(),t.count+=n),ce.useProgram(a.program),I=we.angle_instanced_arrays,ve.setVAO(null),dt=s.location,(ht=ge[dt]).buffer||ce.enableVertexAttribArray(dt),2,5126===ht.type&&2===ht.size&&ht.buffer===o&&!1===ht.normalized&&0===ht.offset&&0===ht.stride||(ce.bindBuffer(34962,o.buffer),ce.vertexAttribPointer(dt,2,5126,!1,0,0),ht.type=5126,ht.size=2,ht.buffer=o,ht.normalized=!1,ht.offset=0,ht.stride=0),0!==ht.divisor&&(I.vertexAttribDivisorANGLE(dt,0),ht.divisor=0),pt=f.call(this,ue,N,P),ce.uniform1f(l.location,pt),bt=u.call(this,ue,N,P),ce.uniform1f(c.location,bt),(mt=h.call(this,ue,N,P))&&"framebuffer"===mt._reglType&&(mt=mt.color[0]),gt=mt._texture,ce.uniform1i(d.location,gt.bind()),(vt=b.call(this,ue,N,P))&&"framebuffer"===vt._reglType&&(vt=vt.color[0]),_t=vt._texture,ce.uniform1i(p.location,_t.bind()),(yt=g.call(this,ue,N,P))&&"framebuffer"===yt._reglType&&(yt=yt.color[0]),wt=yt._texture,ce.uniform1i(m.location,wt.bind()),xt=_.call(this,ue,N,P),ce.uniform1f(v.location,xt),(At=w.call(this,ue,N,P))&&"framebuffer"===At._reglType&&(At=At.color[0]),St=At._texture,ce.uniform1i(y.location,St.bind()),kt=A.call(this,ue,N,P),ce.uniform1f(x.location,kt),zt=k.call(this,ue,N,P),ce.uniform1i(S.location,zt),Ot=(Ft=F.call(this,ue,N,P))[0],Wt=Ft[1],ce.uniform2f(z.location,Ot,Wt),Mt=W.call(this,ue,N,P),ce.uniform1f(O.location,Mt),Tt=T.call(this,ue,N,P),ce.uniform1f(M.location,Tt),Et=C.call(this,ue,N,P),ce.uniformMatrix3fv(E.location,!1,Array.isArray(Et)||Et instanceof Float32Array?Et:(Ye[0]=Et[0],Ye[1]=Et[1],Ye[2]=Et[2],Ye[3]=Et[3],Ye[4]=Et[4],Ye[5]=Et[5],Ye[6]=Et[6],Ye[7]=Et[7],Ye[8]=Et[8],Ye)),((Ct=pe.elements)||ve.currentVAO&&(Ct=be.getElements(ve.currentVAO.elements)))&&ce.bindBuffer(34963,Ct.buffer.buffer),Ht=pe.offset,Bt=H.call(this,ue,N,P),It=pe.instances,P=0;P<n;++P)N=e[P],Bt&&(It>0?Ct?I.drawElementsInstancedANGLE(0,Bt,Ct.type,Ht<<(Ct.type-5121>>1),It):I.drawArraysInstancedANGLE(0,Ht,Bt,It):It<0&&(Ct?ce.drawElements(0,Bt,Ct.type,Ht<<(Ct.type-5121>>1)):ce.drawArrays(0,Ht,Bt)));gt.unbind(),_t.unbind(),wt.unbind(),St.unbind(),he.dirty=!0,ve.setVAO(null),i&&(t.cpuTime+=performance.now()-B)}}},d4e6917d633ef08caab467b393ac4c3f800c4c7b3ab0efd4f7f5b82c281cafb1:function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y){var $,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te;return $=e.gl,Z=e.context,e.strings,X=e.next,Q=e.current,J=e.draw,K=e.elements,e.buffer,ee=e.shader,te=e.attributes,ne=e.vao,re=e.uniforms,ie=e.framebuffer,ae=e.extensions,e.timer,e.isBufferArgs,oe=X.blend_color,se=Q.blend_color,le=X.blend_equation,fe=Q.blend_equation,ce=X.blend_func,ue=Q.blend_func,de=X.depth_range,he=Q.depth_range,pe=X.colorMask,be=Q.colorMask,me=X.polygonOffset_offset,ge=Q.polygonOffset_offset,ve=X.sample_coverage,_e=Q.sample_coverage,ye=X.stencil_func,we=Q.stencil_func,xe=X.stencil_opFront,Ae=Q.stencil_opFront,Se=X.stencil_opBack,ke=Q.stencil_opBack,ze=X.scissor_box,Fe=Q.scissor_box,Oe=X.viewport,We=Q.viewport,Me=new Float32Array(9),Te=new Float32Array(9),{draw:function(e){var O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,ee,re,ze,Oe,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft,ct,ut,dt,ht,pt,bt,mt,gt,vt,_t,yt,wt,xt,At,St,kt,zt,Ft,Ot,Wt,Mt,Tt,Et,Ct,Ht,Bt,It;(ae.angle_instanced_arrays,O=n.call(this,Z,e,0),W=ie.getFramebuffer(O),M=ie.next,ie.next=W,T=Z.framebufferWidth,Z.framebufferWidth=W?W.width:Z.drawingBufferWidth,E=Z.framebufferHeight,Z.framebufferHeight=W?W.height:Z.drawingBufferHeight,W!==ie.cur&&(W?$.bindFramebuffer(36160,W.framebuffer):$.bindFramebuffer(36160,null),ie.cur=W),Q.dirty)&&((je=X.dither)!==Q.dither&&(je?$.enable(3024):$.disable(3024),Q.dither=je),(Ue=X.blend_enable)!==Q.blend_enable&&(Ue?$.enable(3042):$.disable(3042),Q.blend_enable=Ue),Ye=oe[0],$e=oe[1],Ze=oe[2],Xe=oe[3],Ye===se[0]&&$e===se[1]&&Ze===se[2]&&Xe===se[3]||($.blendColor(Ye,$e,Ze,Xe),se[0]=Ye,se[1]=$e,se[2]=Ze,se[3]=Xe),Qe=le[0],Je=le[1],Qe===fe[0]&&Je===fe[1]||($.blendEquationSeparate(Qe,Je),fe[0]=Qe,fe[1]=Je),Ke=ce[0],et=ce[1],tt=ce[2],nt=ce[3],Ke===ue[0]&&et===ue[1]&&tt===ue[2]&&nt===ue[3]||($.blendFuncSeparate(Ke,et,tt,nt),ue[0]=Ke,ue[1]=et,ue[2]=tt,ue[3]=nt),(rt=X.depth_enable)!==Q.depth_enable&&(rt?$.enable(2929):$.disable(2929),Q.depth_enable=rt),(it=X.depth_func)!==Q.depth_func&&($.depthFunc(it),Q.depth_func=it),at=de[0],ot=de[1],at===he[0]&&ot===he[1]||($.depthRange(at,ot),he[0]=at,he[1]=ot),(st=X.depth_mask)!==Q.depth_mask&&($.depthMask(st),Q.depth_mask=st),lt=pe[0],ft=pe[1],ct=pe[2],ut=pe[3],lt===be[0]&&ft===be[1]&&ct===be[2]&&ut===be[3]||($.colorMask(lt,ft,ct,ut),be[0]=lt,be[1]=ft,be[2]=ct,be[3]=ut),(dt=X.cull_enable)!==Q.cull_enable&&(dt?$.enable(2884):$.disable(2884),Q.cull_enable=dt),(ht=X.cull_face)!==Q.cull_face&&($.cullFace(ht),Q.cull_face=ht),(pt=X.frontFace)!==Q.frontFace&&($.frontFace(pt),Q.frontFace=pt),(bt=X.lineWidth)!==Q.lineWidth&&($.lineWidth(bt),Q.lineWidth=bt),(mt=X.polygonOffset_enable)!==Q.polygonOffset_enable&&(mt?$.enable(32823):$.disable(32823),Q.polygonOffset_enable=mt),gt=me[0],vt=me[1],gt===ge[0]&&vt===ge[1]||($.polygonOffset(gt,vt),ge[0]=gt,ge[1]=vt),(_t=X.sample_alpha)!==Q.sample_alpha&&(_t?$.enable(32926):$.disable(32926),Q.sample_alpha=_t),(yt=X.sample_enable)!==Q.sample_enable&&(yt?$.enable(32928):$.disable(32928),Q.sample_enable=yt),wt=ve[0],xt=ve[1],wt===_e[0]&&xt===_e[1]||($.sampleCoverage(wt,xt),_e[0]=wt,_e[1]=xt),(At=X.stencil_enable)!==Q.stencil_enable&&(At?$.enable(2960):$.disable(2960),Q.stencil_enable=At),(St=X.stencil_mask)!==Q.stencil_mask&&($.stencilMask(St),Q.stencil_mask=St),kt=ye[0],zt=ye[1],Ft=ye[2],kt===we[0]&&zt===we[1]&&Ft===we[2]||($.stencilFunc(kt,zt,Ft),we[0]=kt,we[1]=zt,we[2]=Ft),Ot=xe[0],Wt=xe[1],Mt=xe[2],Tt=xe[3],Ot===Ae[0]&&Wt===Ae[1]&&Mt===Ae[2]&&Tt===Ae[3]||($.stencilOpSeparate(Ot,Wt,Mt,Tt),Ae[0]=Ot,Ae[1]=Wt,Ae[2]=Mt,Ae[3]=Tt),Et=Se[0],Ct=Se[1],Ht=Se[2],Bt=Se[3],Et===ke[0]&&Ct===ke[1]&&Ht===ke[2]&&Bt===ke[3]||($.stencilOpSeparate(Et,Ct,Ht,Bt),ke[0]=Et,ke[1]=Ct,ke[2]=Ht,ke[3]=Bt),(It=X.scissor_enable)!==Q.scissor_enable&&(It?$.enable(3089):$.disable(3089),Q.scissor_enable=It));C=Z.framebufferWidth,H=Z.framebufferHeight,B=Z.viewportWidth,Z.viewportWidth=C,I=Z.viewportHeight,Z.viewportHeight=H,$.viewport(0,0,C,H),We[0]=0,We[1]=0,We[2]=C,We[3]=H,P=Z.framebufferWidth,N=Z.framebufferHeight,$.scissor(0,0,P,N),Fe[0]=0,Fe[1]=0,Fe[2]=P,Fe[3]=N,(D=Q.profile)&&(V=performance.now(),t.count++),$.useProgram(r.program),L=ae.angle_instanced_arrays,ne.setVAO(null),R=a.location,(q=te[R]).buffer||$.enableVertexAttribArray(R),5126===q.type&&2===q.size&&q.buffer===i&&!1===q.normalized&&0===q.offset&&0===q.stride||($.bindBuffer(34962,i.buffer),$.vertexAttribPointer(R,2,5126,!1,0,0),q.type=5126,q.size=2,q.buffer=i,q.normalized=!1,q.offset=0,q.stride=0),0!==q.divisor&&(L.vertexAttribDivisorANGLE(R,0),q.divisor=0),G=s.call(this,Z,e,0),$.uniform1f(o.location,G),(j=f.call(this,Z,e,0))&&"framebuffer"===j._reglType&&(j=j.color[0]),U=j._texture,$.uniform1i(l.location,U.bind()),(Y=u.call(this,Z,e,0))&&"framebuffer"===Y._reglType&&(Y=Y.color[0]),ee=Y._texture,$.uniform1i(c.location,ee.bind()),re=h.call(this,Z,e,0),$.uniform1f(d.location,re),ze=b.call(this,Z,e,0),$.uniform1i(p.location,ze),Te=(Oe=g.call(this,Z,e,0))[0],Ee=Oe[1],$.uniform2f(m.location,Te,Ee),He=(Ce=_.call(this,Z,e,0))[0],Be=Ce[1],$.uniform2f(v.location,He,Be),Pe=(Ie=w.call(this,Z,e,0))[0],Ne=Ie[1],$.uniform2f(y.location,Pe,Ne),De=A.call(this,Z,e,0),$.uniform1f(x.location,De),Ve=k.call(this,Z,e,0),$.uniform1f(S.location,Ve),Le=F.call(this,Z,e,0),$.uniformMatrix3fv(z.location,!1,Array.isArray(Le)||Le instanceof Float32Array?Le:(Me[0]=Le[0],Me[1]=Le[1],Me[2]=Le[2],Me[3]=Le[3],Me[4]=Le[4],Me[5]=Le[5],Me[6]=Le[6],Me[7]=Le[7],Me[8]=Le[8],Me)),((Re=J.elements)||ne.currentVAO&&(Re=K.getElements(ne.currentVAO.elements)))&&$.bindBuffer(34963,Re.buffer.buffer),qe=J.offset,(Ge=J.instances)>0?Re?L.drawElementsInstancedANGLE(5,4,Re.type,qe<<(Re.type-5121>>1),Ge):L.drawArraysInstancedANGLE(5,qe,4,Ge):Ge<0&&(Re?$.drawElements(5,4,Re.type,qe<<(Re.type-5121>>1)):$.drawArrays(5,qe,4)),Q.dirty=!0,ne.setVAO(null),ie.next=M,Z.framebufferWidth=T,Z.framebufferHeight=E,Z.viewportWidth=B,Z.viewportHeight=I,D&&(t.cpuTime+=performance.now()-V),U.unbind(),ee.unbind()},scope:function(e,r,a){var o,l,c,d,p,m,v,y,x,S,z,$,X,K,te,ne,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,Fe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze;o=n.call(this,Z,e,a),l=ie.getFramebuffer(o),c=ie.next,ie.next=l,d=Z.framebufferWidth,Z.framebufferWidth=l?l.width:Z.drawingBufferWidth,p=Z.framebufferHeight,Z.framebufferHeight=l?l.height:Z.drawingBufferHeight,m=Z.framebufferWidth,v=Z.framebufferHeight,y=Z.viewportWidth,Z.viewportWidth=m,x=Z.viewportHeight,Z.viewportHeight=v,S=Oe[0],Oe[0]=O,z=Oe[1],Oe[1]=W,$=Oe[2],Oe[2]=m,X=Oe[3],Oe[3]=v,K=Z.framebufferWidth,te=Z.framebufferHeight,ne=ze[0],ze[0]=M,ae=ze[1],ze[1]=T,oe=ze[2],ze[2]=K,se=ze[3],ze[3]=te,(le=Q.profile)&&(fe=performance.now(),t.count++),ce=J.count,J.count=E,ue=J.primitive,J.primitive=C,de=u.call(this,Z,e,a),he=re[H],re[H]=de,pe=f.call(this,Z,e,a),be=re[B],re[B]=pe,me=k.call(this,Z,e,a),ge=re[I],re[I]=me,ve=g.call(this,Z,e,a),_e=re[P],re[P]=ve,ye=A.call(this,Z,e,a),we=re[N],re[N]=ye,xe=F.call(this,Z,e,a),Ae=re[D],re[D]=xe,Se=h.call(this,Z,e,a),ke=re[V],re[V]=Se,Fe=_.call(this,Z,e,a),We=re[L],re[L]=Fe,Me=w.call(this,Z,e,a),Te=re[R],re[R]=Me,Ee=b.call(this,Z,e,a),Ce=re[q],re[q]=Ee,He=s.call(this,Z,e,a),Be=re[G],re[G]=He,Ie=j.state,j.state=1,Pe=j.x,j.x=0,Ne=j.y,j.y=0,De=j.z,j.z=0,Ve=j.w,j.w=0,Le=j.buffer,j.buffer=i,Re=j.size,j.size=2,qe=j.normalized,j.normalized=!1,Ge=j.type,j.type=5126,je=j.offset,j.offset=0,Ue=j.stride,j.stride=0,Ye=j.divisor,j.divisor=0,$e=ee.vert,ee.vert=U,Ze=ee.frag,ee.frag=Y,Q.dirty=!0,r(Z,e,a),ie.next=c,Z.framebufferWidth=d,Z.framebufferHeight=p,Z.viewportWidth=y,Z.viewportHeight=x,Oe[0]=S,Oe[1]=z,Oe[2]=$,Oe[3]=X,ze[0]=ne,ze[1]=ae,ze[2]=oe,ze[3]=se,le&&(t.cpuTime+=performance.now()-fe),J.count=ce,J.primitive=ue,re[H]=he,re[B]=be,re[I]=ge,re[P]=_e,re[N]=we,re[D]=Ae,re[V]=ke,re[L]=We,re[R]=Te,re[q]=Ce,re[G]=Be,j.state=Ie,j.x=Pe,j.y=Ne,j.z=De,j.w=Ve,j.buffer=Le,j.size=Re,j.normalized=qe,j.type=Ge,j.offset=je,j.stride=Ue,j.divisor=Ye,ee.vert=$e,ee.frag=Ze,Q.dirty=!0},batch:function(e,O){var W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,ee,re,ze,Oe,Me,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft,ct,ut,dt,ht,pt,bt,mt,gt,vt,_t,yt,wt,xt,At,St,kt,zt,Ft,Ot,Wt,Mt,Tt,Et,Ct,Ht,Bt,It,Pt,Nt,Dt;(ae.angle_instanced_arrays,W=n.call(this,Z,e,0),M=ie.getFramebuffer(W),T=ie.next,ie.next=M,E=Z.framebufferWidth,Z.framebufferWidth=M?M.width:Z.drawingBufferWidth,C=Z.framebufferHeight,Z.framebufferHeight=M?M.height:Z.drawingBufferHeight,M!==ie.cur&&(M?$.bindFramebuffer(36160,M.framebuffer):$.bindFramebuffer(36160,null),ie.cur=M),Q.dirty)&&((j=X.dither)!==Q.dither&&(j?$.enable(3024):$.disable(3024),Q.dither=j),(U=X.blend_enable)!==Q.blend_enable&&(U?$.enable(3042):$.disable(3042),Q.blend_enable=U),Y=oe[0],ee=oe[1],re=oe[2],ze=oe[3],Y===se[0]&&ee===se[1]&&re===se[2]&&ze===se[3]||($.blendColor(Y,ee,re,ze),se[0]=Y,se[1]=ee,se[2]=re,se[3]=ze),Oe=le[0],Me=le[1],Oe===fe[0]&&Me===fe[1]||($.blendEquationSeparate(Oe,Me),fe[0]=Oe,fe[1]=Me),Ee=ce[0],Ce=ce[1],He=ce[2],Be=ce[3],Ee===ue[0]&&Ce===ue[1]&&He===ue[2]&&Be===ue[3]||($.blendFuncSeparate(Ee,Ce,He,Be),ue[0]=Ee,ue[1]=Ce,ue[2]=He,ue[3]=Be),(Ie=X.depth_enable)!==Q.depth_enable&&(Ie?$.enable(2929):$.disable(2929),Q.depth_enable=Ie),(Pe=X.depth_func)!==Q.depth_func&&($.depthFunc(Pe),Q.depth_func=Pe),Ne=de[0],De=de[1],Ne===he[0]&&De===he[1]||($.depthRange(Ne,De),he[0]=Ne,he[1]=De),(Ve=X.depth_mask)!==Q.depth_mask&&($.depthMask(Ve),Q.depth_mask=Ve),Le=pe[0],Re=pe[1],qe=pe[2],Ge=pe[3],Le===be[0]&&Re===be[1]&&qe===be[2]&&Ge===be[3]||($.colorMask(Le,Re,qe,Ge),be[0]=Le,be[1]=Re,be[2]=qe,be[3]=Ge),(je=X.cull_enable)!==Q.cull_enable&&(je?$.enable(2884):$.disable(2884),Q.cull_enable=je),(Ue=X.cull_face)!==Q.cull_face&&($.cullFace(Ue),Q.cull_face=Ue),(Ye=X.frontFace)!==Q.frontFace&&($.frontFace(Ye),Q.frontFace=Ye),($e=X.lineWidth)!==Q.lineWidth&&($.lineWidth($e),Q.lineWidth=$e),(Ze=X.polygonOffset_enable)!==Q.polygonOffset_enable&&(Ze?$.enable(32823):$.disable(32823),Q.polygonOffset_enable=Ze),Xe=me[0],Qe=me[1],Xe===ge[0]&&Qe===ge[1]||($.polygonOffset(Xe,Qe),ge[0]=Xe,ge[1]=Qe),(Je=X.sample_alpha)!==Q.sample_alpha&&(Je?$.enable(32926):$.disable(32926),Q.sample_alpha=Je),(Ke=X.sample_enable)!==Q.sample_enable&&(Ke?$.enable(32928):$.disable(32928),Q.sample_enable=Ke),et=ve[0],tt=ve[1],et===_e[0]&&tt===_e[1]||($.sampleCoverage(et,tt),_e[0]=et,_e[1]=tt),(nt=X.stencil_enable)!==Q.stencil_enable&&(nt?$.enable(2960):$.disable(2960),Q.stencil_enable=nt),(rt=X.stencil_mask)!==Q.stencil_mask&&($.stencilMask(rt),Q.stencil_mask=rt),it=ye[0],at=ye[1],ot=ye[2],it===we[0]&&at===we[1]&&ot===we[2]||($.stencilFunc(it,at,ot),we[0]=it,we[1]=at,we[2]=ot),st=xe[0],lt=xe[1],ft=xe[2],ct=xe[3],st===Ae[0]&&lt===Ae[1]&&ft===Ae[2]&&ct===Ae[3]||($.stencilOpSeparate(st,lt,ft,ct),Ae[0]=st,Ae[1]=lt,Ae[2]=ft,Ae[3]=ct),ut=Se[0],dt=Se[1],ht=Se[2],pt=Se[3],ut===ke[0]&&dt===ke[1]&&ht===ke[2]&&pt===ke[3]||($.stencilOpSeparate(ut,dt,ht,pt),ke[0]=ut,ke[1]=dt,ke[2]=ht,ke[3]=pt),(bt=X.scissor_enable)!==Q.scissor_enable&&(bt?$.enable(3089):$.disable(3089),Q.scissor_enable=bt));for(H=Z.framebufferWidth,B=Z.framebufferHeight,I=Z.viewportWidth,Z.viewportWidth=H,P=Z.viewportHeight,Z.viewportHeight=B,$.viewport(0,0,H,B),We[0]=0,We[1]=0,We[2]=H,We[3]=B,N=Z.framebufferWidth,D=Z.framebufferHeight,$.scissor(0,0,N,D),Fe[0]=0,Fe[1]=0,Fe[2]=N,Fe[3]=D,(V=Q.profile)&&(L=performance.now(),t.count+=O),$.useProgram(r.program),R=ae.angle_instanced_arrays,ne.setVAO(null),mt=a.location,(gt=te[mt]).buffer||$.enableVertexAttribArray(mt),2,5126===gt.type&&2===gt.size&&gt.buffer===i&&!1===gt.normalized&&0===gt.offset&&0===gt.stride||($.bindBuffer(34962,i.buffer),$.vertexAttribPointer(mt,2,5126,!1,0,0),gt.type=5126,gt.size=2,gt.buffer=i,gt.normalized=!1,gt.offset=0,gt.stride=0),0!==gt.divisor&&(R.vertexAttribDivisorANGLE(mt,0),gt.divisor=0),vt=s.call(this,Z,G,q),$.uniform1f(o.location,vt),(_t=f.call(this,Z,G,q))&&"framebuffer"===_t._reglType&&(_t=_t.color[0]),yt=_t._texture,$.uniform1i(l.location,yt.bind()),(wt=u.call(this,Z,G,q))&&"framebuffer"===wt._reglType&&(wt=wt.color[0]),xt=wt._texture,$.uniform1i(c.location,xt.bind()),At=h.call(this,Z,G,q),$.uniform1f(d.location,At),St=b.call(this,Z,G,q),$.uniform1i(p.location,St),zt=(kt=g.call(this,Z,G,q))[0],Ft=kt[1],$.uniform2f(m.location,zt,Ft),Wt=(Ot=_.call(this,Z,G,q))[0],Mt=Ot[1],$.uniform2f(v.location,Wt,Mt),Et=(Tt=w.call(this,Z,G,q))[0],Ct=Tt[1],$.uniform2f(y.location,Et,Ct),Ht=A.call(this,Z,G,q),$.uniform1f(x.location,Ht),Bt=k.call(this,Z,G,q),$.uniform1f(S.location,Bt),It=F.call(this,Z,G,q),$.uniformMatrix3fv(z.location,!1,Array.isArray(It)||It instanceof Float32Array?It:(Te[0]=It[0],Te[1]=It[1],Te[2]=It[2],Te[3]=It[3],Te[4]=It[4],Te[5]=It[5],Te[6]=It[6],Te[7]=It[7],Te[8]=It[8],Te)),((Pt=J.elements)||ne.currentVAO&&(Pt=K.getElements(ne.currentVAO.elements)))&&$.bindBuffer(34963,Pt.buffer.buffer),Nt=J.offset,Dt=J.instances,q=0;q<O;++q)G=e[q],Dt>0?Pt?R.drawElementsInstancedANGLE(5,4,Pt.type,Nt<<(Pt.type-5121>>1),Dt):R.drawArraysInstancedANGLE(5,Nt,4,Dt):Dt<0&&(Pt?$.drawElements(5,4,Pt.type,Nt<<(Pt.type-5121>>1)):$.drawArrays(5,Nt,4));yt.unbind(),xt.unbind(),Q.dirty=!0,ne.setVAO(null),ie.next=T,Z.framebufferWidth=E,Z.framebufferHeight=C,Z.viewportWidth=I,Z.viewportHeight=P,V&&(t.cpuTime+=performance.now()-L)}}},"4b1048018d132017f70c93d90fb6866b8a15897d22afb4f95c53227794027ed2":function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p){var b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z;return b=e.gl,m=e.context,e.strings,g=e.next,v=e.current,_=e.draw,y=e.elements,e.buffer,w=e.shader,x=e.attributes,A=e.vao,e.uniforms,S=e.framebuffer,k=e.extensions,e.timer,e.isBufferArgs,z=g.blend_color,F=v.blend_color,O=g.blend_equation,W=v.blend_equation,M=g.blend_func,T=v.blend_func,E=g.depth_range,C=v.depth_range,H=g.colorMask,B=v.colorMask,I=g.polygonOffset_offset,P=v.polygonOffset_offset,N=g.sample_coverage,D=v.sample_coverage,V=g.stencil_func,L=v.stencil_func,R=g.stencil_opFront,q=v.stencil_opFront,G=g.stencil_opBack,j=v.stencil_opBack,U=g.scissor_box,Y=v.scissor_box,$=g.viewport,Z=v.viewport,{draw:function(e){var o,s,l,f,c,u,d,h,p,w,U,$,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue;(k.angle_instanced_arrays,o=S.next,S.next=n,s=m.framebufferWidth,m.framebufferWidth=n.width,l=m.framebufferHeight,m.framebufferHeight=n.height,n!==S.cur&&(n?b.bindFramebuffer(36160,n.framebuffer):b.bindFramebuffer(36160,null),S.cur=n),v.dirty)&&((te=g.dither)!==v.dither&&(te?b.enable(3024):b.disable(3024),v.dither=te),(ne=g.blend_enable)!==v.blend_enable&&(ne?b.enable(3042):b.disable(3042),v.blend_enable=ne),re=z[0],ie=z[1],ae=z[2],oe=z[3],re===F[0]&&ie===F[1]&&ae===F[2]&&oe===F[3]||(b.blendColor(re,ie,ae,oe),F[0]=re,F[1]=ie,F[2]=ae,F[3]=oe),se=O[0],le=O[1],se===W[0]&&le===W[1]||(b.blendEquationSeparate(se,le),W[0]=se,W[1]=le),fe=M[0],ce=M[1],ue=M[2],de=M[3],fe===T[0]&&ce===T[1]&&ue===T[2]&&de===T[3]||(b.blendFuncSeparate(fe,ce,ue,de),T[0]=fe,T[1]=ce,T[2]=ue,T[3]=de),(he=g.depth_enable)!==v.depth_enable&&(he?b.enable(2929):b.disable(2929),v.depth_enable=he),(pe=g.depth_func)!==v.depth_func&&(b.depthFunc(pe),v.depth_func=pe),be=E[0],me=E[1],be===C[0]&&me===C[1]||(b.depthRange(be,me),C[0]=be,C[1]=me),(ge=g.depth_mask)!==v.depth_mask&&(b.depthMask(ge),v.depth_mask=ge),ve=H[0],_e=H[1],ye=H[2],we=H[3],ve===B[0]&&_e===B[1]&&ye===B[2]&&we===B[3]||(b.colorMask(ve,_e,ye,we),B[0]=ve,B[1]=_e,B[2]=ye,B[3]=we),(xe=g.cull_enable)!==v.cull_enable&&(xe?b.enable(2884):b.disable(2884),v.cull_enable=xe),(Ae=g.cull_face)!==v.cull_face&&(b.cullFace(Ae),v.cull_face=Ae),(Se=g.frontFace)!==v.frontFace&&(b.frontFace(Se),v.frontFace=Se),(ke=g.lineWidth)!==v.lineWidth&&(b.lineWidth(ke),v.lineWidth=ke),(ze=g.polygonOffset_enable)!==v.polygonOffset_enable&&(ze?b.enable(32823):b.disable(32823),v.polygonOffset_enable=ze),Fe=I[0],Oe=I[1],Fe===P[0]&&Oe===P[1]||(b.polygonOffset(Fe,Oe),P[0]=Fe,P[1]=Oe),(We=g.sample_alpha)!==v.sample_alpha&&(We?b.enable(32926):b.disable(32926),v.sample_alpha=We),(Me=g.sample_enable)!==v.sample_enable&&(Me?b.enable(32928):b.disable(32928),v.sample_enable=Me),Te=N[0],Ee=N[1],Te===D[0]&&Ee===D[1]||(b.sampleCoverage(Te,Ee),D[0]=Te,D[1]=Ee),(Ce=g.stencil_enable)!==v.stencil_enable&&(Ce?b.enable(2960):b.disable(2960),v.stencil_enable=Ce),(He=g.stencil_mask)!==v.stencil_mask&&(b.stencilMask(He),v.stencil_mask=He),Be=V[0],Ie=V[1],Pe=V[2],Be===L[0]&&Ie===L[1]&&Pe===L[2]||(b.stencilFunc(Be,Ie,Pe),L[0]=Be,L[1]=Ie,L[2]=Pe),Ne=R[0],De=R[1],Ve=R[2],Le=R[3],Ne===q[0]&&De===q[1]&&Ve===q[2]&&Le===q[3]||(b.stencilOpSeparate(Ne,De,Ve,Le),q[0]=Ne,q[1]=De,q[2]=Ve,q[3]=Le),Re=G[0],qe=G[1],Ge=G[2],je=G[3],Re===j[0]&&qe===j[1]&&Ge===j[2]&&je===j[3]||(b.stencilOpSeparate(Re,qe,Ge,je),j[0]=Re,j[1]=qe,j[2]=Ge,j[3]=je),(Ue=g.scissor_enable)!==v.scissor_enable&&(Ue?b.enable(3089):b.disable(3089),v.scissor_enable=Ue));f=m.framebufferWidth,c=m.framebufferHeight,u=m.viewportWidth,m.viewportWidth=f,d=m.viewportHeight,m.viewportHeight=c,b.viewport(0,0,f,c),Z[0]=0,Z[1]=0,Z[2]=f,Z[3]=c,h=m.framebufferWidth,p=m.framebufferHeight,b.scissor(0,0,h,p),Y[0]=0,Y[1]=0,Y[2]=h,Y[3]=p,(w=v.profile)&&(U=performance.now(),t.count++),b.useProgram(r.program),$=k.angle_instanced_arrays,A.setVAO(null),X=a.location,(Q=x[X]).buffer||b.enableVertexAttribArray(X),5126===Q.type&&2===Q.size&&Q.buffer===i&&!1===Q.normalized&&0===Q.offset&&0===Q.stride||(b.bindBuffer(34962,i.buffer),b.vertexAttribPointer(X,2,5126,!1,0,0),Q.type=5126,Q.size=2,Q.buffer=i,Q.normalized=!1,Q.offset=0,Q.stride=0),0!==Q.divisor&&($.vertexAttribDivisorANGLE(X,0),Q.divisor=0),((J=_.elements)||A.currentVAO&&(J=y.getElements(A.currentVAO.elements)))&&b.bindBuffer(34963,J.buffer.buffer),K=_.offset,(ee=_.instances)>0?J?$.drawElementsInstancedANGLE(5,4,J.type,K<<(J.type-5121>>1),ee):$.drawArraysInstancedANGLE(5,K,4,ee):ee<0&&(J?b.drawElements(5,4,J.type,K<<(J.type-5121>>1)):b.drawArrays(5,K,4)),v.dirty=!0,A.setVAO(null),S.next=o,m.framebufferWidth=s,m.framebufferHeight=l,m.viewportWidth=u,m.viewportHeight=d,w&&(t.cpuTime+=performance.now()-U)},scope:function(e,r,a){var b,g,y,x,A,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,Y,Z,X,Q,J,K,ee,te,ne;b=S.next,S.next=n,g=m.framebufferWidth,m.framebufferWidth=n.width,y=m.framebufferHeight,m.framebufferHeight=n.height,x=m.framebufferWidth,A=m.framebufferHeight,k=m.viewportWidth,m.viewportWidth=x,z=m.viewportHeight,m.viewportHeight=A,F=$[0],$[0]=o,O=$[1],$[1]=s,W=$[2],$[2]=x,M=$[3],$[3]=A,T=m.framebufferWidth,E=m.framebufferHeight,C=U[0],U[0]=l,H=U[1],U[1]=f,B=U[2],U[2]=T,I=U[3],U[3]=E,(P=v.profile)&&(N=performance.now(),t.count++),D=_.count,_.count=c,V=_.primitive,_.primitive=u,L=d.state,d.state=1,R=d.x,d.x=0,q=d.y,d.y=0,G=d.z,d.z=0,j=d.w,d.w=0,Y=d.buffer,d.buffer=i,Z=d.size,d.size=2,X=d.normalized,d.normalized=!1,Q=d.type,d.type=5126,J=d.offset,d.offset=0,K=d.stride,d.stride=0,ee=d.divisor,d.divisor=0,te=w.vert,w.vert=h,ne=w.frag,w.frag=p,v.dirty=!0,r(m,e,a),S.next=b,m.framebufferWidth=g,m.framebufferHeight=y,m.viewportWidth=k,m.viewportHeight=z,$[0]=F,$[1]=O,$[2]=W,$[3]=M,U[0]=C,U[1]=H,U[2]=B,U[3]=I,P&&(t.cpuTime+=performance.now()-N),_.count=D,_.primitive=V,d.state=L,d.x=R,d.y=q,d.z=G,d.w=j,d.buffer=Y,d.size=Z,d.normalized=X,d.type=Q,d.offset=J,d.stride=K,d.divisor=ee,w.vert=te,w.frag=ne,v.dirty=!0},batch:function(e,o){var s,l,f,c,u,d,h,p,w,U,$,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e;(k.angle_instanced_arrays,s=S.next,S.next=n,l=m.framebufferWidth,m.framebufferWidth=n.width,f=m.framebufferHeight,m.framebufferHeight=n.height,n!==S.cur&&(n?b.bindFramebuffer(36160,n.framebuffer):b.bindFramebuffer(36160,null),S.cur=n),v.dirty)&&((J=g.dither)!==v.dither&&(J?b.enable(3024):b.disable(3024),v.dither=J),(K=g.blend_enable)!==v.blend_enable&&(K?b.enable(3042):b.disable(3042),v.blend_enable=K),ee=z[0],te=z[1],ne=z[2],re=z[3],ee===F[0]&&te===F[1]&&ne===F[2]&&re===F[3]||(b.blendColor(ee,te,ne,re),F[0]=ee,F[1]=te,F[2]=ne,F[3]=re),ie=O[0],ae=O[1],ie===W[0]&&ae===W[1]||(b.blendEquationSeparate(ie,ae),W[0]=ie,W[1]=ae),oe=M[0],se=M[1],le=M[2],fe=M[3],oe===T[0]&&se===T[1]&&le===T[2]&&fe===T[3]||(b.blendFuncSeparate(oe,se,le,fe),T[0]=oe,T[1]=se,T[2]=le,T[3]=fe),(ce=g.depth_enable)!==v.depth_enable&&(ce?b.enable(2929):b.disable(2929),v.depth_enable=ce),(ue=g.depth_func)!==v.depth_func&&(b.depthFunc(ue),v.depth_func=ue),de=E[0],he=E[1],de===C[0]&&he===C[1]||(b.depthRange(de,he),C[0]=de,C[1]=he),(pe=g.depth_mask)!==v.depth_mask&&(b.depthMask(pe),v.depth_mask=pe),be=H[0],me=H[1],ge=H[2],ve=H[3],be===B[0]&&me===B[1]&&ge===B[2]&&ve===B[3]||(b.colorMask(be,me,ge,ve),B[0]=be,B[1]=me,B[2]=ge,B[3]=ve),(_e=g.cull_enable)!==v.cull_enable&&(_e?b.enable(2884):b.disable(2884),v.cull_enable=_e),(ye=g.cull_face)!==v.cull_face&&(b.cullFace(ye),v.cull_face=ye),(we=g.frontFace)!==v.frontFace&&(b.frontFace(we),v.frontFace=we),(xe=g.lineWidth)!==v.lineWidth&&(b.lineWidth(xe),v.lineWidth=xe),(Ae=g.polygonOffset_enable)!==v.polygonOffset_enable&&(Ae?b.enable(32823):b.disable(32823),v.polygonOffset_enable=Ae),Se=I[0],ke=I[1],Se===P[0]&&ke===P[1]||(b.polygonOffset(Se,ke),P[0]=Se,P[1]=ke),(ze=g.sample_alpha)!==v.sample_alpha&&(ze?b.enable(32926):b.disable(32926),v.sample_alpha=ze),(Fe=g.sample_enable)!==v.sample_enable&&(Fe?b.enable(32928):b.disable(32928),v.sample_enable=Fe),Oe=N[0],We=N[1],Oe===D[0]&&We===D[1]||(b.sampleCoverage(Oe,We),D[0]=Oe,D[1]=We),(Me=g.stencil_enable)!==v.stencil_enable&&(Me?b.enable(2960):b.disable(2960),v.stencil_enable=Me),(Te=g.stencil_mask)!==v.stencil_mask&&(b.stencilMask(Te),v.stencil_mask=Te),Ee=V[0],Ce=V[1],He=V[2],Ee===L[0]&&Ce===L[1]&&He===L[2]||(b.stencilFunc(Ee,Ce,He),L[0]=Ee,L[1]=Ce,L[2]=He),Be=R[0],Ie=R[1],Pe=R[2],Ne=R[3],Be===q[0]&&Ie===q[1]&&Pe===q[2]&&Ne===q[3]||(b.stencilOpSeparate(Be,Ie,Pe,Ne),q[0]=Be,q[1]=Ie,q[2]=Pe,q[3]=Ne),De=G[0],Ve=G[1],Le=G[2],Re=G[3],De===j[0]&&Ve===j[1]&&Le===j[2]&&Re===j[3]||(b.stencilOpSeparate(De,Ve,Le,Re),j[0]=De,j[1]=Ve,j[2]=Le,j[3]=Re),(qe=g.scissor_enable)!==v.scissor_enable&&(qe?b.enable(3089):b.disable(3089),v.scissor_enable=qe));for(c=m.framebufferWidth,u=m.framebufferHeight,d=m.viewportWidth,m.viewportWidth=c,h=m.viewportHeight,m.viewportHeight=u,b.viewport(0,0,c,u),Z[0]=0,Z[1]=0,Z[2]=c,Z[3]=u,p=m.framebufferWidth,w=m.framebufferHeight,b.scissor(0,0,p,w),Y[0]=0,Y[1]=0,Y[2]=p,Y[3]=w,(U=v.profile)&&($=performance.now(),t.count+=o),b.useProgram(r.program),X=k.angle_instanced_arrays,A.setVAO(null),Ge=a.location,(je=x[Ge]).buffer||b.enableVertexAttribArray(Ge),2,5126===je.type&&2===je.size&&je.buffer===i&&!1===je.normalized&&0===je.offset&&0===je.stride||(b.bindBuffer(34962,i.buffer),b.vertexAttribPointer(Ge,2,5126,!1,0,0),je.type=5126,je.size=2,je.buffer=i,je.normalized=!1,je.offset=0,je.stride=0),0!==je.divisor&&(X.vertexAttribDivisorANGLE(Ge,0),je.divisor=0),((Ue=_.elements)||A.currentVAO&&(Ue=y.getElements(A.currentVAO.elements)))&&b.bindBuffer(34963,Ue.buffer.buffer),Ye=_.offset,$e=_.instances,Q=0;Q<o;++Q)e[Q],$e>0?Ue?X.drawElementsInstancedANGLE(5,4,Ue.type,Ye<<(Ue.type-5121>>1),$e):X.drawArraysInstancedANGLE(5,Ye,4,$e):$e<0&&(Ue?b.drawElements(5,4,Ue.type,Ye<<(Ue.type-5121>>1)):b.drawArrays(5,Ye,4));v.dirty=!0,A.setVAO(null),S.next=s,m.framebufferWidth=l,m.framebufferHeight=f,m.viewportWidth=d,m.viewportHeight=h,U&&(t.cpuTime+=performance.now()-$)}}},dc78818e05e5bdb719097afd9459427ce9cec77af6efb5a73a4259e754167213:function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K){var ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe;return ee=e.gl,te=e.context,e.strings,ne=e.next,re=e.current,ie=e.draw,ae=e.elements,e.buffer,oe=e.shader,se=e.attributes,le=e.vao,fe=e.uniforms,ce=e.framebuffer,ue=e.extensions,e.timer,e.isBufferArgs,de=ne.blend_color,he=re.blend_color,pe=ne.blend_equation,be=re.blend_equation,me=ne.blend_func,ge=re.blend_func,ve=ne.depth_range,_e=re.depth_range,ye=ne.colorMask,we=re.colorMask,xe=ne.polygonOffset_offset,Ae=re.polygonOffset_offset,Se=ne.sample_coverage,ke=re.sample_coverage,ze=ne.stencil_func,Fe=re.stencil_func,Oe=ne.stencil_opFront,We=re.stencil_opFront,Me=ne.stencil_opBack,Te=re.stencil_opBack,Ee=ne.scissor_box,Ce=re.scissor_box,He=ne.viewport,Be=re.viewport,Ie=new Float32Array(9),Pe=new Float32Array(9),{draw:function(e){var T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,oe,fe,Ee,He,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft,ct,ut,dt,ht,pt,bt,mt,gt,vt,_t,yt,wt,xt,At,St,kt,zt,Ft,Ot,Wt,Mt,Tt,Et,Ct,Ht,Bt,It;(ue.angle_instanced_arrays,T=n.call(this,te,e,0),E=ce.getFramebuffer(T),C=ce.next,ce.next=E,H=te.framebufferWidth,te.framebufferWidth=E?E.width:te.drawingBufferWidth,B=te.framebufferHeight,te.framebufferHeight=E?E.height:te.drawingBufferHeight,E!==ce.cur&&(E?ee.bindFramebuffer(36160,E.framebuffer):ee.bindFramebuffer(36160,null),ce.cur=E),re.dirty)&&((Ye=ne.dither)!==re.dither&&(Ye?ee.enable(3024):ee.disable(3024),re.dither=Ye),($e=ne.blend_enable)!==re.blend_enable&&($e?ee.enable(3042):ee.disable(3042),re.blend_enable=$e),Ze=de[0],Xe=de[1],Qe=de[2],Je=de[3],Ze===he[0]&&Xe===he[1]&&Qe===he[2]&&Je===he[3]||(ee.blendColor(Ze,Xe,Qe,Je),he[0]=Ze,he[1]=Xe,he[2]=Qe,he[3]=Je),Ke=pe[0],et=pe[1],Ke===be[0]&&et===be[1]||(ee.blendEquationSeparate(Ke,et),be[0]=Ke,be[1]=et),tt=me[0],nt=me[1],rt=me[2],it=me[3],tt===ge[0]&&nt===ge[1]&&rt===ge[2]&&it===ge[3]||(ee.blendFuncSeparate(tt,nt,rt,it),ge[0]=tt,ge[1]=nt,ge[2]=rt,ge[3]=it),(at=ne.depth_func)!==re.depth_func&&(ee.depthFunc(at),re.depth_func=at),ot=ve[0],st=ve[1],ot===_e[0]&&st===_e[1]||(ee.depthRange(ot,st),_e[0]=ot,_e[1]=st),lt=ye[0],ft=ye[1],ct=ye[2],ut=ye[3],lt===we[0]&&ft===we[1]&&ct===we[2]&&ut===we[3]||(ee.colorMask(lt,ft,ct,ut),we[0]=lt,we[1]=ft,we[2]=ct,we[3]=ut),(dt=ne.cull_enable)!==re.cull_enable&&(dt?ee.enable(2884):ee.disable(2884),re.cull_enable=dt),(ht=ne.cull_face)!==re.cull_face&&(ee.cullFace(ht),re.cull_face=ht),(pt=ne.frontFace)!==re.frontFace&&(ee.frontFace(pt),re.frontFace=pt),(bt=ne.lineWidth)!==re.lineWidth&&(ee.lineWidth(bt),re.lineWidth=bt),(mt=ne.polygonOffset_enable)!==re.polygonOffset_enable&&(mt?ee.enable(32823):ee.disable(32823),re.polygonOffset_enable=mt),gt=xe[0],vt=xe[1],gt===Ae[0]&&vt===Ae[1]||(ee.polygonOffset(gt,vt),Ae[0]=gt,Ae[1]=vt),(_t=ne.sample_alpha)!==re.sample_alpha&&(_t?ee.enable(32926):ee.disable(32926),re.sample_alpha=_t),(yt=ne.sample_enable)!==re.sample_enable&&(yt?ee.enable(32928):ee.disable(32928),re.sample_enable=yt),wt=Se[0],xt=Se[1],wt===ke[0]&&xt===ke[1]||(ee.sampleCoverage(wt,xt),ke[0]=wt,ke[1]=xt),(At=ne.stencil_enable)!==re.stencil_enable&&(At?ee.enable(2960):ee.disable(2960),re.stencil_enable=At),(St=ne.stencil_mask)!==re.stencil_mask&&(ee.stencilMask(St),re.stencil_mask=St),kt=ze[0],zt=ze[1],Ft=ze[2],kt===Fe[0]&&zt===Fe[1]&&Ft===Fe[2]||(ee.stencilFunc(kt,zt,Ft),Fe[0]=kt,Fe[1]=zt,Fe[2]=Ft),Ot=Oe[0],Wt=Oe[1],Mt=Oe[2],Tt=Oe[3],Ot===We[0]&&Wt===We[1]&&Mt===We[2]&&Tt===We[3]||(ee.stencilOpSeparate(Ot,Wt,Mt,Tt),We[0]=Ot,We[1]=Wt,We[2]=Mt,We[3]=Tt),Et=Me[0],Ct=Me[1],Ht=Me[2],Bt=Me[3],Et===Te[0]&&Ct===Te[1]&&Ht===Te[2]&&Bt===Te[3]||(ee.stencilOpSeparate(Et,Ct,Ht,Bt),Te[0]=Et,Te[1]=Ct,Te[2]=Ht,Te[3]=Bt),(It=ne.scissor_enable)!==re.scissor_enable&&(It?ee.enable(3089):ee.disable(3089),re.scissor_enable=It));I=te.framebufferWidth,P=te.framebufferHeight,N=te.viewportWidth,te.viewportWidth=I,D=te.viewportHeight,te.viewportHeight=P,ee.viewport(0,0,I,P),Be[0]=0,Be[1]=0,Be[2]=I,Be[3]=P,r?ee.enable(2929):ee.disable(2929),re.depth_enable=r,ee.depthMask(i),re.depth_mask=i,V=te.framebufferWidth,L=te.framebufferHeight,ee.scissor(0,0,V,L),Ce[0]=0,Ce[1]=0,Ce[2]=V,Ce[3]=L,(R=re.profile)&&(q=performance.now(),t.count++),ee.useProgram(a.program),G=ue.angle_instanced_arrays,le.setVAO(null),j=s.location,(U=se[j]).buffer||ee.enableVertexAttribArray(j),5126===U.type&&2===U.size&&U.buffer===o&&!1===U.normalized&&0===U.offset&&0===U.stride||(ee.bindBuffer(34962,o.buffer),ee.vertexAttribPointer(j,2,5126,!1,0,0),U.type=5126,U.size=2,U.buffer=o,U.normalized=!1,U.offset=0,U.stride=0),0!==U.divisor&&(G.vertexAttribDivisorANGLE(j,0),U.divisor=0),Y=f.call(this,te,e,0),ee.uniform1f(l.location,Y),Z=($=u.call(this,te,e,0))[0],X=$[1],ee.uniform2f(c.location,Z,X),(Q=h.call(this,te,e,0))&&"framebuffer"===Q._reglType&&(Q=Q.color[0]),J=Q._texture,ee.uniform1i(d.location,J.bind()),K=b.call(this,te,e,0),ee.uniform1f(p.location,K),(oe=g.call(this,te,e,0))&&"framebuffer"===oe._reglType&&(oe=oe.color[0]),fe=oe._texture,ee.uniform1i(m.location,fe.bind()),Ee=_.call(this,te,e,0),ee.uniform1f(v.location,Ee),He=w.call(this,te,e,0),ee.uniform1i(y.location,He),Ne=(Pe=A.call(this,te,e,0))[0],De=Pe[1],ee.uniform2f(x.location,Ne,De),Ve=k.call(this,te,e,0),ee.uniform1f(S.location,Ve),Le=F.call(this,te,e,0),ee.uniform1f(z.location,Le),Re=W.call(this,te,e,0),ee.uniformMatrix3fv(O.location,!1,Array.isArray(Re)||Re instanceof Float32Array?Re:(Ie[0]=Re[0],Ie[1]=Re[1],Ie[2]=Re[2],Ie[3]=Re[3],Ie[4]=Re[4],Ie[5]=Re[5],Ie[6]=Re[6],Ie[7]=Re[7],Ie[8]=Re[8],Ie)),((qe=ie.elements)||le.currentVAO&&(qe=ae.getElements(le.currentVAO.elements)))&&ee.bindBuffer(34963,qe.buffer.buffer),Ge=ie.offset,(je=M.call(this,te,e,0))&&((Ue=ie.instances)>0?qe?G.drawElementsInstancedANGLE(0,je,qe.type,Ge<<(qe.type-5121>>1),Ue):G.drawArraysInstancedANGLE(0,Ge,je,Ue):Ue<0&&(qe?ee.drawElements(0,je,qe.type,Ge<<(qe.type-5121>>1)):ee.drawArrays(0,Ge,je)),re.dirty=!0,le.setVAO(null),ce.next=C,te.framebufferWidth=H,te.framebufferHeight=B,te.viewportWidth=N,te.viewportHeight=D,R&&(t.cpuTime+=performance.now()-q),J.unbind(),fe.unbind())},scope:function(e,r,i){var a,s,l,c,d,p,m,v,y,x,S,z,O,J,K,ee,ae,se,le,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ce,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt;a=n.call(this,te,e,i),s=ce.getFramebuffer(a),l=ce.next,ce.next=s,c=te.framebufferWidth,te.framebufferWidth=s?s.width:te.drawingBufferWidth,d=te.framebufferHeight,te.framebufferHeight=s?s.height:te.drawingBufferHeight,p=te.framebufferWidth,m=te.framebufferHeight,v=te.viewportWidth,te.viewportWidth=p,y=te.viewportHeight,te.viewportHeight=m,x=He[0],He[0]=T,S=He[1],He[1]=E,z=He[2],He[2]=p,O=He[3],He[3]=m,J=ne.depth_enable,ne.depth_enable=C,K=ne.depth_mask,ne.depth_mask=H,ee=te.framebufferWidth,ae=te.framebufferHeight,se=Ee[0],Ee[0]=B,le=Ee[1],Ee[1]=I,ue=Ee[2],Ee[2]=ee,de=Ee[3],Ee[3]=ae,(he=re.profile)&&(pe=performance.now(),t.count++),be=M.call(this,te,e,i),me=ie.count,ie.count=be,ge=ie.primitive,ie.primitive=P,ve=g.call(this,te,e,i),_e=fe[N],fe[N]=ve,ye=h.call(this,te,e,i),we=fe[D],fe[D]=ye,xe=_.call(this,te,e,i),Ae=fe[V],fe[V]=xe,Se=k.call(this,te,e,i),ke=fe[L],fe[L]=Se,ze=b.call(this,te,e,i),Fe=fe[R],fe[R]=ze,Oe=W.call(this,te,e,i),We=fe[q],fe[q]=Oe,Me=F.call(this,te,e,i),Te=fe[G],fe[G]=Me,Ce=A.call(this,te,e,i),Be=fe[j],fe[j]=Ce,Ie=w.call(this,te,e,i),Pe=fe[U],fe[U]=Ie,Ne=u.call(this,te,e,i),De=fe[Y],fe[Y]=Ne,Ve=f.call(this,te,e,i),Le=fe[$],fe[$]=Ve,Re=Z.state,Z.state=1,qe=Z.x,Z.x=0,Ge=Z.y,Z.y=0,je=Z.z,Z.z=0,Ue=Z.w,Z.w=0,Ye=Z.buffer,Z.buffer=o,$e=Z.size,Z.size=2,Ze=Z.normalized,Z.normalized=!1,Xe=Z.type,Z.type=5126,Qe=Z.offset,Z.offset=0,Je=Z.stride,Z.stride=0,Ke=Z.divisor,Z.divisor=0,et=oe.vert,oe.vert=X,tt=oe.frag,oe.frag=Q,re.dirty=!0,r(te,e,i),ce.next=l,te.framebufferWidth=c,te.framebufferHeight=d,te.viewportWidth=v,te.viewportHeight=y,He[0]=x,He[1]=S,He[2]=z,He[3]=O,ne.depth_enable=J,ne.depth_mask=K,Ee[0]=se,Ee[1]=le,Ee[2]=ue,Ee[3]=de,he&&(t.cpuTime+=performance.now()-pe),ie.count=me,ie.primitive=ge,fe[N]=_e,fe[D]=we,fe[V]=Ae,fe[L]=ke,fe[R]=Fe,fe[q]=We,fe[G]=Te,fe[j]=Be,fe[U]=Pe,fe[Y]=De,fe[$]=Le,Z.state=Re,Z.x=qe,Z.y=Ge,Z.z=je,Z.w=Ue,Z.buffer=Ye,Z.size=$e,Z.normalized=Ze,Z.type=Xe,Z.offset=Qe,Z.stride=Je,Z.divisor=Ke,oe.vert=et,oe.frag=tt,re.dirty=!0},batch:function(e,r){var i,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,oe,fe,Ee,He,Ie,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft,ct,ut,dt,ht,pt,bt,mt,gt,vt,_t,yt,wt,xt,At,St,kt,zt,Ft,Ot,Wt,Mt,Tt,Et,Ct,Ht,Bt,It,Pt,Nt,Dt;(ue.angle_instanced_arrays,i=n.call(this,te,e,0),T=ce.getFramebuffer(i),E=ce.next,ce.next=T,C=te.framebufferWidth,te.framebufferWidth=T?T.width:te.drawingBufferWidth,H=te.framebufferHeight,te.framebufferHeight=T?T.height:te.drawingBufferHeight,T!==ce.cur&&(T?ee.bindFramebuffer(36160,T.framebuffer):ee.bindFramebuffer(36160,null),ce.cur=T),re.dirty)&&((U=ne.dither)!==re.dither&&(U?ee.enable(3024):ee.disable(3024),re.dither=U),(Y=ne.blend_enable)!==re.blend_enable&&(Y?ee.enable(3042):ee.disable(3042),re.blend_enable=Y),$=de[0],Z=de[1],X=de[2],Q=de[3],$===he[0]&&Z===he[1]&&X===he[2]&&Q===he[3]||(ee.blendColor($,Z,X,Q),he[0]=$,he[1]=Z,he[2]=X,he[3]=Q),oe=pe[0],fe=pe[1],oe===be[0]&&fe===be[1]||(ee.blendEquationSeparate(oe,fe),be[0]=oe,be[1]=fe),Ee=me[0],He=me[1],Ie=me[2],Ne=me[3],Ee===ge[0]&&He===ge[1]&&Ie===ge[2]&&Ne===ge[3]||(ee.blendFuncSeparate(Ee,He,Ie,Ne),ge[0]=Ee,ge[1]=He,ge[2]=Ie,ge[3]=Ne),(De=ne.depth_func)!==re.depth_func&&(ee.depthFunc(De),re.depth_func=De),Ve=ve[0],Le=ve[1],Ve===_e[0]&&Le===_e[1]||(ee.depthRange(Ve,Le),_e[0]=Ve,_e[1]=Le),Re=ye[0],qe=ye[1],Ge=ye[2],je=ye[3],Re===we[0]&&qe===we[1]&&Ge===we[2]&&je===we[3]||(ee.colorMask(Re,qe,Ge,je),we[0]=Re,we[1]=qe,we[2]=Ge,we[3]=je),(Ue=ne.cull_enable)!==re.cull_enable&&(Ue?ee.enable(2884):ee.disable(2884),re.cull_enable=Ue),(Ye=ne.cull_face)!==re.cull_face&&(ee.cullFace(Ye),re.cull_face=Ye),($e=ne.frontFace)!==re.frontFace&&(ee.frontFace($e),re.frontFace=$e),(Ze=ne.lineWidth)!==re.lineWidth&&(ee.lineWidth(Ze),re.lineWidth=Ze),(Xe=ne.polygonOffset_enable)!==re.polygonOffset_enable&&(Xe?ee.enable(32823):ee.disable(32823),re.polygonOffset_enable=Xe),Qe=xe[0],Je=xe[1],Qe===Ae[0]&&Je===Ae[1]||(ee.polygonOffset(Qe,Je),Ae[0]=Qe,Ae[1]=Je),(Ke=ne.sample_alpha)!==re.sample_alpha&&(Ke?ee.enable(32926):ee.disable(32926),re.sample_alpha=Ke),(et=ne.sample_enable)!==re.sample_enable&&(et?ee.enable(32928):ee.disable(32928),re.sample_enable=et),tt=Se[0],nt=Se[1],tt===ke[0]&&nt===ke[1]||(ee.sampleCoverage(tt,nt),ke[0]=tt,ke[1]=nt),(rt=ne.stencil_enable)!==re.stencil_enable&&(rt?ee.enable(2960):ee.disable(2960),re.stencil_enable=rt),(it=ne.stencil_mask)!==re.stencil_mask&&(ee.stencilMask(it),re.stencil_mask=it),at=ze[0],ot=ze[1],st=ze[2],at===Fe[0]&&ot===Fe[1]&&st===Fe[2]||(ee.stencilFunc(at,ot,st),Fe[0]=at,Fe[1]=ot,Fe[2]=st),lt=Oe[0],ft=Oe[1],ct=Oe[2],ut=Oe[3],lt===We[0]&&ft===We[1]&&ct===We[2]&&ut===We[3]||(ee.stencilOpSeparate(lt,ft,ct,ut),We[0]=lt,We[1]=ft,We[2]=ct,We[3]=ut),dt=Me[0],ht=Me[1],pt=Me[2],bt=Me[3],dt===Te[0]&&ht===Te[1]&&pt===Te[2]&&bt===Te[3]||(ee.stencilOpSeparate(dt,ht,pt,bt),Te[0]=dt,Te[1]=ht,Te[2]=pt,Te[3]=bt),(mt=ne.scissor_enable)!==re.scissor_enable&&(mt?ee.enable(3089):ee.disable(3089),re.scissor_enable=mt));for(B=te.framebufferWidth,I=te.framebufferHeight,P=te.viewportWidth,te.viewportWidth=B,N=te.viewportHeight,te.viewportHeight=I,ee.viewport(0,0,B,I),Be[0]=0,Be[1]=0,Be[2]=B,Be[3]=I,J?ee.enable(2929):ee.disable(2929),re.depth_enable=J,ee.depthMask(K),re.depth_mask=K,D=te.framebufferWidth,V=te.framebufferHeight,ee.scissor(0,0,D,V),Ce[0]=0,Ce[1]=0,Ce[2]=D,Ce[3]=V,(L=re.profile)&&(R=performance.now(),t.count+=r),ee.useProgram(a.program),q=ue.angle_instanced_arrays,le.setVAO(null),gt=s.location,(vt=se[gt]).buffer||ee.enableVertexAttribArray(gt),2,5126===vt.type&&2===vt.size&&vt.buffer===o&&!1===vt.normalized&&0===vt.offset&&0===vt.stride||(ee.bindBuffer(34962,o.buffer),ee.vertexAttribPointer(gt,2,5126,!1,0,0),vt.type=5126,vt.size=2,vt.buffer=o,vt.normalized=!1,vt.offset=0,vt.stride=0),0!==vt.divisor&&(q.vertexAttribDivisorANGLE(gt,0),vt.divisor=0),_t=f.call(this,te,j,G),ee.uniform1f(l.location,_t),wt=(yt=u.call(this,te,j,G))[0],xt=yt[1],ee.uniform2f(c.location,wt,xt),(At=h.call(this,te,j,G))&&"framebuffer"===At._reglType&&(At=At.color[0]),St=At._texture,ee.uniform1i(d.location,St.bind()),kt=b.call(this,te,j,G),ee.uniform1f(p.location,kt),(zt=g.call(this,te,j,G))&&"framebuffer"===zt._reglType&&(zt=zt.color[0]),Ft=zt._texture,ee.uniform1i(m.location,Ft.bind()),Ot=_.call(this,te,j,G),ee.uniform1f(v.location,Ot),Wt=w.call(this,te,j,G),ee.uniform1i(y.location,Wt),Tt=(Mt=A.call(this,te,j,G))[0],Et=Mt[1],ee.uniform2f(x.location,Tt,Et),Ct=k.call(this,te,j,G),ee.uniform1f(S.location,Ct),Ht=F.call(this,te,j,G),ee.uniform1f(z.location,Ht),Bt=W.call(this,te,j,G),ee.uniformMatrix3fv(O.location,!1,Array.isArray(Bt)||Bt instanceof Float32Array?Bt:(Pe[0]=Bt[0],Pe[1]=Bt[1],Pe[2]=Bt[2],Pe[3]=Bt[3],Pe[4]=Bt[4],Pe[5]=Bt[5],Pe[6]=Bt[6],Pe[7]=Bt[7],Pe[8]=Bt[8],Pe)),((It=ie.elements)||le.currentVAO&&(It=ae.getElements(le.currentVAO.elements)))&&ee.bindBuffer(34963,It.buffer.buffer),Pt=ie.offset,Nt=M.call(this,te,j,G),Dt=ie.instances,G=0;G<r;++G)j=e[G],Nt&&(Dt>0?It?q.drawElementsInstancedANGLE(0,Nt,It.type,Pt<<(It.type-5121>>1),Dt):q.drawArraysInstancedANGLE(0,Pt,Nt,Dt):Dt<0&&(It?ee.drawElements(0,Nt,It.type,Pt<<(It.type-5121>>1)):ee.drawArrays(0,Pt,Nt)));St.unbind(),Ft.unbind(),re.dirty=!0,le.setVAO(null),ce.next=E,te.framebufferWidth=C,te.framebufferHeight=H,te.viewportWidth=P,te.viewportHeight=N,L&&(t.cpuTime+=performance.now()-R)}}},"3656ddc8a124213dd6cc380663c06f93d2eb875ec39b2fabe1227101650ec654":function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p){var b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z;return b=e.gl,m=e.context,e.strings,g=e.next,v=e.current,_=e.draw,y=e.elements,e.buffer,w=e.shader,x=e.attributes,A=e.vao,e.uniforms,S=e.framebuffer,k=e.extensions,e.timer,e.isBufferArgs,z=g.blend_color,F=v.blend_color,O=g.blend_equation,W=v.blend_equation,M=g.blend_func,T=v.blend_func,E=g.depth_range,C=v.depth_range,H=g.colorMask,B=v.colorMask,I=g.polygonOffset_offset,P=v.polygonOffset_offset,N=g.sample_coverage,D=v.sample_coverage,V=g.stencil_func,L=v.stencil_func,R=g.stencil_opFront,q=v.stencil_opFront,G=g.stencil_opBack,j=v.stencil_opBack,U=g.scissor_box,Y=v.scissor_box,$=g.viewport,Z=v.viewport,{draw:function(e){var o,s,l,f,c,u,d,h,p,w,U,$,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e;(k.angle_instanced_arrays,o=n.call(this,m,e,0),s=S.getFramebuffer(o),l=S.next,S.next=s,f=m.framebufferWidth,m.framebufferWidth=s?s.width:m.drawingBufferWidth,c=m.framebufferHeight,m.framebufferHeight=s?s.height:m.drawingBufferHeight,s!==S.cur&&(s?b.bindFramebuffer(36160,s.framebuffer):b.bindFramebuffer(36160,null),S.cur=s),v.dirty)&&((re=g.dither)!==v.dither&&(re?b.enable(3024):b.disable(3024),v.dither=re),(ie=g.blend_enable)!==v.blend_enable&&(ie?b.enable(3042):b.disable(3042),v.blend_enable=ie),ae=z[0],oe=z[1],se=z[2],le=z[3],ae===F[0]&&oe===F[1]&&se===F[2]&&le===F[3]||(b.blendColor(ae,oe,se,le),F[0]=ae,F[1]=oe,F[2]=se,F[3]=le),fe=O[0],ce=O[1],fe===W[0]&&ce===W[1]||(b.blendEquationSeparate(fe,ce),W[0]=fe,W[1]=ce),ue=M[0],de=M[1],he=M[2],pe=M[3],ue===T[0]&&de===T[1]&&he===T[2]&&pe===T[3]||(b.blendFuncSeparate(ue,de,he,pe),T[0]=ue,T[1]=de,T[2]=he,T[3]=pe),(be=g.depth_enable)!==v.depth_enable&&(be?b.enable(2929):b.disable(2929),v.depth_enable=be),(me=g.depth_func)!==v.depth_func&&(b.depthFunc(me),v.depth_func=me),ge=E[0],ve=E[1],ge===C[0]&&ve===C[1]||(b.depthRange(ge,ve),C[0]=ge,C[1]=ve),(_e=g.depth_mask)!==v.depth_mask&&(b.depthMask(_e),v.depth_mask=_e),ye=H[0],we=H[1],xe=H[2],Ae=H[3],ye===B[0]&&we===B[1]&&xe===B[2]&&Ae===B[3]||(b.colorMask(ye,we,xe,Ae),B[0]=ye,B[1]=we,B[2]=xe,B[3]=Ae),(Se=g.cull_enable)!==v.cull_enable&&(Se?b.enable(2884):b.disable(2884),v.cull_enable=Se),(ke=g.cull_face)!==v.cull_face&&(b.cullFace(ke),v.cull_face=ke),(ze=g.frontFace)!==v.frontFace&&(b.frontFace(ze),v.frontFace=ze),(Fe=g.lineWidth)!==v.lineWidth&&(b.lineWidth(Fe),v.lineWidth=Fe),(Oe=g.polygonOffset_enable)!==v.polygonOffset_enable&&(Oe?b.enable(32823):b.disable(32823),v.polygonOffset_enable=Oe),We=I[0],Me=I[1],We===P[0]&&Me===P[1]||(b.polygonOffset(We,Me),P[0]=We,P[1]=Me),(Te=g.sample_alpha)!==v.sample_alpha&&(Te?b.enable(32926):b.disable(32926),v.sample_alpha=Te),(Ee=g.sample_enable)!==v.sample_enable&&(Ee?b.enable(32928):b.disable(32928),v.sample_enable=Ee),Ce=N[0],He=N[1],Ce===D[0]&&He===D[1]||(b.sampleCoverage(Ce,He),D[0]=Ce,D[1]=He),(Be=g.stencil_enable)!==v.stencil_enable&&(Be?b.enable(2960):b.disable(2960),v.stencil_enable=Be),(Ie=g.stencil_mask)!==v.stencil_mask&&(b.stencilMask(Ie),v.stencil_mask=Ie),Pe=V[0],Ne=V[1],De=V[2],Pe===L[0]&&Ne===L[1]&&De===L[2]||(b.stencilFunc(Pe,Ne,De),L[0]=Pe,L[1]=Ne,L[2]=De),Ve=R[0],Le=R[1],Re=R[2],qe=R[3],Ve===q[0]&&Le===q[1]&&Re===q[2]&&qe===q[3]||(b.stencilOpSeparate(Ve,Le,Re,qe),q[0]=Ve,q[1]=Le,q[2]=Re,q[3]=qe),Ge=G[0],je=G[1],Ue=G[2],Ye=G[3],Ge===j[0]&&je===j[1]&&Ue===j[2]&&Ye===j[3]||(b.stencilOpSeparate(Ge,je,Ue,Ye),j[0]=Ge,j[1]=je,j[2]=Ue,j[3]=Ye),($e=g.scissor_enable)!==v.scissor_enable&&($e?b.enable(3089):b.disable(3089),v.scissor_enable=$e));u=m.framebufferWidth,d=m.framebufferHeight,h=m.viewportWidth,m.viewportWidth=u,p=m.viewportHeight,m.viewportHeight=d,b.viewport(0,0,u,d),Z[0]=0,Z[1]=0,Z[2]=u,Z[3]=d,w=m.framebufferWidth,U=m.framebufferHeight,b.scissor(0,0,w,U),Y[0]=0,Y[1]=0,Y[2]=w,Y[3]=U,($=v.profile)&&(X=performance.now(),t.count++),b.useProgram(r.program),Q=k.angle_instanced_arrays,A.setVAO(null),J=a.location,(K=x[J]).buffer||b.enableVertexAttribArray(J),5126===K.type&&2===K.size&&K.buffer===i&&!1===K.normalized&&0===K.offset&&0===K.stride||(b.bindBuffer(34962,i.buffer),b.vertexAttribPointer(J,2,5126,!1,0,0),K.type=5126,K.size=2,K.buffer=i,K.normalized=!1,K.offset=0,K.stride=0),0!==K.divisor&&(Q.vertexAttribDivisorANGLE(J,0),K.divisor=0),((ee=_.elements)||A.currentVAO&&(ee=y.getElements(A.currentVAO.elements)))&&b.bindBuffer(34963,ee.buffer.buffer),te=_.offset,(ne=_.instances)>0?ee?Q.drawElementsInstancedANGLE(5,4,ee.type,te<<(ee.type-5121>>1),ne):Q.drawArraysInstancedANGLE(5,te,4,ne):ne<0&&(ee?b.drawElements(5,4,ee.type,te<<(ee.type-5121>>1)):b.drawArrays(5,te,4)),v.dirty=!0,A.setVAO(null),S.next=l,m.framebufferWidth=f,m.framebufferHeight=c,m.viewportWidth=h,m.viewportHeight=p,$&&(t.cpuTime+=performance.now()-X)},scope:function(e,r,a){var b,g,y,x,A,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,Y,Z,X,Q,J,K,ee,te,ne,re,ie;b=n.call(this,m,e,a),g=S.getFramebuffer(b),y=S.next,S.next=g,x=m.framebufferWidth,m.framebufferWidth=g?g.width:m.drawingBufferWidth,A=m.framebufferHeight,m.framebufferHeight=g?g.height:m.drawingBufferHeight,k=m.framebufferWidth,z=m.framebufferHeight,F=m.viewportWidth,m.viewportWidth=k,O=m.viewportHeight,m.viewportHeight=z,W=$[0],$[0]=o,M=$[1],$[1]=s,T=$[2],$[2]=k,E=$[3],$[3]=z,C=m.framebufferWidth,H=m.framebufferHeight,B=U[0],U[0]=l,I=U[1],U[1]=f,P=U[2],U[2]=C,N=U[3],U[3]=H,(D=v.profile)&&(V=performance.now(),t.count++),L=_.count,_.count=c,R=_.primitive,_.primitive=u,q=d.state,d.state=1,G=d.x,d.x=0,j=d.y,d.y=0,Y=d.z,d.z=0,Z=d.w,d.w=0,X=d.buffer,d.buffer=i,Q=d.size,d.size=2,J=d.normalized,d.normalized=!1,K=d.type,d.type=5126,ee=d.offset,d.offset=0,te=d.stride,d.stride=0,ne=d.divisor,d.divisor=0,re=w.vert,w.vert=h,ie=w.frag,w.frag=p,v.dirty=!0,r(m,e,a),S.next=y,m.framebufferWidth=x,m.framebufferHeight=A,m.viewportWidth=F,m.viewportHeight=O,$[0]=W,$[1]=M,$[2]=T,$[3]=E,U[0]=B,U[1]=I,U[2]=P,U[3]=N,D&&(t.cpuTime+=performance.now()-V),_.count=L,_.primitive=R,d.state=q,d.x=G,d.y=j,d.z=Y,d.w=Z,d.buffer=X,d.size=Q,d.normalized=J,d.type=K,d.offset=ee,d.stride=te,d.divisor=ne,w.vert=re,w.frag=ie,v.dirty=!0},batch:function(e,o){var s,l,f,c,u,d,h,p,w,U,$,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe;(k.angle_instanced_arrays,s=n.call(this,m,e,0),l=S.getFramebuffer(s),f=S.next,S.next=l,c=m.framebufferWidth,m.framebufferWidth=l?l.width:m.drawingBufferWidth,u=m.framebufferHeight,m.framebufferHeight=l?l.height:m.drawingBufferHeight,l!==S.cur&&(l?b.bindFramebuffer(36160,l.framebuffer):b.bindFramebuffer(36160,null),S.cur=l),v.dirty)&&((ee=g.dither)!==v.dither&&(ee?b.enable(3024):b.disable(3024),v.dither=ee),(te=g.blend_enable)!==v.blend_enable&&(te?b.enable(3042):b.disable(3042),v.blend_enable=te),ne=z[0],re=z[1],ie=z[2],ae=z[3],ne===F[0]&&re===F[1]&&ie===F[2]&&ae===F[3]||(b.blendColor(ne,re,ie,ae),F[0]=ne,F[1]=re,F[2]=ie,F[3]=ae),oe=O[0],se=O[1],oe===W[0]&&se===W[1]||(b.blendEquationSeparate(oe,se),W[0]=oe,W[1]=se),le=M[0],fe=M[1],ce=M[2],ue=M[3],le===T[0]&&fe===T[1]&&ce===T[2]&&ue===T[3]||(b.blendFuncSeparate(le,fe,ce,ue),T[0]=le,T[1]=fe,T[2]=ce,T[3]=ue),(de=g.depth_enable)!==v.depth_enable&&(de?b.enable(2929):b.disable(2929),v.depth_enable=de),(he=g.depth_func)!==v.depth_func&&(b.depthFunc(he),v.depth_func=he),pe=E[0],be=E[1],pe===C[0]&&be===C[1]||(b.depthRange(pe,be),C[0]=pe,C[1]=be),(me=g.depth_mask)!==v.depth_mask&&(b.depthMask(me),v.depth_mask=me),ge=H[0],ve=H[1],_e=H[2],ye=H[3],ge===B[0]&&ve===B[1]&&_e===B[2]&&ye===B[3]||(b.colorMask(ge,ve,_e,ye),B[0]=ge,B[1]=ve,B[2]=_e,B[3]=ye),(we=g.cull_enable)!==v.cull_enable&&(we?b.enable(2884):b.disable(2884),v.cull_enable=we),(xe=g.cull_face)!==v.cull_face&&(b.cullFace(xe),v.cull_face=xe),(Ae=g.frontFace)!==v.frontFace&&(b.frontFace(Ae),v.frontFace=Ae),(Se=g.lineWidth)!==v.lineWidth&&(b.lineWidth(Se),v.lineWidth=Se),(ke=g.polygonOffset_enable)!==v.polygonOffset_enable&&(ke?b.enable(32823):b.disable(32823),v.polygonOffset_enable=ke),ze=I[0],Fe=I[1],ze===P[0]&&Fe===P[1]||(b.polygonOffset(ze,Fe),P[0]=ze,P[1]=Fe),(Oe=g.sample_alpha)!==v.sample_alpha&&(Oe?b.enable(32926):b.disable(32926),v.sample_alpha=Oe),(We=g.sample_enable)!==v.sample_enable&&(We?b.enable(32928):b.disable(32928),v.sample_enable=We),Me=N[0],Te=N[1],Me===D[0]&&Te===D[1]||(b.sampleCoverage(Me,Te),D[0]=Me,D[1]=Te),(Ee=g.stencil_enable)!==v.stencil_enable&&(Ee?b.enable(2960):b.disable(2960),v.stencil_enable=Ee),(Ce=g.stencil_mask)!==v.stencil_mask&&(b.stencilMask(Ce),v.stencil_mask=Ce),He=V[0],Be=V[1],Ie=V[2],He===L[0]&&Be===L[1]&&Ie===L[2]||(b.stencilFunc(He,Be,Ie),L[0]=He,L[1]=Be,L[2]=Ie),Pe=R[0],Ne=R[1],De=R[2],Ve=R[3],Pe===q[0]&&Ne===q[1]&&De===q[2]&&Ve===q[3]||(b.stencilOpSeparate(Pe,Ne,De,Ve),q[0]=Pe,q[1]=Ne,q[2]=De,q[3]=Ve),Le=G[0],Re=G[1],qe=G[2],Ge=G[3],Le===j[0]&&Re===j[1]&&qe===j[2]&&Ge===j[3]||(b.stencilOpSeparate(Le,Re,qe,Ge),j[0]=Le,j[1]=Re,j[2]=qe,j[3]=Ge),(je=g.scissor_enable)!==v.scissor_enable&&(je?b.enable(3089):b.disable(3089),v.scissor_enable=je));for(d=m.framebufferWidth,h=m.framebufferHeight,p=m.viewportWidth,m.viewportWidth=d,w=m.viewportHeight,m.viewportHeight=h,b.viewport(0,0,d,h),Z[0]=0,Z[1]=0,Z[2]=d,Z[3]=h,U=m.framebufferWidth,$=m.framebufferHeight,b.scissor(0,0,U,$),Y[0]=0,Y[1]=0,Y[2]=U,Y[3]=$,(X=v.profile)&&(Q=performance.now(),t.count+=o),b.useProgram(r.program),J=k.angle_instanced_arrays,A.setVAO(null),Ue=a.location,(Ye=x[Ue]).buffer||b.enableVertexAttribArray(Ue),2,5126===Ye.type&&2===Ye.size&&Ye.buffer===i&&!1===Ye.normalized&&0===Ye.offset&&0===Ye.stride||(b.bindBuffer(34962,i.buffer),b.vertexAttribPointer(Ue,2,5126,!1,0,0),Ye.type=5126,Ye.size=2,Ye.buffer=i,Ye.normalized=!1,Ye.offset=0,Ye.stride=0),0!==Ye.divisor&&(J.vertexAttribDivisorANGLE(Ue,0),Ye.divisor=0),(($e=_.elements)||A.currentVAO&&($e=y.getElements(A.currentVAO.elements)))&&b.bindBuffer(34963,$e.buffer.buffer),Ze=_.offset,Xe=_.instances,K=0;K<o;++K)e[K],Xe>0?$e?J.drawElementsInstancedANGLE(5,4,$e.type,Ze<<($e.type-5121>>1),Xe):J.drawArraysInstancedANGLE(5,Ze,4,Xe):Xe<0&&($e?b.drawElements(5,4,$e.type,Ze<<($e.type-5121>>1)):b.drawArrays(5,Ze,4));v.dirty=!0,A.setVAO(null),S.next=f,m.framebufferWidth=c,m.framebufferHeight=u,m.viewportWidth=p,m.viewportHeight=w,X&&(t.cpuTime+=performance.now()-Q)}}},"99397aae3c42f297df7b4b923ad2ed8869ec3d788ec7b7573ba53bc3447a1a81":function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de){var he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe;return he=e.gl,pe=e.context,e.strings,be=e.next,me=e.current,ge=e.draw,ve=e.elements,e.buffer,_e=e.shader,ye=e.attributes,we=e.vao,xe=e.uniforms,Ae=e.framebuffer,Se=e.extensions,e.timer,e.isBufferArgs,ke=be.blend_color,ze=me.blend_color,Fe=be.blend_equation,Oe=me.blend_equation,We=be.blend_func,Me=me.blend_func,Te=be.depth_range,Ee=me.depth_range,Ce=be.colorMask,He=me.colorMask,Be=be.polygonOffset_offset,Ie=me.polygonOffset_offset,Pe=be.sample_coverage,Ne=me.sample_coverage,De=be.stencil_func,Ve=me.stencil_func,Le=be.stencil_opFront,Re=me.stencil_opFront,qe=be.stencil_opBack,Ge=me.stencil_opBack,je=be.scissor_box,Ue=me.scissor_box,Ye=be.viewport,$e=me.viewport,Ze=new Float32Array(9),Xe=new Float32Array(9),{draw:function(e){var B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,_e,xe,Fe,We,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft,ct,ut,dt,ht,pt,bt,mt,gt,vt,_t,yt,wt,xt,At,St,kt,zt,Ft,Ot,Wt,Mt,Tt,Et,Ct,Ht,Bt,It,Pt,Nt;(Se.angle_instanced_arrays,(B=Ae.next)!==Ae.cur&&(B?he.bindFramebuffer(36160,B.framebuffer):he.bindFramebuffer(36160,null),Ae.cur=B),me.dirty)&&((Fe=be.dither)!==me.dither&&(Fe?he.enable(3024):he.disable(3024),me.dither=Fe),We=ke[0],Xe=ke[1],Qe=ke[2],Je=ke[3],We===ze[0]&&Xe===ze[1]&&Qe===ze[2]&&Je===ze[3]||(he.blendColor(We,Xe,Qe,Je),ze[0]=We,ze[1]=Xe,ze[2]=Qe,ze[3]=Je),(Ke=be.depth_func)!==me.depth_func&&(he.depthFunc(Ke),me.depth_func=Ke),et=Te[0],tt=Te[1],et===Ee[0]&&tt===Ee[1]||(he.depthRange(et,tt),Ee[0]=et,Ee[1]=tt),nt=Ce[0],rt=Ce[1],it=Ce[2],at=Ce[3],nt===He[0]&&rt===He[1]&&it===He[2]&&at===He[3]||(he.colorMask(nt,rt,it,at),He[0]=nt,He[1]=rt,He[2]=it,He[3]=at),(ot=be.cull_enable)!==me.cull_enable&&(ot?he.enable(2884):he.disable(2884),me.cull_enable=ot),(st=be.cull_face)!==me.cull_face&&(he.cullFace(st),me.cull_face=st),(lt=be.frontFace)!==me.frontFace&&(he.frontFace(lt),me.frontFace=lt),(ft=be.lineWidth)!==me.lineWidth&&(he.lineWidth(ft),me.lineWidth=ft),(ct=be.polygonOffset_enable)!==me.polygonOffset_enable&&(ct?he.enable(32823):he.disable(32823),me.polygonOffset_enable=ct),ut=Be[0],dt=Be[1],ut===Ie[0]&&dt===Ie[1]||(he.polygonOffset(ut,dt),Ie[0]=ut,Ie[1]=dt),(ht=be.sample_alpha)!==me.sample_alpha&&(ht?he.enable(32926):he.disable(32926),me.sample_alpha=ht),(pt=be.sample_enable)!==me.sample_enable&&(pt?he.enable(32928):he.disable(32928),me.sample_enable=pt),bt=Pe[0],mt=Pe[1],bt===Ne[0]&&mt===Ne[1]||(he.sampleCoverage(bt,mt),Ne[0]=bt,Ne[1]=mt),(gt=be.stencil_enable)!==me.stencil_enable&&(gt?he.enable(2960):he.disable(2960),me.stencil_enable=gt),(vt=be.stencil_mask)!==me.stencil_mask&&(he.stencilMask(vt),me.stencil_mask=vt),_t=De[0],yt=De[1],wt=De[2],_t===Ve[0]&&yt===Ve[1]&&wt===Ve[2]||(he.stencilFunc(_t,yt,wt),Ve[0]=_t,Ve[1]=yt,Ve[2]=wt),xt=Le[0],At=Le[1],St=Le[2],kt=Le[3],xt===Re[0]&&At===Re[1]&&St===Re[2]&&kt===Re[3]||(he.stencilOpSeparate(xt,At,St,kt),Re[0]=xt,Re[1]=At,Re[2]=St,Re[3]=kt),zt=qe[0],Ft=qe[1],Ot=qe[2],Wt=qe[3],zt===Ge[0]&&Ft===Ge[1]&&Ot===Ge[2]&&Wt===Ge[3]||(he.stencilOpSeparate(zt,Ft,Ot,Wt),Ge[0]=zt,Ge[1]=Ft,Ge[2]=Ot,Ge[3]=Wt),(Mt=be.scissor_enable)!==me.scissor_enable&&(Mt?he.enable(3089):he.disable(3089),me.scissor_enable=Mt),Tt=je[0],Et=je[1],Ct=je[2],Ht=je[3],Tt===Ue[0]&&Et===Ue[1]&&Ct===Ue[2]&&Ht===Ue[3]||(he.scissor(Tt,Et,Ct,Ht),Ue[0]=Tt,Ue[1]=Et,Ue[2]=Ct,Ue[3]=Ht),Bt=Ye[0],It=Ye[1],Pt=Ye[2],Nt=Ye[3],Bt===$e[0]&&It===$e[1]&&Pt===$e[2]&&Nt===$e[3]||(he.viewport(Bt,It,Pt,Nt),$e[0]=Bt,$e[1]=It,$e[2]=Pt,$e[3]=Nt));n?he.enable(3042):he.disable(3042),me.blend_enable=n,he.blendEquationSeparate(32774,32774),Oe[0]=32774,Oe[1]=32774,he.blendFuncSeparate(770,771,1,771),Me[0]=770,Me[1]=771,Me[2]=1,Me[3]=771,r?he.enable(2929):he.disable(2929),me.depth_enable=r,he.depthMask(i),me.depth_mask=i,(I=me.profile)&&(P=performance.now(),t.count++),he.useProgram(a.program),N=Se.angle_instanced_arrays,we.setVAO(null),D=s.location,(V=ye[D]).buffer||he.enableVertexAttribArray(D),5126===V.type&&2===V.size&&V.buffer===o&&!1===V.normalized&&0===V.offset&&0===V.stride||(he.bindBuffer(34962,o.buffer),he.vertexAttribPointer(D,2,5126,!1,0,0),V.type=5126,V.size=2,V.buffer=o,V.normalized=!1,V.offset=0,V.stride=0),0!==V.divisor&&(N.vertexAttribDivisorANGLE(D,0),V.divisor=0),R=(L=e.color)[0],q=L[1],G=L[2],j=L[3],he.uniform4f(l.location,R,q,G,j),U=c.call(this,pe,e,0),he.uniform1f(f.location,U),Y=d.call(this,pe,e,0),he.uniform1f(u.location,Y),($=p.call(this,pe,e,0))&&"framebuffer"===$._reglType&&($=$.color[0]),Z=$._texture,he.uniform1i(h.location,Z.bind()),(X=m.call(this,pe,e,0))&&"framebuffer"===X._reglType&&(X=X.color[0]),Q=X._texture,he.uniform1i(b.location,Q.bind()),(J=v.call(this,pe,e,0))&&"framebuffer"===J._reglType&&(J=J.color[0]),K=J._texture,he.uniform1i(g.location,K.bind()),ee=e.pointIndex,he.uniform1f(_.location,ee),te=w.call(this,pe,e,0),he.uniform1f(y.location,te),(ne=A.call(this,pe,e,0))&&"framebuffer"===ne._reglType&&(ne=ne.color[0]),re=ne._texture,he.uniform1i(x.location,re.bind()),ie=k.call(this,pe,e,0),he.uniform1i(S.location,ie),oe=(ae=F.call(this,pe,e,0))[0],se=ae[1],he.uniform2f(z.location,oe,se),le=W.call(this,pe,e,0),he.uniform1f(O.location,le),fe=T.call(this,pe,e,0),he.uniform1f(M.location,fe),ce=C.call(this,pe,e,0),he.uniformMatrix3fv(E.location,!1,Array.isArray(ce)||ce instanceof Float32Array?ce:(Ze[0]=ce[0],Ze[1]=ce[1],Ze[2]=ce[2],Ze[3]=ce[3],Ze[4]=ce[4],Ze[5]=ce[5],Ze[6]=ce[6],Ze[7]=ce[7],Ze[8]=ce[8],Ze)),ue=e.width,he.uniform1f(H.location,ue),((de=ge.elements)||we.currentVAO&&(de=ve.getElements(we.currentVAO.elements)))&&he.bindBuffer(34963,de.buffer.buffer),_e=ge.offset,(xe=ge.instances)>0?de?N.drawElementsInstancedANGLE(5,4,de.type,_e<<(de.type-5121>>1),xe):N.drawArraysInstancedANGLE(5,_e,4,xe):xe<0&&(de?he.drawElements(5,4,de.type,_e<<(de.type-5121>>1)):he.drawArrays(5,_e,4)),me.dirty=!0,we.setVAO(null),I&&(t.cpuTime+=performance.now()-P),Z.unbind(),Q.unbind(),K.unbind(),re.unbind()},scope:function(e,n,r){var i,a,s,l,f,u,h,b,g,_,y,x,S,z,O,M,E,H,ce,ue,de,he,ve,ye,we,Ae,Se,ke,ze,Oe,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt;i=be.blend_enable,be.blend_enable=B,a=Fe[0],Fe[0]=I,s=Fe[1],Fe[1]=P,l=We[0],We[0]=N,f=We[1],We[1]=D,u=We[2],We[2]=V,h=We[3],We[3]=L,b=be.depth_enable,be.depth_enable=R,g=be.depth_mask,be.depth_mask=q,(_=me.profile)&&(y=performance.now(),t.count++),x=ge.count,ge.count=G,S=ge.primitive,ge.primitive=j,z=e.color,O=xe[U],xe[U]=z,M=e.width,E=xe[Y],xe[Y]=M,H=e.pointIndex,ce=xe[$],xe[$]=H,ue=A.call(this,pe,e,r),de=xe[Z],xe[Z]=ue,he=p.call(this,pe,e,r),ve=xe[X],xe[X]=he,ye=v.call(this,pe,e,r),we=xe[Q],xe[Q]=ye,Ae=W.call(this,pe,e,r),Se=xe[J],xe[J]=Ae,ke=w.call(this,pe,e,r),ze=xe[K],xe[K]=ke,Oe=C.call(this,pe,e,r),Me=xe[ee],xe[ee]=Oe,Te=T.call(this,pe,e,r),Ee=xe[te],xe[te]=Te,Ce=F.call(this,pe,e,r),He=xe[ne],xe[ne]=Ce,Be=k.call(this,pe,e,r),Ie=xe[re],xe[re]=Be,Pe=d.call(this,pe,e,r),Ne=xe[ie],xe[ie]=Pe,De=m.call(this,pe,e,r),Ve=xe[ae],xe[ae]=De,Le=c.call(this,pe,e,r),Re=xe[oe],xe[oe]=Le,qe=se.state,se.state=1,Ge=se.x,se.x=0,je=se.y,se.y=0,Ue=se.z,se.z=0,Ye=se.w,se.w=0,$e=se.buffer,se.buffer=o,Ze=se.size,se.size=2,Xe=se.normalized,se.normalized=!1,Qe=se.type,se.type=5126,Je=se.offset,se.offset=0,Ke=se.stride,se.stride=0,et=se.divisor,se.divisor=0,tt=_e.vert,_e.vert=le,nt=_e.frag,_e.frag=fe,me.dirty=!0,n(pe,e,r),be.blend_enable=i,Fe[0]=a,Fe[1]=s,We[0]=l,We[1]=f,We[2]=u,We[3]=h,be.depth_enable=b,be.depth_mask=g,_&&(t.cpuTime+=performance.now()-y),ge.count=x,ge.primitive=S,xe[U]=O,xe[Y]=E,xe[$]=ce,xe[Z]=de,xe[X]=ve,xe[Q]=we,xe[J]=Se,xe[K]=ze,xe[ee]=Me,xe[te]=Ee,xe[ne]=He,xe[re]=Ie,xe[ie]=Ne,xe[ae]=Ve,xe[oe]=Re,se.state=qe,se.x=Ge,se.y=je,se.z=Ue,se.w=Ye,se.buffer=$e,se.size=Ze,se.normalized=Xe,se.type=Qe,se.offset=Je,se.stride=Ke,se.divisor=et,_e.vert=tt,_e.frag=nt,me.dirty=!0},batch:function(e,n){var r,i,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,_e,xe,Fe,We,Ze,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft,ct,ut,dt,ht,pt,bt,mt,gt,vt,_t,yt,wt,xt,At,St,kt,zt,Ft,Ot,Wt,Mt,Tt,Et,Ct,Ht;(Se.angle_instanced_arrays,(r=Ae.next)!==Ae.cur&&(r?he.bindFramebuffer(36160,r.framebuffer):he.bindFramebuffer(36160,null),Ae.cur=r),me.dirty)&&((D=be.dither)!==me.dither&&(D?he.enable(3024):he.disable(3024),me.dither=D),V=ke[0],L=ke[1],R=ke[2],q=ke[3],V===ze[0]&&L===ze[1]&&R===ze[2]&&q===ze[3]||(he.blendColor(V,L,R,q),ze[0]=V,ze[1]=L,ze[2]=R,ze[3]=q),(G=be.depth_func)!==me.depth_func&&(he.depthFunc(G),me.depth_func=G),j=Te[0],U=Te[1],j===Ee[0]&&U===Ee[1]||(he.depthRange(j,U),Ee[0]=j,Ee[1]=U),Y=Ce[0],$=Ce[1],Z=Ce[2],X=Ce[3],Y===He[0]&&$===He[1]&&Z===He[2]&&X===He[3]||(he.colorMask(Y,$,Z,X),He[0]=Y,He[1]=$,He[2]=Z,He[3]=X),(Q=be.cull_enable)!==me.cull_enable&&(Q?he.enable(2884):he.disable(2884),me.cull_enable=Q),(J=be.cull_face)!==me.cull_face&&(he.cullFace(J),me.cull_face=J),(K=be.frontFace)!==me.frontFace&&(he.frontFace(K),me.frontFace=K),(ee=be.lineWidth)!==me.lineWidth&&(he.lineWidth(ee),me.lineWidth=ee),(te=be.polygonOffset_enable)!==me.polygonOffset_enable&&(te?he.enable(32823):he.disable(32823),me.polygonOffset_enable=te),ne=Be[0],re=Be[1],ne===Ie[0]&&re===Ie[1]||(he.polygonOffset(ne,re),Ie[0]=ne,Ie[1]=re),(ie=be.sample_alpha)!==me.sample_alpha&&(ie?he.enable(32926):he.disable(32926),me.sample_alpha=ie),(ae=be.sample_enable)!==me.sample_enable&&(ae?he.enable(32928):he.disable(32928),me.sample_enable=ae),oe=Pe[0],se=Pe[1],oe===Ne[0]&&se===Ne[1]||(he.sampleCoverage(oe,se),Ne[0]=oe,Ne[1]=se),(le=be.stencil_enable)!==me.stencil_enable&&(le?he.enable(2960):he.disable(2960),me.stencil_enable=le),(fe=be.stencil_mask)!==me.stencil_mask&&(he.stencilMask(fe),me.stencil_mask=fe),_e=De[0],xe=De[1],Fe=De[2],_e===Ve[0]&&xe===Ve[1]&&Fe===Ve[2]||(he.stencilFunc(_e,xe,Fe),Ve[0]=_e,Ve[1]=xe,Ve[2]=Fe),We=Le[0],Ze=Le[1],Qe=Le[2],Je=Le[3],We===Re[0]&&Ze===Re[1]&&Qe===Re[2]&&Je===Re[3]||(he.stencilOpSeparate(We,Ze,Qe,Je),Re[0]=We,Re[1]=Ze,Re[2]=Qe,Re[3]=Je),Ke=qe[0],et=qe[1],tt=qe[2],nt=qe[3],Ke===Ge[0]&&et===Ge[1]&&tt===Ge[2]&&nt===Ge[3]||(he.stencilOpSeparate(Ke,et,tt,nt),Ge[0]=Ke,Ge[1]=et,Ge[2]=tt,Ge[3]=nt),(rt=be.scissor_enable)!==me.scissor_enable&&(rt?he.enable(3089):he.disable(3089),me.scissor_enable=rt),it=je[0],at=je[1],ot=je[2],st=je[3],it===Ue[0]&&at===Ue[1]&&ot===Ue[2]&&st===Ue[3]||(he.scissor(it,at,ot,st),Ue[0]=it,Ue[1]=at,Ue[2]=ot,Ue[3]=st),lt=Ye[0],ft=Ye[1],ct=Ye[2],ut=Ye[3],lt===$e[0]&&ft===$e[1]&&ct===$e[2]&&ut===$e[3]||(he.viewport(lt,ft,ct,ut),$e[0]=lt,$e[1]=ft,$e[2]=ct,$e[3]=ut));for(ce?he.enable(3042):he.disable(3042),me.blend_enable=ce,he.blendEquationSeparate(32774,32774),Oe[0]=32774,Oe[1]=32774,he.blendFuncSeparate(770,771,1,771),Me[0]=770,Me[1]=771,Me[2]=1,Me[3]=771,ue?he.enable(2929):he.disable(2929),me.depth_enable=ue,he.depthMask(de),me.depth_mask=de,(i=me.profile)&&(B=performance.now(),t.count+=n),he.useProgram(a.program),I=Se.angle_instanced_arrays,we.setVAO(null),dt=s.location,(ht=ye[dt]).buffer||he.enableVertexAttribArray(dt),2,5126===ht.type&&2===ht.size&&ht.buffer===o&&!1===ht.normalized&&0===ht.offset&&0===ht.stride||(he.bindBuffer(34962,o.buffer),he.vertexAttribPointer(dt,2,5126,!1,0,0),ht.type=5126,ht.size=2,ht.buffer=o,ht.normalized=!1,ht.offset=0,ht.stride=0),0!==ht.divisor&&(I.vertexAttribDivisorANGLE(dt,0),ht.divisor=0),pt=c.call(this,pe,N,P),he.uniform1f(f.location,pt),bt=d.call(this,pe,N,P),he.uniform1f(u.location,bt),(mt=p.call(this,pe,N,P))&&"framebuffer"===mt._reglType&&(mt=mt.color[0]),gt=mt._texture,he.uniform1i(h.location,gt.bind()),(vt=m.call(this,pe,N,P))&&"framebuffer"===vt._reglType&&(vt=vt.color[0]),_t=vt._texture,he.uniform1i(b.location,_t.bind()),(yt=v.call(this,pe,N,P))&&"framebuffer"===yt._reglType&&(yt=yt.color[0]),wt=yt._texture,he.uniform1i(g.location,wt.bind()),xt=w.call(this,pe,N,P),he.uniform1f(y.location,xt),(At=A.call(this,pe,N,P))&&"framebuffer"===At._reglType&&(At=At.color[0]),St=At._texture,he.uniform1i(x.location,St.bind()),kt=k.call(this,pe,N,P),he.uniform1i(S.location,kt),Ft=(zt=F.call(this,pe,N,P))[0],Ot=zt[1],he.uniform2f(z.location,Ft,Ot),Wt=W.call(this,pe,N,P),he.uniform1f(O.location,Wt),Mt=T.call(this,pe,N,P),he.uniform1f(M.location,Mt),Tt=C.call(this,pe,N,P),he.uniformMatrix3fv(E.location,!1,Array.isArray(Tt)||Tt instanceof Float32Array?Tt:(Xe[0]=Tt[0],Xe[1]=Tt[1],Xe[2]=Tt[2],Xe[3]=Tt[3],Xe[4]=Tt[4],Xe[5]=Tt[5],Xe[6]=Tt[6],Xe[7]=Tt[7],Xe[8]=Tt[8],Xe)),((Et=ge.elements)||we.currentVAO&&(Et=ve.getElements(we.currentVAO.elements)))&&he.bindBuffer(34963,Et.buffer.buffer),Ct=ge.offset,Ht=ge.instances,P=0;P<n;++P){var Bt,It,Pt,Nt,Dt,Vt,Lt,Rt,qt,Gt,jt,Ut,Yt;It=(Bt=(N=e[P]).color)[0],Nt=Bt[1],Vt=Bt[2],Rt=Bt[3],P&&Pt===It&&Dt===Nt&&Lt===Vt&&qt===Rt||(Pt=It,Dt=Nt,Lt=Vt,qt=Rt,he.uniform4f(l.location,It,Nt,Vt,Rt)),Gt=N.pointIndex,P&&jt===Gt||(jt=Gt,he.uniform1f(_.location,Gt)),Ut=N.width,P&&Yt===Ut||(Yt=Ut,he.uniform1f(H.location,Ut)),Ht>0?Et?I.drawElementsInstancedANGLE(5,4,Et.type,Ct<<(Et.type-5121>>1),Ht):I.drawArraysInstancedANGLE(5,Ct,4,Ht):Ht<0&&(Et?he.drawElements(5,4,Et.type,Ct<<(Et.type-5121>>1)):he.drawArrays(5,Ct,4))}gt.unbind(),_t.unbind(),wt.unbind(),St.unbind(),me.dirty=!0,we.setVAO(null),i&&(t.cpuTime+=performance.now()-B)}}},eb221f9c85bbb1289d8191f0a5e2cb2f7a7494b901353fb18a93f8073ffa6fbe:function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A){var S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae;return S=e.gl,k=e.context,e.strings,z=e.next,F=e.current,O=e.draw,W=e.elements,e.buffer,M=e.shader,T=e.attributes,E=e.vao,C=e.uniforms,H=e.framebuffer,B=e.extensions,e.timer,e.isBufferArgs,I=z.blend_color,P=F.blend_color,N=z.blend_equation,D=F.blend_equation,V=z.blend_func,L=F.blend_func,R=z.depth_range,q=F.depth_range,G=z.colorMask,j=F.colorMask,U=z.polygonOffset_offset,Y=F.polygonOffset_offset,$=z.sample_coverage,Z=F.sample_coverage,X=z.stencil_func,Q=F.stencil_func,J=z.stencil_opFront,K=F.stencil_opFront,ee=z.stencil_opBack,te=F.stencil_opBack,ne=z.scissor_box,re=F.scissor_box,ie=z.viewport,ae=F.viewport,{draw:function(e){var d,h,p,b,m,g,v,_,y,w,x,A,M,C,ne,ie,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at;(B.angle_instanced_arrays,d=n.call(this,k,e,0),h=H.getFramebuffer(d),p=H.next,H.next=h,b=k.framebufferWidth,k.framebufferWidth=h?h.width:k.drawingBufferWidth,m=k.framebufferHeight,k.framebufferHeight=h?h.height:k.drawingBufferHeight,h!==H.cur&&(h?S.bindFramebuffer(36160,h.framebuffer):S.bindFramebuffer(36160,null),H.cur=h),F.dirty)&&((pe=z.dither)!==F.dither&&(pe?S.enable(3024):S.disable(3024),F.dither=pe),(be=z.blend_enable)!==F.blend_enable&&(be?S.enable(3042):S.disable(3042),F.blend_enable=be),me=I[0],ge=I[1],ve=I[2],_e=I[3],me===P[0]&&ge===P[1]&&ve===P[2]&&_e===P[3]||(S.blendColor(me,ge,ve,_e),P[0]=me,P[1]=ge,P[2]=ve,P[3]=_e),ye=N[0],we=N[1],ye===D[0]&&we===D[1]||(S.blendEquationSeparate(ye,we),D[0]=ye,D[1]=we),xe=V[0],Ae=V[1],Se=V[2],ke=V[3],xe===L[0]&&Ae===L[1]&&Se===L[2]&&ke===L[3]||(S.blendFuncSeparate(xe,Ae,Se,ke),L[0]=xe,L[1]=Ae,L[2]=Se,L[3]=ke),(ze=z.depth_enable)!==F.depth_enable&&(ze?S.enable(2929):S.disable(2929),F.depth_enable=ze),(Fe=z.depth_func)!==F.depth_func&&(S.depthFunc(Fe),F.depth_func=Fe),Oe=R[0],We=R[1],Oe===q[0]&&We===q[1]||(S.depthRange(Oe,We),q[0]=Oe,q[1]=We),(Me=z.depth_mask)!==F.depth_mask&&(S.depthMask(Me),F.depth_mask=Me),Te=G[0],Ee=G[1],Ce=G[2],He=G[3],Te===j[0]&&Ee===j[1]&&Ce===j[2]&&He===j[3]||(S.colorMask(Te,Ee,Ce,He),j[0]=Te,j[1]=Ee,j[2]=Ce,j[3]=He),(Be=z.cull_enable)!==F.cull_enable&&(Be?S.enable(2884):S.disable(2884),F.cull_enable=Be),(Ie=z.cull_face)!==F.cull_face&&(S.cullFace(Ie),F.cull_face=Ie),(Pe=z.frontFace)!==F.frontFace&&(S.frontFace(Pe),F.frontFace=Pe),(Ne=z.lineWidth)!==F.lineWidth&&(S.lineWidth(Ne),F.lineWidth=Ne),(De=z.polygonOffset_enable)!==F.polygonOffset_enable&&(De?S.enable(32823):S.disable(32823),F.polygonOffset_enable=De),Ve=U[0],Le=U[1],Ve===Y[0]&&Le===Y[1]||(S.polygonOffset(Ve,Le),Y[0]=Ve,Y[1]=Le),(Re=z.sample_alpha)!==F.sample_alpha&&(Re?S.enable(32926):S.disable(32926),F.sample_alpha=Re),(qe=z.sample_enable)!==F.sample_enable&&(qe?S.enable(32928):S.disable(32928),F.sample_enable=qe),Ge=$[0],je=$[1],Ge===Z[0]&&je===Z[1]||(S.sampleCoverage(Ge,je),Z[0]=Ge,Z[1]=je),(Ue=z.stencil_enable)!==F.stencil_enable&&(Ue?S.enable(2960):S.disable(2960),F.stencil_enable=Ue),(Ye=z.stencil_mask)!==F.stencil_mask&&(S.stencilMask(Ye),F.stencil_mask=Ye),$e=X[0],Ze=X[1],Xe=X[2],$e===Q[0]&&Ze===Q[1]&&Xe===Q[2]||(S.stencilFunc($e,Ze,Xe),Q[0]=$e,Q[1]=Ze,Q[2]=Xe),Qe=J[0],Je=J[1],Ke=J[2],et=J[3],Qe===K[0]&&Je===K[1]&&Ke===K[2]&&et===K[3]||(S.stencilOpSeparate(Qe,Je,Ke,et),K[0]=Qe,K[1]=Je,K[2]=Ke,K[3]=et),tt=ee[0],nt=ee[1],rt=ee[2],it=ee[3],tt===te[0]&&nt===te[1]&&rt===te[2]&&it===te[3]||(S.stencilOpSeparate(tt,nt,rt,it),te[0]=tt,te[1]=nt,te[2]=rt,te[3]=it),(at=z.scissor_enable)!==F.scissor_enable&&(at?S.enable(3089):S.disable(3089),F.scissor_enable=at));g=k.framebufferWidth,v=k.framebufferHeight,_=k.viewportWidth,k.viewportWidth=g,y=k.viewportHeight,k.viewportHeight=v,S.viewport(0,0,g,v),ae[0]=0,ae[1]=0,ae[2]=g,ae[3]=v,w=k.framebufferWidth,x=k.framebufferHeight,S.scissor(0,0,w,x),re[0]=0,re[1]=0,re[2]=w,re[3]=x,(A=F.profile)&&(M=performance.now(),t.count++),S.useProgram(r.program),C=B.angle_instanced_arrays,E.setVAO(null),ne=a.location,(ie=T[ne]).buffer||S.enableVertexAttribArray(ne),5126===ie.type&&2===ie.size&&ie.buffer===i&&!1===ie.normalized&&0===ie.offset&&0===ie.stride||(S.bindBuffer(34962,i.buffer),S.vertexAttribPointer(ne,2,5126,!1,0,0),ie.type=5126,ie.size=2,ie.buffer=i,ie.normalized=!1,ie.offset=0,ie.stride=0),0!==ie.divisor&&(C.vertexAttribDivisorANGLE(ne,0),ie.divisor=0),oe=s.call(this,k,e,0),S.uniform1f(o.location,oe),(se=f.call(this,k,e,0))&&"framebuffer"===se._reglType&&(se=se.color[0]),le=se._texture,S.uniform1i(l.location,le.bind()),(fe=u.call(this,k,e,0))&&"framebuffer"===fe._reglType&&(fe=fe.color[0]),ce=fe._texture,S.uniform1i(c.location,ce.bind()),((ue=O.elements)||E.currentVAO&&(ue=W.getElements(E.currentVAO.elements)))&&S.bindBuffer(34963,ue.buffer.buffer),de=O.offset,(he=O.instances)>0?ue?C.drawElementsInstancedANGLE(5,4,ue.type,de<<(ue.type-5121>>1),he):C.drawArraysInstancedANGLE(5,de,4,he):he<0&&(ue?S.drawElements(5,4,ue.type,de<<(ue.type-5121>>1)):S.drawArrays(5,de,4)),F.dirty=!0,E.setVAO(null),H.next=p,k.framebufferWidth=b,k.framebufferHeight=m,k.viewportWidth=_,k.viewportHeight=y,A&&(t.cpuTime+=performance.now()-M),le.unbind(),ce.unbind()},scope:function(e,r,a){var o,l,c,S,z,W,T,E,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,re,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge;o=n.call(this,k,e,a),l=H.getFramebuffer(o),c=H.next,H.next=l,S=k.framebufferWidth,k.framebufferWidth=l?l.width:k.drawingBufferWidth,z=k.framebufferHeight,k.framebufferHeight=l?l.height:k.drawingBufferHeight,W=k.framebufferWidth,T=k.framebufferHeight,E=k.viewportWidth,k.viewportWidth=W,B=k.viewportHeight,k.viewportHeight=T,I=ie[0],ie[0]=d,P=ie[1],ie[1]=h,N=ie[2],ie[2]=W,D=ie[3],ie[3]=T,V=k.framebufferWidth,L=k.framebufferHeight,R=ne[0],ne[0]=p,q=ne[1],ne[1]=b,G=ne[2],ne[2]=V,j=ne[3],ne[3]=L,(U=F.profile)&&(Y=performance.now(),t.count++),$=O.count,O.count=m,Z=O.primitive,O.primitive=g,X=f.call(this,k,e,a),Q=C[v],C[v]=X,J=u.call(this,k,e,a),K=C[_],C[_]=J,ee=s.call(this,k,e,a),te=C[y],C[y]=ee,re=w.state,w.state=1,ae=w.x,w.x=0,oe=w.y,w.y=0,se=w.z,w.z=0,le=w.w,w.w=0,fe=w.buffer,w.buffer=i,ce=w.size,w.size=2,ue=w.normalized,w.normalized=!1,de=w.type,w.type=5126,he=w.offset,w.offset=0,pe=w.stride,w.stride=0,be=w.divisor,w.divisor=0,me=M.vert,M.vert=x,ge=M.frag,M.frag=A,F.dirty=!0,r(k,e,a),H.next=c,k.framebufferWidth=S,k.framebufferHeight=z,k.viewportWidth=E,k.viewportHeight=B,ie[0]=I,ie[1]=P,ie[2]=N,ie[3]=D,ne[0]=R,ne[1]=q,ne[2]=G,ne[3]=j,U&&(t.cpuTime+=performance.now()-Y),O.count=$,O.primitive=Z,C[v]=Q,C[_]=K,C[y]=te,w.state=re,w.x=ae,w.y=oe,w.z=se,w.w=le,w.buffer=fe,w.size=ce,w.normalized=ue,w.type=de,w.offset=he,w.stride=pe,w.divisor=be,M.vert=me,M.frag=ge,F.dirty=!0},batch:function(e,d){var h,p,b,m,g,v,_,y,w,x,A,M,C,ne,ie,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt;(B.angle_instanced_arrays,h=n.call(this,k,e,0),p=H.getFramebuffer(h),b=H.next,H.next=p,m=k.framebufferWidth,k.framebufferWidth=p?p.width:k.drawingBufferWidth,g=k.framebufferHeight,k.framebufferHeight=p?p.height:k.drawingBufferHeight,p!==H.cur&&(p?S.bindFramebuffer(36160,p.framebuffer):S.bindFramebuffer(36160,null),H.cur=p),F.dirty)&&((se=z.dither)!==F.dither&&(se?S.enable(3024):S.disable(3024),F.dither=se),(le=z.blend_enable)!==F.blend_enable&&(le?S.enable(3042):S.disable(3042),F.blend_enable=le),fe=I[0],ce=I[1],ue=I[2],de=I[3],fe===P[0]&&ce===P[1]&&ue===P[2]&&de===P[3]||(S.blendColor(fe,ce,ue,de),P[0]=fe,P[1]=ce,P[2]=ue,P[3]=de),he=N[0],pe=N[1],he===D[0]&&pe===D[1]||(S.blendEquationSeparate(he,pe),D[0]=he,D[1]=pe),be=V[0],me=V[1],ge=V[2],ve=V[3],be===L[0]&&me===L[1]&&ge===L[2]&&ve===L[3]||(S.blendFuncSeparate(be,me,ge,ve),L[0]=be,L[1]=me,L[2]=ge,L[3]=ve),(_e=z.depth_enable)!==F.depth_enable&&(_e?S.enable(2929):S.disable(2929),F.depth_enable=_e),(ye=z.depth_func)!==F.depth_func&&(S.depthFunc(ye),F.depth_func=ye),we=R[0],xe=R[1],we===q[0]&&xe===q[1]||(S.depthRange(we,xe),q[0]=we,q[1]=xe),(Ae=z.depth_mask)!==F.depth_mask&&(S.depthMask(Ae),F.depth_mask=Ae),Se=G[0],ke=G[1],ze=G[2],Fe=G[3],Se===j[0]&&ke===j[1]&&ze===j[2]&&Fe===j[3]||(S.colorMask(Se,ke,ze,Fe),j[0]=Se,j[1]=ke,j[2]=ze,j[3]=Fe),(Oe=z.cull_enable)!==F.cull_enable&&(Oe?S.enable(2884):S.disable(2884),F.cull_enable=Oe),(We=z.cull_face)!==F.cull_face&&(S.cullFace(We),F.cull_face=We),(Me=z.frontFace)!==F.frontFace&&(S.frontFace(Me),F.frontFace=Me),(Te=z.lineWidth)!==F.lineWidth&&(S.lineWidth(Te),F.lineWidth=Te),(Ee=z.polygonOffset_enable)!==F.polygonOffset_enable&&(Ee?S.enable(32823):S.disable(32823),F.polygonOffset_enable=Ee),Ce=U[0],He=U[1],Ce===Y[0]&&He===Y[1]||(S.polygonOffset(Ce,He),Y[0]=Ce,Y[1]=He),(Be=z.sample_alpha)!==F.sample_alpha&&(Be?S.enable(32926):S.disable(32926),F.sample_alpha=Be),(Ie=z.sample_enable)!==F.sample_enable&&(Ie?S.enable(32928):S.disable(32928),F.sample_enable=Ie),Pe=$[0],Ne=$[1],Pe===Z[0]&&Ne===Z[1]||(S.sampleCoverage(Pe,Ne),Z[0]=Pe,Z[1]=Ne),(De=z.stencil_enable)!==F.stencil_enable&&(De?S.enable(2960):S.disable(2960),F.stencil_enable=De),(Ve=z.stencil_mask)!==F.stencil_mask&&(S.stencilMask(Ve),F.stencil_mask=Ve),Le=X[0],Re=X[1],qe=X[2],Le===Q[0]&&Re===Q[1]&&qe===Q[2]||(S.stencilFunc(Le,Re,qe),Q[0]=Le,Q[1]=Re,Q[2]=qe),Ge=J[0],je=J[1],Ue=J[2],Ye=J[3],Ge===K[0]&&je===K[1]&&Ue===K[2]&&Ye===K[3]||(S.stencilOpSeparate(Ge,je,Ue,Ye),K[0]=Ge,K[1]=je,K[2]=Ue,K[3]=Ye),$e=ee[0],Ze=ee[1],Xe=ee[2],Qe=ee[3],$e===te[0]&&Ze===te[1]&&Xe===te[2]&&Qe===te[3]||(S.stencilOpSeparate($e,Ze,Xe,Qe),te[0]=$e,te[1]=Ze,te[2]=Xe,te[3]=Qe),(Je=z.scissor_enable)!==F.scissor_enable&&(Je?S.enable(3089):S.disable(3089),F.scissor_enable=Je));for(v=k.framebufferWidth,_=k.framebufferHeight,y=k.viewportWidth,k.viewportWidth=v,w=k.viewportHeight,k.viewportHeight=_,S.viewport(0,0,v,_),ae[0]=0,ae[1]=0,ae[2]=v,ae[3]=_,x=k.framebufferWidth,A=k.framebufferHeight,S.scissor(0,0,x,A),re[0]=0,re[1]=0,re[2]=x,re[3]=A,(M=F.profile)&&(C=performance.now(),t.count+=d),S.useProgram(r.program),ne=B.angle_instanced_arrays,E.setVAO(null),Ke=a.location,(et=T[Ke]).buffer||S.enableVertexAttribArray(Ke),2,5126===et.type&&2===et.size&&et.buffer===i&&!1===et.normalized&&0===et.offset&&0===et.stride||(S.bindBuffer(34962,i.buffer),S.vertexAttribPointer(Ke,2,5126,!1,0,0),et.type=5126,et.size=2,et.buffer=i,et.normalized=!1,et.offset=0,et.stride=0),0!==et.divisor&&(ne.vertexAttribDivisorANGLE(Ke,0),et.divisor=0),tt=s.call(this,k,oe,ie),S.uniform1f(o.location,tt),(nt=f.call(this,k,oe,ie))&&"framebuffer"===nt._reglType&&(nt=nt.color[0]),rt=nt._texture,S.uniform1i(l.location,rt.bind()),(it=u.call(this,k,oe,ie))&&"framebuffer"===it._reglType&&(it=it.color[0]),at=it._texture,S.uniform1i(c.location,at.bind()),((ot=O.elements)||E.currentVAO&&(ot=W.getElements(E.currentVAO.elements)))&&S.bindBuffer(34963,ot.buffer.buffer),st=O.offset,lt=O.instances,ie=0;ie<d;++ie)oe=e[ie],lt>0?ot?ne.drawElementsInstancedANGLE(5,4,ot.type,st<<(ot.type-5121>>1),lt):ne.drawArraysInstancedANGLE(5,st,4,lt):lt<0&&(ot?S.drawElements(5,4,ot.type,st<<(ot.type-5121>>1)):S.drawArrays(5,st,4));rt.unbind(),at.unbind(),F.dirty=!0,E.setVAO(null),H.next=b,k.framebufferWidth=m,k.framebufferHeight=g,k.viewportWidth=y,k.viewportHeight=w,M&&(t.cpuTime+=performance.now()-C)}}},da693cc97ee74da1ea2a4318da665c6724ca4598a491573f90321d5cf98cd00e:function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B){var I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e;return I=e.gl,P=e.context,e.strings,N=e.next,D=e.current,V=e.draw,L=e.elements,e.buffer,R=e.shader,q=e.attributes,G=e.vao,j=e.uniforms,U=e.framebuffer,Y=e.extensions,e.timer,e.isBufferArgs,$=N.blend_color,Z=D.blend_color,X=N.blend_equation,Q=D.blend_equation,J=N.blend_func,K=D.blend_func,ee=N.depth_range,te=D.depth_range,ne=N.colorMask,re=D.colorMask,ie=N.polygonOffset_offset,ae=D.polygonOffset_offset,oe=N.sample_coverage,se=D.sample_coverage,le=N.stencil_func,fe=D.stencil_func,ce=N.stencil_opFront,ue=D.stencil_opFront,de=N.stencil_opBack,he=D.stencil_opBack,pe=N.scissor_box,be=D.scissor_box,me=N.viewport,ge=D.viewport,ve=new Float32Array(9),_e=new Float32Array(9),{draw:function(e){var _,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,R,j,pe,me,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft,ct,ut,dt,ht,pt,bt;(Y.angle_instanced_arrays,_=n.call(this,P,e,0),y=U.getFramebuffer(_),w=U.next,U.next=y,x=P.framebufferWidth,P.framebufferWidth=y?y.width:P.drawingBufferWidth,A=P.framebufferHeight,P.framebufferHeight=y?y.height:P.drawingBufferHeight,y!==U.cur&&(y?I.bindFramebuffer(36160,y.framebuffer):I.bindFramebuffer(36160,null),U.cur=y),D.dirty)&&((ze=N.dither)!==D.dither&&(ze?I.enable(3024):I.disable(3024),D.dither=ze),(Fe=N.blend_enable)!==D.blend_enable&&(Fe?I.enable(3042):I.disable(3042),D.blend_enable=Fe),Oe=$[0],We=$[1],Me=$[2],Te=$[3],Oe===Z[0]&&We===Z[1]&&Me===Z[2]&&Te===Z[3]||(I.blendColor(Oe,We,Me,Te),Z[0]=Oe,Z[1]=We,Z[2]=Me,Z[3]=Te),Ee=X[0],Ce=X[1],Ee===Q[0]&&Ce===Q[1]||(I.blendEquationSeparate(Ee,Ce),Q[0]=Ee,Q[1]=Ce),He=J[0],Be=J[1],Ie=J[2],Pe=J[3],He===K[0]&&Be===K[1]&&Ie===K[2]&&Pe===K[3]||(I.blendFuncSeparate(He,Be,Ie,Pe),K[0]=He,K[1]=Be,K[2]=Ie,K[3]=Pe),(Ne=N.depth_func)!==D.depth_func&&(I.depthFunc(Ne),D.depth_func=Ne),De=ee[0],Ve=ee[1],De===te[0]&&Ve===te[1]||(I.depthRange(De,Ve),te[0]=De,te[1]=Ve),Le=ne[0],Re=ne[1],qe=ne[2],Ge=ne[3],Le===re[0]&&Re===re[1]&&qe===re[2]&&Ge===re[3]||(I.colorMask(Le,Re,qe,Ge),re[0]=Le,re[1]=Re,re[2]=qe,re[3]=Ge),(je=N.cull_enable)!==D.cull_enable&&(je?I.enable(2884):I.disable(2884),D.cull_enable=je),(Ue=N.cull_face)!==D.cull_face&&(I.cullFace(Ue),D.cull_face=Ue),(Ye=N.frontFace)!==D.frontFace&&(I.frontFace(Ye),D.frontFace=Ye),($e=N.lineWidth)!==D.lineWidth&&(I.lineWidth($e),D.lineWidth=$e),(Ze=N.polygonOffset_enable)!==D.polygonOffset_enable&&(Ze?I.enable(32823):I.disable(32823),D.polygonOffset_enable=Ze),Xe=ie[0],Qe=ie[1],Xe===ae[0]&&Qe===ae[1]||(I.polygonOffset(Xe,Qe),ae[0]=Xe,ae[1]=Qe),(Je=N.sample_alpha)!==D.sample_alpha&&(Je?I.enable(32926):I.disable(32926),D.sample_alpha=Je),(Ke=N.sample_enable)!==D.sample_enable&&(Ke?I.enable(32928):I.disable(32928),D.sample_enable=Ke),et=oe[0],tt=oe[1],et===se[0]&&tt===se[1]||(I.sampleCoverage(et,tt),se[0]=et,se[1]=tt),(nt=N.stencil_enable)!==D.stencil_enable&&(nt?I.enable(2960):I.disable(2960),D.stencil_enable=nt),(rt=N.stencil_mask)!==D.stencil_mask&&(I.stencilMask(rt),D.stencil_mask=rt),it=le[0],at=le[1],ot=le[2],it===fe[0]&&at===fe[1]&&ot===fe[2]||(I.stencilFunc(it,at,ot),fe[0]=it,fe[1]=at,fe[2]=ot),st=ce[0],lt=ce[1],ft=ce[2],ct=ce[3],st===ue[0]&&lt===ue[1]&&ft===ue[2]&&ct===ue[3]||(I.stencilOpSeparate(st,lt,ft,ct),ue[0]=st,ue[1]=lt,ue[2]=ft,ue[3]=ct),ut=de[0],dt=de[1],ht=de[2],pt=de[3],ut===he[0]&&dt===he[1]&&ht===he[2]&&pt===he[3]||(I.stencilOpSeparate(ut,dt,ht,pt),he[0]=ut,he[1]=dt,he[2]=ht,he[3]=pt),(bt=N.scissor_enable)!==D.scissor_enable&&(bt?I.enable(3089):I.disable(3089),D.scissor_enable=bt));S=P.framebufferWidth,k=P.framebufferHeight,z=P.viewportWidth,P.viewportWidth=S,F=P.viewportHeight,P.viewportHeight=k,I.viewport(0,0,S,k),ge[0]=0,ge[1]=0,ge[2]=S,ge[3]=k,r?I.enable(2929):I.disable(2929),D.depth_enable=r,I.depthMask(i),D.depth_mask=i,O=P.framebufferWidth,W=P.framebufferHeight,I.scissor(0,0,O,W),be[0]=0,be[1]=0,be[2]=O,be[3]=W,(M=D.profile)&&(T=performance.now(),t.count++),I.useProgram(a.program),E=Y.angle_instanced_arrays,G.setVAO(null),C=s.location,(H=q[C]).buffer||I.enableVertexAttribArray(C),5126===H.type&&2===H.size&&H.buffer===o&&!1===H.normalized&&0===H.offset&&0===H.stride||(I.bindBuffer(34962,o.buffer),I.vertexAttribPointer(C,2,5126,!1,0,0),H.type=5126,H.size=2,H.buffer=o,H.normalized=!1,H.offset=0,H.stride=0),0!==H.divisor&&(E.vertexAttribDivisorANGLE(C,0),H.divisor=0),B=f.call(this,P,e,0),I.uniform1f(l.location,B),(R=u.call(this,P,e,0))&&"framebuffer"===R._reglType&&(R=R.color[0]),j=R._texture,I.uniform1i(c.location,j.bind()),me=(pe=h.call(this,P,e,0))[0],_e=pe[1],I.uniform2f(d.location,me,_e),ye=b.call(this,P,e,0),I.uniform1f(p.location,ye),we=g.call(this,P,e,0),I.uniformMatrix3fv(m.location,!1,Array.isArray(we)||we instanceof Float32Array?we:(ve[0]=we[0],ve[1]=we[1],ve[2]=we[2],ve[3]=we[3],ve[4]=we[4],ve[5]=we[5],ve[6]=we[6],ve[7]=we[7],ve[8]=we[8],ve)),((xe=V.elements)||G.currentVAO&&(xe=L.getElements(G.currentVAO.elements)))&&I.bindBuffer(34963,xe.buffer.buffer),Ae=V.offset,(Se=v.call(this,P,e,0))&&((ke=V.instances)>0?xe?E.drawElementsInstancedANGLE(0,Se,xe.type,Ae<<(xe.type-5121>>1),ke):E.drawArraysInstancedANGLE(0,Ae,Se,ke):ke<0&&(xe?I.drawElements(0,Se,xe.type,Ae<<(xe.type-5121>>1)):I.drawArrays(0,Ae,Se)),D.dirty=!0,G.setVAO(null),U.next=w,P.framebufferWidth=x,P.framebufferHeight=A,P.viewportWidth=z,P.viewportHeight=F,M&&(t.cpuTime+=performance.now()-T),j.unbind())},scope:function(e,r,i){var a,s,l,c,d,p,m,H,B,I,L,q,G,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,be,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te;a=n.call(this,P,e,i),s=U.getFramebuffer(a),l=U.next,U.next=s,c=P.framebufferWidth,P.framebufferWidth=s?s.width:P.drawingBufferWidth,d=P.framebufferHeight,P.framebufferHeight=s?s.height:P.drawingBufferHeight,p=P.framebufferWidth,m=P.framebufferHeight,H=P.viewportWidth,P.viewportWidth=p,B=P.viewportHeight,P.viewportHeight=m,I=me[0],me[0]=_,L=me[1],me[1]=y,q=me[2],me[2]=p,G=me[3],me[3]=m,Y=N.depth_enable,N.depth_enable=w,$=N.depth_mask,N.depth_mask=x,Z=P.framebufferWidth,X=P.framebufferHeight,Q=pe[0],pe[0]=A,J=pe[1],pe[1]=S,K=pe[2],pe[2]=Z,ee=pe[3],pe[3]=X,(te=D.profile)&&(ne=performance.now(),t.count++),re=v.call(this,P,e,i),ie=V.count,V.count=re,ae=V.primitive,V.primitive=k,oe=u.call(this,P,e,i),se=j[z],j[z]=oe,le=f.call(this,P,e,i),fe=j[F],j[F]=le,ce=g.call(this,P,e,i),ue=j[O],j[O]=ce,de=b.call(this,P,e,i),he=j[W],j[W]=de,be=h.call(this,P,e,i),ge=j[M],j[M]=be,ve=T.state,T.state=1,_e=T.x,T.x=0,ye=T.y,T.y=0,we=T.z,T.z=0,xe=T.w,T.w=0,Ae=T.buffer,T.buffer=o,Se=T.size,T.size=2,ke=T.normalized,T.normalized=!1,ze=T.type,T.type=5126,Fe=T.offset,T.offset=0,Oe=T.stride,T.stride=0,We=T.divisor,T.divisor=0,Me=R.vert,R.vert=E,Te=R.frag,R.frag=C,D.dirty=!0,r(P,e,i),U.next=l,P.framebufferWidth=c,P.framebufferHeight=d,P.viewportWidth=H,P.viewportHeight=B,me[0]=I,me[1]=L,me[2]=q,me[3]=G,N.depth_enable=Y,N.depth_mask=$,pe[0]=Q,pe[1]=J,pe[2]=K,pe[3]=ee,te&&(t.cpuTime+=performance.now()-ne),V.count=ie,V.primitive=ae,j[z]=se,j[F]=fe,j[O]=ue,j[W]=he,j[M]=ge,T.state=ve,T.x=_e,T.y=ye,T.z=we,T.w=xe,T.buffer=Ae,T.size=Se,T.normalized=ke,T.type=ze,T.offset=Fe,T.stride=Oe,T.divisor=We,R.vert=Me,R.frag=Te,D.dirty=!0},batch:function(e,r){var i,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,R,j,pe,me,ve,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft,ct,ut,dt,ht,pt,bt,mt,gt,vt;(Y.angle_instanced_arrays,i=n.call(this,P,e,0),_=U.getFramebuffer(i),y=U.next,U.next=_,w=P.framebufferWidth,P.framebufferWidth=_?_.width:P.drawingBufferWidth,x=P.framebufferHeight,P.framebufferHeight=_?_.height:P.drawingBufferHeight,_!==U.cur&&(_?I.bindFramebuffer(36160,_.framebuffer):I.bindFramebuffer(36160,null),U.cur=_),D.dirty)&&((R=N.dither)!==D.dither&&(R?I.enable(3024):I.disable(3024),D.dither=R),(j=N.blend_enable)!==D.blend_enable&&(j?I.enable(3042):I.disable(3042),D.blend_enable=j),pe=$[0],me=$[1],ve=$[2],ye=$[3],pe===Z[0]&&me===Z[1]&&ve===Z[2]&&ye===Z[3]||(I.blendColor(pe,me,ve,ye),Z[0]=pe,Z[1]=me,Z[2]=ve,Z[3]=ye),we=X[0],xe=X[1],we===Q[0]&&xe===Q[1]||(I.blendEquationSeparate(we,xe),Q[0]=we,Q[1]=xe),Ae=J[0],Se=J[1],ke=J[2],ze=J[3],Ae===K[0]&&Se===K[1]&&ke===K[2]&&ze===K[3]||(I.blendFuncSeparate(Ae,Se,ke,ze),K[0]=Ae,K[1]=Se,K[2]=ke,K[3]=ze),(Fe=N.depth_func)!==D.depth_func&&(I.depthFunc(Fe),D.depth_func=Fe),Oe=ee[0],We=ee[1],Oe===te[0]&&We===te[1]||(I.depthRange(Oe,We),te[0]=Oe,te[1]=We),Me=ne[0],Te=ne[1],Ee=ne[2],Ce=ne[3],Me===re[0]&&Te===re[1]&&Ee===re[2]&&Ce===re[3]||(I.colorMask(Me,Te,Ee,Ce),re[0]=Me,re[1]=Te,re[2]=Ee,re[3]=Ce),(He=N.cull_enable)!==D.cull_enable&&(He?I.enable(2884):I.disable(2884),D.cull_enable=He),(Be=N.cull_face)!==D.cull_face&&(I.cullFace(Be),D.cull_face=Be),(Ie=N.frontFace)!==D.frontFace&&(I.frontFace(Ie),D.frontFace=Ie),(Pe=N.lineWidth)!==D.lineWidth&&(I.lineWidth(Pe),D.lineWidth=Pe),(Ne=N.polygonOffset_enable)!==D.polygonOffset_enable&&(Ne?I.enable(32823):I.disable(32823),D.polygonOffset_enable=Ne),De=ie[0],Ve=ie[1],De===ae[0]&&Ve===ae[1]||(I.polygonOffset(De,Ve),ae[0]=De,ae[1]=Ve),(Le=N.sample_alpha)!==D.sample_alpha&&(Le?I.enable(32926):I.disable(32926),D.sample_alpha=Le),(Re=N.sample_enable)!==D.sample_enable&&(Re?I.enable(32928):I.disable(32928),D.sample_enable=Re),qe=oe[0],Ge=oe[1],qe===se[0]&&Ge===se[1]||(I.sampleCoverage(qe,Ge),se[0]=qe,se[1]=Ge),(je=N.stencil_enable)!==D.stencil_enable&&(je?I.enable(2960):I.disable(2960),D.stencil_enable=je),(Ue=N.stencil_mask)!==D.stencil_mask&&(I.stencilMask(Ue),D.stencil_mask=Ue),Ye=le[0],$e=le[1],Ze=le[2],Ye===fe[0]&&$e===fe[1]&&Ze===fe[2]||(I.stencilFunc(Ye,$e,Ze),fe[0]=Ye,fe[1]=$e,fe[2]=Ze),Xe=ce[0],Qe=ce[1],Je=ce[2],Ke=ce[3],Xe===ue[0]&&Qe===ue[1]&&Je===ue[2]&&Ke===ue[3]||(I.stencilOpSeparate(Xe,Qe,Je,Ke),ue[0]=Xe,ue[1]=Qe,ue[2]=Je,ue[3]=Ke),et=de[0],tt=de[1],nt=de[2],rt=de[3],et===he[0]&&tt===he[1]&&nt===he[2]&&rt===he[3]||(I.stencilOpSeparate(et,tt,nt,rt),he[0]=et,he[1]=tt,he[2]=nt,he[3]=rt),(it=N.scissor_enable)!==D.scissor_enable&&(it?I.enable(3089):I.disable(3089),D.scissor_enable=it));for(A=P.framebufferWidth,S=P.framebufferHeight,k=P.viewportWidth,P.viewportWidth=A,z=P.viewportHeight,P.viewportHeight=S,I.viewport(0,0,A,S),ge[0]=0,ge[1]=0,ge[2]=A,ge[3]=S,H?I.enable(2929):I.disable(2929),D.depth_enable=H,I.depthMask(B),D.depth_mask=B,F=P.framebufferWidth,O=P.framebufferHeight,I.scissor(0,0,F,O),be[0]=0,be[1]=0,be[2]=F,be[3]=O,(W=D.profile)&&(M=performance.now(),t.count+=r),I.useProgram(a.program),T=Y.angle_instanced_arrays,G.setVAO(null),at=s.location,(ot=q[at]).buffer||I.enableVertexAttribArray(at),2,5126===ot.type&&2===ot.size&&ot.buffer===o&&!1===ot.normalized&&0===ot.offset&&0===ot.stride||(I.bindBuffer(34962,o.buffer),I.vertexAttribPointer(at,2,5126,!1,0,0),ot.type=5126,ot.size=2,ot.buffer=o,ot.normalized=!1,ot.offset=0,ot.stride=0),0!==ot.divisor&&(T.vertexAttribDivisorANGLE(at,0),ot.divisor=0),st=f.call(this,P,C,E),I.uniform1f(l.location,st),(lt=u.call(this,P,C,E))&&"framebuffer"===lt._reglType&&(lt=lt.color[0]),ft=lt._texture,I.uniform1i(c.location,ft.bind()),ut=(ct=h.call(this,P,C,E))[0],dt=ct[1],I.uniform2f(d.location,ut,dt),ht=b.call(this,P,C,E),I.uniform1f(p.location,ht),pt=g.call(this,P,C,E),I.uniformMatrix3fv(m.location,!1,Array.isArray(pt)||pt instanceof Float32Array?pt:(_e[0]=pt[0],_e[1]=pt[1],_e[2]=pt[2],_e[3]=pt[3],_e[4]=pt[4],_e[5]=pt[5],_e[6]=pt[6],_e[7]=pt[7],_e[8]=pt[8],_e)),((bt=V.elements)||G.currentVAO&&(bt=L.getElements(G.currentVAO.elements)))&&I.bindBuffer(34963,bt.buffer.buffer),mt=V.offset,gt=v.call(this,P,C,E),vt=V.instances,E=0;E<r;++E)C=e[E],gt&&(vt>0?bt?T.drawElementsInstancedANGLE(0,gt,bt.type,mt<<(bt.type-5121>>1),vt):T.drawArraysInstancedANGLE(0,mt,gt,vt):vt<0&&(bt?I.drawElements(0,gt,bt.type,mt<<(bt.type-5121>>1)):I.drawArrays(0,mt,gt)));ft.unbind(),D.dirty=!0,G.setVAO(null),U.next=y,P.framebufferWidth=w,P.framebufferHeight=x,P.viewportWidth=k,P.viewportHeight=z,W&&(t.cpuTime+=performance.now()-M)}}},"4fcdeed74044cf60aec3d04b2ef34a1a9339bee96262f7b7dc4f0861dd54a457":function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve){var Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft,ct,ut,dt,ht,pt,bt,mt,gt,vt,_t,yt,wt,xt,At,St,kt,zt,Ft,Ot,Wt,Mt,Tt,Et,Ct;return Le=e.gl,Re=e.context,e.strings,qe=e.next,Ge=e.current,je=e.draw,Ue=e.elements,Ye=e.buffer,$e=e.shader,Ze=e.attributes,Xe=e.vao,Qe=e.uniforms,Je=e.framebuffer,Ke=e.extensions,e.timer,et=e.isBufferArgs,tt=qe.blend_color,nt=Ge.blend_color,rt=qe.blend_equation,it=Ge.blend_equation,at=qe.blend_func,ot=Ge.blend_func,st=qe.depth_range,lt=Ge.depth_range,ft=qe.colorMask,ct=Ge.colorMask,ut=qe.polygonOffset_offset,dt=Ge.polygonOffset_offset,ht=qe.sample_coverage,pt=Ge.sample_coverage,bt=qe.stencil_func,mt=Ge.stencil_func,gt=qe.stencil_opFront,vt=Ge.stencil_opFront,_t=qe.stencil_opBack,yt=Ge.stencil_opBack,wt=qe.scissor_box,xt=Ge.scissor_box,At=qe.viewport,St=Ge.viewport,kt={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},(zt={}).divisor=0,(Ft={}).divisor=1,Ft.offset=0,Ft.stride=16,(Ot={}).divisor=1,Ot.offset=8,Ot.stride=16,(Wt={}).divisor=1,Wt.offset=0,Wt.stride=16,(Mt={}).divisor=1,Mt.offset=0,Mt.stride=4,(Tt={}).divisor=1,Tt.offset=0,Tt.stride=4,Et=new Float32Array(9),Ct=new Float32Array(9),{draw:function(e){var X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,$e,Qe,rt,at,Ct,Ht,Bt,It,Pt,Nt,Dt,Vt,Lt,Rt,qt,Gt,jt,Ut,Yt,$t,Zt,Xt,Qt,Jt,Kt,en,tn,nn,rn,an,on,sn,ln,fn,cn,un,dn,hn,pn,bn,mn,gn,vn,_n,yn,wn,xn,An,Sn,kn,zn,Fn,On,Wn,Mn,Tn,En,Cn,Hn,Bn,In,Pn,Nn,Dn,Vn,Ln,Rn,qn,Gn,jn,Un,Yn,$n,Zn,Xn,Qn,Jn,Kn,er,tr,nr,rr,ir,ar,or,sr,lr,fr,cr,ur,dr,hr,pr,br,mr,gr,vr,_r,yr,wr,xr,Ar,Sr,kr,zr,Fr,Or,Wr,Mr,Tr,Er,Cr,Hr,Br,Ir,Pr,Nr,Dr,Vr,Lr,Rr,qr,Gr,jr,Ur,Yr,$r,Zr;(Ke.angle_instanced_arrays,(X=Je.next)!==Je.cur&&(X?Le.bindFramebuffer(36160,X.framebuffer):Le.bindFramebuffer(36160,null),Je.cur=X),Ge.dirty)&&((sr=qe.dither)!==Ge.dither&&(sr?Le.enable(3024):Le.disable(3024),Ge.dither=sr),lr=tt[0],fr=tt[1],cr=tt[2],ur=tt[3],lr===nt[0]&&fr===nt[1]&&cr===nt[2]&&ur===nt[3]||(Le.blendColor(lr,fr,cr,ur),nt[0]=lr,nt[1]=fr,nt[2]=cr,nt[3]=ur),(dr=qe.depth_func)!==Ge.depth_func&&(Le.depthFunc(dr),Ge.depth_func=dr),hr=st[0],pr=st[1],hr===lt[0]&&pr===lt[1]||(Le.depthRange(hr,pr),lt[0]=hr,lt[1]=pr),br=ft[0],mr=ft[1],gr=ft[2],vr=ft[3],br===ct[0]&&mr===ct[1]&&gr===ct[2]&&vr===ct[3]||(Le.colorMask(br,mr,gr,vr),ct[0]=br,ct[1]=mr,ct[2]=gr,ct[3]=vr),(_r=qe.frontFace)!==Ge.frontFace&&(Le.frontFace(_r),Ge.frontFace=_r),(yr=qe.lineWidth)!==Ge.lineWidth&&(Le.lineWidth(yr),Ge.lineWidth=yr),(wr=qe.polygonOffset_enable)!==Ge.polygonOffset_enable&&(wr?Le.enable(32823):Le.disable(32823),Ge.polygonOffset_enable=wr),xr=ut[0],Ar=ut[1],xr===dt[0]&&Ar===dt[1]||(Le.polygonOffset(xr,Ar),dt[0]=xr,dt[1]=Ar),(Sr=qe.sample_alpha)!==Ge.sample_alpha&&(Sr?Le.enable(32926):Le.disable(32926),Ge.sample_alpha=Sr),(kr=qe.sample_enable)!==Ge.sample_enable&&(kr?Le.enable(32928):Le.disable(32928),Ge.sample_enable=kr),zr=ht[0],Fr=ht[1],zr===pt[0]&&Fr===pt[1]||(Le.sampleCoverage(zr,Fr),pt[0]=zr,pt[1]=Fr),(Or=qe.stencil_enable)!==Ge.stencil_enable&&(Or?Le.enable(2960):Le.disable(2960),Ge.stencil_enable=Or),(Wr=qe.stencil_mask)!==Ge.stencil_mask&&(Le.stencilMask(Wr),Ge.stencil_mask=Wr),Mr=bt[0],Tr=bt[1],Er=bt[2],Mr===mt[0]&&Tr===mt[1]&&Er===mt[2]||(Le.stencilFunc(Mr,Tr,Er),mt[0]=Mr,mt[1]=Tr,mt[2]=Er),Cr=gt[0],Hr=gt[1],Br=gt[2],Ir=gt[3],Cr===vt[0]&&Hr===vt[1]&&Br===vt[2]&&Ir===vt[3]||(Le.stencilOpSeparate(Cr,Hr,Br,Ir),vt[0]=Cr,vt[1]=Hr,vt[2]=Br,vt[3]=Ir),Pr=_t[0],Nr=_t[1],Dr=_t[2],Vr=_t[3],Pr===yt[0]&&Nr===yt[1]&&Dr===yt[2]&&Vr===yt[3]||(Le.stencilOpSeparate(Pr,Nr,Dr,Vr),yt[0]=Pr,yt[1]=Nr,yt[2]=Dr,yt[3]=Vr),(Lr=qe.scissor_enable)!==Ge.scissor_enable&&(Lr?Le.enable(3089):Le.disable(3089),Ge.scissor_enable=Lr),Rr=wt[0],qr=wt[1],Gr=wt[2],jr=wt[3],Rr===xt[0]&&qr===xt[1]&&Gr===xt[2]&&jr===xt[3]||(Le.scissor(Rr,qr,Gr,jr),xt[0]=Rr,xt[1]=qr,xt[2]=Gr,xt[3]=jr),Ur=At[0],Yr=At[1],$r=At[2],Zr=At[3],Ur===St[0]&&Yr===St[1]&&$r===St[2]&&Zr===St[3]||(Le.viewport(Ur,Yr,$r,Zr),St[0]=Ur,St[1]=Yr,St[2]=$r,St[3]=Zr));n?Le.enable(3042):Le.disable(3042),Ge.blend_enable=n,Le.blendEquationSeparate(32774,32774),it[0]=32774,it[1]=32774,Le.blendFuncSeparate(770,771,1,771),ot[0]=770,ot[1]=771,ot[2]=1,ot[3]=771,r?Le.enable(2884):Le.disable(2884),Ge.cull_enable=r,Le.cullFace(i),Ge.cull_face=i,a?Le.enable(2929):Le.disable(2929),Ge.depth_enable=a,Le.depthMask(o),Ge.depth_mask=o,(Q=Ge.profile)&&(J=performance.now(),t.count++),Le.useProgram(s.program),K=Ke.angle_instanced_arrays,Xe.setVAO(null),ee=l.call(this,Re,e,0),Tt.buffer=ee,te=!1,ne=1,re=0,ie=0,ae=0,oe=0,se=null,le=0,fe=!1,ce=5126,ue=0,de=0,he=0,et(Tt)?(te=!0,ce=(se=Ye.createStream(34962,Tt)).dtype):(se=Ye.getBuffer(Tt))?ce=se.dtype:"constant"in Tt?(ne=2,"number"==typeof Tt.constant?(re=Tt.constant,ie=ae=oe=0):(re=Tt.constant.length>0?Tt.constant[0]:0,ie=Tt.constant.length>1?Tt.constant[1]:0,ae=Tt.constant.length>2?Tt.constant[2]:0,oe=Tt.constant.length>3?Tt.constant[3]:0)):(se=et(Tt.buffer)?Ye.createStream(34962,Tt.buffer):Ye.getBuffer(Tt.buffer),ce="type"in Tt?kt[Tt.type]:se.dtype,fe=!!Tt.normalized,le=0|Tt.size,ue=0|Tt.offset,de=0|Tt.stride,he=0|Tt.divisor),pe=f.location,be=Ze[pe],1===ne?(be.buffer||Le.enableVertexAttribArray(pe),me=le||1,be.type===ce&&be.size===me&&be.buffer===se&&be.normalized===fe&&be.offset===ue&&be.stride===de||(Le.bindBuffer(34962,se.buffer),Le.vertexAttribPointer(pe,me,ce,fe,de,ue),be.type=ce,be.size=me,be.buffer=se,be.normalized=fe,be.offset=ue,be.stride=de),be.divisor!==he&&(K.vertexAttribDivisorANGLE(pe,he),be.divisor=he)):(be.buffer&&(Le.disableVertexAttribArray(pe),be.buffer=null),be.x===re&&be.y===ie&&be.z===ae&&be.w===oe||(Le.vertexAttrib4f(pe,re,ie,ae,oe),be.x=re,be.y=ie,be.z=ae,be.w=oe)),ge=c.call(this,Re,e,0),Wt.buffer=ge,ve=!1,_e=1,ye=0,we=0,xe=0,Ae=0,Se=null,ke=0,ze=!1,Fe=5126,Oe=0,We=0,Me=0,et(Wt)?(ve=!0,Fe=(Se=Ye.createStream(34962,Wt)).dtype):(Se=Ye.getBuffer(Wt))?Fe=Se.dtype:"constant"in Wt?(_e=2,"number"==typeof Wt.constant?(ye=Wt.constant,we=xe=Ae=0):(ye=Wt.constant.length>0?Wt.constant[0]:0,we=Wt.constant.length>1?Wt.constant[1]:0,xe=Wt.constant.length>2?Wt.constant[2]:0,Ae=Wt.constant.length>3?Wt.constant[3]:0)):(Se=et(Wt.buffer)?Ye.createStream(34962,Wt.buffer):Ye.getBuffer(Wt.buffer),Fe="type"in Wt?kt[Wt.type]:Se.dtype,ze=!!Wt.normalized,ke=0|Wt.size,Oe=0|Wt.offset,We=0|Wt.stride,Me=0|Wt.divisor),Te=u.location,Ee=Ze[Te],1===_e?(Ee.buffer||Le.enableVertexAttribArray(Te),Ce=ke||4,Ee.type===Fe&&Ee.size===Ce&&Ee.buffer===Se&&Ee.normalized===ze&&Ee.offset===Oe&&Ee.stride===We||(Le.bindBuffer(34962,Se.buffer),Le.vertexAttribPointer(Te,Ce,Fe,ze,We,Oe),Ee.type=Fe,Ee.size=Ce,Ee.buffer=Se,Ee.normalized=ze,Ee.offset=Oe,Ee.stride=We),Ee.divisor!==Me&&(K.vertexAttribDivisorANGLE(Te,Me),Ee.divisor=Me)):(Ee.buffer&&(Le.disableVertexAttribArray(Te),Ee.buffer=null),Ee.x===ye&&Ee.y===we&&Ee.z===xe&&Ee.w===Ae||(Le.vertexAttrib4f(Te,ye,we,xe,Ae),Ee.x=ye,Ee.y=we,Ee.z=xe,Ee.w=Ae)),He=d.call(this,Re,e,0),Ft.buffer=He,Be=!1,Ie=1,Pe=0,Ne=0,De=0,Ve=0,$e=null,Qe=0,rt=!1,at=5126,Ct=0,Ht=0,Bt=0,et(Ft)?(Be=!0,at=($e=Ye.createStream(34962,Ft)).dtype):($e=Ye.getBuffer(Ft))?at=$e.dtype:"constant"in Ft?(Ie=2,"number"==typeof Ft.constant?(Pe=Ft.constant,Ne=De=Ve=0):(Pe=Ft.constant.length>0?Ft.constant[0]:0,Ne=Ft.constant.length>1?Ft.constant[1]:0,De=Ft.constant.length>2?Ft.constant[2]:0,Ve=Ft.constant.length>3?Ft.constant[3]:0)):($e=et(Ft.buffer)?Ye.createStream(34962,Ft.buffer):Ye.getBuffer(Ft.buffer),at="type"in Ft?kt[Ft.type]:$e.dtype,rt=!!Ft.normalized,Qe=0|Ft.size,Ct=0|Ft.offset,Ht=0|Ft.stride,Bt=0|Ft.divisor),It=h.location,Pt=Ze[It],1===Ie?(Pt.buffer||Le.enableVertexAttribArray(It),Nt=Qe||2,Pt.type===at&&Pt.size===Nt&&Pt.buffer===$e&&Pt.normalized===rt&&Pt.offset===Ct&&Pt.stride===Ht||(Le.bindBuffer(34962,$e.buffer),Le.vertexAttribPointer(It,Nt,at,rt,Ht,Ct),Pt.type=at,Pt.size=Nt,Pt.buffer=$e,Pt.normalized=rt,Pt.offset=Ct,Pt.stride=Ht),Pt.divisor!==Bt&&(K.vertexAttribDivisorANGLE(It,Bt),Pt.divisor=Bt)):(Pt.buffer&&(Le.disableVertexAttribArray(It),Pt.buffer=null),Pt.x===Pe&&Pt.y===Ne&&Pt.z===De&&Pt.w===Ve||(Le.vertexAttrib4f(It,Pe,Ne,De,Ve),Pt.x=Pe,Pt.y=Ne,Pt.z=De,Pt.w=Ve)),Dt=p.call(this,Re,e,0),Ot.buffer=Dt,Vt=!1,Lt=1,Rt=0,qt=0,Gt=0,jt=0,Ut=null,Yt=0,$t=!1,Zt=5126,Xt=0,Qt=0,Jt=0,et(Ot)?(Vt=!0,Zt=(Ut=Ye.createStream(34962,Ot)).dtype):(Ut=Ye.getBuffer(Ot))?Zt=Ut.dtype:"constant"in Ot?(Lt=2,"number"==typeof Ot.constant?(Rt=Ot.constant,qt=Gt=jt=0):(Rt=Ot.constant.length>0?Ot.constant[0]:0,qt=Ot.constant.length>1?Ot.constant[1]:0,Gt=Ot.constant.length>2?Ot.constant[2]:0,jt=Ot.constant.length>3?Ot.constant[3]:0)):(Ut=et(Ot.buffer)?Ye.createStream(34962,Ot.buffer):Ye.getBuffer(Ot.buffer),Zt="type"in Ot?kt[Ot.type]:Ut.dtype,$t=!!Ot.normalized,Yt=0|Ot.size,Xt=0|Ot.offset,Qt=0|Ot.stride,Jt=0|Ot.divisor),Kt=b.location,en=Ze[Kt],1===Lt?(en.buffer||Le.enableVertexAttribArray(Kt),tn=Yt||2,en.type===Zt&&en.size===tn&&en.buffer===Ut&&en.normalized===$t&&en.offset===Xt&&en.stride===Qt||(Le.bindBuffer(34962,Ut.buffer),Le.vertexAttribPointer(Kt,tn,Zt,$t,Qt,Xt),en.type=Zt,en.size=tn,en.buffer=Ut,en.normalized=$t,en.offset=Xt,en.stride=Qt),en.divisor!==Jt&&(K.vertexAttribDivisorANGLE(Kt,Jt),en.divisor=Jt)):(en.buffer&&(Le.disableVertexAttribArray(Kt),en.buffer=null),en.x===Rt&&en.y===qt&&en.z===Gt&&en.w===jt||(Le.vertexAttrib4f(Kt,Rt,qt,Gt,jt),en.x=Rt,en.y=qt,en.z=Gt,en.w=jt)),nn=m.call(this,Re,e,0),zt.buffer=nn,rn=!1,an=1,on=0,sn=0,ln=0,fn=0,cn=null,un=0,dn=!1,hn=5126,pn=0,bn=0,mn=0,et(zt)?(rn=!0,hn=(cn=Ye.createStream(34962,zt)).dtype):(cn=Ye.getBuffer(zt))?hn=cn.dtype:"constant"in zt?(an=2,"number"==typeof zt.constant?(on=zt.constant,sn=ln=fn=0):(on=zt.constant.length>0?zt.constant[0]:0,sn=zt.constant.length>1?zt.constant[1]:0,ln=zt.constant.length>2?zt.constant[2]:0,fn=zt.constant.length>3?zt.constant[3]:0)):(cn=et(zt.buffer)?Ye.createStream(34962,zt.buffer):Ye.getBuffer(zt.buffer),hn="type"in zt?kt[zt.type]:cn.dtype,dn=!!zt.normalized,un=0|zt.size,pn=0|zt.offset,bn=0|zt.stride,mn=0|zt.divisor),gn=g.location,vn=Ze[gn],1===an?(vn.buffer||Le.enableVertexAttribArray(gn),_n=un||2,vn.type===hn&&vn.size===_n&&vn.buffer===cn&&vn.normalized===dn&&vn.offset===pn&&vn.stride===bn||(Le.bindBuffer(34962,cn.buffer),Le.vertexAttribPointer(gn,_n,hn,dn,bn,pn),vn.type=hn,vn.size=_n,vn.buffer=cn,vn.normalized=dn,vn.offset=pn,vn.stride=bn),vn.divisor!==mn&&(K.vertexAttribDivisorANGLE(gn,mn),vn.divisor=mn)):(vn.buffer&&(Le.disableVertexAttribArray(gn),vn.buffer=null),vn.x===on&&vn.y===sn&&vn.z===ln&&vn.w===fn||(Le.vertexAttrib4f(gn,on,sn,ln,fn),vn.x=on,vn.y=sn,vn.z=ln,vn.w=fn)),yn=v.call(this,Re,e,0),Mt.buffer=yn,wn=!1,xn=1,An=0,Sn=0,kn=0,zn=0,Fn=null,On=0,Wn=!1,Mn=5126,Tn=0,En=0,Cn=0,et(Mt)?(wn=!0,Mn=(Fn=Ye.createStream(34962,Mt)).dtype):(Fn=Ye.getBuffer(Mt))?Mn=Fn.dtype:"constant"in Mt?(xn=2,"number"==typeof Mt.constant?(An=Mt.constant,Sn=kn=zn=0):(An=Mt.constant.length>0?Mt.constant[0]:0,Sn=Mt.constant.length>1?Mt.constant[1]:0,kn=Mt.constant.length>2?Mt.constant[2]:0,zn=Mt.constant.length>3?Mt.constant[3]:0)):(Fn=et(Mt.buffer)?Ye.createStream(34962,Mt.buffer):Ye.getBuffer(Mt.buffer),Mn="type"in Mt?kt[Mt.type]:Fn.dtype,Wn=!!Mt.normalized,On=0|Mt.size,Tn=0|Mt.offset,En=0|Mt.stride,Cn=0|Mt.divisor),Hn=_.location,Bn=Ze[Hn],1===xn?(Bn.buffer||Le.enableVertexAttribArray(Hn),In=On||1,Bn.type===Mn&&Bn.size===In&&Bn.buffer===Fn&&Bn.normalized===Wn&&Bn.offset===Tn&&Bn.stride===En||(Le.bindBuffer(34962,Fn.buffer),Le.vertexAttribPointer(Hn,In,Mn,Wn,En,Tn),Bn.type=Mn,Bn.size=In,Bn.buffer=Fn,Bn.normalized=Wn,Bn.offset=Tn,Bn.stride=En),Bn.divisor!==Cn&&(K.vertexAttribDivisorANGLE(Hn,Cn),Bn.divisor=Cn)):(Bn.buffer&&(Le.disableVertexAttribArray(Hn),Bn.buffer=null),Bn.x===An&&Bn.y===Sn&&Bn.z===kn&&Bn.w===zn||(Le.vertexAttrib4f(Hn,An,Sn,kn,zn),Bn.x=An,Bn.y=Sn,Bn.z=kn,Bn.w=zn)),Pn=w.call(this,Re,e,0),Le.uniform1f(y.location,Pn),Nn=A.call(this,Re,e,0),Le.uniform1f(x.location,Nn),Dn=k.call(this,Re,e,0),Le.uniform1f(S.location,Dn),Vn=F.call(this,Re,e,0),Le.uniform1f(z.location,Vn),Ln=W.call(this,Re,e,0),Le.uniform1f(O.location,Ln),qn=(Rn=T.call(this,Re,e,0))[0],Gn=Rn[1],Le.uniform2f(M.location,qn,Gn),jn=C.call(this,Re,e,0),Le.uniform1f(E.location,jn),(Un=B.call(this,Re,e,0))&&"framebuffer"===Un._reglType&&(Un=Un.color[0]),Yn=Un._texture,Le.uniform1i(H.location,Yn.bind()),$n=P.call(this,Re,e,0),Le.uniform1f(I.location,$n),(Zn=D.call(this,Re,e,0))&&"framebuffer"===Zn._reglType&&(Zn=Zn.color[0]),Xn=Zn._texture,Le.uniform1i(N.location,Xn.bind()),Jn=(Qn=L.call(this,Re,e,0))[0],Kn=Qn[1],Le.uniform2f(V.location,Jn,Kn),er=q.call(this,Re,e,0),Le.uniform1f(R.location,er),tr=j.call(this,Re,e,0),Le.uniformMatrix3fv(G.location,!1,Array.isArray(tr)||tr instanceof Float32Array?tr:(Et[0]=tr[0],Et[1]=tr[1],Et[2]=tr[2],Et[3]=tr[3],Et[4]=tr[4],Et[5]=tr[5],Et[6]=tr[6],Et[7]=tr[7],Et[8]=tr[8],Et)),nr=Y.call(this,Re,e,0),Le.uniform1f(U.location,nr),((rr=je.elements)||Xe.currentVAO&&(rr=Ue.getElements(Xe.currentVAO.elements)))&&Le.bindBuffer(34963,rr.buffer.buffer),ir=je.offset,(ar=$.call(this,Re,e,0))&&((or=Z.call(this,Re,e,0))>0?rr?K.drawElementsInstancedANGLE(5,ar,rr.type,ir<<(rr.type-5121>>1),or):K.drawArraysInstancedANGLE(5,ir,ar,or):or<0&&(rr?Le.drawElements(5,ar,rr.type,ir<<(rr.type-5121>>1)):Le.drawArrays(5,ir,ar)),Ge.dirty=!0,Xe.setVAO(null),Q&&(t.cpuTime+=performance.now()-J),te&&Ye.destroyStream(se),ve&&Ye.destroyStream(Se),Be&&Ye.destroyStream($e),Vt&&Ye.destroyStream(Ut),rn&&Ye.destroyStream(cn),wn&&Ye.destroyStream(Fn),Yn.unbind(),Xn.unbind())},scope:function(e,n,r){var i,a,o,s,f,u,h,b,g,_,y,x,S,z,O,M,E,H,I,N,V,R,G,U,Ie,Pe,Ne,De,Ve,Le,Ue,Ze,Xe,Je,Ke,tt,nt,it,ot,st,lt,ft,ct,ut,dt,ht,pt,bt,mt,gt,vt,_t,yt,wt,xt,At,St,Et,Ct,Ht,Bt,It,Pt,Nt,Dt,Vt,Lt,Rt,qt,Gt,jt,Ut,Yt,$t,Zt,Xt,Qt,Jt,Kt,en,tn,nn,rn,an,on,sn,ln,fn,cn,un,dn,hn,pn,bn,mn,gn,vn,_n,yn,wn,xn,An,Sn,kn,zn,Fn,On,Wn,Mn,Tn,En,Cn,Hn,Bn,In,Pn,Nn,Dn,Vn,Ln,Rn,qn,Gn,jn,Un,Yn,$n,Zn,Xn,Qn,Jn,Kn,er,tr,nr,rr,ir,ar,or,sr,lr,fr,cr,ur,dr,hr,pr,br,mr,gr,vr,_r,yr,wr,xr,Ar,Sr,kr,zr,Fr,Or,Wr,Mr,Tr,Er,Cr,Hr,Br,Ir,Pr,Nr,Dr,Vr,Lr,Rr,qr,Gr,jr,Ur,Yr,$r,Zr,Xr,Qr,Jr,Kr,ei,ti,ni,ri,ii,ai,oi,si,li,fi,ci,ui,di,hi,pi,bi,mi,gi,vi,_i,yi,wi,xi,Ai;i=qe.blend_enable,qe.blend_enable=X,a=rt[0],rt[0]=Q,o=rt[1],rt[1]=J,s=at[0],at[0]=K,f=at[1],at[1]=ee,u=at[2],at[2]=te,h=at[3],at[3]=ne,b=qe.cull_enable,qe.cull_enable=re,g=qe.cull_face,qe.cull_face=ie,_=qe.depth_enable,qe.depth_enable=ae,y=qe.depth_mask,qe.depth_mask=oe,(x=Ge.profile)&&(S=performance.now(),t.count++),z=$.call(this,Re,e,r),O=je.count,je.count=z,M=Z.call(this,Re,e,r),E=je.instances,je.instances=M,H=je.primitive,je.primitive=se,I=D.call(this,Re,e,r),N=Qe[le],Qe[le]=I,V=B.call(this,Re,e,r),R=Qe[fe],Qe[fe]=V,G=j.call(this,Re,e,r),U=Qe[ce],Qe[ce]=G,Ie=P.call(this,Re,e,r),Pe=Qe[ue],Qe[ue]=Ie,Ne=de.call(this,Re,e,r),De=Qe[he],Qe[he]=Ne,Ve=Y.call(this,Re,e,r),Le=Qe[pe],Qe[pe]=Ve,Ue=w.call(this,Re,e,r),Ze=Qe[be],Qe[be]=Ue,Xe=q.call(this,Re,e,r),Je=Qe[me],Qe[me]=Xe,Ke=L.call(this,Re,e,r),tt=Qe[ge],Qe[ge]=Ke,nt=ve.call(this,Re,e,r),it=Qe[_e],Qe[_e]=nt,ot=T.call(this,Re,e,r),st=Qe[ye],Qe[ye]=ot,lt=C.call(this,Re,e,r),ft=Qe[we],Qe[we]=lt,ct=W.call(this,Re,e,r),ut=Qe[xe],Qe[xe]=ct,dt=Ae.call(this,Re,e,r),ht=Qe[Se],Qe[Se]=dt,pt=F.call(this,Re,e,r),bt=Qe[ke],Qe[ke]=pt,mt=A.call(this,Re,e,r),gt=Qe[ze],Qe[ze]=mt,vt=k.call(this,Re,e,r),_t=Qe[Fe],Qe[Fe]=vt,yt=m.call(this,Re,e,r),zt.buffer=yt,wt=!1,xt=1,At=0,St=0,Et=0,Ct=0,Ht=null,Bt=0,It=!1,Pt=5126,Nt=0,Dt=0,Vt=0,et(zt)?(wt=!0,Pt=(Ht=Ye.createStream(34962,zt)).dtype):(Ht=Ye.getBuffer(zt))?Pt=Ht.dtype:"constant"in zt?(xt=2,"number"==typeof zt.constant?(At=zt.constant,St=Et=Ct=0):(At=zt.constant.length>0?zt.constant[0]:0,St=zt.constant.length>1?zt.constant[1]:0,Et=zt.constant.length>2?zt.constant[2]:0,Ct=zt.constant.length>3?zt.constant[3]:0)):(Ht=et(zt.buffer)?Ye.createStream(34962,zt.buffer):Ye.getBuffer(zt.buffer),Pt="type"in zt?kt[zt.type]:Ht.dtype,It=!!zt.normalized,Bt=0|zt.size,Nt=0|zt.offset,Dt=0|zt.stride,Vt=0|zt.divisor),Lt=Oe.state,Oe.state=xt,Rt=Oe.x,Oe.x=At,qt=Oe.y,Oe.y=St,Gt=Oe.z,Oe.z=Et,jt=Oe.w,Oe.w=Ct,Ut=Oe.buffer,Oe.buffer=Ht,Yt=Oe.size,Oe.size=Bt,$t=Oe.normalized,Oe.normalized=It,Zt=Oe.type,Oe.type=Pt,Xt=Oe.offset,Oe.offset=Nt,Qt=Oe.stride,Oe.stride=Dt,Jt=Oe.divisor,Oe.divisor=Vt,Kt=d.call(this,Re,e,r),Ft.buffer=Kt,en=!1,tn=1,nn=0,rn=0,an=0,on=0,sn=null,ln=0,fn=!1,cn=5126,un=0,dn=0,hn=0,et(Ft)?(en=!0,cn=(sn=Ye.createStream(34962,Ft)).dtype):(sn=Ye.getBuffer(Ft))?cn=sn.dtype:"constant"in Ft?(tn=2,"number"==typeof Ft.constant?(nn=Ft.constant,rn=an=on=0):(nn=Ft.constant.length>0?Ft.constant[0]:0,rn=Ft.constant.length>1?Ft.constant[1]:0,an=Ft.constant.length>2?Ft.constant[2]:0,on=Ft.constant.length>3?Ft.constant[3]:0)):(sn=et(Ft.buffer)?Ye.createStream(34962,Ft.buffer):Ye.getBuffer(Ft.buffer),cn="type"in Ft?kt[Ft.type]:sn.dtype,fn=!!Ft.normalized,ln=0|Ft.size,un=0|Ft.offset,dn=0|Ft.stride,hn=0|Ft.divisor),pn=We.state,We.state=tn,bn=We.x,We.x=nn,mn=We.y,We.y=rn,gn=We.z,We.z=an,vn=We.w,We.w=on,_n=We.buffer,We.buffer=sn,yn=We.size,We.size=ln,wn=We.normalized,We.normalized=fn,xn=We.type,We.type=cn,An=We.offset,We.offset=un,Sn=We.stride,We.stride=dn,kn=We.divisor,We.divisor=hn,zn=p.call(this,Re,e,r),Ot.buffer=zn,Fn=!1,On=1,Wn=0,Mn=0,Tn=0,En=0,Cn=null,Hn=0,Bn=!1,In=5126,Pn=0,Nn=0,Dn=0,et(Ot)?(Fn=!0,In=(Cn=Ye.createStream(34962,Ot)).dtype):(Cn=Ye.getBuffer(Ot))?In=Cn.dtype:"constant"in Ot?(On=2,"number"==typeof Ot.constant?(Wn=Ot.constant,Mn=Tn=En=0):(Wn=Ot.constant.length>0?Ot.constant[0]:0,Mn=Ot.constant.length>1?Ot.constant[1]:0,Tn=Ot.constant.length>2?Ot.constant[2]:0,En=Ot.constant.length>3?Ot.constant[3]:0)):(Cn=et(Ot.buffer)?Ye.createStream(34962,Ot.buffer):Ye.getBuffer(Ot.buffer),In="type"in Ot?kt[Ot.type]:Cn.dtype,Bn=!!Ot.normalized,Hn=0|Ot.size,Pn=0|Ot.offset,Nn=0|Ot.stride,Dn=0|Ot.divisor),Vn=Me.state,Me.state=On,Ln=Me.x,Me.x=Wn,Rn=Me.y,Me.y=Mn,qn=Me.z,Me.z=Tn,Gn=Me.w,Me.w=En,jn=Me.buffer,Me.buffer=Cn,Un=Me.size,Me.size=Hn,Yn=Me.normalized,Me.normalized=Bn,$n=Me.type,Me.type=In,Zn=Me.offset,Me.offset=Pn,Xn=Me.stride,Me.stride=Nn,Qn=Me.divisor,Me.divisor=Dn,Jn=c.call(this,Re,e,r),Wt.buffer=Jn,Kn=!1,er=1,tr=0,nr=0,rr=0,ir=0,ar=null,or=0,sr=!1,lr=5126,fr=0,cr=0,ur=0,et(Wt)?(Kn=!0,lr=(ar=Ye.createStream(34962,Wt)).dtype):(ar=Ye.getBuffer(Wt))?lr=ar.dtype:"constant"in Wt?(er=2,"number"==typeof Wt.constant?(tr=Wt.constant,nr=rr=ir=0):(tr=Wt.constant.length>0?Wt.constant[0]:0,nr=Wt.constant.length>1?Wt.constant[1]:0,rr=Wt.constant.length>2?Wt.constant[2]:0,ir=Wt.constant.length>3?Wt.constant[3]:0)):(ar=et(Wt.buffer)?Ye.createStream(34962,Wt.buffer):Ye.getBuffer(Wt.buffer),lr="type"in Wt?kt[Wt.type]:ar.dtype,sr=!!Wt.normalized,or=0|Wt.size,fr=0|Wt.offset,cr=0|Wt.stride,ur=0|Wt.divisor),dr=Te.state,Te.state=er,hr=Te.x,Te.x=tr,pr=Te.y,Te.y=nr,br=Te.z,Te.z=rr,mr=Te.w,Te.w=ir,gr=Te.buffer,Te.buffer=ar,vr=Te.size,Te.size=or,_r=Te.normalized,Te.normalized=sr,yr=Te.type,Te.type=lr,wr=Te.offset,Te.offset=fr,xr=Te.stride,Te.stride=cr,Ar=Te.divisor,Te.divisor=ur,Sr=v.call(this,Re,e,r),Mt.buffer=Sr,kr=!1,zr=1,Fr=0,Or=0,Wr=0,Mr=0,Tr=null,Er=0,Cr=!1,Hr=5126,Br=0,Ir=0,Pr=0,et(Mt)?(kr=!0,Hr=(Tr=Ye.createStream(34962,Mt)).dtype):(Tr=Ye.getBuffer(Mt))?Hr=Tr.dtype:"constant"in Mt?(zr=2,"number"==typeof Mt.constant?(Fr=Mt.constant,Or=Wr=Mr=0):(Fr=Mt.constant.length>0?Mt.constant[0]:0,Or=Mt.constant.length>1?Mt.constant[1]:0,Wr=Mt.constant.length>2?Mt.constant[2]:0,Mr=Mt.constant.length>3?Mt.constant[3]:0)):(Tr=et(Mt.buffer)?Ye.createStream(34962,Mt.buffer):Ye.getBuffer(Mt.buffer),Hr="type"in Mt?kt[Mt.type]:Tr.dtype,Cr=!!Mt.normalized,Er=0|Mt.size,Br=0|Mt.offset,Ir=0|Mt.stride,Pr=0|Mt.divisor),Nr=Ee.state,Ee.state=zr,Dr=Ee.x,Ee.x=Fr,Vr=Ee.y,Ee.y=Or,Lr=Ee.z,Ee.z=Wr,Rr=Ee.w,Ee.w=Mr,qr=Ee.buffer,Ee.buffer=Tr,Gr=Ee.size,Ee.size=Er,jr=Ee.normalized,Ee.normalized=Cr,Ur=Ee.type,Ee.type=Hr,Yr=Ee.offset,Ee.offset=Br,$r=Ee.stride,Ee.stride=Ir,Zr=Ee.divisor,Ee.divisor=Pr,Xr=l.call(this,Re,e,r),Tt.buffer=Xr,Qr=!1,Jr=1,Kr=0,ei=0,ti=0,ni=0,ri=null,ii=0,ai=!1,oi=5126,si=0,li=0,fi=0,et(Tt)?(Qr=!0,oi=(ri=Ye.createStream(34962,Tt)).dtype):(ri=Ye.getBuffer(Tt))?oi=ri.dtype:"constant"in Tt?(Jr=2,"number"==typeof Tt.constant?(Kr=Tt.constant,ei=ti=ni=0):(Kr=Tt.constant.length>0?Tt.constant[0]:0,ei=Tt.constant.length>1?Tt.constant[1]:0,ti=Tt.constant.length>2?Tt.constant[2]:0,ni=Tt.constant.length>3?Tt.constant[3]:0)):(ri=et(Tt.buffer)?Ye.createStream(34962,Tt.buffer):Ye.getBuffer(Tt.buffer),oi="type"in Tt?kt[Tt.type]:ri.dtype,ai=!!Tt.normalized,ii=0|Tt.size,si=0|Tt.offset,li=0|Tt.stride,fi=0|Tt.divisor),ci=Ce.state,Ce.state=Jr,ui=Ce.x,Ce.x=Kr,di=Ce.y,Ce.y=ei,hi=Ce.z,Ce.z=ti,pi=Ce.w,Ce.w=ni,bi=Ce.buffer,Ce.buffer=ri,mi=Ce.size,Ce.size=ii,gi=Ce.normalized,Ce.normalized=ai,vi=Ce.type,Ce.type=oi,_i=Ce.offset,Ce.offset=si,yi=Ce.stride,Ce.stride=li,wi=Ce.divisor,Ce.divisor=fi,xi=$e.vert,$e.vert=He,Ai=$e.frag,$e.frag=Be,Ge.dirty=!0,n(Re,e,r),qe.blend_enable=i,rt[0]=a,rt[1]=o,at[0]=s,at[1]=f,at[2]=u,at[3]=h,qe.cull_enable=b,qe.cull_face=g,qe.depth_enable=_,qe.depth_mask=y,x&&(t.cpuTime+=performance.now()-S),je.count=O,je.instances=E,je.primitive=H,Qe[le]=N,Qe[fe]=R,Qe[ce]=U,Qe[ue]=Pe,Qe[he]=De,Qe[pe]=Le,Qe[be]=Ze,Qe[me]=Je,Qe[ge]=tt,Qe[_e]=it,Qe[ye]=st,Qe[we]=ft,Qe[xe]=ut,Qe[Se]=ht,Qe[ke]=bt,Qe[ze]=gt,Qe[Fe]=_t,wt&&Ye.destroyStream(Ht),Oe.state=Lt,Oe.x=Rt,Oe.y=qt,Oe.z=Gt,Oe.w=jt,Oe.buffer=Ut,Oe.size=Yt,Oe.normalized=$t,Oe.type=Zt,Oe.offset=Xt,Oe.stride=Qt,Oe.divisor=Jt,en&&Ye.destroyStream(sn),We.state=pn,We.x=bn,We.y=mn,We.z=gn,We.w=vn,We.buffer=_n,We.size=yn,We.normalized=wn,We.type=xn,We.offset=An,We.stride=Sn,We.divisor=kn,Fn&&Ye.destroyStream(Cn),Me.state=Vn,Me.x=Ln,Me.y=Rn,Me.z=qn,Me.w=Gn,Me.buffer=jn,Me.size=Un,Me.normalized=Yn,Me.type=$n,Me.offset=Zn,Me.stride=Xn,Me.divisor=Qn,Kn&&Ye.destroyStream(ar),Te.state=dr,Te.x=hr,Te.y=pr,Te.z=br,Te.w=mr,Te.buffer=gr,Te.size=vr,Te.normalized=_r,Te.type=yr,Te.offset=wr,Te.stride=xr,Te.divisor=Ar,kr&&Ye.destroyStream(Tr),Ee.state=Nr,Ee.x=Dr,Ee.y=Vr,Ee.z=Lr,Ee.w=Rr,Ee.buffer=qr,Ee.size=Gr,Ee.normalized=jr,Ee.type=Ur,Ee.offset=Yr,Ee.stride=$r,Ee.divisor=Zr,Qr&&Ye.destroyStream(ri),Ce.state=ci,Ce.x=ui,Ce.y=di,Ce.z=hi,Ce.w=pi,Ce.buffer=bi,Ce.size=mi,Ce.normalized=gi,Ce.type=vi,Ce.offset=_i,Ce.stride=yi,Ce.divisor=wi,$e.vert=xi,$e.frag=Ai,Ge.dirty=!0},batch:function(e,n){var r,i,a,o,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,$e,Qe,rt,at,Et,Ht,Bt,It,Pt,Nt,Dt,Vt,Lt,Rt,qt,Gt,jt,Ut,Yt,$t,Zt,Xt,Qt,Jt,Kt,en,tn,nn,rn,an,on,sn,ln,fn,cn,un,dn,hn,pn,bn,mn,gn,vn,_n,yn,wn,xn,An,Sn,kn,zn,Fn,On,Wn,Mn,Tn,En,Cn,Hn,Bn,In,Pn,Nn,Dn,Vn,Ln,Rn,qn,Gn,jn,Un,Yn,$n,Zn,Xn,Qn,Jn,Kn,er,tr,nr,rr,ir,ar,or,sr,lr,fr,cr,ur,dr,hr,pr,br,mr,gr,vr,_r,yr,wr,xr,Ar,Sr,kr,zr,Fr,Or,Wr,Mr,Tr,Er,Cr,Hr,Br,Ir,Pr,Nr,Dr,Vr,Lr,Rr,qr,Gr,jr,Ur,Yr,$r,Zr,Xr,Qr,Jr;(Ke.angle_instanced_arrays,(r=Je.next)!==Je.cur&&(r?Le.bindFramebuffer(36160,r.framebuffer):Le.bindFramebuffer(36160,null),Je.cur=r),Ge.dirty)&&((J=qe.dither)!==Ge.dither&&(J?Le.enable(3024):Le.disable(3024),Ge.dither=J),K=tt[0],ee=tt[1],te=tt[2],ne=tt[3],K===nt[0]&&ee===nt[1]&&te===nt[2]&&ne===nt[3]||(Le.blendColor(K,ee,te,ne),nt[0]=K,nt[1]=ee,nt[2]=te,nt[3]=ne),(re=qe.depth_func)!==Ge.depth_func&&(Le.depthFunc(re),Ge.depth_func=re),ie=st[0],ae=st[1],ie===lt[0]&&ae===lt[1]||(Le.depthRange(ie,ae),lt[0]=ie,lt[1]=ae),oe=ft[0],se=ft[1],le=ft[2],fe=ft[3],oe===ct[0]&&se===ct[1]&&le===ct[2]&&fe===ct[3]||(Le.colorMask(oe,se,le,fe),ct[0]=oe,ct[1]=se,ct[2]=le,ct[3]=fe),(ce=qe.frontFace)!==Ge.frontFace&&(Le.frontFace(ce),Ge.frontFace=ce),(ue=qe.lineWidth)!==Ge.lineWidth&&(Le.lineWidth(ue),Ge.lineWidth=ue),(de=qe.polygonOffset_enable)!==Ge.polygonOffset_enable&&(de?Le.enable(32823):Le.disable(32823),Ge.polygonOffset_enable=de),he=ut[0],pe=ut[1],he===dt[0]&&pe===dt[1]||(Le.polygonOffset(he,pe),dt[0]=he,dt[1]=pe),(be=qe.sample_alpha)!==Ge.sample_alpha&&(be?Le.enable(32926):Le.disable(32926),Ge.sample_alpha=be),(me=qe.sample_enable)!==Ge.sample_enable&&(me?Le.enable(32928):Le.disable(32928),Ge.sample_enable=me),ge=ht[0],ve=ht[1],ge===pt[0]&&ve===pt[1]||(Le.sampleCoverage(ge,ve),pt[0]=ge,pt[1]=ve),(_e=qe.stencil_enable)!==Ge.stencil_enable&&(_e?Le.enable(2960):Le.disable(2960),Ge.stencil_enable=_e),(ye=qe.stencil_mask)!==Ge.stencil_mask&&(Le.stencilMask(ye),Ge.stencil_mask=ye),we=bt[0],xe=bt[1],Ae=bt[2],we===mt[0]&&xe===mt[1]&&Ae===mt[2]||(Le.stencilFunc(we,xe,Ae),mt[0]=we,mt[1]=xe,mt[2]=Ae),Se=gt[0],ke=gt[1],ze=gt[2],Fe=gt[3],Se===vt[0]&&ke===vt[1]&&ze===vt[2]&&Fe===vt[3]||(Le.stencilOpSeparate(Se,ke,ze,Fe),vt[0]=Se,vt[1]=ke,vt[2]=ze,vt[3]=Fe),Oe=_t[0],We=_t[1],Me=_t[2],Te=_t[3],Oe===yt[0]&&We===yt[1]&&Me===yt[2]&&Te===yt[3]||(Le.stencilOpSeparate(Oe,We,Me,Te),yt[0]=Oe,yt[1]=We,yt[2]=Me,yt[3]=Te),(Ee=qe.scissor_enable)!==Ge.scissor_enable&&(Ee?Le.enable(3089):Le.disable(3089),Ge.scissor_enable=Ee),Ce=wt[0],He=wt[1],Be=wt[2],$e=wt[3],Ce===xt[0]&&He===xt[1]&&Be===xt[2]&&$e===xt[3]||(Le.scissor(Ce,He,Be,$e),xt[0]=Ce,xt[1]=He,xt[2]=Be,xt[3]=$e),Qe=At[0],rt=At[1],at=At[2],Et=At[3],Qe===St[0]&&rt===St[1]&&at===St[2]&&Et===St[3]||(Le.viewport(Qe,rt,at,Et),St[0]=Qe,St[1]=rt,St[2]=at,St[3]=Et));Ie?Le.enable(3042):Le.disable(3042),Ge.blend_enable=Ie,Le.blendEquationSeparate(32774,32774),it[0]=32774,it[1]=32774,Le.blendFuncSeparate(770,771,1,771),ot[0]=770,ot[1]=771,ot[2]=1,ot[3]=771,Pe?Le.enable(2884):Le.disable(2884),Ge.cull_enable=Pe,Le.cullFace(Ne),Ge.cull_face=Ne,De?Le.enable(2929):Le.disable(2929),Ge.depth_enable=De,Le.depthMask(Ve),Ge.depth_mask=Ve,(i=Ge.profile)&&(a=performance.now(),t.count+=n),Le.useProgram(s.program),o=Ke.angle_instanced_arrays,Xe.setVAO(null),Ht=l.call(this,Re,Q,X),Tt.buffer=Ht,Bt=!1,It=1,Pt=0,Nt=0,Dt=0,Vt=0,Lt=null,Rt=0,qt=!1,Gt=5126,jt=0,Ut=0,Yt=0,et(Tt)?(Bt=!0,Gt=(Lt=Ye.createStream(34962,Tt)).dtype):(Lt=Ye.getBuffer(Tt))?Gt=Lt.dtype:"constant"in Tt?(It=2,"number"==typeof Tt.constant?(Pt=Tt.constant,Nt=Dt=Vt=0):(Pt=Tt.constant.length>0?Tt.constant[0]:0,Nt=Tt.constant.length>1?Tt.constant[1]:0,Dt=Tt.constant.length>2?Tt.constant[2]:0,Vt=Tt.constant.length>3?Tt.constant[3]:0)):(Lt=et(Tt.buffer)?Ye.createStream(34962,Tt.buffer):Ye.getBuffer(Tt.buffer),Gt="type"in Tt?kt[Tt.type]:Lt.dtype,qt=!!Tt.normalized,Rt=0|Tt.size,jt=0|Tt.offset,Ut=0|Tt.stride,Yt=0|Tt.divisor),$t=f.location,Zt=Ze[$t],1===It?(Zt.buffer||Le.enableVertexAttribArray($t),Xt=Rt||1,Zt.type===Gt&&Zt.size===Xt&&Zt.buffer===Lt&&Zt.normalized===qt&&Zt.offset===jt&&Zt.stride===Ut||(Le.bindBuffer(34962,Lt.buffer),Le.vertexAttribPointer($t,Xt,Gt,qt,Ut,jt),Zt.type=Gt,Zt.size=Xt,Zt.buffer=Lt,Zt.normalized=qt,Zt.offset=jt,Zt.stride=Ut),Zt.divisor!==Yt&&(o.vertexAttribDivisorANGLE($t,Yt),Zt.divisor=Yt)):(Zt.buffer&&(Le.disableVertexAttribArray($t),Zt.buffer=null),Zt.x===Pt&&Zt.y===Nt&&Zt.z===Dt&&Zt.w===Vt||(Le.vertexAttrib4f($t,Pt,Nt,Dt,Vt),Zt.x=Pt,Zt.y=Nt,Zt.z=Dt,Zt.w=Vt)),Qt=c.call(this,Re,Q,X),Wt.buffer=Qt,Jt=!1,Kt=1,en=0,tn=0,nn=0,rn=0,an=null,on=0,sn=!1,ln=5126,fn=0,cn=0,un=0,et(Wt)?(Jt=!0,ln=(an=Ye.createStream(34962,Wt)).dtype):(an=Ye.getBuffer(Wt))?ln=an.dtype:"constant"in Wt?(Kt=2,"number"==typeof Wt.constant?(en=Wt.constant,tn=nn=rn=0):(en=Wt.constant.length>0?Wt.constant[0]:0,tn=Wt.constant.length>1?Wt.constant[1]:0,nn=Wt.constant.length>2?Wt.constant[2]:0,rn=Wt.constant.length>3?Wt.constant[3]:0)):(an=et(Wt.buffer)?Ye.createStream(34962,Wt.buffer):Ye.getBuffer(Wt.buffer),ln="type"in Wt?kt[Wt.type]:an.dtype,sn=!!Wt.normalized,on=0|Wt.size,fn=0|Wt.offset,cn=0|Wt.stride,un=0|Wt.divisor),dn=u.location,hn=Ze[dn],1===Kt?(hn.buffer||Le.enableVertexAttribArray(dn),pn=on||4,hn.type===ln&&hn.size===pn&&hn.buffer===an&&hn.normalized===sn&&hn.offset===fn&&hn.stride===cn||(Le.bindBuffer(34962,an.buffer),Le.vertexAttribPointer(dn,pn,ln,sn,cn,fn),hn.type=ln,hn.size=pn,hn.buffer=an,hn.normalized=sn,hn.offset=fn,hn.stride=cn),hn.divisor!==un&&(o.vertexAttribDivisorANGLE(dn,un),hn.divisor=un)):(hn.buffer&&(Le.disableVertexAttribArray(dn),hn.buffer=null),hn.x===en&&hn.y===tn&&hn.z===nn&&hn.w===rn||(Le.vertexAttrib4f(dn,en,tn,nn,rn),hn.x=en,hn.y=tn,hn.z=nn,hn.w=rn)),bn=d.call(this,Re,Q,X),Ft.buffer=bn,mn=!1,gn=1,vn=0,_n=0,yn=0,wn=0,xn=null,An=0,Sn=!1,kn=5126,zn=0,Fn=0,On=0,et(Ft)?(mn=!0,kn=(xn=Ye.createStream(34962,Ft)).dtype):(xn=Ye.getBuffer(Ft))?kn=xn.dtype:"constant"in Ft?(gn=2,"number"==typeof Ft.constant?(vn=Ft.constant,_n=yn=wn=0):(vn=Ft.constant.length>0?Ft.constant[0]:0,_n=Ft.constant.length>1?Ft.constant[1]:0,yn=Ft.constant.length>2?Ft.constant[2]:0,wn=Ft.constant.length>3?Ft.constant[3]:0)):(xn=et(Ft.buffer)?Ye.createStream(34962,Ft.buffer):Ye.getBuffer(Ft.buffer),kn="type"in Ft?kt[Ft.type]:xn.dtype,Sn=!!Ft.normalized,An=0|Ft.size,zn=0|Ft.offset,Fn=0|Ft.stride,On=0|Ft.divisor),Wn=h.location,Mn=Ze[Wn],1===gn?(Mn.buffer||Le.enableVertexAttribArray(Wn),Tn=An||2,Mn.type===kn&&Mn.size===Tn&&Mn.buffer===xn&&Mn.normalized===Sn&&Mn.offset===zn&&Mn.stride===Fn||(Le.bindBuffer(34962,xn.buffer),Le.vertexAttribPointer(Wn,Tn,kn,Sn,Fn,zn),Mn.type=kn,Mn.size=Tn,Mn.buffer=xn,Mn.normalized=Sn,Mn.offset=zn,Mn.stride=Fn),Mn.divisor!==On&&(o.vertexAttribDivisorANGLE(Wn,On),Mn.divisor=On)):(Mn.buffer&&(Le.disableVertexAttribArray(Wn),Mn.buffer=null),Mn.x===vn&&Mn.y===_n&&Mn.z===yn&&Mn.w===wn||(Le.vertexAttrib4f(Wn,vn,_n,yn,wn),Mn.x=vn,Mn.y=_n,Mn.z=yn,Mn.w=wn)),En=p.call(this,Re,Q,X),Ot.buffer=En,Cn=!1,Hn=1,Bn=0,In=0,Pn=0,Nn=0,Dn=null,Vn=0,Ln=!1,Rn=5126,qn=0,Gn=0,jn=0,et(Ot)?(Cn=!0,Rn=(Dn=Ye.createStream(34962,Ot)).dtype):(Dn=Ye.getBuffer(Ot))?Rn=Dn.dtype:"constant"in Ot?(Hn=2,"number"==typeof Ot.constant?(Bn=Ot.constant,In=Pn=Nn=0):(Bn=Ot.constant.length>0?Ot.constant[0]:0,In=Ot.constant.length>1?Ot.constant[1]:0,Pn=Ot.constant.length>2?Ot.constant[2]:0,Nn=Ot.constant.length>3?Ot.constant[3]:0)):(Dn=et(Ot.buffer)?Ye.createStream(34962,Ot.buffer):Ye.getBuffer(Ot.buffer),Rn="type"in Ot?kt[Ot.type]:Dn.dtype,Ln=!!Ot.normalized,Vn=0|Ot.size,qn=0|Ot.offset,Gn=0|Ot.stride,jn=0|Ot.divisor),Un=b.location,Yn=Ze[Un],1===Hn?(Yn.buffer||Le.enableVertexAttribArray(Un),$n=Vn||2,Yn.type===Rn&&Yn.size===$n&&Yn.buffer===Dn&&Yn.normalized===Ln&&Yn.offset===qn&&Yn.stride===Gn||(Le.bindBuffer(34962,Dn.buffer),Le.vertexAttribPointer(Un,$n,Rn,Ln,Gn,qn),Yn.type=Rn,Yn.size=$n,Yn.buffer=Dn,Yn.normalized=Ln,Yn.offset=qn,Yn.stride=Gn),Yn.divisor!==jn&&(o.vertexAttribDivisorANGLE(Un,jn),Yn.divisor=jn)):(Yn.buffer&&(Le.disableVertexAttribArray(Un),Yn.buffer=null),Yn.x===Bn&&Yn.y===In&&Yn.z===Pn&&Yn.w===Nn||(Le.vertexAttrib4f(Un,Bn,In,Pn,Nn),Yn.x=Bn,Yn.y=In,Yn.z=Pn,Yn.w=Nn)),Zn=m.call(this,Re,Q,X),zt.buffer=Zn,Xn=!1,Qn=1,Jn=0,Kn=0,er=0,tr=0,nr=null,rr=0,ir=!1,ar=5126,or=0,sr=0,lr=0,et(zt)?(Xn=!0,ar=(nr=Ye.createStream(34962,zt)).dtype):(nr=Ye.getBuffer(zt))?ar=nr.dtype:"constant"in zt?(Qn=2,"number"==typeof zt.constant?(Jn=zt.constant,Kn=er=tr=0):(Jn=zt.constant.length>0?zt.constant[0]:0,Kn=zt.constant.length>1?zt.constant[1]:0,er=zt.constant.length>2?zt.constant[2]:0,tr=zt.constant.length>3?zt.constant[3]:0)):(nr=et(zt.buffer)?Ye.createStream(34962,zt.buffer):Ye.getBuffer(zt.buffer),ar="type"in zt?kt[zt.type]:nr.dtype,ir=!!zt.normalized,rr=0|zt.size,or=0|zt.offset,sr=0|zt.stride,lr=0|zt.divisor),fr=g.location,cr=Ze[fr],1===Qn?(cr.buffer||Le.enableVertexAttribArray(fr),ur=rr||2,cr.type===ar&&cr.size===ur&&cr.buffer===nr&&cr.normalized===ir&&cr.offset===or&&cr.stride===sr||(Le.bindBuffer(34962,nr.buffer),Le.vertexAttribPointer(fr,ur,ar,ir,sr,or),cr.type=ar,cr.size=ur,cr.buffer=nr,cr.normalized=ir,cr.offset=or,cr.stride=sr),cr.divisor!==lr&&(o.vertexAttribDivisorANGLE(fr,lr),cr.divisor=lr)):(cr.buffer&&(Le.disableVertexAttribArray(fr),cr.buffer=null),cr.x===Jn&&cr.y===Kn&&cr.z===er&&cr.w===tr||(Le.vertexAttrib4f(fr,Jn,Kn,er,tr),cr.x=Jn,cr.y=Kn,cr.z=er,cr.w=tr)),dr=v.call(this,Re,Q,X),Mt.buffer=dr,hr=!1,pr=1,br=0,mr=0,gr=0,vr=0,_r=null,yr=0,wr=!1,xr=5126,Ar=0,Sr=0,kr=0,et(Mt)?(hr=!0,xr=(_r=Ye.createStream(34962,Mt)).dtype):(_r=Ye.getBuffer(Mt))?xr=_r.dtype:"constant"in Mt?(pr=2,"number"==typeof Mt.constant?(br=Mt.constant,mr=gr=vr=0):(br=Mt.constant.length>0?Mt.constant[0]:0,mr=Mt.constant.length>1?Mt.constant[1]:0,gr=Mt.constant.length>2?Mt.constant[2]:0,vr=Mt.constant.length>3?Mt.constant[3]:0)):(_r=et(Mt.buffer)?Ye.createStream(34962,Mt.buffer):Ye.getBuffer(Mt.buffer),xr="type"in Mt?kt[Mt.type]:_r.dtype,wr=!!Mt.normalized,yr=0|Mt.size,Ar=0|Mt.offset,Sr=0|Mt.stride,kr=0|Mt.divisor),zr=_.location,Fr=Ze[zr],1===pr?(Fr.buffer||Le.enableVertexAttribArray(zr),Or=yr||1,Fr.type===xr&&Fr.size===Or&&Fr.buffer===_r&&Fr.normalized===wr&&Fr.offset===Ar&&Fr.stride===Sr||(Le.bindBuffer(34962,_r.buffer),Le.vertexAttribPointer(zr,Or,xr,wr,Sr,Ar),Fr.type=xr,Fr.size=Or,Fr.buffer=_r,Fr.normalized=wr,Fr.offset=Ar,Fr.stride=Sr),Fr.divisor!==kr&&(o.vertexAttribDivisorANGLE(zr,kr),Fr.divisor=kr)):(Fr.buffer&&(Le.disableVertexAttribArray(zr),Fr.buffer=null),Fr.x===br&&Fr.y===mr&&Fr.z===gr&&Fr.w===vr||(Le.vertexAttrib4f(zr,br,mr,gr,vr),Fr.x=br,Fr.y=mr,Fr.z=gr,Fr.w=vr)),Wr=w.call(this,Re,Q,X),Le.uniform1f(y.location,Wr),Mr=A.call(this,Re,Q,X),Le.uniform1f(x.location,Mr),Tr=k.call(this,Re,Q,X),Le.uniform1f(S.location,Tr),Er=F.call(this,Re,Q,X),Le.uniform1f(z.location,Er),Cr=W.call(this,Re,Q,X),Le.uniform1f(O.location,Cr),Br=(Hr=T.call(this,Re,Q,X))[0],Ir=Hr[1],Le.uniform2f(M.location,Br,Ir),Pr=C.call(this,Re,Q,X),Le.uniform1f(E.location,Pr),(Nr=B.call(this,Re,Q,X))&&"framebuffer"===Nr._reglType&&(Nr=Nr.color[0]),Dr=Nr._texture,Le.uniform1i(H.location,Dr.bind()),Vr=P.call(this,Re,Q,X),Le.uniform1f(I.location,Vr),(Lr=D.call(this,Re,Q,X))&&"framebuffer"===Lr._reglType&&(Lr=Lr.color[0]),Rr=Lr._texture,Le.uniform1i(N.location,Rr.bind()),Gr=(qr=L.call(this,Re,Q,X))[0],jr=qr[1],Le.uniform2f(V.location,Gr,jr),Ur=q.call(this,Re,Q,X),Le.uniform1f(R.location,Ur),Yr=j.call(this,Re,Q,X),Le.uniformMatrix3fv(G.location,!1,Array.isArray(Yr)||Yr instanceof Float32Array?Yr:(Ct[0]=Yr[0],Ct[1]=Yr[1],Ct[2]=Yr[2],Ct[3]=Yr[3],Ct[4]=Yr[4],Ct[5]=Yr[5],Ct[6]=Yr[6],Ct[7]=Yr[7],Ct[8]=Yr[8],Ct)),$r=Y.call(this,Re,Q,X),Le.uniform1f(U.location,$r),((Zr=je.elements)||Xe.currentVAO&&(Zr=Ue.getElements(Xe.currentVAO.elements)))&&Le.bindBuffer(34963,Zr.buffer.buffer),Xr=je.offset,Qr=$.call(this,Re,Q,X),Jr=Z.call(this,Re,Q,X);for(X=0;X<n;++X)Q=e[X],Qr&&(Jr>0?Zr?o.drawElementsInstancedANGLE(5,Qr,Zr.type,Xr<<(Zr.type-5121>>1),Jr):o.drawArraysInstancedANGLE(5,Xr,Qr,Jr):Jr<0&&(Zr?Le.drawElements(5,Qr,Zr.type,Xr<<(Zr.type-5121>>1)):Le.drawArrays(5,Xr,Qr)));Bt&&Ye.destroyStream(Lt),Jt&&Ye.destroyStream(an),mn&&Ye.destroyStream(xn),Cn&&Ye.destroyStream(Dn),Xn&&Ye.destroyStream(nr),hr&&Ye.destroyStream(_r),Dr.unbind(),Rr.unbind(),Ge.dirty=!0,Xe.setVAO(null),i&&(t.cpuTime+=performance.now()-a)}}},"2f7c7f7dc19b56c5cba8adc85f521391fae94c0383e508841812535aea6244ef":function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z){var F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le;return F=e.gl,O=e.context,e.strings,W=e.next,M=e.current,T=e.draw,E=e.elements,e.buffer,C=e.shader,H=e.attributes,B=e.vao,I=e.uniforms,P=e.framebuffer,N=e.extensions,e.timer,e.isBufferArgs,D=W.blend_color,V=M.blend_color,L=W.blend_equation,R=M.blend_equation,q=W.blend_func,G=M.blend_func,j=W.depth_range,U=M.depth_range,Y=W.colorMask,$=M.colorMask,Z=W.polygonOffset_offset,X=M.polygonOffset_offset,Q=W.sample_coverage,J=M.sample_coverage,K=W.stencil_func,ee=M.stencil_func,te=W.stencil_opFront,ne=M.stencil_opFront,re=W.stencil_opBack,ie=M.stencil_opBack,ae=W.scissor_box,oe=M.scissor_box,se=W.viewport,le=M.viewport,{draw:function(e){var p,b,m,g,v,_,y,w,x,A,S,k,z,C,I,ae,se,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st;(N.angle_instanced_arrays,p=n.call(this,O,e,0),b=P.getFramebuffer(p),m=P.next,P.next=b,g=O.framebufferWidth,O.framebufferWidth=b?b.width:O.drawingBufferWidth,v=O.framebufferHeight,O.framebufferHeight=b?b.height:O.drawingBufferHeight,b!==P.cur&&(b?F.bindFramebuffer(36160,b.framebuffer):F.bindFramebuffer(36160,null),P.cur=b),M.dirty)&&((me=W.dither)!==M.dither&&(me?F.enable(3024):F.disable(3024),M.dither=me),(ge=W.blend_enable)!==M.blend_enable&&(ge?F.enable(3042):F.disable(3042),M.blend_enable=ge),ve=D[0],_e=D[1],ye=D[2],we=D[3],ve===V[0]&&_e===V[1]&&ye===V[2]&&we===V[3]||(F.blendColor(ve,_e,ye,we),V[0]=ve,V[1]=_e,V[2]=ye,V[3]=we),xe=L[0],Ae=L[1],xe===R[0]&&Ae===R[1]||(F.blendEquationSeparate(xe,Ae),R[0]=xe,R[1]=Ae),Se=q[0],ke=q[1],ze=q[2],Fe=q[3],Se===G[0]&&ke===G[1]&&ze===G[2]&&Fe===G[3]||(F.blendFuncSeparate(Se,ke,ze,Fe),G[0]=Se,G[1]=ke,G[2]=ze,G[3]=Fe),(Oe=W.depth_enable)!==M.depth_enable&&(Oe?F.enable(2929):F.disable(2929),M.depth_enable=Oe),(We=W.depth_func)!==M.depth_func&&(F.depthFunc(We),M.depth_func=We),Me=j[0],Te=j[1],Me===U[0]&&Te===U[1]||(F.depthRange(Me,Te),U[0]=Me,U[1]=Te),(Ee=W.depth_mask)!==M.depth_mask&&(F.depthMask(Ee),M.depth_mask=Ee),Ce=Y[0],He=Y[1],Be=Y[2],Ie=Y[3],Ce===$[0]&&He===$[1]&&Be===$[2]&&Ie===$[3]||(F.colorMask(Ce,He,Be,Ie),$[0]=Ce,$[1]=He,$[2]=Be,$[3]=Ie),(Pe=W.cull_enable)!==M.cull_enable&&(Pe?F.enable(2884):F.disable(2884),M.cull_enable=Pe),(Ne=W.cull_face)!==M.cull_face&&(F.cullFace(Ne),M.cull_face=Ne),(De=W.frontFace)!==M.frontFace&&(F.frontFace(De),M.frontFace=De),(Ve=W.lineWidth)!==M.lineWidth&&(F.lineWidth(Ve),M.lineWidth=Ve),(Le=W.polygonOffset_enable)!==M.polygonOffset_enable&&(Le?F.enable(32823):F.disable(32823),M.polygonOffset_enable=Le),Re=Z[0],qe=Z[1],Re===X[0]&&qe===X[1]||(F.polygonOffset(Re,qe),X[0]=Re,X[1]=qe),(Ge=W.sample_alpha)!==M.sample_alpha&&(Ge?F.enable(32926):F.disable(32926),M.sample_alpha=Ge),(je=W.sample_enable)!==M.sample_enable&&(je?F.enable(32928):F.disable(32928),M.sample_enable=je),Ue=Q[0],Ye=Q[1],Ue===J[0]&&Ye===J[1]||(F.sampleCoverage(Ue,Ye),J[0]=Ue,J[1]=Ye),($e=W.stencil_enable)!==M.stencil_enable&&($e?F.enable(2960):F.disable(2960),M.stencil_enable=$e),(Ze=W.stencil_mask)!==M.stencil_mask&&(F.stencilMask(Ze),M.stencil_mask=Ze),Xe=K[0],Qe=K[1],Je=K[2],Xe===ee[0]&&Qe===ee[1]&&Je===ee[2]||(F.stencilFunc(Xe,Qe,Je),ee[0]=Xe,ee[1]=Qe,ee[2]=Je),Ke=te[0],et=te[1],tt=te[2],nt=te[3],Ke===ne[0]&&et===ne[1]&&tt===ne[2]&&nt===ne[3]||(F.stencilOpSeparate(Ke,et,tt,nt),ne[0]=Ke,ne[1]=et,ne[2]=tt,ne[3]=nt),rt=re[0],it=re[1],at=re[2],ot=re[3],rt===ie[0]&&it===ie[1]&&at===ie[2]&&ot===ie[3]||(F.stencilOpSeparate(rt,it,at,ot),ie[0]=rt,ie[1]=it,ie[2]=at,ie[3]=ot),(st=W.scissor_enable)!==M.scissor_enable&&(st?F.enable(3089):F.disable(3089),M.scissor_enable=st));_=O.framebufferWidth,y=O.framebufferHeight,w=O.viewportWidth,O.viewportWidth=_,x=O.viewportHeight,O.viewportHeight=y,F.viewport(0,0,_,y),le[0]=0,le[1]=0,le[2]=_,le[3]=y,A=O.framebufferWidth,S=O.framebufferHeight,F.scissor(0,0,A,S),oe[0]=0,oe[1]=0,oe[2]=A,oe[3]=S,(k=M.profile)&&(z=performance.now(),t.count++),F.useProgram(r.program),C=N.angle_instanced_arrays,B.setVAO(null),I=a.location,(ae=H[I]).buffer||F.enableVertexAttribArray(I),5126===ae.type&&2===ae.size&&ae.buffer===i&&!1===ae.normalized&&0===ae.offset&&0===ae.stride||(F.bindBuffer(34962,i.buffer),F.vertexAttribPointer(I,2,5126,!1,0,0),ae.type=5126,ae.size=2,ae.buffer=i,ae.normalized=!1,ae.offset=0,ae.stride=0),0!==ae.divisor&&(C.vertexAttribDivisorANGLE(I,0),ae.divisor=0),se=s.call(this,O,e,0),F.uniform1f(o.location,se),fe=f.call(this,O,e,0),F.uniform1f(l.location,fe),(ce=u.call(this,O,e,0))&&"framebuffer"===ce._reglType&&(ce=ce.color[0]),ue=ce._texture,F.uniform1i(c.location,ue.bind()),de=h.call(this,O,e,0),F.uniform1f(d.location,de),((he=T.elements)||B.currentVAO&&(he=E.getElements(B.currentVAO.elements)))&&F.bindBuffer(34963,he.buffer.buffer),pe=T.offset,(be=T.instances)>0?he?C.drawElementsInstancedANGLE(5,4,he.type,pe<<(he.type-5121>>1),be):C.drawArraysInstancedANGLE(5,pe,4,be):be<0&&(he?F.drawElements(5,4,he.type,pe<<(he.type-5121>>1)):F.drawArrays(5,pe,4)),M.dirty=!0,B.setVAO(null),P.next=m,O.framebufferWidth=g,O.framebufferHeight=v,O.viewportWidth=w,O.viewportHeight=x,k&&(t.cpuTime+=performance.now()-z),ue.unbind()},scope:function(e,r,a){var o,l,c,d,F,W,E,H,B,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,oe,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we;o=n.call(this,O,e,a),l=P.getFramebuffer(o),c=P.next,P.next=l,d=O.framebufferWidth,O.framebufferWidth=l?l.width:O.drawingBufferWidth,F=O.framebufferHeight,O.framebufferHeight=l?l.height:O.drawingBufferHeight,W=O.framebufferWidth,E=O.framebufferHeight,H=O.viewportWidth,O.viewportWidth=W,B=O.viewportHeight,O.viewportHeight=E,N=se[0],se[0]=p,D=se[1],se[1]=b,V=se[2],se[2]=W,L=se[3],se[3]=E,R=O.framebufferWidth,q=O.framebufferHeight,G=ae[0],ae[0]=m,j=ae[1],ae[1]=g,U=ae[2],ae[2]=R,Y=ae[3],ae[3]=q,($=M.profile)&&(Z=performance.now(),t.count++),X=T.count,T.count=v,Q=T.primitive,T.primitive=_,J=u.call(this,O,e,a),K=I[y],I[y]=J,ee=f.call(this,O,e,a),te=I[w],I[w]=ee,ne=h.call(this,O,e,a),re=I[x],I[x]=ne,ie=s.call(this,O,e,a),oe=I[A],I[A]=ie,le=S.state,S.state=1,fe=S.x,S.x=0,ce=S.y,S.y=0,ue=S.z,S.z=0,de=S.w,S.w=0,he=S.buffer,S.buffer=i,pe=S.size,S.size=2,be=S.normalized,S.normalized=!1,me=S.type,S.type=5126,ge=S.offset,S.offset=0,ve=S.stride,S.stride=0,_e=S.divisor,S.divisor=0,ye=C.vert,C.vert=k,we=C.frag,C.frag=z,M.dirty=!0,r(O,e,a),P.next=c,O.framebufferWidth=d,O.framebufferHeight=F,O.viewportWidth=H,O.viewportHeight=B,se[0]=N,se[1]=D,se[2]=V,se[3]=L,ae[0]=G,ae[1]=j,ae[2]=U,ae[3]=Y,$&&(t.cpuTime+=performance.now()-Z),T.count=X,T.primitive=Q,I[y]=K,I[w]=te,I[x]=re,I[A]=oe,S.state=le,S.x=fe,S.y=ce,S.z=ue,S.w=de,S.buffer=he,S.size=pe,S.normalized=be,S.type=me,S.offset=ge,S.stride=ve,S.divisor=_e,C.vert=ye,C.frag=we,M.dirty=!0},batch:function(e,p){var b,m,g,v,_,y,w,x,A,S,k,z,C,I,ae,se,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft,ct;(N.angle_instanced_arrays,b=n.call(this,O,e,0),m=P.getFramebuffer(b),g=P.next,P.next=m,v=O.framebufferWidth,O.framebufferWidth=m?m.width:O.drawingBufferWidth,_=O.framebufferHeight,O.framebufferHeight=m?m.height:O.drawingBufferHeight,m!==P.cur&&(m?F.bindFramebuffer(36160,m.framebuffer):F.bindFramebuffer(36160,null),P.cur=m),M.dirty)&&((fe=W.dither)!==M.dither&&(fe?F.enable(3024):F.disable(3024),M.dither=fe),(ce=W.blend_enable)!==M.blend_enable&&(ce?F.enable(3042):F.disable(3042),M.blend_enable=ce),ue=D[0],de=D[1],he=D[2],pe=D[3],ue===V[0]&&de===V[1]&&he===V[2]&&pe===V[3]||(F.blendColor(ue,de,he,pe),V[0]=ue,V[1]=de,V[2]=he,V[3]=pe),be=L[0],me=L[1],be===R[0]&&me===R[1]||(F.blendEquationSeparate(be,me),R[0]=be,R[1]=me),ge=q[0],ve=q[1],_e=q[2],ye=q[3],ge===G[0]&&ve===G[1]&&_e===G[2]&&ye===G[3]||(F.blendFuncSeparate(ge,ve,_e,ye),G[0]=ge,G[1]=ve,G[2]=_e,G[3]=ye),(we=W.depth_enable)!==M.depth_enable&&(we?F.enable(2929):F.disable(2929),M.depth_enable=we),(xe=W.depth_func)!==M.depth_func&&(F.depthFunc(xe),M.depth_func=xe),Ae=j[0],Se=j[1],Ae===U[0]&&Se===U[1]||(F.depthRange(Ae,Se),U[0]=Ae,U[1]=Se),(ke=W.depth_mask)!==M.depth_mask&&(F.depthMask(ke),M.depth_mask=ke),ze=Y[0],Fe=Y[1],Oe=Y[2],We=Y[3],ze===$[0]&&Fe===$[1]&&Oe===$[2]&&We===$[3]||(F.colorMask(ze,Fe,Oe,We),$[0]=ze,$[1]=Fe,$[2]=Oe,$[3]=We),(Me=W.cull_enable)!==M.cull_enable&&(Me?F.enable(2884):F.disable(2884),M.cull_enable=Me),(Te=W.cull_face)!==M.cull_face&&(F.cullFace(Te),M.cull_face=Te),(Ee=W.frontFace)!==M.frontFace&&(F.frontFace(Ee),M.frontFace=Ee),(Ce=W.lineWidth)!==M.lineWidth&&(F.lineWidth(Ce),M.lineWidth=Ce),(He=W.polygonOffset_enable)!==M.polygonOffset_enable&&(He?F.enable(32823):F.disable(32823),M.polygonOffset_enable=He),Be=Z[0],Ie=Z[1],Be===X[0]&&Ie===X[1]||(F.polygonOffset(Be,Ie),X[0]=Be,X[1]=Ie),(Pe=W.sample_alpha)!==M.sample_alpha&&(Pe?F.enable(32926):F.disable(32926),M.sample_alpha=Pe),(Ne=W.sample_enable)!==M.sample_enable&&(Ne?F.enable(32928):F.disable(32928),M.sample_enable=Ne),De=Q[0],Ve=Q[1],De===J[0]&&Ve===J[1]||(F.sampleCoverage(De,Ve),J[0]=De,J[1]=Ve),(Le=W.stencil_enable)!==M.stencil_enable&&(Le?F.enable(2960):F.disable(2960),M.stencil_enable=Le),(Re=W.stencil_mask)!==M.stencil_mask&&(F.stencilMask(Re),M.stencil_mask=Re),qe=K[0],Ge=K[1],je=K[2],qe===ee[0]&&Ge===ee[1]&&je===ee[2]||(F.stencilFunc(qe,Ge,je),ee[0]=qe,ee[1]=Ge,ee[2]=je),Ue=te[0],Ye=te[1],$e=te[2],Ze=te[3],Ue===ne[0]&&Ye===ne[1]&&$e===ne[2]&&Ze===ne[3]||(F.stencilOpSeparate(Ue,Ye,$e,Ze),ne[0]=Ue,ne[1]=Ye,ne[2]=$e,ne[3]=Ze),Xe=re[0],Qe=re[1],Je=re[2],Ke=re[3],Xe===ie[0]&&Qe===ie[1]&&Je===ie[2]&&Ke===ie[3]||(F.stencilOpSeparate(Xe,Qe,Je,Ke),ie[0]=Xe,ie[1]=Qe,ie[2]=Je,ie[3]=Ke),(et=W.scissor_enable)!==M.scissor_enable&&(et?F.enable(3089):F.disable(3089),M.scissor_enable=et));for(y=O.framebufferWidth,w=O.framebufferHeight,x=O.viewportWidth,O.viewportWidth=y,A=O.viewportHeight,O.viewportHeight=w,F.viewport(0,0,y,w),le[0]=0,le[1]=0,le[2]=y,le[3]=w,S=O.framebufferWidth,k=O.framebufferHeight,F.scissor(0,0,S,k),oe[0]=0,oe[1]=0,oe[2]=S,oe[3]=k,(z=M.profile)&&(C=performance.now(),t.count+=p),F.useProgram(r.program),I=N.angle_instanced_arrays,B.setVAO(null),tt=a.location,(nt=H[tt]).buffer||F.enableVertexAttribArray(tt),2,5126===nt.type&&2===nt.size&&nt.buffer===i&&!1===nt.normalized&&0===nt.offset&&0===nt.stride||(F.bindBuffer(34962,i.buffer),F.vertexAttribPointer(tt,2,5126,!1,0,0),nt.type=5126,nt.size=2,nt.buffer=i,nt.normalized=!1,nt.offset=0,nt.stride=0),0!==nt.divisor&&(I.vertexAttribDivisorANGLE(tt,0),nt.divisor=0),rt=s.call(this,O,se,ae),F.uniform1f(o.location,rt),it=f.call(this,O,se,ae),F.uniform1f(l.location,it),(at=u.call(this,O,se,ae))&&"framebuffer"===at._reglType&&(at=at.color[0]),ot=at._texture,F.uniform1i(c.location,ot.bind()),st=h.call(this,O,se,ae),F.uniform1f(d.location,st),((lt=T.elements)||B.currentVAO&&(lt=E.getElements(B.currentVAO.elements)))&&F.bindBuffer(34963,lt.buffer.buffer),ft=T.offset,ct=T.instances,ae=0;ae<p;++ae)se=e[ae],ct>0?lt?I.drawElementsInstancedANGLE(5,4,lt.type,ft<<(lt.type-5121>>1),ct):I.drawArraysInstancedANGLE(5,ft,4,ct):ct<0&&(lt?F.drawElements(5,4,lt.type,ft<<(lt.type-5121>>1)):F.drawArrays(5,ft,4));ot.unbind(),M.dirty=!0,B.setVAO(null),P.next=g,O.framebufferWidth=v,O.framebufferHeight=_,O.viewportWidth=x,O.viewportHeight=A,z&&(t.cpuTime+=performance.now()-C)}}},"9d21b165a30f9f6f75398bdcb7c7a26023eb7f6897f345551a241761b2807eea":function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I){var P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e;return P=e.gl,N=e.context,D=e.strings,V=e.next,L=e.current,R=e.draw,e.elements,e.buffer,q=e.shader,e.attributes,G=e.vao,j=e.uniforms,U=e.framebuffer,Y=e.extensions,e.timer,e.isBufferArgs,$=V.blend_color,Z=L.blend_color,X=V.blend_equation,Q=L.blend_equation,J=V.blend_func,K=L.blend_func,ee=V.depth_range,te=L.depth_range,ne=V.colorMask,re=L.colorMask,ie=V.polygonOffset_offset,ae=L.polygonOffset_offset,oe=V.sample_coverage,se=L.sample_coverage,le=V.stencil_func,fe=L.stencil_func,ce=V.stencil_opFront,ue=L.stencil_opFront,de=V.stencil_opBack,he=L.stencil_opBack,pe=V.scissor_box,be=L.scissor_box,me=V.viewport,ge=L.viewport,ve={},_e={},{draw:function(e){var a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,R,j,pe,me,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue;(Y.angle_instanced_arrays,a=n.call(this,N,e,0),o=U.getFramebuffer(a),s=U.next,U.next=o,l=N.framebufferWidth,N.framebufferWidth=o?o.width:N.drawingBufferWidth,f=N.framebufferHeight,N.framebufferHeight=o?o.height:N.drawingBufferHeight,o!==U.cur&&(o?P.bindFramebuffer(36160,o.framebuffer):P.bindFramebuffer(36160,null),U.cur=o),L.dirty)&&((A=V.dither)!==L.dither&&(A?P.enable(3024):P.disable(3024),L.dither=A),(S=V.blend_enable)!==L.blend_enable&&(S?P.enable(3042):P.disable(3042),L.blend_enable=S),k=$[0],z=$[1],F=$[2],O=$[3],k===Z[0]&&z===Z[1]&&F===Z[2]&&O===Z[3]||(P.blendColor(k,z,F,O),Z[0]=k,Z[1]=z,Z[2]=F,Z[3]=O),W=X[0],M=X[1],W===Q[0]&&M===Q[1]||(P.blendEquationSeparate(W,M),Q[0]=W,Q[1]=M),T=J[0],E=J[1],C=J[2],H=J[3],T===K[0]&&E===K[1]&&C===K[2]&&H===K[3]||(P.blendFuncSeparate(T,E,C,H),K[0]=T,K[1]=E,K[2]=C,K[3]=H),(B=V.depth_enable)!==L.depth_enable&&(B?P.enable(2929):P.disable(2929),L.depth_enable=B),(I=V.depth_func)!==L.depth_func&&(P.depthFunc(I),L.depth_func=I),R=ee[0],j=ee[1],R===te[0]&&j===te[1]||(P.depthRange(R,j),te[0]=R,te[1]=j),(pe=V.depth_mask)!==L.depth_mask&&(P.depthMask(pe),L.depth_mask=pe),me=ne[0],_e=ne[1],ye=ne[2],we=ne[3],me===re[0]&&_e===re[1]&&ye===re[2]&&we===re[3]||(P.colorMask(me,_e,ye,we),re[0]=me,re[1]=_e,re[2]=ye,re[3]=we),(xe=V.cull_enable)!==L.cull_enable&&(xe?P.enable(2884):P.disable(2884),L.cull_enable=xe),(Ae=V.cull_face)!==L.cull_face&&(P.cullFace(Ae),L.cull_face=Ae),(Se=V.frontFace)!==L.frontFace&&(P.frontFace(Se),L.frontFace=Se),(ke=V.lineWidth)!==L.lineWidth&&(P.lineWidth(ke),L.lineWidth=ke),(ze=V.polygonOffset_enable)!==L.polygonOffset_enable&&(ze?P.enable(32823):P.disable(32823),L.polygonOffset_enable=ze),Fe=ie[0],Oe=ie[1],Fe===ae[0]&&Oe===ae[1]||(P.polygonOffset(Fe,Oe),ae[0]=Fe,ae[1]=Oe),(We=V.sample_alpha)!==L.sample_alpha&&(We?P.enable(32926):P.disable(32926),L.sample_alpha=We),(Me=V.sample_enable)!==L.sample_enable&&(Me?P.enable(32928):P.disable(32928),L.sample_enable=Me),Te=oe[0],Ee=oe[1],Te===se[0]&&Ee===se[1]||(P.sampleCoverage(Te,Ee),se[0]=Te,se[1]=Ee),(Ce=V.stencil_enable)!==L.stencil_enable&&(Ce?P.enable(2960):P.disable(2960),L.stencil_enable=Ce),(He=V.stencil_mask)!==L.stencil_mask&&(P.stencilMask(He),L.stencil_mask=He),Be=le[0],Ie=le[1],Pe=le[2],Be===fe[0]&&Ie===fe[1]&&Pe===fe[2]||(P.stencilFunc(Be,Ie,Pe),fe[0]=Be,fe[1]=Ie,fe[2]=Pe),Ne=ce[0],De=ce[1],Ve=ce[2],Le=ce[3],Ne===ue[0]&&De===ue[1]&&Ve===ue[2]&&Le===ue[3]||(P.stencilOpSeparate(Ne,De,Ve,Le),ue[0]=Ne,ue[1]=De,ue[2]=Ve,ue[3]=Le),Re=de[0],qe=de[1],Ge=de[2],je=de[3],Re===he[0]&&qe===he[1]&&Ge===he[2]&&je===he[3]||(P.stencilOpSeparate(Re,qe,Ge,je),he[0]=Re,he[1]=qe,he[2]=Ge,he[3]=je),(Ue=V.scissor_enable)!==L.scissor_enable&&(Ue?P.enable(3089):P.disable(3089),L.scissor_enable=Ue));c=N.framebufferWidth,u=N.framebufferHeight,d=N.viewportWidth,N.viewportWidth=c,h=N.viewportHeight,N.viewportHeight=u,P.viewport(0,0,c,u),ge[0]=0,ge[1]=0,ge[2]=c,ge[3]=u,p=N.framebufferWidth,b=N.framebufferHeight,P.scissor(0,0,p,b),be[0]=0,be[1]=0,be[2]=p,be[3]=b,(m=L.profile)&&(g=performance.now(),t.count++),v=r.call(this,N,e,0),_=D.id(v),y=q.program(2,_),P.useProgram(y.program),G.setVAO(null),w=y.id,(x=ve[w])?x.call(this,e):(x=ve[w]=i(y)).call(this,e),L.dirty=!0,G.setVAO(null),U.next=s,N.framebufferWidth=l,N.framebufferHeight=f,N.viewportWidth=d,N.viewportHeight=h,m&&(t.cpuTime+=performance.now()-g)},scope:function(e,i,I){var P,V,G,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,be,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je;P=n.call(this,N,e,I),V=U.getFramebuffer(P),G=U.next,U.next=V,Y=N.framebufferWidth,N.framebufferWidth=V?V.width:N.drawingBufferWidth,$=N.framebufferHeight,N.framebufferHeight=V?V.height:N.drawingBufferHeight,Z=N.framebufferWidth,X=N.framebufferHeight,Q=N.viewportWidth,N.viewportWidth=Z,J=N.viewportHeight,N.viewportHeight=X,K=me[0],me[0]=a,ee=me[1],me[1]=o,te=me[2],me[2]=Z,ne=me[3],me[3]=X,re=N.framebufferWidth,ie=N.framebufferHeight,ae=pe[0],pe[0]=s,oe=pe[1],pe[1]=l,se=pe[2],pe[2]=re,le=pe[3],pe[3]=ie,(fe=L.profile)&&(ce=performance.now(),t.count++),ue=R.count,R.count=f,de=R.primitive,R.primitive=c,he=u.call(this,N,e,I),be=j[d],j[d]=he,ge=h.call(this,N,e,I),ve=j[p],j[p]=ge,_e=b.call(this,N,e,I),ye=j[m],j[m]=_e,we=g.call(this,N,e,I),xe=j[v],j[v]=we,Ae=_.call(this,N,e,I),Se=j[y],j[y]=Ae,ke=w.call(this,N,e,I),ze=j[x],j[x]=ke,Fe=A.call(this,N,e,I),Oe=j[S],j[S]=Fe,We=k.call(this,N,e,I),Me=j[z],j[z]=We,Te=F.call(this,N,e,I),Ee=j[O],j[O]=Te,Ce=W.call(this,N,e,I),He=j[M],j[M]=Ce,Be=T.call(this,N,e,I),Ie=j[E],j[E]=Be,Pe=H.state,H.state=1,Ne=H.x,H.x=0,De=H.y,H.y=0,Ve=H.z,H.z=0,Le=H.w,H.w=0,Re=H.buffer,H.buffer=C,qe=H.size,H.size=2,Ge=H.normalized,H.normalized=!1,je=H.type,H.type=5126,Ue=H.offset,H.offset=0,Ye=H.stride,H.stride=0,$e=H.divisor,H.divisor=0,Ze=q.vert,q.vert=B,Xe=r.call(this,N,e,I),Qe=D.id(Xe),Je=q.frag,q.frag=Qe,L.dirty=!0,i(N,e,I),U.next=G,N.framebufferWidth=Y,N.framebufferHeight=$,N.viewportWidth=Q,N.viewportHeight=J,me[0]=K,me[1]=ee,me[2]=te,me[3]=ne,pe[0]=ae,pe[1]=oe,pe[2]=se,pe[3]=le,fe&&(t.cpuTime+=performance.now()-ce),R.count=ue,R.primitive=de,j[d]=be,j[p]=ve,j[m]=ye,j[v]=xe,j[y]=Se,j[x]=ze,j[S]=Oe,j[z]=Me,j[O]=Ee,j[M]=He,j[E]=Ie,H.state=Pe,H.x=Ne,H.y=De,H.z=Ve,H.w=Le,H.buffer=Re,H.size=qe,H.normalized=Ge,H.type=je,H.offset=Ue,H.stride=Ye,H.divisor=$e,q.vert=Ze,q.frag=Je,L.dirty=!0},batch:function(e,i){var a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,R,j,pe,me,ve,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye;(Y.angle_instanced_arrays,a=n.call(this,N,e,0),o=U.getFramebuffer(a),s=U.next,U.next=o,l=N.framebufferWidth,N.framebufferWidth=o?o.width:N.drawingBufferWidth,f=N.framebufferHeight,N.framebufferHeight=o?o.height:N.drawingBufferHeight,o!==U.cur&&(o?P.bindFramebuffer(36160,o.framebuffer):P.bindFramebuffer(36160,null),U.cur=o),L.dirty)&&((A=V.dither)!==L.dither&&(A?P.enable(3024):P.disable(3024),L.dither=A),(S=V.blend_enable)!==L.blend_enable&&(S?P.enable(3042):P.disable(3042),L.blend_enable=S),k=$[0],z=$[1],F=$[2],O=$[3],k===Z[0]&&z===Z[1]&&F===Z[2]&&O===Z[3]||(P.blendColor(k,z,F,O),Z[0]=k,Z[1]=z,Z[2]=F,Z[3]=O),W=X[0],M=X[1],W===Q[0]&&M===Q[1]||(P.blendEquationSeparate(W,M),Q[0]=W,Q[1]=M),T=J[0],E=J[1],C=J[2],H=J[3],T===K[0]&&E===K[1]&&C===K[2]&&H===K[3]||(P.blendFuncSeparate(T,E,C,H),K[0]=T,K[1]=E,K[2]=C,K[3]=H),(B=V.depth_enable)!==L.depth_enable&&(B?P.enable(2929):P.disable(2929),L.depth_enable=B),(R=V.depth_func)!==L.depth_func&&(P.depthFunc(R),L.depth_func=R),j=ee[0],pe=ee[1],j===te[0]&&pe===te[1]||(P.depthRange(j,pe),te[0]=j,te[1]=pe),(me=V.depth_mask)!==L.depth_mask&&(P.depthMask(me),L.depth_mask=me),ve=ne[0],ye=ne[1],we=ne[2],xe=ne[3],ve===re[0]&&ye===re[1]&&we===re[2]&&xe===re[3]||(P.colorMask(ve,ye,we,xe),re[0]=ve,re[1]=ye,re[2]=we,re[3]=xe),(Ae=V.cull_enable)!==L.cull_enable&&(Ae?P.enable(2884):P.disable(2884),L.cull_enable=Ae),(Se=V.cull_face)!==L.cull_face&&(P.cullFace(Se),L.cull_face=Se),(ke=V.frontFace)!==L.frontFace&&(P.frontFace(ke),L.frontFace=ke),(ze=V.lineWidth)!==L.lineWidth&&(P.lineWidth(ze),L.lineWidth=ze),(Fe=V.polygonOffset_enable)!==L.polygonOffset_enable&&(Fe?P.enable(32823):P.disable(32823),L.polygonOffset_enable=Fe),Oe=ie[0],We=ie[1],Oe===ae[0]&&We===ae[1]||(P.polygonOffset(Oe,We),ae[0]=Oe,ae[1]=We),(Me=V.sample_alpha)!==L.sample_alpha&&(Me?P.enable(32926):P.disable(32926),L.sample_alpha=Me),(Te=V.sample_enable)!==L.sample_enable&&(Te?P.enable(32928):P.disable(32928),L.sample_enable=Te),Ee=oe[0],Ce=oe[1],Ee===se[0]&&Ce===se[1]||(P.sampleCoverage(Ee,Ce),se[0]=Ee,se[1]=Ce),(He=V.stencil_enable)!==L.stencil_enable&&(He?P.enable(2960):P.disable(2960),L.stencil_enable=He),(Be=V.stencil_mask)!==L.stencil_mask&&(P.stencilMask(Be),L.stencil_mask=Be),Ie=le[0],Pe=le[1],Ne=le[2],Ie===fe[0]&&Pe===fe[1]&&Ne===fe[2]||(P.stencilFunc(Ie,Pe,Ne),fe[0]=Ie,fe[1]=Pe,fe[2]=Ne),De=ce[0],Ve=ce[1],Le=ce[2],Re=ce[3],De===ue[0]&&Ve===ue[1]&&Le===ue[2]&&Re===ue[3]||(P.stencilOpSeparate(De,Ve,Le,Re),ue[0]=De,ue[1]=Ve,ue[2]=Le,ue[3]=Re),qe=de[0],Ge=de[1],je=de[2],Ue=de[3],qe===he[0]&&Ge===he[1]&&je===he[2]&&Ue===he[3]||(P.stencilOpSeparate(qe,Ge,je,Ue),he[0]=qe,he[1]=Ge,he[2]=je,he[3]=Ue),(Ye=V.scissor_enable)!==L.scissor_enable&&(Ye?P.enable(3089):P.disable(3089),L.scissor_enable=Ye));c=N.framebufferWidth,u=N.framebufferHeight,d=N.viewportWidth,N.viewportWidth=c,h=N.viewportHeight,N.viewportHeight=u,P.viewport(0,0,c,u),ge[0]=0,ge[1]=0,ge[2]=c,ge[3]=u,p=N.framebufferWidth,b=N.framebufferHeight,P.scissor(0,0,p,b),be[0]=0,be[1]=0,be[2]=p,be[3]=b,(m=L.profile)&&(g=performance.now(),t.count+=i),v=r.call(this,N,e,0),_=D.id(v),y=q.program(2,_),P.useProgram(y.program),G.setVAO(null),w=y.id,(x=_e[w])?x.call(this,e,i):(x=_e[w]=I(y)).call(this,e,i),L.dirty=!0,G.setVAO(null),U.next=s,N.framebufferWidth=l,N.framebufferHeight=f,N.viewportWidth=d,N.viewportHeight=h,m&&(t.cpuTime+=performance.now()-g)}}},a56156b46387d9ebaeb16362ff9fd91a496e85692131cee7d7a0dd9997816a78:function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A){var S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae;return S=e.gl,k=e.context,e.strings,z=e.next,F=e.current,O=e.draw,W=e.elements,e.buffer,M=e.shader,T=e.attributes,E=e.vao,C=e.uniforms,H=e.framebuffer,B=e.extensions,e.timer,e.isBufferArgs,I=z.blend_color,P=F.blend_color,N=z.blend_equation,D=F.blend_equation,V=z.blend_func,L=F.blend_func,R=z.depth_range,q=F.depth_range,G=z.colorMask,j=F.colorMask,U=z.polygonOffset_offset,Y=F.polygonOffset_offset,$=z.sample_coverage,Z=F.sample_coverage,X=z.stencil_func,Q=F.stencil_func,J=z.stencil_opFront,K=F.stencil_opFront,ee=z.stencil_opBack,te=F.stencil_opBack,ne=z.scissor_box,re=F.scissor_box,ie=z.viewport,ae=F.viewport,{draw:function(e){var d,h,p,b,m,g,v,_,y,w,x,A,M,C,ne,ie,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot;(B.angle_instanced_arrays,d=n.call(this,k,e,0),h=H.getFramebuffer(d),p=H.next,H.next=h,b=k.framebufferWidth,k.framebufferWidth=h?h.width:k.drawingBufferWidth,m=k.framebufferHeight,k.framebufferHeight=h?h.height:k.drawingBufferHeight,h!==H.cur&&(h?S.bindFramebuffer(36160,h.framebuffer):S.bindFramebuffer(36160,null),H.cur=h),F.dirty)&&((be=z.dither)!==F.dither&&(be?S.enable(3024):S.disable(3024),F.dither=be),(me=z.blend_enable)!==F.blend_enable&&(me?S.enable(3042):S.disable(3042),F.blend_enable=me),ge=I[0],ve=I[1],_e=I[2],ye=I[3],ge===P[0]&&ve===P[1]&&_e===P[2]&&ye===P[3]||(S.blendColor(ge,ve,_e,ye),P[0]=ge,P[1]=ve,P[2]=_e,P[3]=ye),we=N[0],xe=N[1],we===D[0]&&xe===D[1]||(S.blendEquationSeparate(we,xe),D[0]=we,D[1]=xe),Ae=V[0],Se=V[1],ke=V[2],ze=V[3],Ae===L[0]&&Se===L[1]&&ke===L[2]&&ze===L[3]||(S.blendFuncSeparate(Ae,Se,ke,ze),L[0]=Ae,L[1]=Se,L[2]=ke,L[3]=ze),(Fe=z.depth_enable)!==F.depth_enable&&(Fe?S.enable(2929):S.disable(2929),F.depth_enable=Fe),(Oe=z.depth_func)!==F.depth_func&&(S.depthFunc(Oe),F.depth_func=Oe),We=R[0],Me=R[1],We===q[0]&&Me===q[1]||(S.depthRange(We,Me),q[0]=We,q[1]=Me),(Te=z.depth_mask)!==F.depth_mask&&(S.depthMask(Te),F.depth_mask=Te),Ee=G[0],Ce=G[1],He=G[2],Be=G[3],Ee===j[0]&&Ce===j[1]&&He===j[2]&&Be===j[3]||(S.colorMask(Ee,Ce,He,Be),j[0]=Ee,j[1]=Ce,j[2]=He,j[3]=Be),(Ie=z.cull_enable)!==F.cull_enable&&(Ie?S.enable(2884):S.disable(2884),F.cull_enable=Ie),(Pe=z.cull_face)!==F.cull_face&&(S.cullFace(Pe),F.cull_face=Pe),(Ne=z.frontFace)!==F.frontFace&&(S.frontFace(Ne),F.frontFace=Ne),(De=z.lineWidth)!==F.lineWidth&&(S.lineWidth(De),F.lineWidth=De),(Ve=z.polygonOffset_enable)!==F.polygonOffset_enable&&(Ve?S.enable(32823):S.disable(32823),F.polygonOffset_enable=Ve),Le=U[0],Re=U[1],Le===Y[0]&&Re===Y[1]||(S.polygonOffset(Le,Re),Y[0]=Le,Y[1]=Re),(qe=z.sample_alpha)!==F.sample_alpha&&(qe?S.enable(32926):S.disable(32926),F.sample_alpha=qe),(Ge=z.sample_enable)!==F.sample_enable&&(Ge?S.enable(32928):S.disable(32928),F.sample_enable=Ge),je=$[0],Ue=$[1],je===Z[0]&&Ue===Z[1]||(S.sampleCoverage(je,Ue),Z[0]=je,Z[1]=Ue),(Ye=z.stencil_enable)!==F.stencil_enable&&(Ye?S.enable(2960):S.disable(2960),F.stencil_enable=Ye),($e=z.stencil_mask)!==F.stencil_mask&&(S.stencilMask($e),F.stencil_mask=$e),Ze=X[0],Xe=X[1],Qe=X[2],Ze===Q[0]&&Xe===Q[1]&&Qe===Q[2]||(S.stencilFunc(Ze,Xe,Qe),Q[0]=Ze,Q[1]=Xe,Q[2]=Qe),Je=J[0],Ke=J[1],et=J[2],tt=J[3],Je===K[0]&&Ke===K[1]&&et===K[2]&&tt===K[3]||(S.stencilOpSeparate(Je,Ke,et,tt),K[0]=Je,K[1]=Ke,K[2]=et,K[3]=tt),nt=ee[0],rt=ee[1],it=ee[2],at=ee[3],nt===te[0]&&rt===te[1]&&it===te[2]&&at===te[3]||(S.stencilOpSeparate(nt,rt,it,at),te[0]=nt,te[1]=rt,te[2]=it,te[3]=at),(ot=z.scissor_enable)!==F.scissor_enable&&(ot?S.enable(3089):S.disable(3089),F.scissor_enable=ot));g=k.framebufferWidth,v=k.framebufferHeight,_=k.viewportWidth,k.viewportWidth=g,y=k.viewportHeight,k.viewportHeight=v,S.viewport(0,0,g,v),ae[0]=0,ae[1]=0,ae[2]=g,ae[3]=v,w=k.framebufferWidth,x=k.framebufferHeight,S.scissor(0,0,w,x),re[0]=0,re[1]=0,re[2]=w,re[3]=x,(A=F.profile)&&(M=performance.now(),t.count++),S.useProgram(r.program),C=B.angle_instanced_arrays,E.setVAO(null),ne=a.location,(ie=T[ne]).buffer||S.enableVertexAttribArray(ne),5126===ie.type&&2===ie.size&&ie.buffer===i&&!1===ie.normalized&&0===ie.offset&&0===ie.stride||(S.bindBuffer(34962,i.buffer),S.vertexAttribPointer(ne,2,5126,!1,0,0),ie.type=5126,ie.size=2,ie.buffer=i,ie.normalized=!1,ie.offset=0,ie.stride=0),0!==ie.divisor&&(C.vertexAttribDivisorANGLE(ne,0),ie.divisor=0),se=(oe=s.call(this,k,e,0))[0],le=oe[1],S.uniform2f(o.location,se,le),(fe=f.call(this,k,e,0))&&"framebuffer"===fe._reglType&&(fe=fe.color[0]),ce=fe._texture,S.uniform1i(l.location,ce.bind()),ue=u.call(this,k,e,0),S.uniform1f(c.location,ue),((de=O.elements)||E.currentVAO&&(de=W.getElements(E.currentVAO.elements)))&&S.bindBuffer(34963,de.buffer.buffer),he=O.offset,(pe=O.instances)>0?de?C.drawElementsInstancedANGLE(5,4,de.type,he<<(de.type-5121>>1),pe):C.drawArraysInstancedANGLE(5,he,4,pe):pe<0&&(de?S.drawElements(5,4,de.type,he<<(de.type-5121>>1)):S.drawArrays(5,he,4)),F.dirty=!0,E.setVAO(null),H.next=p,k.framebufferWidth=b,k.framebufferHeight=m,k.viewportWidth=_,k.viewportHeight=y,A&&(t.cpuTime+=performance.now()-M),ce.unbind()},scope:function(e,r,a){var o,l,c,S,z,W,T,E,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,re,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge;o=n.call(this,k,e,a),l=H.getFramebuffer(o),c=H.next,H.next=l,S=k.framebufferWidth,k.framebufferWidth=l?l.width:k.drawingBufferWidth,z=k.framebufferHeight,k.framebufferHeight=l?l.height:k.drawingBufferHeight,W=k.framebufferWidth,T=k.framebufferHeight,E=k.viewportWidth,k.viewportWidth=W,B=k.viewportHeight,k.viewportHeight=T,I=ie[0],ie[0]=d,P=ie[1],ie[1]=h,N=ie[2],ie[2]=W,D=ie[3],ie[3]=T,V=k.framebufferWidth,L=k.framebufferHeight,R=ne[0],ne[0]=p,q=ne[1],ne[1]=b,G=ne[2],ne[2]=V,j=ne[3],ne[3]=L,(U=F.profile)&&(Y=performance.now(),t.count++),$=O.count,O.count=m,Z=O.primitive,O.primitive=g,X=f.call(this,k,e,a),Q=C[v],C[v]=X,J=s.call(this,k,e,a),K=C[_],C[_]=J,ee=u.call(this,k,e,a),te=C[y],C[y]=ee,re=w.state,w.state=1,ae=w.x,w.x=0,oe=w.y,w.y=0,se=w.z,w.z=0,le=w.w,w.w=0,fe=w.buffer,w.buffer=i,ce=w.size,w.size=2,ue=w.normalized,w.normalized=!1,de=w.type,w.type=5126,he=w.offset,w.offset=0,pe=w.stride,w.stride=0,be=w.divisor,w.divisor=0,me=M.vert,M.vert=x,ge=M.frag,M.frag=A,F.dirty=!0,r(k,e,a),H.next=c,k.framebufferWidth=S,k.framebufferHeight=z,k.viewportWidth=E,k.viewportHeight=B,ie[0]=I,ie[1]=P,ie[2]=N,ie[3]=D,ne[0]=R,ne[1]=q,ne[2]=G,ne[3]=j,U&&(t.cpuTime+=performance.now()-Y),O.count=$,O.primitive=Z,C[v]=Q,C[_]=K,C[y]=te,w.state=re,w.x=ae,w.y=oe,w.z=se,w.w=le,w.buffer=fe,w.size=ce,w.normalized=ue,w.type=de,w.offset=he,w.stride=pe,w.divisor=be,M.vert=me,M.frag=ge,F.dirty=!0},batch:function(e,d){var h,p,b,m,g,v,_,y,w,x,A,M,C,ne,ie,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft;(B.angle_instanced_arrays,h=n.call(this,k,e,0),p=H.getFramebuffer(h),b=H.next,H.next=p,m=k.framebufferWidth,k.framebufferWidth=p?p.width:k.drawingBufferWidth,g=k.framebufferHeight,k.framebufferHeight=p?p.height:k.drawingBufferHeight,p!==H.cur&&(p?S.bindFramebuffer(36160,p.framebuffer):S.bindFramebuffer(36160,null),H.cur=p),F.dirty)&&((se=z.dither)!==F.dither&&(se?S.enable(3024):S.disable(3024),F.dither=se),(le=z.blend_enable)!==F.blend_enable&&(le?S.enable(3042):S.disable(3042),F.blend_enable=le),fe=I[0],ce=I[1],ue=I[2],de=I[3],fe===P[0]&&ce===P[1]&&ue===P[2]&&de===P[3]||(S.blendColor(fe,ce,ue,de),P[0]=fe,P[1]=ce,P[2]=ue,P[3]=de),he=N[0],pe=N[1],he===D[0]&&pe===D[1]||(S.blendEquationSeparate(he,pe),D[0]=he,D[1]=pe),be=V[0],me=V[1],ge=V[2],ve=V[3],be===L[0]&&me===L[1]&&ge===L[2]&&ve===L[3]||(S.blendFuncSeparate(be,me,ge,ve),L[0]=be,L[1]=me,L[2]=ge,L[3]=ve),(_e=z.depth_enable)!==F.depth_enable&&(_e?S.enable(2929):S.disable(2929),F.depth_enable=_e),(ye=z.depth_func)!==F.depth_func&&(S.depthFunc(ye),F.depth_func=ye),we=R[0],xe=R[1],we===q[0]&&xe===q[1]||(S.depthRange(we,xe),q[0]=we,q[1]=xe),(Ae=z.depth_mask)!==F.depth_mask&&(S.depthMask(Ae),F.depth_mask=Ae),Se=G[0],ke=G[1],ze=G[2],Fe=G[3],Se===j[0]&&ke===j[1]&&ze===j[2]&&Fe===j[3]||(S.colorMask(Se,ke,ze,Fe),j[0]=Se,j[1]=ke,j[2]=ze,j[3]=Fe),(Oe=z.cull_enable)!==F.cull_enable&&(Oe?S.enable(2884):S.disable(2884),F.cull_enable=Oe),(We=z.cull_face)!==F.cull_face&&(S.cullFace(We),F.cull_face=We),(Me=z.frontFace)!==F.frontFace&&(S.frontFace(Me),F.frontFace=Me),(Te=z.lineWidth)!==F.lineWidth&&(S.lineWidth(Te),F.lineWidth=Te),(Ee=z.polygonOffset_enable)!==F.polygonOffset_enable&&(Ee?S.enable(32823):S.disable(32823),F.polygonOffset_enable=Ee),Ce=U[0],He=U[1],Ce===Y[0]&&He===Y[1]||(S.polygonOffset(Ce,He),Y[0]=Ce,Y[1]=He),(Be=z.sample_alpha)!==F.sample_alpha&&(Be?S.enable(32926):S.disable(32926),F.sample_alpha=Be),(Ie=z.sample_enable)!==F.sample_enable&&(Ie?S.enable(32928):S.disable(32928),F.sample_enable=Ie),Pe=$[0],Ne=$[1],Pe===Z[0]&&Ne===Z[1]||(S.sampleCoverage(Pe,Ne),Z[0]=Pe,Z[1]=Ne),(De=z.stencil_enable)!==F.stencil_enable&&(De?S.enable(2960):S.disable(2960),F.stencil_enable=De),(Ve=z.stencil_mask)!==F.stencil_mask&&(S.stencilMask(Ve),F.stencil_mask=Ve),Le=X[0],Re=X[1],qe=X[2],Le===Q[0]&&Re===Q[1]&&qe===Q[2]||(S.stencilFunc(Le,Re,qe),Q[0]=Le,Q[1]=Re,Q[2]=qe),Ge=J[0],je=J[1],Ue=J[2],Ye=J[3],Ge===K[0]&&je===K[1]&&Ue===K[2]&&Ye===K[3]||(S.stencilOpSeparate(Ge,je,Ue,Ye),K[0]=Ge,K[1]=je,K[2]=Ue,K[3]=Ye),$e=ee[0],Ze=ee[1],Xe=ee[2],Qe=ee[3],$e===te[0]&&Ze===te[1]&&Xe===te[2]&&Qe===te[3]||(S.stencilOpSeparate($e,Ze,Xe,Qe),te[0]=$e,te[1]=Ze,te[2]=Xe,te[3]=Qe),(Je=z.scissor_enable)!==F.scissor_enable&&(Je?S.enable(3089):S.disable(3089),F.scissor_enable=Je));for(v=k.framebufferWidth,_=k.framebufferHeight,y=k.viewportWidth,k.viewportWidth=v,w=k.viewportHeight,k.viewportHeight=_,S.viewport(0,0,v,_),ae[0]=0,ae[1]=0,ae[2]=v,ae[3]=_,x=k.framebufferWidth,A=k.framebufferHeight,S.scissor(0,0,x,A),re[0]=0,re[1]=0,re[2]=x,re[3]=A,(M=F.profile)&&(C=performance.now(),t.count+=d),S.useProgram(r.program),ne=B.angle_instanced_arrays,E.setVAO(null),Ke=a.location,(et=T[Ke]).buffer||S.enableVertexAttribArray(Ke),2,5126===et.type&&2===et.size&&et.buffer===i&&!1===et.normalized&&0===et.offset&&0===et.stride||(S.bindBuffer(34962,i.buffer),S.vertexAttribPointer(Ke,2,5126,!1,0,0),et.type=5126,et.size=2,et.buffer=i,et.normalized=!1,et.offset=0,et.stride=0),0!==et.divisor&&(ne.vertexAttribDivisorANGLE(Ke,0),et.divisor=0),nt=(tt=s.call(this,k,oe,ie))[0],rt=tt[1],S.uniform2f(o.location,nt,rt),(it=f.call(this,k,oe,ie))&&"framebuffer"===it._reglType&&(it=it.color[0]),at=it._texture,S.uniform1i(l.location,at.bind()),ot=u.call(this,k,oe,ie),S.uniform1f(c.location,ot),((st=O.elements)||E.currentVAO&&(st=W.getElements(E.currentVAO.elements)))&&S.bindBuffer(34963,st.buffer.buffer),lt=O.offset,ft=O.instances,ie=0;ie<d;++ie)oe=e[ie],ft>0?st?ne.drawElementsInstancedANGLE(5,4,st.type,lt<<(st.type-5121>>1),ft):ne.drawArraysInstancedANGLE(5,lt,4,ft):ft<0&&(st?S.drawElements(5,4,st.type,lt<<(st.type-5121>>1)):S.drawArrays(5,lt,4));at.unbind(),F.dirty=!0,E.setVAO(null),H.next=b,k.framebufferWidth=m,k.framebufferHeight=g,k.viewportWidth=y,k.viewportHeight=w,M&&(t.cpuTime+=performance.now()-C)}}},a078ac08badcbb8d92ee14097c5aa87a7d715adc669508e1f2527db65d2020a6:function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p){var b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z;return b=e.gl,m=e.context,e.strings,g=e.next,v=e.current,_=e.draw,y=e.elements,e.buffer,w=e.shader,x=e.attributes,A=e.vao,e.uniforms,S=e.framebuffer,k=e.extensions,e.timer,e.isBufferArgs,z=g.blend_color,F=v.blend_color,O=g.blend_equation,W=v.blend_equation,M=g.blend_func,T=v.blend_func,E=g.depth_range,C=v.depth_range,H=g.colorMask,B=v.colorMask,I=g.polygonOffset_offset,P=v.polygonOffset_offset,N=g.sample_coverage,D=v.sample_coverage,V=g.stencil_func,L=v.stencil_func,R=g.stencil_opFront,q=v.stencil_opFront,G=g.stencil_opBack,j=v.stencil_opBack,U=g.scissor_box,Y=v.scissor_box,$=g.viewport,Z=v.viewport,{draw:function(e){var o,s,l,f,c,u,d,h,p,w,U,$,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e;(k.angle_instanced_arrays,o=n.call(this,m,e,0),s=S.getFramebuffer(o),l=S.next,S.next=s,f=m.framebufferWidth,m.framebufferWidth=s?s.width:m.drawingBufferWidth,c=m.framebufferHeight,m.framebufferHeight=s?s.height:m.drawingBufferHeight,s!==S.cur&&(s?b.bindFramebuffer(36160,s.framebuffer):b.bindFramebuffer(36160,null),S.cur=s),v.dirty)&&((re=g.dither)!==v.dither&&(re?b.enable(3024):b.disable(3024),v.dither=re),(ie=g.blend_enable)!==v.blend_enable&&(ie?b.enable(3042):b.disable(3042),v.blend_enable=ie),ae=z[0],oe=z[1],se=z[2],le=z[3],ae===F[0]&&oe===F[1]&&se===F[2]&&le===F[3]||(b.blendColor(ae,oe,se,le),F[0]=ae,F[1]=oe,F[2]=se,F[3]=le),fe=O[0],ce=O[1],fe===W[0]&&ce===W[1]||(b.blendEquationSeparate(fe,ce),W[0]=fe,W[1]=ce),ue=M[0],de=M[1],he=M[2],pe=M[3],ue===T[0]&&de===T[1]&&he===T[2]&&pe===T[3]||(b.blendFuncSeparate(ue,de,he,pe),T[0]=ue,T[1]=de,T[2]=he,T[3]=pe),(be=g.depth_enable)!==v.depth_enable&&(be?b.enable(2929):b.disable(2929),v.depth_enable=be),(me=g.depth_func)!==v.depth_func&&(b.depthFunc(me),v.depth_func=me),ge=E[0],ve=E[1],ge===C[0]&&ve===C[1]||(b.depthRange(ge,ve),C[0]=ge,C[1]=ve),(_e=g.depth_mask)!==v.depth_mask&&(b.depthMask(_e),v.depth_mask=_e),ye=H[0],we=H[1],xe=H[2],Ae=H[3],ye===B[0]&&we===B[1]&&xe===B[2]&&Ae===B[3]||(b.colorMask(ye,we,xe,Ae),B[0]=ye,B[1]=we,B[2]=xe,B[3]=Ae),(Se=g.cull_enable)!==v.cull_enable&&(Se?b.enable(2884):b.disable(2884),v.cull_enable=Se),(ke=g.cull_face)!==v.cull_face&&(b.cullFace(ke),v.cull_face=ke),(ze=g.frontFace)!==v.frontFace&&(b.frontFace(ze),v.frontFace=ze),(Fe=g.lineWidth)!==v.lineWidth&&(b.lineWidth(Fe),v.lineWidth=Fe),(Oe=g.polygonOffset_enable)!==v.polygonOffset_enable&&(Oe?b.enable(32823):b.disable(32823),v.polygonOffset_enable=Oe),We=I[0],Me=I[1],We===P[0]&&Me===P[1]||(b.polygonOffset(We,Me),P[0]=We,P[1]=Me),(Te=g.sample_alpha)!==v.sample_alpha&&(Te?b.enable(32926):b.disable(32926),v.sample_alpha=Te),(Ee=g.sample_enable)!==v.sample_enable&&(Ee?b.enable(32928):b.disable(32928),v.sample_enable=Ee),Ce=N[0],He=N[1],Ce===D[0]&&He===D[1]||(b.sampleCoverage(Ce,He),D[0]=Ce,D[1]=He),(Be=g.stencil_enable)!==v.stencil_enable&&(Be?b.enable(2960):b.disable(2960),v.stencil_enable=Be),(Ie=g.stencil_mask)!==v.stencil_mask&&(b.stencilMask(Ie),v.stencil_mask=Ie),Pe=V[0],Ne=V[1],De=V[2],Pe===L[0]&&Ne===L[1]&&De===L[2]||(b.stencilFunc(Pe,Ne,De),L[0]=Pe,L[1]=Ne,L[2]=De),Ve=R[0],Le=R[1],Re=R[2],qe=R[3],Ve===q[0]&&Le===q[1]&&Re===q[2]&&qe===q[3]||(b.stencilOpSeparate(Ve,Le,Re,qe),q[0]=Ve,q[1]=Le,q[2]=Re,q[3]=qe),Ge=G[0],je=G[1],Ue=G[2],Ye=G[3],Ge===j[0]&&je===j[1]&&Ue===j[2]&&Ye===j[3]||(b.stencilOpSeparate(Ge,je,Ue,Ye),j[0]=Ge,j[1]=je,j[2]=Ue,j[3]=Ye),($e=g.scissor_enable)!==v.scissor_enable&&($e?b.enable(3089):b.disable(3089),v.scissor_enable=$e));u=m.framebufferWidth,d=m.framebufferHeight,h=m.viewportWidth,m.viewportWidth=u,p=m.viewportHeight,m.viewportHeight=d,b.viewport(0,0,u,d),Z[0]=0,Z[1]=0,Z[2]=u,Z[3]=d,w=m.framebufferWidth,U=m.framebufferHeight,b.scissor(0,0,w,U),Y[0]=0,Y[1]=0,Y[2]=w,Y[3]=U,($=v.profile)&&(X=performance.now(),t.count++),b.useProgram(r.program),Q=k.angle_instanced_arrays,A.setVAO(null),J=a.location,(K=x[J]).buffer||b.enableVertexAttribArray(J),5126===K.type&&2===K.size&&K.buffer===i&&!1===K.normalized&&0===K.offset&&0===K.stride||(b.bindBuffer(34962,i.buffer),b.vertexAttribPointer(J,2,5126,!1,0,0),K.type=5126,K.size=2,K.buffer=i,K.normalized=!1,K.offset=0,K.stride=0),0!==K.divisor&&(Q.vertexAttribDivisorANGLE(J,0),K.divisor=0),((ee=_.elements)||A.currentVAO&&(ee=y.getElements(A.currentVAO.elements)))&&b.bindBuffer(34963,ee.buffer.buffer),te=_.offset,(ne=_.instances)>0?ee?Q.drawElementsInstancedANGLE(5,4,ee.type,te<<(ee.type-5121>>1),ne):Q.drawArraysInstancedANGLE(5,te,4,ne):ne<0&&(ee?b.drawElements(5,4,ee.type,te<<(ee.type-5121>>1)):b.drawArrays(5,te,4)),v.dirty=!0,A.setVAO(null),S.next=l,m.framebufferWidth=f,m.framebufferHeight=c,m.viewportWidth=h,m.viewportHeight=p,$&&(t.cpuTime+=performance.now()-X)},scope:function(e,r,a){var b,g,y,x,A,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,Y,Z,X,Q,J,K,ee,te,ne,re,ie;b=n.call(this,m,e,a),g=S.getFramebuffer(b),y=S.next,S.next=g,x=m.framebufferWidth,m.framebufferWidth=g?g.width:m.drawingBufferWidth,A=m.framebufferHeight,m.framebufferHeight=g?g.height:m.drawingBufferHeight,k=m.framebufferWidth,z=m.framebufferHeight,F=m.viewportWidth,m.viewportWidth=k,O=m.viewportHeight,m.viewportHeight=z,W=$[0],$[0]=o,M=$[1],$[1]=s,T=$[2],$[2]=k,E=$[3],$[3]=z,C=m.framebufferWidth,H=m.framebufferHeight,B=U[0],U[0]=l,I=U[1],U[1]=f,P=U[2],U[2]=C,N=U[3],U[3]=H,(D=v.profile)&&(V=performance.now(),t.count++),L=_.count,_.count=c,R=_.primitive,_.primitive=u,q=d.state,d.state=1,G=d.x,d.x=0,j=d.y,d.y=0,Y=d.z,d.z=0,Z=d.w,d.w=0,X=d.buffer,d.buffer=i,Q=d.size,d.size=2,J=d.normalized,d.normalized=!1,K=d.type,d.type=5126,ee=d.offset,d.offset=0,te=d.stride,d.stride=0,ne=d.divisor,d.divisor=0,re=w.vert,w.vert=h,ie=w.frag,w.frag=p,v.dirty=!0,r(m,e,a),S.next=y,m.framebufferWidth=x,m.framebufferHeight=A,m.viewportWidth=F,m.viewportHeight=O,$[0]=W,$[1]=M,$[2]=T,$[3]=E,U[0]=B,U[1]=I,U[2]=P,U[3]=N,D&&(t.cpuTime+=performance.now()-V),_.count=L,_.primitive=R,d.state=q,d.x=G,d.y=j,d.z=Y,d.w=Z,d.buffer=X,d.size=Q,d.normalized=J,d.type=K,d.offset=ee,d.stride=te,d.divisor=ne,w.vert=re,w.frag=ie,v.dirty=!0},batch:function(e,o){var s,l,f,c,u,d,h,p,w,U,$,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve;(k.angle_instanced_arrays,v.dirty)&&((d=g.dither)!==v.dither&&(d?b.enable(3024):b.disable(3024),v.dither=d),(h=g.blend_enable)!==v.blend_enable&&(h?b.enable(3042):b.disable(3042),v.blend_enable=h),p=z[0],w=z[1],U=z[2],$=z[3],p===F[0]&&w===F[1]&&U===F[2]&&$===F[3]||(b.blendColor(p,w,U,$),F[0]=p,F[1]=w,F[2]=U,F[3]=$),X=O[0],Q=O[1],X===W[0]&&Q===W[1]||(b.blendEquationSeparate(X,Q),W[0]=X,W[1]=Q),J=M[0],K=M[1],ee=M[2],te=M[3],J===T[0]&&K===T[1]&&ee===T[2]&&te===T[3]||(b.blendFuncSeparate(J,K,ee,te),T[0]=J,T[1]=K,T[2]=ee,T[3]=te),(ne=g.depth_enable)!==v.depth_enable&&(ne?b.enable(2929):b.disable(2929),v.depth_enable=ne),(re=g.depth_func)!==v.depth_func&&(b.depthFunc(re),v.depth_func=re),ie=E[0],ae=E[1],ie===C[0]&&ae===C[1]||(b.depthRange(ie,ae),C[0]=ie,C[1]=ae),(oe=g.depth_mask)!==v.depth_mask&&(b.depthMask(oe),v.depth_mask=oe),se=H[0],le=H[1],fe=H[2],ce=H[3],se===B[0]&&le===B[1]&&fe===B[2]&&ce===B[3]||(b.colorMask(se,le,fe,ce),B[0]=se,B[1]=le,B[2]=fe,B[3]=ce),(ue=g.cull_enable)!==v.cull_enable&&(ue?b.enable(2884):b.disable(2884),v.cull_enable=ue),(de=g.cull_face)!==v.cull_face&&(b.cullFace(de),v.cull_face=de),(he=g.frontFace)!==v.frontFace&&(b.frontFace(he),v.frontFace=he),(pe=g.lineWidth)!==v.lineWidth&&(b.lineWidth(pe),v.lineWidth=pe),(be=g.polygonOffset_enable)!==v.polygonOffset_enable&&(be?b.enable(32823):b.disable(32823),v.polygonOffset_enable=be),me=I[0],ge=I[1],me===P[0]&&ge===P[1]||(b.polygonOffset(me,ge),P[0]=me,P[1]=ge),(ve=g.sample_alpha)!==v.sample_alpha&&(ve?b.enable(32926):b.disable(32926),v.sample_alpha=ve),(_e=g.sample_enable)!==v.sample_enable&&(_e?b.enable(32928):b.disable(32928),v.sample_enable=_e),ye=N[0],we=N[1],ye===D[0]&&we===D[1]||(b.sampleCoverage(ye,we),D[0]=ye,D[1]=we),(xe=g.stencil_enable)!==v.stencil_enable&&(xe?b.enable(2960):b.disable(2960),v.stencil_enable=xe),(Ae=g.stencil_mask)!==v.stencil_mask&&(b.stencilMask(Ae),v.stencil_mask=Ae),Se=V[0],ke=V[1],ze=V[2],Se===L[0]&&ke===L[1]&&ze===L[2]||(b.stencilFunc(Se,ke,ze),L[0]=Se,L[1]=ke,L[2]=ze),Fe=R[0],Oe=R[1],We=R[2],Me=R[3],Fe===q[0]&&Oe===q[1]&&We===q[2]&&Me===q[3]||(b.stencilOpSeparate(Fe,Oe,We,Me),q[0]=Fe,q[1]=Oe,q[2]=We,q[3]=Me),Te=G[0],Ee=G[1],Ce=G[2],He=G[3],Te===j[0]&&Ee===j[1]&&Ce===j[2]&&He===j[3]||(b.stencilOpSeparate(Te,Ee,Ce,He),j[0]=Te,j[1]=Ee,j[2]=Ce,j[3]=He),(Be=g.scissor_enable)!==v.scissor_enable&&(Be?b.enable(3089):b.disable(3089),v.scissor_enable=Be));for((s=v.profile)&&(l=performance.now(),t.count+=o),b.useProgram(r.program),f=k.angle_instanced_arrays,A.setVAO(null),Ie=a.location,(Pe=x[Ie]).buffer||b.enableVertexAttribArray(Ie),2,5126===Pe.type&&2===Pe.size&&Pe.buffer===i&&!1===Pe.normalized&&0===Pe.offset&&0===Pe.stride||(b.bindBuffer(34962,i.buffer),b.vertexAttribPointer(Ie,2,5126,!1,0,0),Pe.type=5126,Pe.size=2,Pe.buffer=i,Pe.normalized=!1,Pe.offset=0,Pe.stride=0),0!==Pe.divisor&&(f.vertexAttribDivisorANGLE(Ie,0),Pe.divisor=0),((Ne=_.elements)||A.currentVAO&&(Ne=y.getElements(A.currentVAO.elements)))&&b.bindBuffer(34963,Ne.buffer.buffer),De=_.offset,Ve=_.instances,c=0;c<o;++c){var Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe;u=e[c],Le=n.call(this,m,u,c),Re=S.getFramebuffer(Le),qe=S.next,S.next=Re,Ge=m.framebufferWidth,m.framebufferWidth=Re?Re.width:m.drawingBufferWidth,je=m.framebufferHeight,m.framebufferHeight=Re?Re.height:m.drawingBufferHeight,Re!==S.cur&&(Re?b.bindFramebuffer(36160,Re.framebuffer):b.bindFramebuffer(36160,null),S.cur=Re),Ue=m.framebufferWidth,Ye=m.framebufferHeight,$e=m.viewportWidth,m.viewportWidth=Ue,Ze=m.viewportHeight,m.viewportHeight=Ye,b.viewport(0,0,Ue,Ye),Z[0]=0,Z[1]=0,Z[2]=Ue,Z[3]=Ye,Xe=m.framebufferWidth,Qe=m.framebufferHeight,b.scissor(0,0,Xe,Qe),Y[0]=0,Y[1]=0,Y[2]=Xe,Y[3]=Qe,Ve>0?Ne?f.drawElementsInstancedANGLE(5,4,Ne.type,De<<(Ne.type-5121>>1),Ve):f.drawArraysInstancedANGLE(5,De,4,Ve):Ve<0&&(Ne?b.drawElements(5,4,Ne.type,De<<(Ne.type-5121>>1)):b.drawArrays(5,De,4)),S.next=qe,m.framebufferWidth=Ge,m.framebufferHeight=je,m.viewportWidth=$e,m.viewportHeight=Ze}v.dirty=!0,A.setVAO(null),s&&(t.cpuTime+=performance.now()-l)}}},"0313f92b852b73f25a96e0578ae69b31e2d4866f1f8cfd75345ecb3cf4ca66c6":function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G){var j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze;return j=e.gl,U=e.context,e.strings,Y=e.next,$=e.current,Z=e.draw,X=e.elements,e.buffer,Q=e.shader,J=e.attributes,K=e.vao,ee=e.uniforms,te=e.framebuffer,ne=e.extensions,e.timer,e.isBufferArgs,re=Y.blend_color,ie=$.blend_color,ae=Y.blend_equation,oe=$.blend_equation,se=Y.blend_func,le=$.blend_func,fe=Y.depth_range,ce=$.depth_range,ue=Y.colorMask,de=$.colorMask,he=Y.polygonOffset_offset,pe=$.polygonOffset_offset,be=Y.sample_coverage,me=$.sample_coverage,ge=Y.stencil_func,ve=$.stencil_func,_e=Y.stencil_opFront,ye=$.stencil_opFront,we=Y.stencil_opBack,xe=$.stencil_opBack,Ae=Y.scissor_box,Se=$.scissor_box,ke=Y.viewport,ze=$.viewport,{draw:function(e){var _,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,Q,ee,ae,se,Ae,ke,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt;(ne.angle_instanced_arrays,_=n.call(this,U,e,0),y=te.getFramebuffer(_),w=te.next,te.next=y,x=U.framebufferWidth,U.framebufferWidth=y?y.width:U.drawingBufferWidth,A=U.framebufferHeight,U.framebufferHeight=y?y.height:U.drawingBufferHeight,y!==te.cur&&(y?j.bindFramebuffer(36160,y.framebuffer):j.bindFramebuffer(36160,null),te.cur=y),$.dirty)&&((G=Y.dither)!==$.dither&&(G?j.enable(3024):j.disable(3024),$.dither=G),Q=re[0],ee=re[1],ae=re[2],se=re[3],Q===ie[0]&&ee===ie[1]&&ae===ie[2]&&se===ie[3]||(j.blendColor(Q,ee,ae,se),ie[0]=Q,ie[1]=ee,ie[2]=ae,ie[3]=se),(Ae=Y.depth_func)!==$.depth_func&&(j.depthFunc(Ae),$.depth_func=Ae),ke=fe[0],Fe=fe[1],ke===ce[0]&&Fe===ce[1]||(j.depthRange(ke,Fe),ce[0]=ke,ce[1]=Fe),Oe=ue[0],We=ue[1],Me=ue[2],Te=ue[3],Oe===de[0]&&We===de[1]&&Me===de[2]&&Te===de[3]||(j.colorMask(Oe,We,Me,Te),de[0]=Oe,de[1]=We,de[2]=Me,de[3]=Te),(Ee=Y.cull_enable)!==$.cull_enable&&(Ee?j.enable(2884):j.disable(2884),$.cull_enable=Ee),(Ce=Y.cull_face)!==$.cull_face&&(j.cullFace(Ce),$.cull_face=Ce),(He=Y.frontFace)!==$.frontFace&&(j.frontFace(He),$.frontFace=He),(Be=Y.lineWidth)!==$.lineWidth&&(j.lineWidth(Be),$.lineWidth=Be),(Ie=Y.polygonOffset_enable)!==$.polygonOffset_enable&&(Ie?j.enable(32823):j.disable(32823),$.polygonOffset_enable=Ie),Pe=he[0],Ne=he[1],Pe===pe[0]&&Ne===pe[1]||(j.polygonOffset(Pe,Ne),pe[0]=Pe,pe[1]=Ne),(De=Y.sample_alpha)!==$.sample_alpha&&(De?j.enable(32926):j.disable(32926),$.sample_alpha=De),(Ve=Y.sample_enable)!==$.sample_enable&&(Ve?j.enable(32928):j.disable(32928),$.sample_enable=Ve),Le=be[0],Re=be[1],Le===me[0]&&Re===me[1]||(j.sampleCoverage(Le,Re),me[0]=Le,me[1]=Re),(qe=Y.stencil_mask)!==$.stencil_mask&&(j.stencilMask(qe),$.stencil_mask=qe),Ge=ge[0],je=ge[1],Ue=ge[2],Ge===ve[0]&&je===ve[1]&&Ue===ve[2]||(j.stencilFunc(Ge,je,Ue),ve[0]=Ge,ve[1]=je,ve[2]=Ue),Ye=_e[0],$e=_e[1],Ze=_e[2],Xe=_e[3],Ye===ye[0]&&$e===ye[1]&&Ze===ye[2]&&Xe===ye[3]||(j.stencilOpSeparate(Ye,$e,Ze,Xe),ye[0]=Ye,ye[1]=$e,ye[2]=Ze,ye[3]=Xe),Qe=we[0],Je=we[1],Ke=we[2],et=we[3],Qe===xe[0]&&Je===xe[1]&&Ke===xe[2]&&et===xe[3]||(j.stencilOpSeparate(Qe,Je,Ke,et),xe[0]=Qe,xe[1]=Je,xe[2]=Ke,xe[3]=et),(tt=Y.scissor_enable)!==$.scissor_enable&&(tt?j.enable(3089):j.disable(3089),$.scissor_enable=tt));S=U.framebufferWidth,k=U.framebufferHeight,z=U.viewportWidth,U.viewportWidth=S,F=U.viewportHeight,U.viewportHeight=k,j.viewport(0,0,S,k),ze[0]=0,ze[1]=0,ze[2]=S,ze[3]=k,r?j.enable(3042):j.disable(3042),$.blend_enable=r,j.blendEquationSeparate(32774,32774),oe[0]=32774,oe[1]=32774,j.blendFuncSeparate(1,1,1,1),le[0]=1,le[1]=1,le[2]=1,le[3]=1,i?j.enable(2929):j.disable(2929),$.depth_enable=i,j.depthMask(a),$.depth_mask=a,O=U.framebufferWidth,W=U.framebufferHeight,j.scissor(0,0,O,W),Se[0]=0,Se[1]=0,Se[2]=O,Se[3]=W,o?j.enable(2960):j.disable(2960),$.stencil_enable=o,(M=$.profile)&&(T=performance.now(),t.count++),j.useProgram(s.program),E=ne.angle_instanced_arrays,K.setVAO(null),C=f.location,(H=J[C]).buffer||j.enableVertexAttribArray(C),5126===H.type&&2===H.size&&H.buffer===l&&!1===H.normalized&&0===H.offset&&0===H.stride||(j.bindBuffer(34962,l.buffer),j.vertexAttribPointer(C,2,5126,!1,0,0),H.type=5126,H.size=2,H.buffer=l,H.normalized=!1,H.offset=0,H.stride=0),0!==H.divisor&&(E.vertexAttribDivisorANGLE(C,0),H.divisor=0),B=u.call(this,U,e,0),j.uniform1f(c.location,B),I=h.call(this,U,e,0),j.uniform1f(d.location,I),P=b.call(this,U,e,0),j.uniform1f(p.location,P),(N=g.call(this,U,e,0))&&"framebuffer"===N._reglType&&(N=N.color[0]),D=N._texture,j.uniform1i(m.location,D.bind()),((V=Z.elements)||K.currentVAO&&(V=X.getElements(K.currentVAO.elements)))&&j.bindBuffer(34963,V.buffer.buffer),L=Z.offset,(R=v.call(this,U,e,0))&&((q=Z.instances)>0?V?E.drawElementsInstancedANGLE(0,R,V.type,L<<(V.type-5121>>1),q):E.drawArraysInstancedANGLE(0,L,R,q):q<0&&(V?j.drawElements(0,R,V.type,L<<(V.type-5121>>1)):j.drawArrays(0,L,R)),$.dirty=!0,K.setVAO(null),te.next=w,U.framebufferWidth=x,U.framebufferHeight=A,U.viewportWidth=z,U.viewportHeight=F,M&&(t.cpuTime+=performance.now()-T),D.unbind())},scope:function(e,r,i){var a,o,s,f,c,d,p,m,L,R,q,G,j,X,J,K,ne,re,ie,oe,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Se,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je;a=n.call(this,U,e,i),o=te.getFramebuffer(a),s=te.next,te.next=o,f=U.framebufferWidth,U.framebufferWidth=o?o.width:U.drawingBufferWidth,c=U.framebufferHeight,U.framebufferHeight=o?o.height:U.drawingBufferHeight,d=U.framebufferWidth,p=U.framebufferHeight,m=U.viewportWidth,U.viewportWidth=d,L=U.viewportHeight,U.viewportHeight=p,R=ke[0],ke[0]=_,q=ke[1],ke[1]=y,G=ke[2],ke[2]=d,j=ke[3],ke[3]=p,X=Y.blend_enable,Y.blend_enable=w,J=ae[0],ae[0]=x,K=ae[1],ae[1]=A,ne=se[0],se[0]=S,re=se[1],se[1]=k,ie=se[2],se[2]=z,oe=se[3],se[3]=F,le=Y.depth_enable,Y.depth_enable=O,fe=Y.depth_mask,Y.depth_mask=W,ce=U.framebufferWidth,ue=U.framebufferHeight,de=Ae[0],Ae[0]=M,he=Ae[1],Ae[1]=T,pe=Ae[2],Ae[2]=ce,be=Ae[3],Ae[3]=ue,me=Y.stencil_enable,Y.stencil_enable=E,(ge=$.profile)&&(ve=performance.now(),t.count++),_e=v.call(this,U,e,i),ye=Z.count,Z.count=_e,we=Z.primitive,Z.primitive=C,xe=g.call(this,U,e,i),Se=ee[H],ee[H]=xe,ze=b.call(this,U,e,i),Fe=ee[B],ee[B]=ze,Oe=h.call(this,U,e,i),We=ee[I],ee[I]=Oe,Me=u.call(this,U,e,i),Te=ee[P],ee[P]=Me,Ee=N.state,N.state=1,Ce=N.x,N.x=0,He=N.y,N.y=0,Be=N.z,N.z=0,Ie=N.w,N.w=0,Pe=N.buffer,N.buffer=l,Ne=N.size,N.size=2,De=N.normalized,N.normalized=!1,Ve=N.type,N.type=5126,Le=N.offset,N.offset=0,Re=N.stride,N.stride=0,qe=N.divisor,N.divisor=0,Ge=Q.vert,Q.vert=D,je=Q.frag,Q.frag=V,$.dirty=!0,r(U,e,i),te.next=s,U.framebufferWidth=f,U.framebufferHeight=c,U.viewportWidth=m,U.viewportHeight=L,ke[0]=R,ke[1]=q,ke[2]=G,ke[3]=j,Y.blend_enable=X,ae[0]=J,ae[1]=K,se[0]=ne,se[1]=re,se[2]=ie,se[3]=oe,Y.depth_enable=le,Y.depth_mask=fe,Ae[0]=de,Ae[1]=he,Ae[2]=pe,Ae[3]=be,Y.stencil_enable=me,ge&&(t.cpuTime+=performance.now()-ve),Z.count=ye,Z.primitive=we,ee[H]=Se,ee[B]=Fe,ee[I]=We,ee[P]=Te,N.state=Ee,N.x=Ce,N.y=He,N.z=Be,N.w=Ie,N.buffer=Pe,N.size=Ne,N.normalized=De,N.type=Ve,N.offset=Le,N.stride=Re,N.divisor=qe,Q.vert=Ge,Q.frag=je,$.dirty=!0},batch:function(e,r){var i,a,o,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,Q,ee,ae,se,Ae,ke,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je;(ne.angle_instanced_arrays,$.dirty)&&((w=Y.dither)!==$.dither&&(w?j.enable(3024):j.disable(3024),$.dither=w),x=re[0],A=re[1],S=re[2],k=re[3],x===ie[0]&&A===ie[1]&&S===ie[2]&&k===ie[3]||(j.blendColor(x,A,S,k),ie[0]=x,ie[1]=A,ie[2]=S,ie[3]=k),(z=Y.depth_func)!==$.depth_func&&(j.depthFunc(z),$.depth_func=z),F=fe[0],O=fe[1],F===ce[0]&&O===ce[1]||(j.depthRange(F,O),ce[0]=F,ce[1]=O),W=ue[0],M=ue[1],T=ue[2],E=ue[3],W===de[0]&&M===de[1]&&T===de[2]&&E===de[3]||(j.colorMask(W,M,T,E),de[0]=W,de[1]=M,de[2]=T,de[3]=E),(C=Y.cull_enable)!==$.cull_enable&&(C?j.enable(2884):j.disable(2884),$.cull_enable=C),(H=Y.cull_face)!==$.cull_face&&(j.cullFace(H),$.cull_face=H),(B=Y.frontFace)!==$.frontFace&&(j.frontFace(B),$.frontFace=B),(I=Y.lineWidth)!==$.lineWidth&&(j.lineWidth(I),$.lineWidth=I),(P=Y.polygonOffset_enable)!==$.polygonOffset_enable&&(P?j.enable(32823):j.disable(32823),$.polygonOffset_enable=P),N=he[0],D=he[1],N===pe[0]&&D===pe[1]||(j.polygonOffset(N,D),pe[0]=N,pe[1]=D),(V=Y.sample_alpha)!==$.sample_alpha&&(V?j.enable(32926):j.disable(32926),$.sample_alpha=V),(Q=Y.sample_enable)!==$.sample_enable&&(Q?j.enable(32928):j.disable(32928),$.sample_enable=Q),ee=be[0],ae=be[1],ee===me[0]&&ae===me[1]||(j.sampleCoverage(ee,ae),me[0]=ee,me[1]=ae),(se=Y.stencil_mask)!==$.stencil_mask&&(j.stencilMask(se),$.stencil_mask=se),Ae=ge[0],ke=ge[1],Fe=ge[2],Ae===ve[0]&&ke===ve[1]&&Fe===ve[2]||(j.stencilFunc(Ae,ke,Fe),ve[0]=Ae,ve[1]=ke,ve[2]=Fe),Oe=_e[0],We=_e[1],Me=_e[2],Te=_e[3],Oe===ye[0]&&We===ye[1]&&Me===ye[2]&&Te===ye[3]||(j.stencilOpSeparate(Oe,We,Me,Te),ye[0]=Oe,ye[1]=We,ye[2]=Me,ye[3]=Te),Ee=we[0],Ce=we[1],He=we[2],Be=we[3],Ee===xe[0]&&Ce===xe[1]&&He===xe[2]&&Be===xe[3]||(j.stencilOpSeparate(Ee,Ce,He,Be),xe[0]=Ee,xe[1]=Ce,xe[2]=He,xe[3]=Be),(Ie=Y.scissor_enable)!==$.scissor_enable&&(Ie?j.enable(3089):j.disable(3089),$.scissor_enable=Ie));for(L?j.enable(3042):j.disable(3042),$.blend_enable=L,j.blendEquationSeparate(32774,32774),oe[0]=32774,oe[1]=32774,j.blendFuncSeparate(1,1,1,1),le[0]=1,le[1]=1,le[2]=1,le[3]=1,R?j.enable(2929):j.disable(2929),$.depth_enable=R,j.depthMask(q),$.depth_mask=q,G?j.enable(2960):j.disable(2960),$.stencil_enable=G,(i=$.profile)&&(a=performance.now(),t.count+=r),j.useProgram(s.program),o=ne.angle_instanced_arrays,K.setVAO(null),Pe=f.location,(Ne=J[Pe]).buffer||j.enableVertexAttribArray(Pe),2,5126===Ne.type&&2===Ne.size&&Ne.buffer===l&&!1===Ne.normalized&&0===Ne.offset&&0===Ne.stride||(j.bindBuffer(34962,l.buffer),j.vertexAttribPointer(Pe,2,5126,!1,0,0),Ne.type=5126,Ne.size=2,Ne.buffer=l,Ne.normalized=!1,Ne.offset=0,Ne.stride=0),0!==Ne.divisor&&(o.vertexAttribDivisorANGLE(Pe,0),Ne.divisor=0),De=b.call(this,U,y,_),j.uniform1f(p.location,De),(Ve=g.call(this,U,y,_))&&"framebuffer"===Ve._reglType&&(Ve=Ve.color[0]),Le=Ve._texture,j.uniform1i(m.location,Le.bind()),((Re=Z.elements)||K.currentVAO&&(Re=X.getElements(K.currentVAO.elements)))&&j.bindBuffer(34963,Re.buffer.buffer),qe=Z.offset,Ge=v.call(this,U,y,_),je=Z.instances,_=0;_<r;++_){var Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot;y=e[_],Ue=n.call(this,U,y,_),Ye=te.getFramebuffer(Ue),$e=te.next,te.next=Ye,Ze=U.framebufferWidth,U.framebufferWidth=Ye?Ye.width:U.drawingBufferWidth,Xe=U.framebufferHeight,U.framebufferHeight=Ye?Ye.height:U.drawingBufferHeight,Ye!==te.cur&&(Ye?j.bindFramebuffer(36160,Ye.framebuffer):j.bindFramebuffer(36160,null),te.cur=Ye),Qe=U.framebufferWidth,Je=U.framebufferHeight,Ke=U.viewportWidth,U.viewportWidth=Qe,et=U.viewportHeight,U.viewportHeight=Je,j.viewport(0,0,Qe,Je),ze[0]=0,ze[1]=0,ze[2]=Qe,ze[3]=Je,tt=U.framebufferWidth,nt=U.framebufferHeight,j.scissor(0,0,tt,nt),Se[0]=0,Se[1]=0,Se[2]=tt,Se[3]=nt,rt=u.call(this,U,y,_),_&&it===rt||(it=rt,j.uniform1f(c.location,rt)),at=h.call(this,U,y,_),_&&ot===at||(ot=at,j.uniform1f(d.location,at)),Ge&&(je>0?Re?o.drawElementsInstancedANGLE(0,Ge,Re.type,qe<<(Re.type-5121>>1),je):o.drawArraysInstancedANGLE(0,qe,Ge,je):je<0&&(Re?j.drawElements(0,Ge,Re.type,qe<<(Re.type-5121>>1)):j.drawArrays(0,qe,Ge)),te.next=$e,U.framebufferWidth=Ze,U.framebufferHeight=Xe,U.viewportWidth=Ke,U.viewportHeight=et)}Le.unbind(),$.dirty=!0,K.setVAO(null),i&&(t.cpuTime+=performance.now()-a)}}},bcafcc30f5fd1e9f176e7deb4f9067870505d786fa0f2b66a991174be81e4f1a:function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie){var ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve;return ae=e.gl,oe=e.context,e.strings,se=e.next,le=e.current,fe=e.draw,ce=e.elements,e.buffer,ue=e.shader,de=e.attributes,he=e.vao,pe=e.uniforms,be=e.framebuffer,me=e.extensions,e.timer,e.isBufferArgs,ge=se.blend_color,ve=le.blend_color,_e=se.blend_equation,ye=le.blend_equation,we=se.blend_func,xe=le.blend_func,Ae=se.depth_range,Se=le.depth_range,ke=se.colorMask,ze=le.colorMask,Fe=se.polygonOffset_offset,Oe=le.polygonOffset_offset,We=se.sample_coverage,Me=le.sample_coverage,Te=se.stencil_func,Ee=le.stencil_func,Ce=se.stencil_opFront,He=le.stencil_opFront,Be=se.stencil_opBack,Ie=le.stencil_opBack,Pe=se.scissor_box,Ne=le.scissor_box,De=se.viewport,Ve=le.viewport,{draw:function(e){var F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ue,pe,_e,we,Pe,De,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft,ct,ut,dt,ht;(me.angle_instanced_arrays,F=n.call(this,oe,e,0),O=be.getFramebuffer(F),W=be.next,be.next=O,M=oe.framebufferWidth,oe.framebufferWidth=O?O.width:oe.drawingBufferWidth,T=oe.framebufferHeight,oe.framebufferHeight=O?O.height:oe.drawingBufferHeight,O!==be.cur&&(O?ae.bindFramebuffer(36160,O.framebuffer):ae.bindFramebuffer(36160,null),be.cur=O),le.dirty)&&((ne=se.dither)!==le.dither&&(ne?ae.enable(3024):ae.disable(3024),le.dither=ne),re=ge[0],ie=ge[1],ue=ge[2],pe=ge[3],re===ve[0]&&ie===ve[1]&&ue===ve[2]&&pe===ve[3]||(ae.blendColor(re,ie,ue,pe),ve[0]=re,ve[1]=ie,ve[2]=ue,ve[3]=pe),(_e=se.depth_func)!==le.depth_func&&(ae.depthFunc(_e),le.depth_func=_e),we=Ae[0],Pe=Ae[1],we===Se[0]&&Pe===Se[1]||(ae.depthRange(we,Pe),Se[0]=we,Se[1]=Pe),De=ke[0],Le=ke[1],Re=ke[2],qe=ke[3],De===ze[0]&&Le===ze[1]&&Re===ze[2]&&qe===ze[3]||(ae.colorMask(De,Le,Re,qe),ze[0]=De,ze[1]=Le,ze[2]=Re,ze[3]=qe),(Ge=se.cull_enable)!==le.cull_enable&&(Ge?ae.enable(2884):ae.disable(2884),le.cull_enable=Ge),(je=se.cull_face)!==le.cull_face&&(ae.cullFace(je),le.cull_face=je),(Ue=se.frontFace)!==le.frontFace&&(ae.frontFace(Ue),le.frontFace=Ue),(Ye=se.lineWidth)!==le.lineWidth&&(ae.lineWidth(Ye),le.lineWidth=Ye),($e=se.polygonOffset_enable)!==le.polygonOffset_enable&&($e?ae.enable(32823):ae.disable(32823),le.polygonOffset_enable=$e),Ze=Fe[0],Xe=Fe[1],Ze===Oe[0]&&Xe===Oe[1]||(ae.polygonOffset(Ze,Xe),Oe[0]=Ze,Oe[1]=Xe),(Qe=se.sample_alpha)!==le.sample_alpha&&(Qe?ae.enable(32926):ae.disable(32926),le.sample_alpha=Qe),(Je=se.sample_enable)!==le.sample_enable&&(Je?ae.enable(32928):ae.disable(32928),le.sample_enable=Je),Ke=We[0],et=We[1],Ke===Me[0]&&et===Me[1]||(ae.sampleCoverage(Ke,et),Me[0]=Ke,Me[1]=et),(tt=se.stencil_mask)!==le.stencil_mask&&(ae.stencilMask(tt),le.stencil_mask=tt),nt=Te[0],rt=Te[1],it=Te[2],nt===Ee[0]&&rt===Ee[1]&&it===Ee[2]||(ae.stencilFunc(nt,rt,it),Ee[0]=nt,Ee[1]=rt,Ee[2]=it),at=Ce[0],ot=Ce[1],st=Ce[2],lt=Ce[3],at===He[0]&&ot===He[1]&&st===He[2]&&lt===He[3]||(ae.stencilOpSeparate(at,ot,st,lt),He[0]=at,He[1]=ot,He[2]=st,He[3]=lt),ft=Be[0],ct=Be[1],ut=Be[2],dt=Be[3],ft===Ie[0]&&ct===Ie[1]&&ut===Ie[2]&&dt===Ie[3]||(ae.stencilOpSeparate(ft,ct,ut,dt),Ie[0]=ft,Ie[1]=ct,Ie[2]=ut,Ie[3]=dt),(ht=se.scissor_enable)!==le.scissor_enable&&(ht?ae.enable(3089):ae.disable(3089),le.scissor_enable=ht));E=oe.framebufferWidth,C=oe.framebufferHeight,H=oe.viewportWidth,oe.viewportWidth=E,B=oe.viewportHeight,oe.viewportHeight=C,ae.viewport(0,0,E,C),Ve[0]=0,Ve[1]=0,Ve[2]=E,Ve[3]=C,r?ae.enable(3042):ae.disable(3042),le.blend_enable=r,ae.blendEquationSeparate(32774,32774),ye[0]=32774,ye[1]=32774,ae.blendFuncSeparate(1,1,1,1),xe[0]=1,xe[1]=1,xe[2]=1,xe[3]=1,i?ae.enable(2929):ae.disable(2929),le.depth_enable=i,ae.depthMask(a),le.depth_mask=a,I=oe.framebufferWidth,P=oe.framebufferHeight,ae.scissor(0,0,I,P),Ne[0]=0,Ne[1]=0,Ne[2]=I,Ne[3]=P,o?ae.enable(2960):ae.disable(2960),le.stencil_enable=o,(N=le.profile)&&(D=performance.now(),t.count++),ae.useProgram(s.program),V=me.angle_instanced_arrays,he.setVAO(null),L=f.location,(R=de[L]).buffer||ae.enableVertexAttribArray(L),5126===R.type&&2===R.size&&R.buffer===l&&!1===R.normalized&&0===R.offset&&0===R.stride||(ae.bindBuffer(34962,l.buffer),ae.vertexAttribPointer(L,2,5126,!1,0,0),R.type=5126,R.size=2,R.buffer=l,R.normalized=!1,R.offset=0,R.stride=0),0!==R.divisor&&(V.vertexAttribDivisorANGLE(L,0),R.divisor=0),q=u.call(this,oe,e,0),ae.uniform1f(c.location,q),G=h.call(this,oe,e,0),ae.uniform1f(d.location,G),(j=b.call(this,oe,e,0))&&"framebuffer"===j._reglType&&(j=j.color[0]),U=j._texture,ae.uniform1i(p.location,U.bind()),Y=g.call(this,oe,e,0),ae.uniform1f(m.location,Y),ae.uniform1f(v.location,12),($=y.call(this,oe,e,0))&&"framebuffer"===$._reglType&&($=$.color[0]),Z=$._texture,ae.uniform1i(_.location,Z.bind()),X=x.call(this,oe,e,0),ae.uniform1f(w.location,X),Q=S.call(this,oe,e,0),ae.uniform1f(A.location,Q),J=z.call(this,oe,e,0),ae.uniform1f(k.location,J),((K=fe.elements)||he.currentVAO&&(K=ce.getElements(he.currentVAO.elements)))&&ae.bindBuffer(34963,K.buffer.buffer),ee=fe.offset,(te=fe.instances)>0?K?V.drawElementsInstancedANGLE(5,4,K.type,ee<<(K.type-5121>>1),te):V.drawArraysInstancedANGLE(5,ee,4,te):te<0&&(K?ae.drawElements(5,4,K.type,ee<<(K.type-5121>>1)):ae.drawArrays(5,ee,4)),le.dirty=!0,he.setVAO(null),be.next=W,oe.framebufferWidth=M,oe.framebufferHeight=T,oe.viewportWidth=H,oe.viewportHeight=B,N&&(t.cpuTime+=performance.now()-D),U.unbind(),Z.unbind()},scope:function(e,r,i){var a,o,s,f,c,d,p,m,v,_,w,A,k,te,ne,re,ie,ae,ce,de,he,me,ge,ve,ye,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Ne,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt;a=n.call(this,oe,e,i),o=be.getFramebuffer(a),s=be.next,be.next=o,f=oe.framebufferWidth,oe.framebufferWidth=o?o.width:oe.drawingBufferWidth,c=oe.framebufferHeight,oe.framebufferHeight=o?o.height:oe.drawingBufferHeight,d=oe.framebufferWidth,p=oe.framebufferHeight,m=oe.viewportWidth,oe.viewportWidth=d,v=oe.viewportHeight,oe.viewportHeight=p,_=De[0],De[0]=F,w=De[1],De[1]=O,A=De[2],De[2]=d,k=De[3],De[3]=p,te=se.blend_enable,se.blend_enable=W,ne=_e[0],_e[0]=M,re=_e[1],_e[1]=T,ie=we[0],we[0]=E,ae=we[1],we[1]=C,ce=we[2],we[2]=H,de=we[3],we[3]=B,he=se.depth_enable,se.depth_enable=I,me=se.depth_mask,se.depth_mask=P,ge=oe.framebufferWidth,ve=oe.framebufferHeight,ye=Pe[0],Pe[0]=N,xe=Pe[1],Pe[1]=D,Ae=Pe[2],Pe[2]=ge,Se=Pe[3],Pe[3]=ve,ke=se.stencil_enable,se.stencil_enable=V,(ze=le.profile)&&(Fe=performance.now(),t.count++),Oe=fe.count,fe.count=L,We=fe.primitive,fe.primitive=R,Me=pe[q],pe[q]=12,Te=y.call(this,oe,e,i),Ee=pe[G],pe[G]=Te,Ce=h.call(this,oe,e,i),He=pe[j],pe[j]=Ce,Be=b.call(this,oe,e,i),Ie=pe[U],pe[U]=Be,Ne=g.call(this,oe,e,i),Ve=pe[Y],pe[Y]=Ne,Le=u.call(this,oe,e,i),Re=pe[$],pe[$]=Le,qe=x.call(this,oe,e,i),Ge=pe[Z],pe[Z]=qe,je=S.call(this,oe,e,i),Ue=pe[X],pe[X]=je,Ye=z.call(this,oe,e,i),$e=pe[Q],pe[Q]=Ye,Ze=J.state,J.state=1,Xe=J.x,J.x=0,Qe=J.y,J.y=0,Je=J.z,J.z=0,Ke=J.w,J.w=0,et=J.buffer,J.buffer=l,tt=J.size,J.size=2,nt=J.normalized,J.normalized=!1,rt=J.type,J.type=5126,it=J.offset,J.offset=0,at=J.stride,J.stride=0,ot=J.divisor,J.divisor=0,st=ue.vert,ue.vert=K,lt=ue.frag,ue.frag=ee,le.dirty=!0,r(oe,e,i),be.next=s,oe.framebufferWidth=f,oe.framebufferHeight=c,oe.viewportWidth=m,oe.viewportHeight=v,De[0]=_,De[1]=w,De[2]=A,De[3]=k,se.blend_enable=te,_e[0]=ne,_e[1]=re,we[0]=ie,we[1]=ae,we[2]=ce,we[3]=de,se.depth_enable=he,se.depth_mask=me,Pe[0]=ye,Pe[1]=xe,Pe[2]=Ae,Pe[3]=Se,se.stencil_enable=ke,ze&&(t.cpuTime+=performance.now()-Fe),fe.count=Oe,fe.primitive=We,pe[q]=Me,pe[G]=Ee,pe[j]=He,pe[U]=Ie,pe[Y]=Ve,pe[$]=Re,pe[Z]=Ge,pe[X]=Ue,pe[Q]=$e,J.state=Ze,J.x=Xe,J.y=Qe,J.z=Je,J.w=Ke,J.buffer=et,J.size=tt,J.normalized=nt,J.type=rt,J.offset=it,J.stride=at,J.divisor=ot,ue.vert=st,ue.frag=lt,le.dirty=!0},batch:function(e,r){var i,a,o,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,ue,pe,_e,we,Pe,De,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft,ct,ut,dt;(me.angle_instanced_arrays,i=n.call(this,oe,e,0),a=be.getFramebuffer(i),o=be.next,be.next=a,F=oe.framebufferWidth,oe.framebufferWidth=a?a.width:oe.drawingBufferWidth,O=oe.framebufferHeight,oe.framebufferHeight=a?a.height:oe.drawingBufferHeight,a!==be.cur&&(a?ae.bindFramebuffer(36160,a.framebuffer):ae.bindFramebuffer(36160,null),be.cur=a),le.dirty)&&((V=se.dither)!==le.dither&&(V?ae.enable(3024):ae.disable(3024),le.dither=V),L=ge[0],R=ge[1],q=ge[2],G=ge[3],L===ve[0]&&R===ve[1]&&q===ve[2]&&G===ve[3]||(ae.blendColor(L,R,q,G),ve[0]=L,ve[1]=R,ve[2]=q,ve[3]=G),(j=se.depth_func)!==le.depth_func&&(ae.depthFunc(j),le.depth_func=j),U=Ae[0],Y=Ae[1],U===Se[0]&&Y===Se[1]||(ae.depthRange(U,Y),Se[0]=U,Se[1]=Y),$=ke[0],Z=ke[1],X=ke[2],Q=ke[3],$===ze[0]&&Z===ze[1]&&X===ze[2]&&Q===ze[3]||(ae.colorMask($,Z,X,Q),ze[0]=$,ze[1]=Z,ze[2]=X,ze[3]=Q),(J=se.cull_enable)!==le.cull_enable&&(J?ae.enable(2884):ae.disable(2884),le.cull_enable=J),(K=se.cull_face)!==le.cull_face&&(ae.cullFace(K),le.cull_face=K),(ee=se.frontFace)!==le.frontFace&&(ae.frontFace(ee),le.frontFace=ee),(ue=se.lineWidth)!==le.lineWidth&&(ae.lineWidth(ue),le.lineWidth=ue),(pe=se.polygonOffset_enable)!==le.polygonOffset_enable&&(pe?ae.enable(32823):ae.disable(32823),le.polygonOffset_enable=pe),_e=Fe[0],we=Fe[1],_e===Oe[0]&&we===Oe[1]||(ae.polygonOffset(_e,we),Oe[0]=_e,Oe[1]=we),(Pe=se.sample_alpha)!==le.sample_alpha&&(Pe?ae.enable(32926):ae.disable(32926),le.sample_alpha=Pe),(De=se.sample_enable)!==le.sample_enable&&(De?ae.enable(32928):ae.disable(32928),le.sample_enable=De),Le=We[0],Re=We[1],Le===Me[0]&&Re===Me[1]||(ae.sampleCoverage(Le,Re),Me[0]=Le,Me[1]=Re),(qe=se.stencil_mask)!==le.stencil_mask&&(ae.stencilMask(qe),le.stencil_mask=qe),Ge=Te[0],je=Te[1],Ue=Te[2],Ge===Ee[0]&&je===Ee[1]&&Ue===Ee[2]||(ae.stencilFunc(Ge,je,Ue),Ee[0]=Ge,Ee[1]=je,Ee[2]=Ue),Ye=Ce[0],$e=Ce[1],Ze=Ce[2],Xe=Ce[3],Ye===He[0]&&$e===He[1]&&Ze===He[2]&&Xe===He[3]||(ae.stencilOpSeparate(Ye,$e,Ze,Xe),He[0]=Ye,He[1]=$e,He[2]=Ze,He[3]=Xe),Qe=Be[0],Je=Be[1],Ke=Be[2],et=Be[3],Qe===Ie[0]&&Je===Ie[1]&&Ke===Ie[2]&&et===Ie[3]||(ae.stencilOpSeparate(Qe,Je,Ke,et),Ie[0]=Qe,Ie[1]=Je,Ie[2]=Ke,Ie[3]=et),(tt=se.scissor_enable)!==le.scissor_enable&&(tt?ae.enable(3089):ae.disable(3089),le.scissor_enable=tt));for(W=oe.framebufferWidth,M=oe.framebufferHeight,T=oe.viewportWidth,oe.viewportWidth=W,E=oe.viewportHeight,oe.viewportHeight=M,ae.viewport(0,0,W,M),Ve[0]=0,Ve[1]=0,Ve[2]=W,Ve[3]=M,te?ae.enable(3042):ae.disable(3042),le.blend_enable=te,ae.blendEquationSeparate(32774,32774),ye[0]=32774,ye[1]=32774,ae.blendFuncSeparate(1,1,1,1),xe[0]=1,xe[1]=1,xe[2]=1,xe[3]=1,ne?ae.enable(2929):ae.disable(2929),le.depth_enable=ne,ae.depthMask(re),le.depth_mask=re,C=oe.framebufferWidth,H=oe.framebufferHeight,ae.scissor(0,0,C,H),Ne[0]=0,Ne[1]=0,Ne[2]=C,Ne[3]=H,ie?ae.enable(2960):ae.disable(2960),le.stencil_enable=ie,(B=le.profile)&&(I=performance.now(),t.count+=r),ae.useProgram(s.program),P=me.angle_instanced_arrays,he.setVAO(null),nt=f.location,(rt=de[nt]).buffer||ae.enableVertexAttribArray(nt),2,5126===rt.type&&2===rt.size&&rt.buffer===l&&!1===rt.normalized&&0===rt.offset&&0===rt.stride||(ae.bindBuffer(34962,l.buffer),ae.vertexAttribPointer(nt,2,5126,!1,0,0),rt.type=5126,rt.size=2,rt.buffer=l,rt.normalized=!1,rt.offset=0,rt.stride=0),0!==rt.divisor&&(P.vertexAttribDivisorANGLE(nt,0),rt.divisor=0),it=u.call(this,oe,D,N),ae.uniform1f(c.location,it),ae.uniform1f(v.location,12),(at=y.call(this,oe,D,N))&&"framebuffer"===at._reglType&&(at=at.color[0]),ot=at._texture,ae.uniform1i(_.location,ot.bind()),st=x.call(this,oe,D,N),ae.uniform1f(w.location,st),lt=S.call(this,oe,D,N),ae.uniform1f(A.location,lt),ft=z.call(this,oe,D,N),ae.uniform1f(k.location,ft),((ct=fe.elements)||he.currentVAO&&(ct=ce.getElements(he.currentVAO.elements)))&&ae.bindBuffer(34963,ct.buffer.buffer),ut=fe.offset,dt=fe.instances,N=0;N<r;++N){var ht,pt,bt,mt,gt,vt;D=e[N],ht=h.call(this,oe,D,N),N&&pt===ht||(pt=ht,ae.uniform1f(d.location,ht)),(bt=b.call(this,oe,D,N))&&"framebuffer"===bt._reglType&&(bt=bt.color[0]),mt=bt._texture,ae.uniform1i(p.location,mt.bind()),gt=g.call(this,oe,D,N),N&&vt===gt||(vt=gt,ae.uniform1f(m.location,gt)),dt>0?ct?P.drawElementsInstancedANGLE(5,4,ct.type,ut<<(ct.type-5121>>1),dt):P.drawArraysInstancedANGLE(5,ut,4,dt):dt<0&&(ct?ae.drawElements(5,4,ct.type,ut<<(ct.type-5121>>1)):ae.drawArrays(5,ut,4)),mt.unbind()}ot.unbind(),le.dirty=!0,he.setVAO(null),be.next=o,oe.framebufferWidth=F,oe.framebufferHeight=O,oe.viewportWidth=T,oe.viewportHeight=E,B&&(t.cpuTime+=performance.now()-I)}}},"5164528162536a2d3935adfd876eb6915b6448abe41d002329c46590ce9a98e6":function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J){var K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He;return K=e.gl,ee=e.context,e.strings,te=e.next,ne=e.current,re=e.draw,ie=e.elements,e.buffer,ae=e.shader,oe=e.attributes,se=e.vao,le=e.uniforms,fe=e.framebuffer,ce=e.extensions,e.timer,e.isBufferArgs,ue=te.blend_color,de=ne.blend_color,he=te.blend_equation,pe=ne.blend_equation,be=te.blend_func,me=ne.blend_func,ge=te.depth_range,ve=ne.depth_range,_e=te.colorMask,ye=ne.colorMask,we=te.polygonOffset_offset,xe=ne.polygonOffset_offset,Ae=te.sample_coverage,Se=ne.sample_coverage,ke=te.stencil_func,ze=ne.stencil_func,Fe=te.stencil_opFront,Oe=ne.stencil_opFront,We=te.stencil_opBack,Me=ne.stencil_opBack,Te=te.scissor_box,Ee=ne.scissor_box,Ce=te.viewport,He=ne.viewport,{draw:function(e){var x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,ae,le,he,be,Te,Ce,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st;(ce.angle_instanced_arrays,x=n.call(this,ee,e,0),A=fe.getFramebuffer(x),S=fe.next,fe.next=A,k=ee.framebufferWidth,ee.framebufferWidth=A?A.width:ee.drawingBufferWidth,z=ee.framebufferHeight,ee.framebufferHeight=A?A.height:ee.drawingBufferHeight,A!==fe.cur&&(A?K.bindFramebuffer(36160,A.framebuffer):K.bindFramebuffer(36160,null),fe.cur=A),ne.dirty)&&((X=te.dither)!==ne.dither&&(X?K.enable(3024):K.disable(3024),ne.dither=X),Q=ue[0],J=ue[1],ae=ue[2],le=ue[3],Q===de[0]&&J===de[1]&&ae===de[2]&&le===de[3]||(K.blendColor(Q,J,ae,le),de[0]=Q,de[1]=J,de[2]=ae,de[3]=le),(he=te.depth_func)!==ne.depth_func&&(K.depthFunc(he),ne.depth_func=he),be=ge[0],Te=ge[1],be===ve[0]&&Te===ve[1]||(K.depthRange(be,Te),ve[0]=be,ve[1]=Te),Ce=_e[0],Be=_e[1],Ie=_e[2],Pe=_e[3],Ce===ye[0]&&Be===ye[1]&&Ie===ye[2]&&Pe===ye[3]||(K.colorMask(Ce,Be,Ie,Pe),ye[0]=Ce,ye[1]=Be,ye[2]=Ie,ye[3]=Pe),(Ne=te.cull_enable)!==ne.cull_enable&&(Ne?K.enable(2884):K.disable(2884),ne.cull_enable=Ne),(De=te.cull_face)!==ne.cull_face&&(K.cullFace(De),ne.cull_face=De),(Ve=te.frontFace)!==ne.frontFace&&(K.frontFace(Ve),ne.frontFace=Ve),(Le=te.lineWidth)!==ne.lineWidth&&(K.lineWidth(Le),ne.lineWidth=Le),(Re=te.polygonOffset_enable)!==ne.polygonOffset_enable&&(Re?K.enable(32823):K.disable(32823),ne.polygonOffset_enable=Re),qe=we[0],Ge=we[1],qe===xe[0]&&Ge===xe[1]||(K.polygonOffset(qe,Ge),xe[0]=qe,xe[1]=Ge),(je=te.sample_alpha)!==ne.sample_alpha&&(je?K.enable(32926):K.disable(32926),ne.sample_alpha=je),(Ue=te.sample_enable)!==ne.sample_enable&&(Ue?K.enable(32928):K.disable(32928),ne.sample_enable=Ue),Ye=Ae[0],$e=Ae[1],Ye===Se[0]&&$e===Se[1]||(K.sampleCoverage(Ye,$e),Se[0]=Ye,Se[1]=$e),(Ze=te.stencil_mask)!==ne.stencil_mask&&(K.stencilMask(Ze),ne.stencil_mask=Ze),Xe=ke[0],Qe=ke[1],Je=ke[2],Xe===ze[0]&&Qe===ze[1]&&Je===ze[2]||(K.stencilFunc(Xe,Qe,Je),ze[0]=Xe,ze[1]=Qe,ze[2]=Je),Ke=Fe[0],et=Fe[1],tt=Fe[2],nt=Fe[3],Ke===Oe[0]&&et===Oe[1]&&tt===Oe[2]&&nt===Oe[3]||(K.stencilOpSeparate(Ke,et,tt,nt),Oe[0]=Ke,Oe[1]=et,Oe[2]=tt,Oe[3]=nt),rt=We[0],it=We[1],at=We[2],ot=We[3],rt===Me[0]&&it===Me[1]&&at===Me[2]&&ot===Me[3]||(K.stencilOpSeparate(rt,it,at,ot),Me[0]=rt,Me[1]=it,Me[2]=at,Me[3]=ot),(st=te.scissor_enable)!==ne.scissor_enable&&(st?K.enable(3089):K.disable(3089),ne.scissor_enable=st));F=ee.framebufferWidth,O=ee.framebufferHeight,W=ee.viewportWidth,ee.viewportWidth=F,M=ee.viewportHeight,ee.viewportHeight=O,K.viewport(0,0,F,O),He[0]=0,He[1]=0,He[2]=F,He[3]=O,r?K.enable(3042):K.disable(3042),ne.blend_enable=r,K.blendEquationSeparate(32774,32774),pe[0]=32774,pe[1]=32774,K.blendFuncSeparate(1,1,1,1),me[0]=1,me[1]=1,me[2]=1,me[3]=1,i?K.enable(2929):K.disable(2929),ne.depth_enable=i,K.depthMask(a),ne.depth_mask=a,T=ee.framebufferWidth,E=ee.framebufferHeight,K.scissor(0,0,T,E),Ee[0]=0,Ee[1]=0,Ee[2]=T,Ee[3]=E,o?K.enable(2960):K.disable(2960),ne.stencil_enable=o,(C=ne.profile)&&(H=performance.now(),t.count++),K.useProgram(s.program),B=ce.angle_instanced_arrays,se.setVAO(null),I=f.location,(P=oe[I]).buffer||K.enableVertexAttribArray(I),5126===P.type&&2===P.size&&P.buffer===l&&!1===P.normalized&&0===P.offset&&0===P.stride||(K.bindBuffer(34962,l.buffer),K.vertexAttribPointer(I,2,5126,!1,0,0),P.type=5126,P.size=2,P.buffer=l,P.normalized=!1,P.offset=0,P.stride=0),0!==P.divisor&&(B.vertexAttribDivisorANGLE(I,0),P.divisor=0),N=u.call(this,ee,e,0),K.uniform1f(c.location,N),(D=h.call(this,ee,e,0))&&"framebuffer"===D._reglType&&(D=D.color[0]),V=D._texture,K.uniform1i(d.location,V.bind()),L=b.call(this,ee,e,0),K.uniform1f(p.location,L),(R=g.call(this,ee,e,0))&&"framebuffer"===R._reglType&&(R=R.color[0]),q=R._texture,K.uniform1i(m.location,q.bind()),(G=_.call(this,ee,e,0))&&"framebuffer"===G._reglType&&(G=G.color[0]),j=G._texture,K.uniform1i(v.location,j.bind()),U=w.call(this,ee,e,0),K.uniform1f(y.location,U),((Y=re.elements)||se.currentVAO&&(Y=ie.getElements(se.currentVAO.elements)))&&K.bindBuffer(34963,Y.buffer.buffer),$=re.offset,(Z=re.instances)>0?Y?B.drawElementsInstancedANGLE(5,4,Y.type,$<<(Y.type-5121>>1),Z):B.drawArraysInstancedANGLE(5,$,4,Z):Z<0&&(Y?K.drawElements(5,4,Y.type,$<<(Y.type-5121>>1)):K.drawArrays(5,$,4)),ne.dirty=!0,se.setVAO(null),fe.next=S,ee.framebufferWidth=k,ee.framebufferHeight=z,ee.viewportWidth=W,ee.viewportHeight=M,C&&(t.cpuTime+=performance.now()-H),V.unbind(),q.unbind(),j.unbind()},scope:function(e,r,i){var a,o,s,f,c,d,p,m,v,y,Z,X,Q,J,K,ie,oe,se,ce,ue,de,pe,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Ee,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt;a=n.call(this,ee,e,i),o=fe.getFramebuffer(a),s=fe.next,fe.next=o,f=ee.framebufferWidth,ee.framebufferWidth=o?o.width:ee.drawingBufferWidth,c=ee.framebufferHeight,ee.framebufferHeight=o?o.height:ee.drawingBufferHeight,d=ee.framebufferWidth,p=ee.framebufferHeight,m=ee.viewportWidth,ee.viewportWidth=d,v=ee.viewportHeight,ee.viewportHeight=p,y=Ce[0],Ce[0]=x,Z=Ce[1],Ce[1]=A,X=Ce[2],Ce[2]=d,Q=Ce[3],Ce[3]=p,J=te.blend_enable,te.blend_enable=S,K=he[0],he[0]=k,ie=he[1],he[1]=z,oe=be[0],be[0]=F,se=be[1],be[1]=O,ce=be[2],be[2]=W,ue=be[3],be[3]=M,de=te.depth_enable,te.depth_enable=T,pe=te.depth_mask,te.depth_mask=E,me=ee.framebufferWidth,ge=ee.framebufferHeight,ve=Te[0],Te[0]=C,_e=Te[1],Te[1]=H,ye=Te[2],Te[2]=me,we=Te[3],Te[3]=ge,xe=te.stencil_enable,te.stencil_enable=B,(Ae=ne.profile)&&(Se=performance.now(),t.count++),ke=re.count,re.count=I,ze=re.primitive,re.primitive=P,Fe=g.call(this,ee,e,i),Oe=le[N],le[N]=Fe,We=_.call(this,ee,e,i),Me=le[D],le[D]=We,Ee=h.call(this,ee,e,i),He=le[V],le[V]=Ee,Be=b.call(this,ee,e,i),Ie=le[L],le[L]=Be,Pe=u.call(this,ee,e,i),Ne=le[R],le[R]=Pe,De=w.call(this,ee,e,i),Ve=le[q],le[q]=De,Le=G.call(this,ee,e,i),Re=le[j],le[j]=Le,qe=U.state,U.state=1,Ge=U.x,U.x=0,je=U.y,U.y=0,Ue=U.z,U.z=0,Ye=U.w,U.w=0,$e=U.buffer,U.buffer=l,Ze=U.size,U.size=2,Xe=U.normalized,U.normalized=!1,Qe=U.type,U.type=5126,Je=U.offset,U.offset=0,Ke=U.stride,U.stride=0,et=U.divisor,U.divisor=0,tt=ae.vert,ae.vert=Y,nt=ae.frag,ae.frag=$,ne.dirty=!0,r(ee,e,i),fe.next=s,ee.framebufferWidth=f,ee.framebufferHeight=c,ee.viewportWidth=m,ee.viewportHeight=v,Ce[0]=y,Ce[1]=Z,Ce[2]=X,Ce[3]=Q,te.blend_enable=J,he[0]=K,he[1]=ie,be[0]=oe,be[1]=se,be[2]=ce,be[3]=ue,te.depth_enable=de,te.depth_mask=pe,Te[0]=ve,Te[1]=_e,Te[2]=ye,Te[3]=we,te.stencil_enable=xe,Ae&&(t.cpuTime+=performance.now()-Se),re.count=ke,re.primitive=ze,le[N]=Oe,le[D]=Me,le[V]=He,le[L]=Ie,le[R]=Ne,le[q]=Ve,le[j]=Re,U.state=qe,U.x=Ge,U.y=je,U.z=Ue,U.w=Ye,U.buffer=$e,U.size=Ze,U.normalized=Xe,U.type=Qe,U.offset=Je,U.stride=Ke,U.divisor=et,ae.vert=tt,ae.frag=nt,ne.dirty=!0},batch:function(e,r){var i,a,o,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,ae,le,he,be,Te,Ce,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st;(ce.angle_instanced_arrays,i=n.call(this,ee,e,0),a=fe.getFramebuffer(i),o=fe.next,fe.next=a,x=ee.framebufferWidth,ee.framebufferWidth=a?a.width:ee.drawingBufferWidth,A=ee.framebufferHeight,ee.framebufferHeight=a?a.height:ee.drawingBufferHeight,a!==fe.cur&&(a?K.bindFramebuffer(36160,a.framebuffer):K.bindFramebuffer(36160,null),fe.cur=a),ne.dirty)&&((B=te.dither)!==ne.dither&&(B?K.enable(3024):K.disable(3024),ne.dither=B),I=ue[0],P=ue[1],N=ue[2],D=ue[3],I===de[0]&&P===de[1]&&N===de[2]&&D===de[3]||(K.blendColor(I,P,N,D),de[0]=I,de[1]=P,de[2]=N,de[3]=D),(V=te.depth_func)!==ne.depth_func&&(K.depthFunc(V),ne.depth_func=V),L=ge[0],R=ge[1],L===ve[0]&&R===ve[1]||(K.depthRange(L,R),ve[0]=L,ve[1]=R),q=_e[0],G=_e[1],j=_e[2],U=_e[3],q===ye[0]&&G===ye[1]&&j===ye[2]&&U===ye[3]||(K.colorMask(q,G,j,U),ye[0]=q,ye[1]=G,ye[2]=j,ye[3]=U),(Y=te.cull_enable)!==ne.cull_enable&&(Y?K.enable(2884):K.disable(2884),ne.cull_enable=Y),($=te.cull_face)!==ne.cull_face&&(K.cullFace($),ne.cull_face=$),(ae=te.frontFace)!==ne.frontFace&&(K.frontFace(ae),ne.frontFace=ae),(le=te.lineWidth)!==ne.lineWidth&&(K.lineWidth(le),ne.lineWidth=le),(he=te.polygonOffset_enable)!==ne.polygonOffset_enable&&(he?K.enable(32823):K.disable(32823),ne.polygonOffset_enable=he),be=we[0],Te=we[1],be===xe[0]&&Te===xe[1]||(K.polygonOffset(be,Te),xe[0]=be,xe[1]=Te),(Ce=te.sample_alpha)!==ne.sample_alpha&&(Ce?K.enable(32926):K.disable(32926),ne.sample_alpha=Ce),(Be=te.sample_enable)!==ne.sample_enable&&(Be?K.enable(32928):K.disable(32928),ne.sample_enable=Be),Ie=Ae[0],Pe=Ae[1],Ie===Se[0]&&Pe===Se[1]||(K.sampleCoverage(Ie,Pe),Se[0]=Ie,Se[1]=Pe),(Ne=te.stencil_mask)!==ne.stencil_mask&&(K.stencilMask(Ne),ne.stencil_mask=Ne),De=ke[0],Ve=ke[1],Le=ke[2],De===ze[0]&&Ve===ze[1]&&Le===ze[2]||(K.stencilFunc(De,Ve,Le),ze[0]=De,ze[1]=Ve,ze[2]=Le),Re=Fe[0],qe=Fe[1],Ge=Fe[2],je=Fe[3],Re===Oe[0]&&qe===Oe[1]&&Ge===Oe[2]&&je===Oe[3]||(K.stencilOpSeparate(Re,qe,Ge,je),Oe[0]=Re,Oe[1]=qe,Oe[2]=Ge,Oe[3]=je),Ue=We[0],Ye=We[1],$e=We[2],Ze=We[3],Ue===Me[0]&&Ye===Me[1]&&$e===Me[2]&&Ze===Me[3]||(K.stencilOpSeparate(Ue,Ye,$e,Ze),Me[0]=Ue,Me[1]=Ye,Me[2]=$e,Me[3]=Ze),(Xe=te.scissor_enable)!==ne.scissor_enable&&(Xe?K.enable(3089):K.disable(3089),ne.scissor_enable=Xe));for(S=ee.framebufferWidth,k=ee.framebufferHeight,z=ee.viewportWidth,ee.viewportWidth=S,F=ee.viewportHeight,ee.viewportHeight=k,K.viewport(0,0,S,k),He[0]=0,He[1]=0,He[2]=S,He[3]=k,Z?K.enable(3042):K.disable(3042),ne.blend_enable=Z,K.blendEquationSeparate(32774,32774),pe[0]=32774,pe[1]=32774,K.blendFuncSeparate(1,1,1,1),me[0]=1,me[1]=1,me[2]=1,me[3]=1,X?K.enable(2929):K.disable(2929),ne.depth_enable=X,K.depthMask(Q),ne.depth_mask=Q,O=ee.framebufferWidth,W=ee.framebufferHeight,K.scissor(0,0,O,W),Ee[0]=0,Ee[1]=0,Ee[2]=O,Ee[3]=W,J?K.enable(2960):K.disable(2960),ne.stencil_enable=J,(M=ne.profile)&&(T=performance.now(),t.count+=r),K.useProgram(s.program),E=ce.angle_instanced_arrays,se.setVAO(null),Qe=f.location,(Je=oe[Qe]).buffer||K.enableVertexAttribArray(Qe),2,5126===Je.type&&2===Je.size&&Je.buffer===l&&!1===Je.normalized&&0===Je.offset&&0===Je.stride||(K.bindBuffer(34962,l.buffer),K.vertexAttribPointer(Qe,2,5126,!1,0,0),Je.type=5126,Je.size=2,Je.buffer=l,Je.normalized=!1,Je.offset=0,Je.stride=0),0!==Je.divisor&&(E.vertexAttribDivisorANGLE(Qe,0),Je.divisor=0),Ke=u.call(this,ee,H,C),K.uniform1f(c.location,Ke),(et=g.call(this,ee,H,C))&&"framebuffer"===et._reglType&&(et=et.color[0]),tt=et._texture,K.uniform1i(m.location,tt.bind()),(nt=_.call(this,ee,H,C))&&"framebuffer"===nt._reglType&&(nt=nt.color[0]),rt=nt._texture,K.uniform1i(v.location,rt.bind()),it=w.call(this,ee,H,C),K.uniform1f(y.location,it),((at=re.elements)||se.currentVAO&&(at=ie.getElements(se.currentVAO.elements)))&&K.bindBuffer(34963,at.buffer.buffer),ot=re.offset,st=re.instances,C=0;C<r;++C){var lt,ft,ct,ut;H=e[C],(lt=h.call(this,ee,H,C))&&"framebuffer"===lt._reglType&&(lt=lt.color[0]),ft=lt._texture,K.uniform1i(d.location,ft.bind()),ct=b.call(this,ee,H,C),C&&ut===ct||(ut=ct,K.uniform1f(p.location,ct)),st>0?at?E.drawElementsInstancedANGLE(5,4,at.type,ot<<(at.type-5121>>1),st):E.drawArraysInstancedANGLE(5,ot,4,st):st<0&&(at?K.drawElements(5,4,at.type,ot<<(at.type-5121>>1)):K.drawArrays(5,ot,4)),ft.unbind()}tt.unbind(),rt.unbind(),ne.dirty=!0,se.setVAO(null),fe.next=o,ee.framebufferWidth=x,ee.framebufferHeight=A,ee.viewportWidth=z,ee.viewportHeight=F,M&&(t.cpuTime+=performance.now()-T)}}},"4c49c9fbc540a4c73ceaba3ffddb6429d780830bc23a82ffeb3dbfe550c35fdb":function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N){var D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye;return D=e.gl,V=e.context,e.strings,L=e.next,R=e.current,q=e.draw,G=e.elements,e.buffer,j=e.shader,U=e.attributes,Y=e.vao,$=e.uniforms,Z=e.framebuffer,X=e.extensions,e.timer,e.isBufferArgs,Q=L.blend_color,J=R.blend_color,K=L.blend_equation,ee=R.blend_equation,te=L.blend_func,ne=R.blend_func,re=L.depth_range,ie=R.depth_range,ae=L.colorMask,oe=R.colorMask,se=L.polygonOffset_offset,le=R.polygonOffset_offset,fe=L.sample_coverage,ce=R.sample_coverage,ue=L.stencil_func,de=R.stencil_func,he=L.stencil_opFront,pe=R.stencil_opFront,be=L.stencil_opBack,me=R.stencil_opBack,ge=L.scissor_box,ve=R.scissor_box,_e=L.viewport,ye=R.viewport,{draw:function(e){var b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,j,$,K,te,ge,_e,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze;(X.angle_instanced_arrays,b=n.call(this,V,e,0),m=Z.getFramebuffer(b),g=Z.next,Z.next=m,v=V.framebufferWidth,V.framebufferWidth=m?m.width:V.drawingBufferWidth,_=V.framebufferHeight,V.framebufferHeight=m?m.height:V.drawingBufferHeight,m!==Z.cur&&(m?D.bindFramebuffer(36160,m.framebuffer):D.bindFramebuffer(36160,null),Z.cur=m),R.dirty)&&((N=L.dither)!==R.dither&&(N?D.enable(3024):D.disable(3024),R.dither=N),j=Q[0],$=Q[1],K=Q[2],te=Q[3],j===J[0]&&$===J[1]&&K===J[2]&&te===J[3]||(D.blendColor(j,$,K,te),J[0]=j,J[1]=$,J[2]=K,J[3]=te),(ge=L.depth_func)!==R.depth_func&&(D.depthFunc(ge),R.depth_func=ge),_e=re[0],we=re[1],_e===ie[0]&&we===ie[1]||(D.depthRange(_e,we),ie[0]=_e,ie[1]=we),xe=ae[0],Ae=ae[1],Se=ae[2],ke=ae[3],xe===oe[0]&&Ae===oe[1]&&Se===oe[2]&&ke===oe[3]||(D.colorMask(xe,Ae,Se,ke),oe[0]=xe,oe[1]=Ae,oe[2]=Se,oe[3]=ke),(ze=L.cull_enable)!==R.cull_enable&&(ze?D.enable(2884):D.disable(2884),R.cull_enable=ze),(Fe=L.cull_face)!==R.cull_face&&(D.cullFace(Fe),R.cull_face=Fe),(Oe=L.frontFace)!==R.frontFace&&(D.frontFace(Oe),R.frontFace=Oe),(We=L.lineWidth)!==R.lineWidth&&(D.lineWidth(We),R.lineWidth=We),(Me=L.polygonOffset_enable)!==R.polygonOffset_enable&&(Me?D.enable(32823):D.disable(32823),R.polygonOffset_enable=Me),Te=se[0],Ee=se[1],Te===le[0]&&Ee===le[1]||(D.polygonOffset(Te,Ee),le[0]=Te,le[1]=Ee),(Ce=L.sample_alpha)!==R.sample_alpha&&(Ce?D.enable(32926):D.disable(32926),R.sample_alpha=Ce),(He=L.sample_enable)!==R.sample_enable&&(He?D.enable(32928):D.disable(32928),R.sample_enable=He),Be=fe[0],Ie=fe[1],Be===ce[0]&&Ie===ce[1]||(D.sampleCoverage(Be,Ie),ce[0]=Be,ce[1]=Ie),(Pe=L.stencil_mask)!==R.stencil_mask&&(D.stencilMask(Pe),R.stencil_mask=Pe),Ne=ue[0],De=ue[1],Ve=ue[2],Ne===de[0]&&De===de[1]&&Ve===de[2]||(D.stencilFunc(Ne,De,Ve),de[0]=Ne,de[1]=De,de[2]=Ve),Le=he[0],Re=he[1],qe=he[2],Ge=he[3],Le===pe[0]&&Re===pe[1]&&qe===pe[2]&&Ge===pe[3]||(D.stencilOpSeparate(Le,Re,qe,Ge),pe[0]=Le,pe[1]=Re,pe[2]=qe,pe[3]=Ge),je=be[0],Ue=be[1],Ye=be[2],$e=be[3],je===me[0]&&Ue===me[1]&&Ye===me[2]&&$e===me[3]||(D.stencilOpSeparate(je,Ue,Ye,$e),me[0]=je,me[1]=Ue,me[2]=Ye,me[3]=$e),(Ze=L.scissor_enable)!==R.scissor_enable&&(Ze?D.enable(3089):D.disable(3089),R.scissor_enable=Ze));y=V.framebufferWidth,w=V.framebufferHeight,x=V.viewportWidth,V.viewportWidth=y,A=V.viewportHeight,V.viewportHeight=w,D.viewport(0,0,y,w),ye[0]=0,ye[1]=0,ye[2]=y,ye[3]=w,r?D.enable(3042):D.disable(3042),R.blend_enable=r,D.blendEquationSeparate(32774,32774),ee[0]=32774,ee[1]=32774,D.blendFuncSeparate(1,1,1,1),ne[0]=1,ne[1]=1,ne[2]=1,ne[3]=1,i?D.enable(2929):D.disable(2929),R.depth_enable=i,D.depthMask(a),R.depth_mask=a,S=V.framebufferWidth,k=V.framebufferHeight,D.scissor(0,0,S,k),ve[0]=0,ve[1]=0,ve[2]=S,ve[3]=k,o?D.enable(2960):D.disable(2960),R.stencil_enable=o,(z=R.profile)&&(F=performance.now(),t.count++),D.useProgram(s.program),O=X.angle_instanced_arrays,Y.setVAO(null),W=f.location,(M=U[W]).buffer||D.enableVertexAttribArray(W),5126===M.type&&2===M.size&&M.buffer===l&&!1===M.normalized&&0===M.offset&&0===M.stride||(D.bindBuffer(34962,l.buffer),D.vertexAttribPointer(W,2,5126,!1,0,0),M.type=5126,M.size=2,M.buffer=l,M.normalized=!1,M.offset=0,M.stride=0),0!==M.divisor&&(O.vertexAttribDivisorANGLE(W,0),M.divisor=0),T=u.call(this,V,e,0),D.uniform1f(c.location,T),(E=h.call(this,V,e,0))&&"framebuffer"===E._reglType&&(E=E.color[0]),C=E._texture,D.uniform1i(d.location,C.bind()),((H=q.elements)||Y.currentVAO&&(H=G.getElements(Y.currentVAO.elements)))&&D.bindBuffer(34963,H.buffer.buffer),B=q.offset,(I=p.call(this,V,e,0))&&((P=q.instances)>0?H?O.drawElementsInstancedANGLE(0,I,H.type,B<<(H.type-5121>>1),P):O.drawArraysInstancedANGLE(0,B,I,P):P<0&&(H?D.drawElements(0,I,H.type,B<<(H.type-5121>>1)):D.drawArrays(0,B,I)),R.dirty=!0,Y.setVAO(null),Z.next=g,V.framebufferWidth=v,V.framebufferHeight=_,V.viewportWidth=x,V.viewportHeight=A,z&&(t.cpuTime+=performance.now()-F),C.unbind())},scope:function(e,r,i){var a,o,s,f,c,d,B,I,P,N,D,G,U,Y,X,Q,J,ee,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ve,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe;a=n.call(this,V,e,i),o=Z.getFramebuffer(a),s=Z.next,Z.next=o,f=V.framebufferWidth,V.framebufferWidth=o?o.width:V.drawingBufferWidth,c=V.framebufferHeight,V.framebufferHeight=o?o.height:V.drawingBufferHeight,d=V.framebufferWidth,B=V.framebufferHeight,I=V.viewportWidth,V.viewportWidth=d,P=V.viewportHeight,V.viewportHeight=B,N=_e[0],_e[0]=b,D=_e[1],_e[1]=m,G=_e[2],_e[2]=d,U=_e[3],_e[3]=B,Y=L.blend_enable,L.blend_enable=g,X=K[0],K[0]=v,Q=K[1],K[1]=_,J=te[0],te[0]=y,ee=te[1],te[1]=w,ne=te[2],te[2]=x,re=te[3],te[3]=A,ie=L.depth_enable,L.depth_enable=S,ae=L.depth_mask,L.depth_mask=k,oe=V.framebufferWidth,se=V.framebufferHeight,le=ge[0],ge[0]=z,fe=ge[1],ge[1]=F,ce=ge[2],ge[2]=oe,ue=ge[3],ge[3]=se,de=L.stencil_enable,L.stencil_enable=O,(he=R.profile)&&(pe=performance.now(),t.count++),be=p.call(this,V,e,i),me=q.count,q.count=be,ve=q.primitive,q.primitive=W,ye=h.call(this,V,e,i),we=$[M],$[M]=ye,xe=u.call(this,V,e,i),Ae=$[T],$[T]=xe,Se=E.state,E.state=1,ke=E.x,E.x=0,ze=E.y,E.y=0,Fe=E.z,E.z=0,Oe=E.w,E.w=0,We=E.buffer,E.buffer=l,Me=E.size,E.size=2,Te=E.normalized,E.normalized=!1,Ee=E.type,E.type=5126,Ce=E.offset,E.offset=0,He=E.stride,E.stride=0,Be=E.divisor,E.divisor=0,Ie=j.vert,j.vert=C,Pe=j.frag,j.frag=H,R.dirty=!0,r(V,e,i),Z.next=s,V.framebufferWidth=f,V.framebufferHeight=c,V.viewportWidth=I,V.viewportHeight=P,_e[0]=N,_e[1]=D,_e[2]=G,_e[3]=U,L.blend_enable=Y,K[0]=X,K[1]=Q,te[0]=J,te[1]=ee,te[2]=ne,te[3]=re,L.depth_enable=ie,L.depth_mask=ae,ge[0]=le,ge[1]=fe,ge[2]=ce,ge[3]=ue,L.stencil_enable=de,he&&(t.cpuTime+=performance.now()-pe),q.count=me,q.primitive=ve,$[M]=we,$[T]=Ae,E.state=Se,E.x=ke,E.y=ze,E.z=Fe,E.w=Oe,E.buffer=We,E.size=Me,E.normalized=Te,E.type=Ee,E.offset=Ce,E.stride=He,E.divisor=Be,j.vert=Ie,j.frag=Pe,R.dirty=!0},batch:function(e,r){var i,a,o,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,j,$,K,te,ge,_e,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je;(X.angle_instanced_arrays,i=n.call(this,V,e,0),a=Z.getFramebuffer(i),o=Z.next,Z.next=a,b=V.framebufferWidth,V.framebufferWidth=a?a.width:V.drawingBufferWidth,m=V.framebufferHeight,V.framebufferHeight=a?a.height:V.drawingBufferHeight,a!==Z.cur&&(a?D.bindFramebuffer(36160,a.framebuffer):D.bindFramebuffer(36160,null),Z.cur=a),R.dirty)&&((O=L.dither)!==R.dither&&(O?D.enable(3024):D.disable(3024),R.dither=O),W=Q[0],M=Q[1],T=Q[2],E=Q[3],W===J[0]&&M===J[1]&&T===J[2]&&E===J[3]||(D.blendColor(W,M,T,E),J[0]=W,J[1]=M,J[2]=T,J[3]=E),(C=L.depth_func)!==R.depth_func&&(D.depthFunc(C),R.depth_func=C),H=re[0],j=re[1],H===ie[0]&&j===ie[1]||(D.depthRange(H,j),ie[0]=H,ie[1]=j),$=ae[0],K=ae[1],te=ae[2],ge=ae[3],$===oe[0]&&K===oe[1]&&te===oe[2]&&ge===oe[3]||(D.colorMask($,K,te,ge),oe[0]=$,oe[1]=K,oe[2]=te,oe[3]=ge),(_e=L.cull_enable)!==R.cull_enable&&(_e?D.enable(2884):D.disable(2884),R.cull_enable=_e),(we=L.cull_face)!==R.cull_face&&(D.cullFace(we),R.cull_face=we),(xe=L.frontFace)!==R.frontFace&&(D.frontFace(xe),R.frontFace=xe),(Ae=L.lineWidth)!==R.lineWidth&&(D.lineWidth(Ae),R.lineWidth=Ae),(Se=L.polygonOffset_enable)!==R.polygonOffset_enable&&(Se?D.enable(32823):D.disable(32823),R.polygonOffset_enable=Se),ke=se[0],ze=se[1],ke===le[0]&&ze===le[1]||(D.polygonOffset(ke,ze),le[0]=ke,le[1]=ze),(Fe=L.sample_alpha)!==R.sample_alpha&&(Fe?D.enable(32926):D.disable(32926),R.sample_alpha=Fe),(Oe=L.sample_enable)!==R.sample_enable&&(Oe?D.enable(32928):D.disable(32928),R.sample_enable=Oe),We=fe[0],Me=fe[1],We===ce[0]&&Me===ce[1]||(D.sampleCoverage(We,Me),ce[0]=We,ce[1]=Me),(Te=L.stencil_mask)!==R.stencil_mask&&(D.stencilMask(Te),R.stencil_mask=Te),Ee=ue[0],Ce=ue[1],He=ue[2],Ee===de[0]&&Ce===de[1]&&He===de[2]||(D.stencilFunc(Ee,Ce,He),de[0]=Ee,de[1]=Ce,de[2]=He),Be=he[0],Ie=he[1],Pe=he[2],Ne=he[3],Be===pe[0]&&Ie===pe[1]&&Pe===pe[2]&&Ne===pe[3]||(D.stencilOpSeparate(Be,Ie,Pe,Ne),pe[0]=Be,pe[1]=Ie,pe[2]=Pe,pe[3]=Ne),De=be[0],Ve=be[1],Le=be[2],Re=be[3],De===me[0]&&Ve===me[1]&&Le===me[2]&&Re===me[3]||(D.stencilOpSeparate(De,Ve,Le,Re),me[0]=De,me[1]=Ve,me[2]=Le,me[3]=Re),(qe=L.scissor_enable)!==R.scissor_enable&&(qe?D.enable(3089):D.disable(3089),R.scissor_enable=qe));for(g=V.framebufferWidth,v=V.framebufferHeight,_=V.viewportWidth,V.viewportWidth=g,y=V.viewportHeight,V.viewportHeight=v,D.viewport(0,0,g,v),ye[0]=0,ye[1]=0,ye[2]=g,ye[3]=v,B?D.enable(3042):D.disable(3042),R.blend_enable=B,D.blendEquationSeparate(32774,32774),ee[0]=32774,ee[1]=32774,D.blendFuncSeparate(1,1,1,1),ne[0]=1,ne[1]=1,ne[2]=1,ne[3]=1,I?D.enable(2929):D.disable(2929),R.depth_enable=I,D.depthMask(P),R.depth_mask=P,w=V.framebufferWidth,x=V.framebufferHeight,D.scissor(0,0,w,x),ve[0]=0,ve[1]=0,ve[2]=w,ve[3]=x,N?D.enable(2960):D.disable(2960),R.stencil_enable=N,(A=R.profile)&&(S=performance.now(),t.count+=r),D.useProgram(s.program),k=X.angle_instanced_arrays,Y.setVAO(null),Ge=f.location,(je=U[Ge]).buffer||D.enableVertexAttribArray(Ge),2,5126===je.type&&2===je.size&&je.buffer===l&&!1===je.normalized&&0===je.offset&&0===je.stride||(D.bindBuffer(34962,l.buffer),D.vertexAttribPointer(Ge,2,5126,!1,0,0),je.type=5126,je.size=2,je.buffer=l,je.normalized=!1,je.offset=0,je.stride=0),0!==je.divisor&&(k.vertexAttribDivisorANGLE(Ge,0),je.divisor=0),Ue=u.call(this,V,F,z),D.uniform1f(c.location,Ue),(Ye=h.call(this,V,F,z))&&"framebuffer"===Ye._reglType&&(Ye=Ye.color[0]),$e=Ye._texture,D.uniform1i(d.location,$e.bind()),((Ze=q.elements)||Y.currentVAO&&(Ze=G.getElements(Y.currentVAO.elements)))&&D.bindBuffer(34963,Ze.buffer.buffer),Xe=q.offset,Qe=p.call(this,V,F,z),Je=q.instances,z=0;z<r;++z)F=e[z],Qe&&(Je>0?Ze?k.drawElementsInstancedANGLE(0,Qe,Ze.type,Xe<<(Ze.type-5121>>1),Je):k.drawArraysInstancedANGLE(0,Xe,Qe,Je):Je<0&&(Ze?D.drawElements(0,Qe,Ze.type,Xe<<(Ze.type-5121>>1)):D.drawArrays(0,Xe,Qe)));$e.unbind(),R.dirty=!0,Y.setVAO(null),Z.next=o,V.framebufferWidth=b,V.framebufferHeight=m,V.viewportWidth=_,V.viewportHeight=y,A&&(t.cpuTime+=performance.now()-S)}}},"21f35e0b5f6b6b998967928bf1cb4872a9803004bf6455ca860fe126500cf347":function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z){var F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le;return F=e.gl,O=e.context,e.strings,W=e.next,M=e.current,T=e.draw,E=e.elements,e.buffer,C=e.shader,H=e.attributes,B=e.vao,I=e.uniforms,P=e.framebuffer,N=e.extensions,e.timer,e.isBufferArgs,D=W.blend_color,V=M.blend_color,L=W.blend_equation,R=M.blend_equation,q=W.blend_func,G=M.blend_func,j=W.depth_range,U=M.depth_range,Y=W.colorMask,$=M.colorMask,Z=W.polygonOffset_offset,X=M.polygonOffset_offset,Q=W.sample_coverage,J=M.sample_coverage,K=W.stencil_func,ee=M.stencil_func,te=W.stencil_opFront,ne=M.stencil_opFront,re=W.stencil_opBack,ie=M.stencil_opBack,ae=W.scissor_box,oe=M.scissor_box,se=W.viewport,le=M.viewport,{draw:function(e){var p,b,m,g,v,_,y,w,x,A,S,k,z,C,I,ae,se,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt;(N.angle_instanced_arrays,p=n.call(this,O,e,0),b=P.getFramebuffer(p),m=P.next,P.next=b,g=O.framebufferWidth,O.framebufferWidth=b?b.width:O.drawingBufferWidth,v=O.framebufferHeight,O.framebufferHeight=b?b.height:O.drawingBufferHeight,b!==P.cur&&(b?F.bindFramebuffer(36160,b.framebuffer):F.bindFramebuffer(36160,null),P.cur=b),M.dirty)&&((ge=W.dither)!==M.dither&&(ge?F.enable(3024):F.disable(3024),M.dither=ge),(ve=W.blend_enable)!==M.blend_enable&&(ve?F.enable(3042):F.disable(3042),M.blend_enable=ve),_e=D[0],ye=D[1],we=D[2],xe=D[3],_e===V[0]&&ye===V[1]&&we===V[2]&&xe===V[3]||(F.blendColor(_e,ye,we,xe),V[0]=_e,V[1]=ye,V[2]=we,V[3]=xe),Ae=L[0],Se=L[1],Ae===R[0]&&Se===R[1]||(F.blendEquationSeparate(Ae,Se),R[0]=Ae,R[1]=Se),ke=q[0],ze=q[1],Fe=q[2],Oe=q[3],ke===G[0]&&ze===G[1]&&Fe===G[2]&&Oe===G[3]||(F.blendFuncSeparate(ke,ze,Fe,Oe),G[0]=ke,G[1]=ze,G[2]=Fe,G[3]=Oe),(We=W.depth_enable)!==M.depth_enable&&(We?F.enable(2929):F.disable(2929),M.depth_enable=We),(Me=W.depth_func)!==M.depth_func&&(F.depthFunc(Me),M.depth_func=Me),Te=j[0],Ee=j[1],Te===U[0]&&Ee===U[1]||(F.depthRange(Te,Ee),U[0]=Te,U[1]=Ee),(Ce=W.depth_mask)!==M.depth_mask&&(F.depthMask(Ce),M.depth_mask=Ce),He=Y[0],Be=Y[1],Ie=Y[2],Pe=Y[3],He===$[0]&&Be===$[1]&&Ie===$[2]&&Pe===$[3]||(F.colorMask(He,Be,Ie,Pe),$[0]=He,$[1]=Be,$[2]=Ie,$[3]=Pe),(Ne=W.cull_enable)!==M.cull_enable&&(Ne?F.enable(2884):F.disable(2884),M.cull_enable=Ne),(De=W.cull_face)!==M.cull_face&&(F.cullFace(De),M.cull_face=De),(Ve=W.frontFace)!==M.frontFace&&(F.frontFace(Ve),M.frontFace=Ve),(Le=W.lineWidth)!==M.lineWidth&&(F.lineWidth(Le),M.lineWidth=Le),(Re=W.polygonOffset_enable)!==M.polygonOffset_enable&&(Re?F.enable(32823):F.disable(32823),M.polygonOffset_enable=Re),qe=Z[0],Ge=Z[1],qe===X[0]&&Ge===X[1]||(F.polygonOffset(qe,Ge),X[0]=qe,X[1]=Ge),(je=W.sample_alpha)!==M.sample_alpha&&(je?F.enable(32926):F.disable(32926),M.sample_alpha=je),(Ue=W.sample_enable)!==M.sample_enable&&(Ue?F.enable(32928):F.disable(32928),M.sample_enable=Ue),Ye=Q[0],$e=Q[1],Ye===J[0]&&$e===J[1]||(F.sampleCoverage(Ye,$e),J[0]=Ye,J[1]=$e),(Ze=W.stencil_enable)!==M.stencil_enable&&(Ze?F.enable(2960):F.disable(2960),M.stencil_enable=Ze),(Xe=W.stencil_mask)!==M.stencil_mask&&(F.stencilMask(Xe),M.stencil_mask=Xe),Qe=K[0],Je=K[1],Ke=K[2],Qe===ee[0]&&Je===ee[1]&&Ke===ee[2]||(F.stencilFunc(Qe,Je,Ke),ee[0]=Qe,ee[1]=Je,ee[2]=Ke),et=te[0],tt=te[1],nt=te[2],rt=te[3],et===ne[0]&&tt===ne[1]&&nt===ne[2]&&rt===ne[3]||(F.stencilOpSeparate(et,tt,nt,rt),ne[0]=et,ne[1]=tt,ne[2]=nt,ne[3]=rt),it=re[0],at=re[1],ot=re[2],st=re[3],it===ie[0]&&at===ie[1]&&ot===ie[2]&&st===ie[3]||(F.stencilOpSeparate(it,at,ot,st),ie[0]=it,ie[1]=at,ie[2]=ot,ie[3]=st),(lt=W.scissor_enable)!==M.scissor_enable&&(lt?F.enable(3089):F.disable(3089),M.scissor_enable=lt));_=O.framebufferWidth,y=O.framebufferHeight,w=O.viewportWidth,O.viewportWidth=_,x=O.viewportHeight,O.viewportHeight=y,F.viewport(0,0,_,y),le[0]=0,le[1]=0,le[2]=_,le[3]=y,A=O.framebufferWidth,S=O.framebufferHeight,F.scissor(0,0,A,S),oe[0]=0,oe[1]=0,oe[2]=A,oe[3]=S,(k=M.profile)&&(z=performance.now(),t.count++),F.useProgram(r.program),C=N.angle_instanced_arrays,B.setVAO(null),I=a.location,(ae=H[I]).buffer||F.enableVertexAttribArray(I),5126===ae.type&&2===ae.size&&ae.buffer===i&&!1===ae.normalized&&0===ae.offset&&0===ae.stride||(F.bindBuffer(34962,i.buffer),F.vertexAttribPointer(I,2,5126,!1,0,0),ae.type=5126,ae.size=2,ae.buffer=i,ae.normalized=!1,ae.offset=0,ae.stride=0),0!==ae.divisor&&(C.vertexAttribDivisorANGLE(I,0),ae.divisor=0),se=s.call(this,O,e,0),F.uniform1f(o.location,se),fe=f.call(this,O,e,0),F.uniform1f(l.location,fe),(ce=u.call(this,O,e,0))&&"framebuffer"===ce._reglType&&(ce=ce.color[0]),ue=ce._texture,F.uniform1i(c.location,ue.bind()),(de=h.call(this,O,e,0))&&"framebuffer"===de._reglType&&(de=de.color[0]),he=de._texture,F.uniform1i(d.location,he.bind()),((pe=T.elements)||B.currentVAO&&(pe=E.getElements(B.currentVAO.elements)))&&F.bindBuffer(34963,pe.buffer.buffer),be=T.offset,(me=T.instances)>0?pe?C.drawElementsInstancedANGLE(5,4,pe.type,be<<(pe.type-5121>>1),me):C.drawArraysInstancedANGLE(5,be,4,me):me<0&&(pe?F.drawElements(5,4,pe.type,be<<(pe.type-5121>>1)):F.drawArrays(5,be,4)),M.dirty=!0,B.setVAO(null),P.next=m,O.framebufferWidth=g,O.framebufferHeight=v,O.viewportWidth=w,O.viewportHeight=x,k&&(t.cpuTime+=performance.now()-z),ue.unbind(),he.unbind()},scope:function(e,r,a){var o,l,c,d,F,W,E,H,B,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,oe,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we;o=n.call(this,O,e,a),l=P.getFramebuffer(o),c=P.next,P.next=l,d=O.framebufferWidth,O.framebufferWidth=l?l.width:O.drawingBufferWidth,F=O.framebufferHeight,O.framebufferHeight=l?l.height:O.drawingBufferHeight,W=O.framebufferWidth,E=O.framebufferHeight,H=O.viewportWidth,O.viewportWidth=W,B=O.viewportHeight,O.viewportHeight=E,N=se[0],se[0]=p,D=se[1],se[1]=b,V=se[2],se[2]=W,L=se[3],se[3]=E,R=O.framebufferWidth,q=O.framebufferHeight,G=ae[0],ae[0]=m,j=ae[1],ae[1]=g,U=ae[2],ae[2]=R,Y=ae[3],ae[3]=q,($=M.profile)&&(Z=performance.now(),t.count++),X=T.count,T.count=v,Q=T.primitive,T.primitive=_,J=h.call(this,O,e,a),K=I[y],I[y]=J,ee=u.call(this,O,e,a),te=I[w],I[w]=ee,ne=f.call(this,O,e,a),re=I[x],I[x]=ne,ie=s.call(this,O,e,a),oe=I[A],I[A]=ie,le=S.state,S.state=1,fe=S.x,S.x=0,ce=S.y,S.y=0,ue=S.z,S.z=0,de=S.w,S.w=0,he=S.buffer,S.buffer=i,pe=S.size,S.size=2,be=S.normalized,S.normalized=!1,me=S.type,S.type=5126,ge=S.offset,S.offset=0,ve=S.stride,S.stride=0,_e=S.divisor,S.divisor=0,ye=C.vert,C.vert=k,we=C.frag,C.frag=z,M.dirty=!0,r(O,e,a),P.next=c,O.framebufferWidth=d,O.framebufferHeight=F,O.viewportWidth=H,O.viewportHeight=B,se[0]=N,se[1]=D,se[2]=V,se[3]=L,ae[0]=G,ae[1]=j,ae[2]=U,ae[3]=Y,$&&(t.cpuTime+=performance.now()-Z),T.count=X,T.primitive=Q,I[y]=K,I[w]=te,I[x]=re,I[A]=oe,S.state=le,S.x=fe,S.y=ce,S.z=ue,S.w=de,S.buffer=he,S.size=pe,S.normalized=be,S.type=me,S.offset=ge,S.stride=ve,S.divisor=_e,C.vert=ye,C.frag=we,M.dirty=!0},batch:function(e,p){var b,m,g,v,_,y,w,x,A,S,k,z,C,I,ae,se,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe,Ge,je,Ue,Ye,$e,Ze,Xe,Qe,Je,Ke,et,tt,nt,rt,it,at,ot,st,lt,ft,ct,ut;(N.angle_instanced_arrays,b=n.call(this,O,e,0),m=P.getFramebuffer(b),g=P.next,P.next=m,v=O.framebufferWidth,O.framebufferWidth=m?m.width:O.drawingBufferWidth,_=O.framebufferHeight,O.framebufferHeight=m?m.height:O.drawingBufferHeight,m!==P.cur&&(m?F.bindFramebuffer(36160,m.framebuffer):F.bindFramebuffer(36160,null),P.cur=m),M.dirty)&&((fe=W.dither)!==M.dither&&(fe?F.enable(3024):F.disable(3024),M.dither=fe),(ce=W.blend_enable)!==M.blend_enable&&(ce?F.enable(3042):F.disable(3042),M.blend_enable=ce),ue=D[0],de=D[1],he=D[2],pe=D[3],ue===V[0]&&de===V[1]&&he===V[2]&&pe===V[3]||(F.blendColor(ue,de,he,pe),V[0]=ue,V[1]=de,V[2]=he,V[3]=pe),be=L[0],me=L[1],be===R[0]&&me===R[1]||(F.blendEquationSeparate(be,me),R[0]=be,R[1]=me),ge=q[0],ve=q[1],_e=q[2],ye=q[3],ge===G[0]&&ve===G[1]&&_e===G[2]&&ye===G[3]||(F.blendFuncSeparate(ge,ve,_e,ye),G[0]=ge,G[1]=ve,G[2]=_e,G[3]=ye),(we=W.depth_enable)!==M.depth_enable&&(we?F.enable(2929):F.disable(2929),M.depth_enable=we),(xe=W.depth_func)!==M.depth_func&&(F.depthFunc(xe),M.depth_func=xe),Ae=j[0],Se=j[1],Ae===U[0]&&Se===U[1]||(F.depthRange(Ae,Se),U[0]=Ae,U[1]=Se),(ke=W.depth_mask)!==M.depth_mask&&(F.depthMask(ke),M.depth_mask=ke),ze=Y[0],Fe=Y[1],Oe=Y[2],We=Y[3],ze===$[0]&&Fe===$[1]&&Oe===$[2]&&We===$[3]||(F.colorMask(ze,Fe,Oe,We),$[0]=ze,$[1]=Fe,$[2]=Oe,$[3]=We),(Me=W.cull_enable)!==M.cull_enable&&(Me?F.enable(2884):F.disable(2884),M.cull_enable=Me),(Te=W.cull_face)!==M.cull_face&&(F.cullFace(Te),M.cull_face=Te),(Ee=W.frontFace)!==M.frontFace&&(F.frontFace(Ee),M.frontFace=Ee),(Ce=W.lineWidth)!==M.lineWidth&&(F.lineWidth(Ce),M.lineWidth=Ce),(He=W.polygonOffset_enable)!==M.polygonOffset_enable&&(He?F.enable(32823):F.disable(32823),M.polygonOffset_enable=He),Be=Z[0],Ie=Z[1],Be===X[0]&&Ie===X[1]||(F.polygonOffset(Be,Ie),X[0]=Be,X[1]=Ie),(Pe=W.sample_alpha)!==M.sample_alpha&&(Pe?F.enable(32926):F.disable(32926),M.sample_alpha=Pe),(Ne=W.sample_enable)!==M.sample_enable&&(Ne?F.enable(32928):F.disable(32928),M.sample_enable=Ne),De=Q[0],Ve=Q[1],De===J[0]&&Ve===J[1]||(F.sampleCoverage(De,Ve),J[0]=De,J[1]=Ve),(Le=W.stencil_enable)!==M.stencil_enable&&(Le?F.enable(2960):F.disable(2960),M.stencil_enable=Le),(Re=W.stencil_mask)!==M.stencil_mask&&(F.stencilMask(Re),M.stencil_mask=Re),qe=K[0],Ge=K[1],je=K[2],qe===ee[0]&&Ge===ee[1]&&je===ee[2]||(F.stencilFunc(qe,Ge,je),ee[0]=qe,ee[1]=Ge,ee[2]=je),Ue=te[0],Ye=te[1],$e=te[2],Ze=te[3],Ue===ne[0]&&Ye===ne[1]&&$e===ne[2]&&Ze===ne[3]||(F.stencilOpSeparate(Ue,Ye,$e,Ze),ne[0]=Ue,ne[1]=Ye,ne[2]=$e,ne[3]=Ze),Xe=re[0],Qe=re[1],Je=re[2],Ke=re[3],Xe===ie[0]&&Qe===ie[1]&&Je===ie[2]&&Ke===ie[3]||(F.stencilOpSeparate(Xe,Qe,Je,Ke),ie[0]=Xe,ie[1]=Qe,ie[2]=Je,ie[3]=Ke),(et=W.scissor_enable)!==M.scissor_enable&&(et?F.enable(3089):F.disable(3089),M.scissor_enable=et));for(y=O.framebufferWidth,w=O.framebufferHeight,x=O.viewportWidth,O.viewportWidth=y,A=O.viewportHeight,O.viewportHeight=w,F.viewport(0,0,y,w),le[0]=0,le[1]=0,le[2]=y,le[3]=w,S=O.framebufferWidth,k=O.framebufferHeight,F.scissor(0,0,S,k),oe[0]=0,oe[1]=0,oe[2]=S,oe[3]=k,(z=M.profile)&&(C=performance.now(),t.count+=p),F.useProgram(r.program),I=N.angle_instanced_arrays,B.setVAO(null),tt=a.location,(nt=H[tt]).buffer||F.enableVertexAttribArray(tt),2,5126===nt.type&&2===nt.size&&nt.buffer===i&&!1===nt.normalized&&0===nt.offset&&0===nt.stride||(F.bindBuffer(34962,i.buffer),F.vertexAttribPointer(tt,2,5126,!1,0,0),nt.type=5126,nt.size=2,nt.buffer=i,nt.normalized=!1,nt.offset=0,nt.stride=0),0!==nt.divisor&&(I.vertexAttribDivisorANGLE(tt,0),nt.divisor=0),rt=s.call(this,O,se,ae),F.uniform1f(o.location,rt),it=f.call(this,O,se,ae),F.uniform1f(l.location,it),(at=u.call(this,O,se,ae))&&"framebuffer"===at._reglType&&(at=at.color[0]),ot=at._texture,F.uniform1i(c.location,ot.bind()),(st=h.call(this,O,se,ae))&&"framebuffer"===st._reglType&&(st=st.color[0]),lt=st._texture,F.uniform1i(d.location,lt.bind()),((ft=T.elements)||B.currentVAO&&(ft=E.getElements(B.currentVAO.elements)))&&F.bindBuffer(34963,ft.buffer.buffer),ct=T.offset,ut=T.instances,ae=0;ae<p;++ae)se=e[ae],ut>0?ft?I.drawElementsInstancedANGLE(5,4,ft.type,ct<<(ft.type-5121>>1),ut):I.drawArraysInstancedANGLE(5,ct,4,ut):ut<0&&(ft?F.drawElements(5,4,ft.type,ct<<(ft.type-5121>>1)):F.drawArrays(5,ct,4));ot.unbind(),lt.unbind(),M.dirty=!0,B.setVAO(null),P.next=g,O.framebufferWidth=v,O.framebufferHeight=_,O.viewportWidth=x,O.viewportHeight=A,z&&(t.cpuTime+=performance.now()-C)}}},"1596bccf6b7a59d3fe8f9b73749b6b4f7e0e856d9694b6958aec3c25433b26b6":function(e,t,n,r,i,a,o,s,l,f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S){var k,z,F,O,W,M,T,E,C;return k=e.gl,z=e.context,e.strings,F=e.next,O=e.current,W=e.draw,M=e.elements,e.buffer,e.shader,T=e.attributes,E=e.vao,e.uniforms,e.framebuffer,C=e.extensions,e.timer,e.isBufferArgs,F.blend_color,O.blend_color,F.blend_equation,O.blend_equation,F.blend_func,O.blend_func,F.depth_range,O.depth_range,F.colorMask,O.colorMask,F.polygonOffset_offset,O.polygonOffset_offset,F.sample_coverage,O.sample_coverage,F.stencil_func,O.stencil_func,F.stencil_opFront,O.stencil_opFront,F.stencil_opBack,O.stencil_opBack,F.scissor_box,O.scissor_box,F.viewport,O.viewport,{body:function(e){var F,O,H,B,I,P,N,D,V,L,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te;C.angle_instanced_arrays,F=C.angle_instanced_arrays,E.setVAO(null),O=n.location,(H=T[O]).buffer||k.enableVertexAttribArray(O),5126===H.type&&2===H.size&&H.buffer===t&&!1===H.normalized&&0===H.offset&&0===H.stride||(k.bindBuffer(34962,t.buffer),k.vertexAttribPointer(O,2,5126,!1,0,0),H.type=5126,H.size=2,H.buffer=t,H.normalized=!1,H.offset=0,H.stride=0),0!==H.divisor&&(F.vertexAttribDivisorANGLE(O,0),H.divisor=0),B=i.call(this,z,e,0),k.uniform1f(r.location,B),I=o.call(this,z,e,0),k.uniform1f(a.location,I),N=(P=l.call(this,z,e,0))[0],D=P[1],k.uniform2f(s.location,N,D),V=c.call(this,z,e,0),k.uniform1f(f.location,V),L=d.call(this,z,e,0),k.uniform1f(u.location,L),R=p.call(this,z,e,0),k.uniform1f(h.location,R),(q=m.call(this,z,e,0))&&"framebuffer"===q._reglType&&(q=q.color[0]),G=q._texture,k.uniform1i(b.location,G.bind()),(j=v.call(this,z,e,0))&&"framebuffer"===j._reglType&&(j=j.color[0]),U=j._texture,k.uniform1i(g.location,U.bind()),(Y=y.call(this,z,e,0))&&"framebuffer"===Y._reglType&&(Y=Y.color[0]),$=Y._texture,k.uniform1i(_.location,$.bind()),(Z=x.call(this,z,e,0))&&"framebuffer"===Z._reglType&&(Z=Z.color[0]),X=Z._texture,k.uniform1i(w.location,X.bind()),(Q=S.call(this,z,e,0))&&"framebuffer"===Q._reglType&&(Q=Q.color[0]),J=Q._texture,k.uniform1i(A.location,J.bind()),((K=W.elements)||E.currentVAO&&(K=M.getElements(E.currentVAO.elements)))&&k.bindBuffer(34963,K.buffer.buffer),ee=W.offset,(te=W.instances)>0?K?F.drawElementsInstancedANGLE(5,4,K.type,ee<<(K.type-5121>>1),te):F.drawArraysInstancedANGLE(5,ee,4,te):te<0&&(K?k.drawElements(5,4,K.type,ee<<(K.type-5121>>1)):k.drawArrays(5,ee,4)),G.unbind(),U.unbind(),$.unbind(),X.unbind(),J.unbind()}}},a05bf3c1b12ac6d06248a1605bddec766ce3c5beca448738b9fcb95625273f0b:function(e,t,n,r,i,a,o,s,l){var f,c,u,d,h,p,b,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M,T,E,C,H,B,I,P,N,D,V,L,R;return f=e.gl,c=e.context,e.strings,u=e.next,d=e.current,e.draw,e.elements,e.buffer,h=e.shader,e.attributes,p=e.vao,e.uniforms,b=e.framebuffer,m=e.extensions,e.timer,e.isBufferArgs,g=u.blend_color,v=d.blend_color,_=u.blend_equation,y=d.blend_equation,w=u.blend_func,x=d.blend_func,A=u.depth_range,S=d.depth_range,k=u.colorMask,z=d.colorMask,F=u.polygonOffset_offset,O=d.polygonOffset_offset,W=u.sample_coverage,M=d.sample_coverage,T=u.stencil_func,E=d.stencil_func,C=u.stencil_opFront,H=d.stencil_opFront,B=u.stencil_opBack,I=d.stencil_opBack,P=u.scissor_box,N=d.scissor_box,D=u.viewport,V=d.viewport,L={},R={},{draw:function(e){var i,a,o,s,l,P,D,R,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re;(m.angle_instanced_arrays,i=b.next,b.next=n,a=c.framebufferWidth,c.framebufferWidth=n.width,o=c.framebufferHeight,c.framebufferHeight=n.height,n!==b.cur&&(n?f.bindFramebuffer(36160,n.framebuffer):f.bindFramebuffer(36160,null),b.cur=n),d.dirty)&&((Q=u.dither)!==d.dither&&(Q?f.enable(3024):f.disable(3024),d.dither=Q),(J=u.blend_enable)!==d.blend_enable&&(J?f.enable(3042):f.disable(3042),d.blend_enable=J),K=g[0],ee=g[1],te=g[2],ne=g[3],K===v[0]&&ee===v[1]&&te===v[2]&&ne===v[3]||(f.blendColor(K,ee,te,ne),v[0]=K,v[1]=ee,v[2]=te,v[3]=ne),re=_[0],ie=_[1],re===y[0]&&ie===y[1]||(f.blendEquationSeparate(re,ie),y[0]=re,y[1]=ie),ae=w[0],oe=w[1],se=w[2],le=w[3],ae===x[0]&&oe===x[1]&&se===x[2]&&le===x[3]||(f.blendFuncSeparate(ae,oe,se,le),x[0]=ae,x[1]=oe,x[2]=se,x[3]=le),(fe=u.depth_enable)!==d.depth_enable&&(fe?f.enable(2929):f.disable(2929),d.depth_enable=fe),(ce=u.depth_func)!==d.depth_func&&(f.depthFunc(ce),d.depth_func=ce),ue=A[0],de=A[1],ue===S[0]&&de===S[1]||(f.depthRange(ue,de),S[0]=ue,S[1]=de),(he=u.depth_mask)!==d.depth_mask&&(f.depthMask(he),d.depth_mask=he),pe=k[0],be=k[1],me=k[2],ge=k[3],pe===z[0]&&be===z[1]&&me===z[2]&&ge===z[3]||(f.colorMask(pe,be,me,ge),z[0]=pe,z[1]=be,z[2]=me,z[3]=ge),(ve=u.cull_enable)!==d.cull_enable&&(ve?f.enable(2884):f.disable(2884),d.cull_enable=ve),(_e=u.cull_face)!==d.cull_face&&(f.cullFace(_e),d.cull_face=_e),(ye=u.frontFace)!==d.frontFace&&(f.frontFace(ye),d.frontFace=ye),(we=u.lineWidth)!==d.lineWidth&&(f.lineWidth(we),d.lineWidth=we),(xe=u.polygonOffset_enable)!==d.polygonOffset_enable&&(xe?f.enable(32823):f.disable(32823),d.polygonOffset_enable=xe),Ae=F[0],Se=F[1],Ae===O[0]&&Se===O[1]||(f.polygonOffset(Ae,Se),O[0]=Ae,O[1]=Se),(ke=u.sample_alpha)!==d.sample_alpha&&(ke?f.enable(32926):f.disable(32926),d.sample_alpha=ke),(ze=u.sample_enable)!==d.sample_enable&&(ze?f.enable(32928):f.disable(32928),d.sample_enable=ze),Fe=W[0],Oe=W[1],Fe===M[0]&&Oe===M[1]||(f.sampleCoverage(Fe,Oe),M[0]=Fe,M[1]=Oe),(We=u.stencil_enable)!==d.stencil_enable&&(We?f.enable(2960):f.disable(2960),d.stencil_enable=We),(Me=u.stencil_mask)!==d.stencil_mask&&(f.stencilMask(Me),d.stencil_mask=Me),Te=T[0],Ee=T[1],Ce=T[2],Te===E[0]&&Ee===E[1]&&Ce===E[2]||(f.stencilFunc(Te,Ee,Ce),E[0]=Te,E[1]=Ee,E[2]=Ce),He=C[0],Be=C[1],Ie=C[2],Pe=C[3],He===H[0]&&Be===H[1]&&Ie===H[2]&&Pe===H[3]||(f.stencilOpSeparate(He,Be,Ie,Pe),H[0]=He,H[1]=Be,H[2]=Ie,H[3]=Pe),Ne=B[0],De=B[1],Ve=B[2],Le=B[3],Ne===I[0]&&De===I[1]&&Ve===I[2]&&Le===I[3]||(f.stencilOpSeparate(Ne,De,Ve,Le),I[0]=Ne,I[1]=De,I[2]=Ve,I[3]=Le),(Re=u.scissor_enable)!==d.scissor_enable&&(Re?f.enable(3089):f.disable(3089),d.scissor_enable=Re));s=c.framebufferWidth,l=c.framebufferHeight,P=c.viewportWidth,c.viewportWidth=s,D=c.viewportHeight,c.viewportHeight=l,f.viewport(0,0,s,l),V[0]=0,V[1]=0,V[2]=s,V[3]=l,R=c.framebufferWidth,q=c.framebufferHeight,f.scissor(0,0,R,q),N[0]=0,N[1]=0,N[2]=R,N[3]=q,(G=d.profile)&&(j=performance.now(),t.count++),U=h.frag,Y=h.vert,$=h.program(Y,U),f.useProgram($.program),p.setVAO(null),Z=$.id,(X=L[Z])?X.call(this,e):(X=L[Z]=r($)).call(this,e),d.dirty=!0,p.setVAO(null),b.next=i,c.framebufferWidth=a,c.framebufferHeight=o,c.viewportWidth=P,c.viewportHeight=D,G&&(t.cpuTime+=performance.now()-j)},scope:function(e,r,l){var f,u,h,p,m,g,v,_,y,w,x,A,S,k,z,F,O,W,M;f=b.next,b.next=n,u=c.framebufferWidth,c.framebufferWidth=n.width,h=c.framebufferHeight,c.framebufferHeight=n.height,p=c.framebufferWidth,m=c.framebufferHeight,g=c.viewportWidth,c.viewportWidth=p,v=c.viewportHeight,c.viewportHeight=m,_=D[0],D[0]=i,y=D[1],D[1]=a,w=D[2],D[2]=p,x=D[3],D[3]=m,A=c.framebufferWidth,S=c.framebufferHeight,k=P[0],P[0]=o,z=P[1],P[1]=s,F=P[2],P[2]=A,O=P[3],P[3]=S,(W=d.profile)&&(M=performance.now(),t.count++),d.dirty=!0,r(c,e,l),b.next=f,c.framebufferWidth=u,c.framebufferHeight=h,c.viewportWidth=g,c.viewportHeight=v,D[0]=_,D[1]=y,D[2]=w,D[3]=x,P[0]=k,P[1]=z,P[2]=F,P[3]=O,W&&(t.cpuTime+=performance.now()-M),d.dirty=!0},batch:function(e,r){var i,a,o,s,P,D,L,q,G,j,U,Y,$,Z,X,Q,J,K,ee,te,ne,re,ie,ae,oe,se,le,fe,ce,ue,de,he,pe,be,me,ge,ve,_e,ye,we,xe,Ae,Se,ke,ze,Fe,Oe,We,Me,Te,Ee,Ce,He,Be,Ie,Pe,Ne,De,Ve,Le,Re,qe;(m.angle_instanced_arrays,i=b.next,b.next=n,a=c.framebufferWidth,c.framebufferWidth=n.width,o=c.framebufferHeight,c.framebufferHeight=n.height,n!==b.cur&&(n?f.bindFramebuffer(36160,n.framebuffer):f.bindFramebuffer(36160,null),b.cur=n),d.dirty)&&((J=u.dither)!==d.dither&&(J?f.enable(3024):f.disable(3024),d.dither=J),(K=u.blend_enable)!==d.blend_enable&&(K?f.enable(3042):f.disable(3042),d.blend_enable=K),ee=g[0],te=g[1],ne=g[2],re=g[3],ee===v[0]&&te===v[1]&&ne===v[2]&&re===v[3]||(f.blendColor(ee,te,ne,re),v[0]=ee,v[1]=te,v[2]=ne,v[3]=re),ie=_[0],ae=_[1],ie===y[0]&&ae===y[1]||(f.blendEquationSeparate(ie,ae),y[0]=ie,y[1]=ae),oe=w[0],se=w[1],le=w[2],fe=w[3],oe===x[0]&&se===x[1]&&le===x[2]&&fe===x[3]||(f.blendFuncSeparate(oe,se,le,fe),x[0]=oe,x[1]=se,x[2]=le,x[3]=fe),(ce=u.depth_enable)!==d.depth_enable&&(ce?f.enable(2929):f.disable(2929),d.depth_enable=ce),(ue=u.depth_func)!==d.depth_func&&(f.depthFunc(ue),d.depth_func=ue),de=A[0],he=A[1],de===S[0]&&he===S[1]||(f.depthRange(de,he),S[0]=de,S[1]=he),(pe=u.depth_mask)!==d.depth_mask&&(f.depthMask(pe),d.depth_mask=pe),be=k[0],me=k[1],ge=k[2],ve=k[3],be===z[0]&&me===z[1]&&ge===z[2]&&ve===z[3]||(f.colorMask(be,me,ge,ve),z[0]=be,z[1]=me,z[2]=ge,z[3]=ve),(_e=u.cull_enable)!==d.cull_enable&&(_e?f.enable(2884):f.disable(2884),d.cull_enable=_e),(ye=u.cull_face)!==d.cull_face&&(f.cullFace(ye),d.cull_face=ye),(we=u.frontFace)!==d.frontFace&&(f.frontFace(we),d.frontFace=we),(xe=u.lineWidth)!==d.lineWidth&&(f.lineWidth(xe),d.lineWidth=xe),(Ae=u.polygonOffset_enable)!==d.polygonOffset_enable&&(Ae?f.enable(32823):f.disable(32823),d.polygonOffset_enable=Ae),Se=F[0],ke=F[1],Se===O[0]&&ke===O[1]||(f.polygonOffset(Se,ke),O[0]=Se,O[1]=ke),(ze=u.sample_alpha)!==d.sample_alpha&&(ze?f.enable(32926):f.disable(32926),d.sample_alpha=ze),(Fe=u.sample_enable)!==d.sample_enable&&(Fe?f.enable(32928):f.disable(32928),d.sample_enable=Fe),Oe=W[0],We=W[1],Oe===M[0]&&We===M[1]||(f.sampleCoverage(Oe,We),M[0]=Oe,M[1]=We),(Me=u.stencil_enable)!==d.stencil_enable&&(Me?f.enable(2960):f.disable(2960),d.stencil_enable=Me),(Te=u.stencil_mask)!==d.stencil_mask&&(f.stencilMask(Te),d.stencil_mask=Te),Ee=T[0],Ce=T[1],He=T[2],Ee===E[0]&&Ce===E[1]&&He===E[2]||(f.stencilFunc(Ee,Ce,He),E[0]=Ee,E[1]=Ce,E[2]=He),Be=C[0],Ie=C[1],Pe=C[2],Ne=C[3],Be===H[0]&&Ie===H[1]&&Pe===H[2]&&Ne===H[3]||(f.stencilOpSeparate(Be,Ie,Pe,Ne),H[0]=Be,H[1]=Ie,H[2]=Pe,H[3]=Ne),De=B[0],Ve=B[1],Le=B[2],Re=B[3],De===I[0]&&Ve===I[1]&&Le===I[2]&&Re===I[3]||(f.stencilOpSeparate(De,Ve,Le,Re),I[0]=De,I[1]=Ve,I[2]=Le,I[3]=Re),(qe=u.scissor_enable)!==d.scissor_enable&&(qe?f.enable(3089):f.disable(3089),d.scissor_enable=qe));s=c.framebufferWidth,P=c.framebufferHeight,D=c.viewportWidth,c.viewportWidth=s,L=c.viewportHeight,c.viewportHeight=P,f.viewport(0,0,s,P),V[0]=0,V[1]=0,V[2]=s,V[3]=P,q=c.framebufferWidth,G=c.framebufferHeight,f.scissor(0,0,q,G),N[0]=0,N[1]=0,N[2]=q,N[3]=G,(j=d.profile)&&(U=performance.now(),t.count+=r),Y=h.frag,$=h.vert,Z=h.program($,Y),f.useProgram(Z.program),p.setVAO(null),X=Z.id,(Q=R[X])?Q.call(this,e,r):(Q=R[X]=l(Z)).call(this,e,r),d.dirty=!0,p.setVAO(null),b.next=i,c.framebufferWidth=a,c.framebufferHeight=o,c.viewportWidth=D,c.viewportHeight=L,j&&(t.cpuTime+=performance.now()-U)}}}};e.Graph=class{constructor(e,t){var n,r;this.config=new Sr,this.graph=new jr,this.requestAnimationFrameId=0,this.isRightClickMouse=!1,this.store=new Ms,this.zoomInstance=new tf(this.store,this.config),this.hasParticleSystemDestroyed=!1,this._findHoveredPointExecutionCount=0,this._isMouseOnCanvas=!1,this._isFirstDataAfterInit=!0,t&&this.config.init(t);const i=e.clientWidth,a=e.clientHeight;e.width=i*this.config.pixelRatio,e.height=a*this.config.pixelRatio,""===e.style.width&&""===e.style.height&&he(e).style("width","100%").style("height","100%"),this.canvas=e,this.canvasD3Selection=he(e),this.canvasD3Selection.on("mouseenter.cosmos",(()=>{this._isMouseOnCanvas=!0})).on("mouseleave.cosmos",(()=>{this._isMouseOnCanvas=!1})),this.zoomInstance.behavior.on("start.detect",(e=>{this.currentEvent=e})).on("zoom.detect",(e=>{!!e.sourceEvent&&this.updateMousePosition(e.sourceEvent),this.currentEvent=e})).on("end.detect",(e=>{this.currentEvent=e})),this.canvasD3Selection.call(this.zoomInstance.behavior).on("click",this.onClick.bind(this)).on("mousemove",this.onMouseMove.bind(this)).on("contextmenu",this.onRightClickMouse.bind(this)),this.config.disableZoom&&this.disableZoom(),this.setZoomLevel(null!==(n=this.config.initialZoomLevel)&&void 0!==n?n:1),this.reglInstance=hr({canvas:this.canvas,attributes:{antialias:!1,preserveDrawingBuffer:!0},extensions:["OES_texture_float","ANGLE_instanced_arrays"],cachedCode:nf}),this.store.maxPointSize=(null!==(r=this.reglInstance.limits.pointSizeDims[1])&&void 0!==r?r:64)/this.config.pixelRatio,this.store.adjustSpaceSize(this.config.spaceSize,this.reglInstance.limits.maxTextureSize),this.store.updateScreenSize(i,a),this.points=new Go(this.reglInstance,this.config,this.store,this.graph),this.lines=new Ro(this.reglInstance,this.config,this.store,this.graph,this.points),this.config.disableSimulation||(this.forceGravity=new Hr(this.reglInstance,this.config,this.store,this.graph,this.points),this.forceCenter=new Er(this.reglInstance,this.config,this.store,this.graph,this.points),this.forceManyBody=this.config.useQuadtree?new Vr(this.reglInstance,this.config,this.store,this.graph,this.points):new Nr(this.reglInstance,this.config,this.store,this.graph,this.points),this.forceLinkIncoming=new Br(this.reglInstance,this.config,this.store,this.graph,this.points),this.forceLinkOutgoing=new Br(this.reglInstance,this.config,this.store,this.graph,this.points),this.forceMouse=new Lr(this.reglInstance,this.config,this.store,this.graph,this.points)),this.store.backgroundColor=xr(this.config.backgroundColor),this.config.highlightedNodeRingColor?(this.store.setHoveredNodeRingColor(this.config.highlightedNodeRingColor),this.store.setFocusedNodeRingColor(this.config.highlightedNodeRingColor)):(this.config.hoveredNodeRingColor&&this.store.setHoveredNodeRingColor(this.config.hoveredNodeRingColor),this.config.focusedNodeRingColor&&this.store.setFocusedNodeRingColor(this.config.focusedNodeRingColor)),this.config.showFPSMonitor&&(this.fpsMonitor=new Gr(this.canvas)),void 0!==this.config.randomSeed&&this.store.addRandomSeed(this.config.randomSeed)}get progress(){return this.store.simulationProgress}get isSimulationRunning(){return this.store.isSimulationRunning}get maxPointSize(){return this.store.maxPointSize}setConfig(e){var t,n;const r={...this.config};this.config.init(e),r.linkColor!==this.config.linkColor&&this.lines.updateColor(),r.nodeColor!==this.config.nodeColor&&this.points.updateColor(),r.nodeSize!==this.config.nodeSize&&this.points.updateSize(),r.linkWidth!==this.config.linkWidth&&this.lines.updateWidth(),r.linkArrows!==this.config.linkArrows&&this.lines.updateArrow(),r.curvedLinkSegments===this.config.curvedLinkSegments&&r.curvedLinks===this.config.curvedLinks||this.lines.updateCurveLineGeometry(),r.backgroundColor!==this.config.backgroundColor&&(this.store.backgroundColor=xr(this.config.backgroundColor)),r.highlightedNodeRingColor!==this.config.highlightedNodeRingColor&&(this.store.setHoveredNodeRingColor(this.config.highlightedNodeRingColor),this.store.setFocusedNodeRingColor(this.config.highlightedNodeRingColor)),r.hoveredNodeRingColor!==this.config.hoveredNodeRingColor&&this.store.setHoveredNodeRingColor(this.config.hoveredNodeRingColor),r.focusedNodeRingColor!==this.config.focusedNodeRingColor&&this.store.setFocusedNodeRingColor(this.config.focusedNodeRingColor),r.spaceSize===this.config.spaceSize&&r.simulation.repulsionQuadtreeLevels===this.config.simulation.repulsionQuadtreeLevels||(this.store.adjustSpaceSize(this.config.spaceSize,this.reglInstance.limits.maxTextureSize),this.resizeCanvas(!0),this.update(this.store.isSimulationRunning)),r.showFPSMonitor!==this.config.showFPSMonitor&&(this.config.showFPSMonitor?this.fpsMonitor=new Gr(this.canvas):(null===(t=this.fpsMonitor)||void 0===t||t.destroy(),this.fpsMonitor=void 0)),r.pixelRatio!==this.config.pixelRatio&&(this.store.maxPointSize=(null!==(n=this.reglInstance.limits.pointSizeDims[1])&&void 0!==n?n:64)/this.config.pixelRatio),r.disableZoom!==this.config.disableZoom&&(this.config.disableZoom?this.disableZoom():this.enableZoom())}setData(e,t,n=!0){const{fitViewOnInit:r,fitViewDelay:i,fitViewByNodesInRect:a,initialZoomLevel:o}=this.config;if(!e.length&&!t.length)return this.destroyParticleSystem(),void this.reglInstance.clear({color:this.store.backgroundColor,depth:1,stencil:0});this.graph.setData(e,t),this._isFirstDataAfterInit&&r&&void 0===o&&(this._fitViewOnInitTimeoutID=window.setTimeout((()=>{a?this.setZoomTransformByNodePositions(a,void 0,void 0,0):this.fitView()}),i)),this._isFirstDataAfterInit=!1,this.update(n)}zoomToNodeById(e,t=700,n=3,r=!0){const i=this.graph.getNodeById(e);i&&this.zoomToNode(i,t,n,r)}zoomToNodeByIndex(e,t=700,n=3,r=!0){const i=this.graph.getNodeByIndex(e);i&&this.zoomToNode(i,t,n,r)}zoom(e,t=0){this.setZoomLevel(e,t)}setZoomLevel(e,t=0){0===t?this.canvasD3Selection.call(this.zoomInstance.behavior.scaleTo,e):this.canvasD3Selection.transition().duration(t).call(this.zoomInstance.behavior.scaleTo,e)}getZoomLevel(){return this.zoomInstance.eventTransform.k}getNodePositions(){if(this.hasParticleSystemDestroyed)return{};const e=Ar(this.reglInstance,this.points.currentPositionFbo);return this.graph.nodes.reduce(((t,n)=>{const r=this.graph.getSortedIndexById(n.id),i=e[4*r+0],a=e[4*r+1];return void 0!==i&&void 0!==a&&(t[n.id]={x:i,y:a}),t}),{})}getNodePositionsMap(){const e=new Map;if(this.hasParticleSystemDestroyed)return e;const t=Ar(this.reglInstance,this.points.currentPositionFbo);return this.graph.nodes.reduce(((e,n)=>{const r=this.graph.getSortedIndexById(n.id),i=t[4*r+0],a=t[4*r+1];return void 0!==i&&void 0!==a&&e.set(n.id,[i,a]),e}),e)}getNodePositionsArray(){const e=[];if(this.hasParticleSystemDestroyed)return[];const t=Ar(this.reglInstance,this.points.currentPositionFbo);e.length=this.graph.nodes.length;for(let n=0;n<this.graph.nodes.length;n+=1){const r=this.graph.getSortedIndexByInputIndex(n),i=t[4*r+0],a=t[4*r+1];void 0!==i&&void 0!==a&&(e[n]=[i,a])}return e}fitView(e=250,t=.1){this.setZoomTransformByNodePositions(this.getNodePositionsArray(),e,void 0,t)}fitViewByNodeIds(e,t=250,n=.1){const r=this.getNodePositionsMap(),i=e.map((e=>r.get(e))).filter((e=>void 0!==e));this.setZoomTransformByNodePositions(i,t,void 0,n)}selectNodesInRange(e){if(e){const t=this.store.screenSize[1];this.store.selectedArea=[[e[0][0],t-e[1][1]],[e[1][0],t-e[0][1]]],this.points.findPointsOnAreaSelection();const n=Ar(this.reglInstance,this.points.selectedFbo);this.store.selectedIndices=n.map(((e,t)=>t%4==0&&0!==e?t/4:-1)).filter((e=>-1!==e))}else this.store.selectedIndices=null;this.points.updateGreyoutStatus()}selectNodeById(e,t=!1){var n;if(t){const t=null!==(n=this.graph.getAdjacentNodes(e))&&void 0!==n?n:[];this.selectNodesByIds([e,...t.map((e=>e.id))])}else this.selectNodesByIds([e])}selectNodeByIndex(e,t=!1){const n=this.graph.getNodeByIndex(e);n&&this.selectNodeById(n.id,t)}selectNodesByIds(e){this.selectNodesByIndices(null==e?void 0:e.map((e=>this.graph.getSortedIndexById(e))))}selectNodesByIndices(e){e?0===e.length?this.store.selectedIndices=new Float32Array:this.store.selectedIndices=new Float32Array(e.filter((e=>void 0!==e))):this.store.selectedIndices=null,this.points.updateGreyoutStatus()}unselectNodes(){this.store.selectedIndices=null,this.points.updateGreyoutStatus()}getSelectedNodes(){const{selectedIndices:e}=this.store;if(!e)return null;const t=new Array(e.length);for(const[n,r]of e.entries())if(void 0!==r){const e=this.graph.getInputIndexBySortedIndex(r);void 0!==e&&(t[n]=this.graph.nodes[e])}return t}getAdjacentNodes(e){return this.graph.getAdjacentNodes(e)}setFocusedNodeById(e){void 0===e?this.store.setFocusedNode():this.store.setFocusedNode(this.graph.getNodeById(e),this.graph.getSortedIndexById(e))}setFocusedNodeByIndex(e){void 0===e?this.store.setFocusedNode():this.store.setFocusedNode(this.graph.getNodeByIndex(e),e)}spaceToScreenPosition(e){return this.zoomInstance.convertSpaceToScreenPosition(e)}spaceToScreenRadius(e){return this.zoomInstance.convertSpaceToScreenRadius(e)}getNodeRadiusByIndex(e){return this.points.getNodeRadiusByIndex(e)}getNodeRadiusById(e){const t=this.graph.getInputIndexById(e);if(void 0!==t)return this.points.getNodeRadiusByIndex(t)}trackNodePositionsByIds(e){this.points.trackNodesByIds(e)}trackNodePositionsByIndices(e){this.points.trackNodesByIds(e.map((e=>this.graph.getNodeByIndex(e))).filter((e=>void 0!==e)).map((e=>e.id)))}getTrackedNodePositionsMap(){return this.points.getTrackedPositions()}getSampledNodePositionsMap(){return this.points.getSampledNodePositionsMap()}start(e=1){var t,n;this.graph.nodes.length&&(this.store.isSimulationRunning=!0,this.store.alpha=e,this.store.simulationProgress=0,null===(n=(t=this.config.simulation).onStart)||void 0===n||n.call(t),this.stopFrames(),this.frame())}pause(){var e,t;this.store.isSimulationRunning=!1,null===(t=(e=this.config.simulation).onPause)||void 0===t||t.call(e)}restart(){var e,t;this.store.isSimulationRunning=!0,null===(t=(e=this.config.simulation).onRestart)||void 0===t||t.call(e)}step(){this.store.isSimulationRunning=!1,this.stopFrames(),this.frame()}destroy(){var e,t;window.clearTimeout(this._fitViewOnInitTimeoutID),this.stopFrames(),this.destroyParticleSystem(),null===(e=this.fpsMonitor)||void 0===e||e.destroy(),null===(t=document.getElementById("gl-bench-style"))||void 0===t||t.remove()}create(){var e,t,n,r;this.points.create(),this.lines.create(),null===(e=this.forceManyBody)||void 0===e||e.create(),null===(t=this.forceLinkIncoming)||void 0===t||t.create(Cr.INCOMING),null===(n=this.forceLinkOutgoing)||void 0===n||n.create(Cr.OUTGOING),null===(r=this.forceCenter)||void 0===r||r.create(),this.hasParticleSystemDestroyed=!1}destroyParticleSystem(){var e,t,n,r;this.hasParticleSystemDestroyed||(this.points.destroy(),this.lines.destroy(),null===(e=this.forceCenter)||void 0===e||e.destroy(),null===(t=this.forceLinkIncoming)||void 0===t||t.destroy(),null===(n=this.forceLinkOutgoing)||void 0===n||n.destroy(),null===(r=this.forceManyBody)||void 0===r||r.destroy(),this.reglInstance.destroy(),this.hasParticleSystemDestroyed=!0)}update(e){const{graph:t}=this;this.store.pointsTextureSize=Math.ceil(Math.sqrt(t.nodes.length)),this.store.linksTextureSize=Math.ceil(Math.sqrt(2*t.linksNumber)),this.destroyParticleSystem(),this.create(),this.initPrograms(),this.setFocusedNodeById(),this.store.hoveredNode=void 0,e?this.start():this.step()}initPrograms(){var e,t,n,r,i,a;this.points.initPrograms(),this.lines.initPrograms(),null===(e=this.forceGravity)||void 0===e||e.initPrograms(),null===(t=this.forceLinkIncoming)||void 0===t||t.initPrograms(),null===(n=this.forceLinkOutgoing)||void 0===n||n.initPrograms(),null===(r=this.forceMouse)||void 0===r||r.initPrograms(),null===(i=this.forceManyBody)||void 0===i||i.initPrograms(),null===(a=this.forceCenter)||void 0===a||a.initPrograms()}frame(){const{config:{simulation:e,renderLinks:t,disableSimulation:n},store:{alpha:r,isSimulationRunning:i}}=this;r<Ws&&i&&this.end(),this.store.pointsTextureSize&&(this.requestAnimationFrameId=window.requestAnimationFrame((r=>{var a,o,s,l,f,c,u,d,h,p,b,m,g;null===(a=this.fpsMonitor)||void 0===a||a.begin(),this.resizeCanvas(),this.findHoveredPoint(),n||(this.isRightClickMouse&&(i||this.start(.1),null===(o=this.forceMouse)||void 0===o||o.run(),this.points.updatePosition()),i&&!this.zoomInstance.isRunning&&(e.gravity&&(null===(s=this.forceGravity)||void 0===s||s.run(),this.points.updatePosition()),e.center&&(null===(l=this.forceCenter)||void 0===l||l.run(),this.points.updatePosition()),null===(f=this.forceManyBody)||void 0===f||f.run(),this.points.updatePosition(),this.store.linksTextureSize&&(null===(c=this.forceLinkIncoming)||void 0===c||c.run(),this.points.updatePosition(),null===(u=this.forceLinkOutgoing)||void 0===u||u.run(),this.points.updatePosition()),this.store.alpha+=this.store.addAlpha(null!==(d=this.config.simulation.decay)&&void 0!==d?d:gr.simulation.decay),this.isRightClickMouse&&(this.store.alpha=Math.max(this.store.alpha,.1)),this.store.simulationProgress=Math.sqrt(Math.min(1,Ws/this.store.alpha)),null===(p=(h=this.config.simulation).onTick)||void 0===p||p.call(h,this.store.alpha,null===(b=this.store.hoveredNode)||void 0===b?void 0:b.node,this.store.hoveredNode?this.graph.getInputIndexBySortedIndex(this.store.hoveredNode.index):void 0,null===(m=this.store.hoveredNode)||void 0===m?void 0:m.position)),this.points.trackPoints()),this.reglInstance.clear({color:this.store.backgroundColor,depth:1,stencil:0}),t&&this.store.linksTextureSize&&this.lines.draw(),this.points.draw(),null===(g=this.fpsMonitor)||void 0===g||g.end(r),this.currentEvent=void 0,this.frame()})))}stopFrames(){this.requestAnimationFrameId&&window.cancelAnimationFrame(this.requestAnimationFrameId)}end(){var e,t;this.store.isSimulationRunning=!1,this.store.simulationProgress=1,null===(t=(e=this.config.simulation).onEnd)||void 0===t||t.call(e)}onClick(e){var t,n,r,i;null===(n=(t=this.config.events).onClick)||void 0===n||n.call(t,null===(r=this.store.hoveredNode)||void 0===r?void 0:r.node,this.store.hoveredNode?this.graph.getInputIndexBySortedIndex(this.store.hoveredNode.index):void 0,null===(i=this.store.hoveredNode)||void 0===i?void 0:i.position,e)}updateMousePosition(e){if(!e||void 0===e.offsetX||void 0===e.offsetY)return;const t=e.offsetX,n=e.offsetY;this.store.mousePosition=this.zoomInstance.convertScreenToSpacePosition([t,n]),this.store.screenMousePosition=[t,this.store.screenSize[1]-n]}onMouseMove(e){var t,n,r,i;this.currentEvent=e,this.updateMousePosition(e),this.isRightClickMouse=3===e.which,null===(n=(t=this.config.events).onMouseMove)||void 0===n||n.call(t,null===(r=this.store.hoveredNode)||void 0===r?void 0:r.node,this.store.hoveredNode?this.graph.getInputIndexBySortedIndex(this.store.hoveredNode.index):void 0,null===(i=this.store.hoveredNode)||void 0===i?void 0:i.position,this.currentEvent)}onRightClickMouse(e){e.preventDefault()}resizeCanvas(e=!1){const t=this.canvas.width,n=this.canvas.height,r=this.canvas.clientWidth,i=this.canvas.clientHeight;if(e||t!==r*this.config.pixelRatio||n!==i*this.config.pixelRatio){const[e,t]=this.store.screenSize,{k:n}=this.zoomInstance.eventTransform,a=this.zoomInstance.convertScreenToSpacePosition([e/2,t/2]);this.store.updateScreenSize(r,i),this.canvas.width=r*this.config.pixelRatio,this.canvas.height=i*this.config.pixelRatio,this.reglInstance.poll(),this.canvasD3Selection.call(this.zoomInstance.behavior.transform,this.zoomInstance.getTransform([a],n)),this.points.updateSampledNodesGrid()}}setZoomTransformByNodePositions(e,t=250,n,r){this.resizeCanvas();const i=this.zoomInstance.getTransform(e,n,r);this.canvasD3Selection.transition().ease(ar).duration(t).call(this.zoomInstance.behavior.transform,i)}zoomToNode(e,t,n,r){const{graph:i,store:{screenSize:a}}=this,o=Ar(this.reglInstance,this.points.currentPositionFbo),s=i.getSortedIndexById(e.id);if(void 0===s)return;const l=o[4*s+0],f=o[4*s+1];if(void 0===l||void 0===f)return;const c=this.zoomInstance.getDistanceToPoint([l,f]),u=r?n:Math.max(this.getZoomLevel(),n);if(c<Math.min(a[0],a[1]))this.setZoomTransformByNodePositions([[l,f]],t,u);else{const e=this.zoomInstance.getTransform([[l,f]],u),n=this.zoomInstance.getMiddlePointTransform([l,f]);this.canvasD3Selection.transition().ease(rr).duration(t/2).call(this.zoomInstance.behavior.transform,n).transition().ease(ir).duration(t/2).call(this.zoomInstance.behavior.transform,e)}}disableZoom(){this.canvasD3Selection.call(this.zoomInstance.behavior).on("wheel.zoom",null)}enableZoom(){this.canvasD3Selection.call(this.zoomInstance.behavior)}findHoveredPoint(){var e,t,n,r,i;if(!this._isMouseOnCanvas)return;if(this._findHoveredPointExecutionCount<2)return void(this._findHoveredPointExecutionCount+=1);this._findHoveredPointExecutionCount=0,this.points.findHoveredPoint();let a=!1,o=!1;const s=Ar(this.reglInstance,this.points.hoveredFbo);if(s[1]){const t=s[0],n=this.graph.getInputIndexBySortedIndex(t),r=void 0!==n?this.graph.getNodeByIndex(n):void 0;(null===(e=this.store.hoveredNode)||void 0===e?void 0:e.node)!==r&&(a=!0);const i=s[2],o=s[3];this.store.hoveredNode=r&&{node:r,index:t,position:[i,o]}}else this.store.hoveredNode&&(o=!0),this.store.hoveredNode=void 0;a&&this.store.hoveredNode&&(null===(n=(t=this.config.events).onNodeMouseOver)||void 0===n||n.call(t,this.store.hoveredNode.node,this.graph.getInputIndexBySortedIndex(this.graph.getSortedIndexById(this.store.hoveredNode.node.id)),this.store.hoveredNode.position,this.currentEvent)),o&&(null===(i=(r=this.config.events).onNodeMouseOut)||void 0===i||i.call(r,this.currentEvent))}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.min.js.map
